<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AugmentWebviewStateStore">
    <option name="stateMap">
      <map>
        <entry key="CHAT_STATE" value="eyJjdXJyZW50Q29udmVyc2F0aW9uSWQiOiJjYmU1MmJmNi00ZTFlLTQ1MWMtODZiZS01M2E4OTI4YjJiMjMiLCJjb252ZXJzYXRpb25zIjp7IjQxMDBiMzNiLWQ3ZjEtNGVkNi04NjMyLWYwYmRmYTkyN2Q0MiI6eyJpZCI6IjQxMDBiMzNiLWQ3ZjEtNGVkNi04NjMyLWYwYmRmYTkyN2Q0MiIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMjlUMTA6MDg6MDMuODk2WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTI5VDEwOjI1OjQwLjE4NVoiLCJjaGF0SGlzdG9yeSI6W3sic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3YjE4ZThlNC1lNmYwLTQzM2ItOGQzOC0yYzM1YWUxYjIxZDYiLCJyZXF1ZXN0X21lc3NhZ2UiOiJjcmVhdGUgYSBtYWluIGNsYXNzIGZvciB0aGlzIGFwcCA6XG5Sw6lhbGlzZXIgdW5lIGFwcGxpY2F0aW9uIEphdmFGWCBwZXJtZXR0YW50IGRlIHPDqWxlY3Rpb25uZXIgZXQgZGVzc2luZXIgZGVzIGZvcm1lc1xyXG5nw6lvbcOpdHJpcXVlcyAocmVjdGFuZ2xlLCBjZXJjbGUsIGxpZ25lLCBldGMuKSBzdXIgdW5lIHpvbmUgZGUgZGVzc2luLlxyXG5M4oCZYXJjaGl0ZWN0dXJlIGRlIGzigJlhcHBsaWNhdGlvbiBkb2l0IHPigJlhcHB1eWVyIHN1ciBkZXMgZGVzaWduIHBhdHRlcm5zIHBvdXIgdW5lIG1laWxsZXVyZVxyXG5tb2R1bGFyaXTDqSwgZXh0ZW5zaWJpbGl0w6kgZXQgbWFpbnRlbmFuY2UgZHUgY29kZS5cclxuTGVzIHByaW5jaXBhbGVzIGZvbmN0aW9ubmFsaXTDqXMgc29udCBsZXMgc3VpdmFudGVzIDpcclxu4oCiIFPDqWxlY3Rpb25uZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgw6AgcGFydGlyIGTigJl1bmUgcGFsZXR0ZVxyXG7igKIgRGVzc2luZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgZGFucyBsYSB6b25lIGRlIGRlc3NpbiAoc2Vsb24gbGUgdHlwZSBzw6lsZWN0aW9ubsOpKSIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJjcmVhdGUgYSBtYWluIGNsYXNzIGZvciB0aGlzIGFwcCA6In0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJSw6lhbGlzZXIgdW5lIGFwcGxpY2F0aW9uIEphdmFGWCBwZXJtZXR0YW50IGRlIHPDqWxlY3Rpb25uZXIgZXQgZGVzc2luZXIgZGVzIGZvcm1lc1xyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJnw6lvbcOpdHJpcXVlcyAocmVjdGFuZ2xlLCBjZXJjbGUsIGxpZ25lLCBldGMuKSBzdXIgdW5lIHpvbmUgZGUgZGVzc2luLlxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJM4oCZYXJjaGl0ZWN0dXJlIGRlIGzigJlhcHBsaWNhdGlvbiBkb2l0IHPigJlhcHB1eWVyIHN1ciBkZXMgZGVzaWduIHBhdHRlcm5zIHBvdXIgdW5lIG1laWxsZXVyZVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJtb2R1bGFyaXTDqSwgZXh0ZW5zaWJpbGl0w6kgZXQgbWFpbnRlbmFuY2UgZHUgY29kZS5cciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiTGVzIHByaW5jaXBhbGVzIGZvbmN0aW9ubmFsaXTDqXMgc29udCBsZXMgc3VpdmFudGVzIDpcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0Ijoi4oCiIFPDqWxlY3Rpb25uZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgw6AgcGFydGlyIGTigJl1bmUgcGFsZXR0ZVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiLigKIgRGVzc2luZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgZGFucyBsYSB6b25lIGRlIGRlc3NpbiAoc2Vsb24gbGUgdHlwZSBzw6lsZWN0aW9ubsOpKSJ9XX1dfSwibWVudGlvbmVkX2l0ZW1zIjpbXSwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiQmFzZWQgb24geW91ciByZXF1aXJlbWVudHMsIEknbGwgY3JlYXRlIGEgSmF2YUZYIGFwcGxpY2F0aW9uIHRoYXQgYWxsb3dzIHNlbGVjdGluZyBhbmQgZHJhd2luZyBnZW9tZXRyaWMgc2hhcGVzIHVzaW5nIHRoZSBGYWN0b3J5IGRlc2lnbiBwYXR0ZXJuIHRoYXQncyBhbHJlYWR5IGltcGxlbWVudGVkIGluIHlvdXIgY29kZWJhc2UuXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL01haW4uamF2YVwiIG1vZGU9XCJFRElUXCI+XG5gYGBqYXZhXG5pbXBvcnQgRmFjdG9yeS4qO1xuaW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbmltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkNhbnZhcztcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5CdXR0b247XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5Cb3JkZXJQYW5lO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuQ29sb3I7XG5pbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuXG5wdWJsaWMgY2xhc3MgTWFpbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICBwcml2YXRlIFNoYXBlRmFjdG9yeSBjdXJyZW50RmFjdG9yeTtcbiAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICBcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFwiRGVzc2luIGRlIEZvcm1lcyBHw6lvbcOpdHJpcXVlc1wiKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcbiAgICAgICAgQ2FudmFzIGNhbnZhcyA9IG5ldyBDYW52YXMoODAwLCA2MDApO1xuICAgICAgICBHcmFwaGljc0NvbnRleHQgZ2MgPSBjYW52YXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcbiAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXG4gICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcIkNlcmNsZVwiKTtcbiAgICAgICAgQnV0dG9uIGxpbmVCdG4gPSBuZXcgQnV0dG9uKFwiTGlnbmVcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcbiAgICAgICAgSEJveCB0b29sYmFyID0gbmV3IEhCb3goMTApO1xuICAgICAgICB0b29sYmFyLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xuICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCB0aGUgbGF5b3V0XG4gICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XG4gICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgICAgICByb290LnNldENlbnRlcihjYW52YXMpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzIGZvciBidXR0b25zXG4gICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgICAgIGNpcmNsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IENpcmNsZUZhY3RvcnkoKSk7XG4gICAgICAgIGxpbmVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBMaW5lRmFjdG9yeSgpKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgICAgIGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCBjYW52YXMgbW91c2UgZXZlbnRzXG4gICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUHJlc3NlZChlIC0+IHtcbiAgICAgICAgICAgIHN0YXJ0WCA9IGUuZ2V0WCgpO1xuICAgICAgICAgICAgc3RhcnRZID0gZS5nZXRZKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgY2FudmFzLnNldE9uTW91c2VSZWxlYXNlZChlIC0+IHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50RmFjdG9yeSAhPSBudWxsKSB7XG4gICAgICAgICAgICAgICAgU2hhcGUgc2hhcGUgPSBjdXJyZW50RmFjdG9yeS5nZXRTaGFwZSgpO1xuICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlLmdldFgoKSwgZS5nZXRZKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhbmQgc2hvdyBzY2VuZVxuICAgICAgICBTY2VuZSBzY2VuZSA9IG5ldyBTY2VuZShyb290LCA4MDAsIDYwMCk7XG4gICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgICAgIHByaW1hcnlTdGFnZS5zaG93KCk7XG4gICAgfVxuICAgIFxuICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuWW91J2xsIG5lZWQgdG8gY3JlYXRlIGEgYFJlY3RhbmdsZUZhY3RvcnlgIGNsYXNzIHRvIGNvbXBsZXRlIHRoZSBzZXQgb2YgZmFjdG9yaWVzOlxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9GYWN0b3J5L1JlY3RhbmdsZUZhY3RvcnkuamF2YVwiIG1vZGU9XCJFRElUXCI+XG5gYGBqYXZhXG5wYWNrYWdlIEZhY3Rvcnk7XG5cbnB1YmxpYyBjbGFzcyBSZWN0YW5nbGVGYWN0b3J5IGV4dGVuZHMgU2hhcGVGYWN0b3J5IHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU2hhcGUgZ2V0U2hhcGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcbiAgICB9XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cblRoaXMgYXBwbGljYXRpb24gaW1wbGVtZW50czpcbi0gQSBjYW52YXMgZm9yIGRyYXdpbmcgc2hhcGVzXG4tIEEgdG9vbGJhciB3aXRoIGJ1dHRvbnMgdG8gc2VsZWN0IGRpZmZlcmVudCBzaGFwZXMgKHJlY3RhbmdsZSwgY2lyY2xlLCBsaW5lKVxuLSBNb3VzZSBldmVudCBoYW5kbGluZyB0byBkcmF3IHNoYXBlcyBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmdcbi0gRmFjdG9yeSBwYXR0ZXJuIGZvciBjcmVhdGluZyBkaWZmZXJlbnQgc2hhcGUgb2JqZWN0c1xuXG5UaGUgZGVzaWduIGZvbGxvd3MgdGhlIEZhY3RvcnkgcGF0dGVybiB5b3UgYWxyZWFkeSBoYXZlIGluIHlvdXIgY29kZWJhc2UsIG1ha2luZyBpdCBlYXN5IHRvIGFkZCBuZXcgc2hhcGVzIGluIHRoZSBmdXR1cmUuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6InNyYy9NYWluLmphdmE6MC01OTlcbnNyYy9GYWN0b3J5L1JlY3RhbmdsZVNoYXBlLmphdmE6MC00NjFcbnNyYy9GYWN0b3J5L0NpcmNsZVNoYXBlLmphdmE6MC0zNjBcbnNyYy9GYWN0b3J5L0xpbmVTaGFwZS5qYXZhOjAtMjc3XG5zcmMvRmFjdG9yeS9TaGFwZS5qYXZhOjAtMTc3XG5zcmMvRmFjdG9yeS9DaXJjbGVGYWN0b3J5LmphdmE6MC0xNTNcbnNyYy9GYWN0b3J5L0xpbmVGYWN0b3J5LmphdmE6MC0xNDlcbnNyYy9GYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhOjAtOTVcbi5naXRpZ25vcmU6MC0zNDQifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJjcmVhdGUgYSBtYWluIGNsYXNzIGZvciB0aGlzIGFwcCA6XG5Sw6lhbGlzZXIgdW5lIGFwcGxpY2F0aW9uIEphdmFGWCBwZXJtZXR0YW50IGRlIHPDqWxlY3Rpb25uZXIgZXQgZGVzc2luZXIgZGVzIGZvcm1lc1xyXG5nw6lvbcOpdHJpcXVlcyAocmVjdGFuZ2xlLCBjZXJjbGUsIGxpZ25lLCBldGMuKSBzdXIgdW5lIHpvbmUgZGUgZGVzc2luLlxyXG5M4oCZYXJjaGl0ZWN0dXJlIGRlIGzigJlhcHBsaWNhdGlvbiBkb2l0IHPigJlhcHB1eWVyIHN1ciBkZXMgZGVzaWduIHBhdHRlcm5zIHBvdXIgdW5lIG1laWxsZXVyZVxyXG5tb2R1bGFyaXTDqSwgZXh0ZW5zaWJpbGl0w6kgZXQgbWFpbnRlbmFuY2UgZHUgY29kZS5cclxuTGVzIHByaW5jaXBhbGVzIGZvbmN0aW9ubmFsaXTDqXMgc29udCBsZXMgc3VpdmFudGVzIDpcclxu4oCiIFPDqWxlY3Rpb25uZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgw6AgcGFydGlyIGTigJl1bmUgcGFsZXR0ZVxyXG7igKIgRGVzc2luZXIgdW5lIGZvcm1lIGfDqW9tw6l0cmlxdWUgZGFucyBsYSB6b25lIGRlIGRlc3NpbiAoc2Vsb24gbGUgdHlwZSBzw6lsZWN0aW9ubsOpKSJ9fSx7ImlkIjoxLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTA6MjU6NDAuMTg1WiIsInJlc3BvbnNlX3RleHQiOiJCYXNlZCBvbiB5b3VyIHJlcXVpcmVtZW50cywgSSdsbCBjcmVhdGUgYSBKYXZhRlggYXBwbGljYXRpb24gdGhhdCBhbGxvd3Mgc2VsZWN0aW5nIGFuZCBkcmF3aW5nIGdlb21ldHJpYyBzaGFwZXMgdXNpbmcgdGhlIEZhY3RvcnkgZGVzaWduIHBhdHRlcm4gdGhhdCdzIGFscmVhZHkgaW1wbGVtZW50ZWQgaW4geW91ciBjb2RlYmFzZS5cblxuYGBgYGphdmEgcGF0aD1zcmMvTWFpbi5qYXZhIG1vZGU9RURJVFxuaW1wb3J0IEZhY3RvcnkuKjtcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG5pbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbmltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbmltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkhCb3g7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcblxucHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgcHJpdmF0ZSBkb3VibGUgc3RhcnRYLCBzdGFydFk7XG4gICAgXG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgY2FudmFzIGZvciBkcmF3aW5nXG4gICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAgICAgR3JhcGhpY3NDb250ZXh0IGdjID0gY2FudmFzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xuICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcIlJlY3RhbmdsZVwiKTtcbiAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG4gICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgICAgICBcbiAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXIgd2l0aCBidXR0b25zXG4gICAgICAgIEhCb3ggdG9vbGJhciA9IG5ldyBIQm94KDEwKTtcbiAgICAgICAgdG9vbGJhci5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAgICAgdG9vbGJhci5nZXRDaGlsZHJlbigpLmFkZEFsbChyZWN0YW5nbGVCdG4sIGNpcmNsZUJ0biwgbGluZUJ0bik7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgdGhlIGxheW91dFxuICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgICAgICByb290LnNldFRvcCh0b29sYmFyKTtcbiAgICAgICAgcm9vdC5zZXRDZW50ZXIoY2FudmFzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgICAgICByZWN0YW5nbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBSZWN0YW5nbGVGYWN0b3J5KCkpO1xuICAgICAgICBjaXJjbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBDaXJjbGVGYWN0b3J5KCkpO1xuICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgZGVmYXVsdCBzaGFwZVxuICAgICAgICBjdXJyZW50RmFjdG9yeSA9IG5ldyBSZWN0YW5nbGVGYWN0b3J5KCk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXQgdXAgY2FudmFzIG1vdXNlIGV2ZW50c1xuICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVByZXNzZWQoZSAtPiB7XG4gICAgICAgICAgICBzdGFydFggPSBlLmdldFgoKTtcbiAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUmVsZWFzZWQoZSAtPiB7XG4gICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgIFNoYXBlIHNoYXBlID0gY3VycmVudEZhY3RvcnkuZ2V0U2hhcGUoKTtcbiAgICAgICAgICAgICAgICBzaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZS5nZXRYKCksIGUuZ2V0WSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhdGUgYW5kIHNob3cgc2NlbmVcbiAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0U2NlbmUoc2NlbmUpO1xuICAgICAgICBwcmltYXJ5U3RhZ2Uuc2hvdygpO1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgICAgIGxhdW5jaChhcmdzKTtcbiAgICB9XG59XG5gYGBgXG5cbllvdSdsbCBuZWVkIHRvIGNyZWF0ZSBhIGBSZWN0YW5nbGVGYWN0b3J5YCBjbGFzcyB0byBjb21wbGV0ZSB0aGUgc2V0IG9mIGZhY3RvcmllczpcblxuYGBgYGphdmEgcGF0aD1zcmMvRmFjdG9yeS9SZWN0YW5nbGVGYWN0b3J5LmphdmEgbW9kZT1FRElUXG5wYWNrYWdlIEZhY3Rvcnk7XG5cbnB1YmxpYyBjbGFzcyBSZWN0YW5nbGVGYWN0b3J5IGV4dGVuZHMgU2hhcGVGYWN0b3J5IHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgU2hhcGUgZ2V0U2hhcGUoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcbiAgICB9XG59XG5gYGBgXG5cblRoaXMgYXBwbGljYXRpb24gaW1wbGVtZW50czpcbi0gQSBjYW52YXMgZm9yIGRyYXdpbmcgc2hhcGVzXG4tIEEgdG9vbGJhciB3aXRoIGJ1dHRvbnMgdG8gc2VsZWN0IGRpZmZlcmVudCBzaGFwZXMgKHJlY3RhbmdsZSwgY2lyY2xlLCBsaW5lKVxuLSBNb3VzZSBldmVudCBoYW5kbGluZyB0byBkcmF3IHNoYXBlcyBieSBjbGlja2luZyBhbmQgZHJhZ2dpbmdcbi0gRmFjdG9yeSBwYXR0ZXJuIGZvciBjcmVhdGluZyBkaWZmZXJlbnQgc2hhcGUgb2JqZWN0c1xuXG5UaGUgZGVzaWduIGZvbGxvd3MgdGhlIEZhY3RvcnkgcGF0dGVybiB5b3UgYWxyZWFkeSBoYXZlIGluIHlvdXIgY29kZWJhc2UsIG1ha2luZyBpdCBlYXN5IHRvIGFkZCBuZXcgc2hhcGVzIGluIHRoZSBmdXR1cmUuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOlt7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI1OTkiLCJibG9iX25hbWUiOiJhMjI3ZWIxODgxZmRhOWQ5NWVlMmYwMzMzOGUyMGQwZTQ5ZWFlOWJhYTI2MzY3OGI3MTQxYjVhNzc4N2FhMTRkIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL01haW4uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI0NjEiLCJibG9iX25hbWUiOiI2MDgzMDQ2MDMyZDQ2ODM5Y2UyM2U5OTllN2MwZDEyMDBjZjdiMGM5ZmE3MTJmNmVhZjU5ZTQ5M2E3NTZjYmI4IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvUmVjdGFuZ2xlU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNjAiLCJibG9iX25hbWUiOiIwOWEwZWYwOGVkZTU5OGQ5M2UyNDNkYTlhNzAwZTU2ZGE1ZDU5NWQyMTFmNDc0YzlhNGZmNThiMTdlMGUxYzliIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvQ2lyY2xlU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIyNzciLCJibG9iX25hbWUiOiJiNjU5NzA5ZmRjYTVmMGVkYjlhNjliM2QyOTQwYTRhYWUzYzEwOGRlMzljMzYwOGUxOWM1OTJhNWUyZGU1YWI2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvTGluZVNoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTc3IiwiYmxvYl9uYW1lIjoiMzZlYTY4YWY3MmYzMzMxMDM5MDZjY2MzNzk3ZjE3YjVkOWM5ZDA0ZmU2YWFhMDg1OTc2MjZhOTQwY2NiOGEyMiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9GYWN0b3J5L1NoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTUzIiwiYmxvYl9uYW1lIjoiYzkyNjRjODBkYzdkYWRkNzEwYTZjMjQ2OGYxN2JjMGQ3MWI0ZjNmMTE4NTZhYzMxYjU5YWYzNWIxOTU3MjI4YyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9GYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIxNDkiLCJibG9iX25hbWUiOiI5MGEwYTQ3NzA4ZThhNzYyNDQ0ZTZiNjQxNDI3N2YwYjBkZjk3YTI1ZjRjMWU3ZmRmODVkZTJiZDNiZTJmZTFlIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvTGluZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI5NSIsImJsb2JfbmFtZSI6ImIxOGU5ODcxZjRmYjkzY2JiMTNiYWZkMDgxMzdiMWVlOGIyNzk3ZTMxZmM2NzFiNDk0ZmZiZjNhZjAyMzc3NDQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNDQiLCJibG9iX25hbWUiOiI0N2JhMzE2OGIyZjk4MWFjNDM0ZmE0OWQyNGExMWQyYTM5OGZkN2YxYmFhYWIzZDUxNTBmYTE5NzQ1ZDUzNTQ2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoiLmdpdGlnbm9yZSJ9fV19XSwiZmVlZGJhY2tTdGF0ZXMiOnsidGVtcC1mZS1kMTE1NWE4OS1mM2VkLTRhNmEtOWU3Ny1mOGZlMmVjOGIyNjUiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9fSwidG9vbFVzZVN0YXRlcyI6e30sImRyYWZ0RXhjaGFuZ2UiOnsicmVxdWVzdF9tZXNzYWdlIjoidGhlIHR3byBlbmRzIG9mIGxpbmUgaGF2ZSB0byBiZSBpbnNpZGUgYSBjaXJjbGUiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoidGhlIHR3byBlbmRzIG9mIGxpbmUgaGF2ZSB0byBiZSBpbnNpZGUgYSBjaXJjbGUifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0YXR1cyI6ImRyYWZ0In0sImRyYWZ0QWN0aXZlQ29udGV4dElkcyI6WyJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uL3NyYy9NYWluLmphdmEiLCJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uZmFsc2VmYWxzZSIsInVzZXJHdWlkZWxpbmVzIl0sInJlcXVlc3RJZHMiOltdLCJpc1Bpbm5lZCI6ZmFsc2UsImlzU2hhcmVhYmxlIjp0cnVlLCJleHRyYURhdGEiOnsiaGFzRGlydHlFZGl0cyI6ZmFsc2V9LCJwZXJzb25hVHlwZSI6MCwicm9vdFRhc2tVdWlkIjoiMWY2YWQzMmUtODUzYy00ZGY5LWFkZGYtNGZmMWNlM2ZlY2ZiIn0sImQzOWYxYTZlLWFjMGMtNDcwYi1hYTk1LWQ2ZGJkYmRlNmEzMyI6eyJpZCI6ImQzOWYxYTZlLWFjMGMtNDcwYi1hYTk1LWQ2ZGJkYmRlNmEzMyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMjlUMTQ6NDY6NTQuNzA0WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTMwVDA3OjM4OjQ1LjU2NloiLCJjaGF0SGlzdG9yeSI6W3sicmVxdWVzdF9pZCI6ImM2NTY5MzIxLTZhMGQtNGM3ZC05MjQ2LTcxYzJkOWNkMjk3NSIsInV1aWQiOiJlMzQyZmIzYS1hZjFmLTRhZGMtOTYwOC03YWI1OWFhNTdiMmYiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjAsInRvVGltZXN0YW1wIjoxNzQ4NTMwMDE0NzEwLCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI4ZDg4Yjc3NS03ZTFjLTQ2ZGYtYjA2NC0xOWI5NTE3ZGUzNjEiLCJyZXF1ZXN0X21lc3NhZ2UiOiJ0aGUgdHdvIGVuZHMgb2YgYSBsaW5lIGhhdmUgdG8gYmUgaW5zaWRlIGEgY2lyY2xlLiBhIGNpcmNsZSBjYW4gaGF2ZSBvbmx5IG9uZSBsaW5lIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6InRoZSB0d28gZW5kcyBvZiBhIGxpbmUgaGF2ZSB0byBiZSBpbnNpZGUgYSBjaXJjbGUuIGEgY2lyY2xlIGNhbiBoYXZlIG9ubHkgb25lIGxpbmUifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE2NlVHVHUyN1FQR0FGb2N6cGI3TmlkIiwidG9vbF9uYW1lIjoidmlldyIsImlucHV0X2pzb24iOiJ7XCJwYXRoXCI6IFwic3JjL01haW4uamF2YVwiLCBcInR5cGVcIjogXCJmaWxlXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiSSB1bmRlcnN0YW5kIHlvdSdyZSB3b3JraW5nIG9uIGEgbW9kZWxpbmcgcHJvYmxlbSB3aGVyZTpcbjEuIEJvdGggZW5kcyBvZiBhIGxpbmUgbXVzdCBiZSBpbnNpZGUgYSBjaXJjbGVcbjIuIEEgY2lyY2xlIGNhbiBjb250YWluIG9ubHkgb25lIGxpbmVcblxuVG8gaGVscCB5b3UgaW1wbGVtZW50IHRoaXMgY29uc3RyYWludCBpbiB5b3VyIEphdmEgY29kZSwgSSBuZWVkIHRvIHVuZGVyc3RhbmQgdGhlIGN1cnJlbnQgc3RydWN0dXJlIG9mIHlvdXIgcHJvamVjdC4gTGV0IG1lIGZpcnN0IGV4YW1pbmUgdGhlIGBzcmMvTWFpbi5qYXZhYCBmaWxlIGFuZCB0aGVuIHNlYXJjaCBmb3IgcmVsYXRlZCBjb2RlLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJ0aGUgdHdvIGVuZHMgb2YgYSBsaW5lIGhhdmUgdG8gYmUgaW5zaWRlIGEgY2lyY2xlLiBhIGNpcmNsZSBjYW4gaGF2ZSBvbmx5IG9uZSBsaW5lIn19LHsiaWQiOjEsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNDo0NzozMC4yMjJaIiwicmVzcG9uc2VfdGV4dCI6IkkgdW5kZXJzdGFuZCB5b3UncmUgd29ya2luZyBvbiBhIG1vZGVsaW5nIHByb2JsZW0gd2hlcmU6XG4xLiBCb3RoIGVuZHMgb2YgYSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXG4yLiBBIGNpcmNsZSBjYW4gY29udGFpbiBvbmx5IG9uZSBsaW5lXG5cblRvIGhlbHAgeW91IGltcGxlbWVudCB0aGlzIGNvbnN0cmFpbnQgaW4geW91ciBKYXZhIGNvZGUsIEkgbmVlZCB0byB1bmRlcnN0YW5kIHRoZSBjdXJyZW50IHN0cnVjdHVyZSBvZiB5b3VyIHByb2plY3QuIExldCBtZSBmaXJzdCBleGFtaW5lIHRoZSBgc3JjL01haW4uamF2YWAgZmlsZSBhbmQgdGhlbiBzZWFyY2ggZm9yIHJlbGF0ZWQgY29kZS5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI3MzRkZWI4ZC04ZmQxLTQzNGYtOWU4Yy0zMTBiMTI5ZjE1ZGYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxOFZRUHREVlVUVkY3RmlWMTlNN1FNNiIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiU2hvdyBtZSBhbGwgdGhlIHNoYXBlIGNsYXNzZXMsIGZhY3RvcmllcywgYW5kIGFueSBleGlzdGluZyBjb25zdHJhaW50IG9yIHZhbGlkYXRpb24gbG9naWMuIEkgbmVlZCB0byBzZWUgdGhlIFNoYXBlIGludGVyZmFjZS9jbGFzcywgQ2lyY2xlIGNsYXNzLCBMaW5lIGNsYXNzLCBhbmQgYW55IGV4aXN0aW5nIHJlbGF0aW9uc2hpcCBtYW5hZ2VtZW50IGJldHdlZW4gc2hhcGVzLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBsZXQgbWUgZXhwbG9yZSB0aGUgY29kZWJhc2UgdG8gdW5kZXJzdGFuZCB0aGUgY3VycmVudCBzdHJ1Y3R1cmUgYW5kIHNlZSB3aGF0IGNsYXNzZXMgZXhpc3QgZm9yIHNoYXBlcyBhbmQgdGhlaXIgcmVsYXRpb25zaGlwczpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL01haW4uamF2YTpcbiAgICAgMVx0XG4gICAgIDJcdGltcG9ydCBGYWN0b3J5Lio7XG4gICAgIDNcdGltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG4gICAgIDRcdGltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XG4gICAgIDdcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAgOVx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxMVx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxMlx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAxM1x0XG4gICAgMTRcdHB1YmxpYyBjbGFzcyBNYWluIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDE1XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTZcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAxN1x0XG4gICAgMThcdCAgICBAT3ZlcnJpZGVcbiAgICAxOVx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDIwXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjFcdFxuICAgIDIyXHQgICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcbiAgICAyM1x0ICAgICAgICBDYW52YXMgY2FudmFzID0gbmV3IENhbnZhcyg4MDAsIDYwMCk7XG4gICAgMjRcdCAgICAgICAgR3JhcGhpY3NDb250ZXh0IGdjID0gY2FudmFzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgMjVcdCAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcbiAgICAyNlx0ICAgICAgICBnYy5zZXRMaW5lV2lkdGgoMik7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xuICAgIDI5XHQgICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgIDMwXHQgICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFwiQ2VyY2xlXCIpO1xuICAgIDMxXHQgICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgIDMyXHRcbiAgICAzM1x0ICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcbiAgICAzNFx0ICAgICAgICBIQm94IHRvb2xiYXIgPSBuZXcgSEJveCgxMCk7XG4gICAgMzVcdCAgICAgICAgdG9vbGJhci5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzNlx0ICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcbiAgICAzN1x0XG4gICAgMzhcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICAzOVx0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQwXHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQxXHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNDJcdFxuICAgIDQzXHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDQ0XHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNDVcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA0Nlx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNDlcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICAvLyBTZXQgdXAgY2FudmFzIG1vdXNlIGV2ZW50c1xuICAgIDUyXHQgICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUHJlc3NlZChlIC0+IHtcbiAgICA1M1x0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNTRcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDU1XHQgICAgICAgIH0pO1xuICAgIDU2XHRcbiAgICA1N1x0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDU4XHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDU5XHQgICAgICAgICAgICAgICAgU2hhcGUgc2hhcGUgPSBjdXJyZW50RmFjdG9yeS5nZXRTaGFwZSgpO1xuICAgIDYwXHQgICAgICAgICAgICAgICAgc2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGUuZ2V0WCgpLCBlLmdldFkoKSk7XG4gICAgNjFcdCAgICAgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICB9KTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgNjVcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDY2XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgNjdcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNob3coKTtcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgNzFcdCAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgIDcyXHQgICAgfVxuICAgIDczXHR9XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA3M1xuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTY2VUdUdTI3UVBHQUZvY3pwYjdOaWQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ3OjM1LjU0MVoiLCJyZXNwb25zZV90ZXh0IjoiTm93IGxldCBtZSBleHBsb3JlIHRoZSBjb2RlYmFzZSB0byB1bmRlcnN0YW5kIHRoZSBjdXJyZW50IHN0cnVjdHVyZSBhbmQgc2VlIHdoYXQgY2xhc3NlcyBleGlzdCBmb3Igc2hhcGVzIGFuZCB0aGVpciByZWxhdGlvbnNoaXBzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjZhNTI0MjIzLWMzMDAtNGY1Yy05NjQ0LWM2YmVlNzNjNWJjNSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDExbm13V3ZHWktnVDRnaUV2cnA0cVdDIiwidG9vbF9uYW1lIjoidmlldyIsImlucHV0X2pzb24iOiJ7XCJwYXRoXCI6IFwic3JjL0ZhY3RvcnkvUmVjdGFuZ2xlRmFjdG9yeS5qYXZhXCIsIFwidHlwZVwiOiBcImZpbGVcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJMZXQgbWUgY2hlY2sgaWYgdGhlcmUncyBhIGNvbXBsZXRlIFJlY3RhbmdsZUZhY3RvcnkgaW1wbGVtZW50YXRpb246XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvRmFjdG9yeS9DaXJjbGVTaGFwZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0XG4gICAgIDVcdHB1YmxpYyBjbGFzcyBDaXJjbGVTaGFwZSBpbXBsZW1lbnRzIFNoYXBle1xuICAgICA2XHQgICAgQE92ZXJyaWRlXG4gICAgIDdcdCAgICBwdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYyxkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZClcbiAgICAgOFx0ICAgIHtcbiAgICAgOVx0ICAgICAgICBkb3VibGUgcmFkaXVzID0gTWF0aC5hYnMoZW5kWC1zdGFydFgpLzI7XG4gICAgMTBcdCAgICAgICAgZ2Muc3Ryb2tlT3ZhbChzdGFydFggLSByYWRpdXMsIHN0YXJ0WSAtIHJhZGl1cywgcmFkaXVzICogMiwgcmFkaXVzICogMik7XG4gICAgMTFcdFxuICAgIDEyXHQgICAgfVxuICAgIDEzXHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGludGVyZmFjZSBTaGFwZSB7XG4gICAgIDZcdCAgICB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLGRvdWJsZSBzdGFydFgsZG91YmxlIHN0YXJ0WSxkb3VibGUgZW5kWCxkb3VibGUgZW5kWSk7XG4gICAgIDdcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlU2hhcGUgaW1wbGVtZW50cyAgU2hhcGV7XG4gICAgIDZcdCAgICBAT3ZlcnJpZGVcbiAgICAgN1x0ICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpXG4gICAgIDhcdCAgICB7XG4gICAgIDlcdCAgICAgICAgZG91YmxlIHdpZHRoID0gTWF0aC5hYnMoZW5kWC1zdGFydFgpO1xuICAgIDEwXHQgICAgICAgIGRvdWJsZSBoZWlnaHQgPSBNYXRoLmFicyhlbmRZIC0gc3RhcnRZKTtcbiAgICAxMVx0ICAgICAgICBkb3VibGUgeCA9IE1hdGgubWluKHN0YXJ0WCwgZW5kWCk7XG4gICAgMTJcdCAgICAgICAgZG91YmxlIHkgPSBNYXRoLm1pbihzdGFydFksIGVuZFkpO1xuICAgIDEzXHQgICAgICAgIGdjLnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgMTRcdFxuICAgIDE1XHQgICAgfVxuICAgIDE2XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L0xpbmVTaGFwZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0XG4gICAgIDVcdHB1YmxpYyBjbGFzcyBMaW5lU2hhcGUgaW1wbGVtZW50cyBTaGFwZSB7XG4gICAgIDZcdCAgICBAT3ZlcnJpZGVcbiAgICAgN1x0ICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAgOFx0ICAgICAgICBnYy5zdHJva2VMaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAgOVx0ICAgIH1cbiAgICAxMFx0fVxuLi4uXG5QYXRoOiBzcmMvTWFpbi5qYXZhXG4gICAgIDFcdFxuICAgICAyXHRpbXBvcnQgRmFjdG9yeS4qO1xuICAgICAzXHRpbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbiAgICAgNVx0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgNlx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA3XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDhcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5CdXR0b247XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkJvcmRlclBhbmU7XG4gICAgMTBcdGltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkhCb3g7XG4gICAgMTFcdGltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuQ29sb3I7XG4gICAgMTJcdGltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG4gICAgMTNcdFxuICAgIDE0XHRwdWJsaWMgY2xhc3MgTWFpbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICAxNVx0ICAgIHByaXZhdGUgU2hhcGVGYWN0b3J5IGN1cnJlbnRGYWN0b3J5O1xuICAgIDE2XHQgICAgcHJpdmF0ZSBkb3VibGUgc3RhcnRYLCBzdGFydFk7XG4gICAgMTdcdFxuICAgIDE4XHQgICAgQE92ZXJyaWRlXG4gICAgMTlcdCAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAyMFx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0VGl0bGUoXCJEZXNzaW4gZGUgRm9ybWVzIEfDqW9tw6l0cmlxdWVzXCIpO1xuICAgIDIxXHRcbiAgICAyMlx0ICAgICAgICAvLyBDcmVhdGUgY2FudmFzIGZvciBkcmF3aW5nXG4gICAgMjNcdCAgICAgICAgQ2FudmFzIGNhbnZhcyA9IG5ldyBDYW52YXMoODAwLCA2MDApO1xuICAgIDI0XHQgICAgICAgIEdyYXBoaWNzQ29udGV4dCBnYyA9IGNhbnZhcy5nZXRHcmFwaGljc0NvbnRleHQyRCgpO1xuICAgIDI1XHQgICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgMjZcdCAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgIDI3XHRcbiAgICAyOFx0ICAgICAgICAvLyBDcmVhdGUgc2hhcGUgc2VsZWN0aW9uIGJ1dHRvbnNcbiAgICAyOVx0ICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcIlJlY3RhbmdsZVwiKTtcbiAgICAzMFx0ICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcIkNlcmNsZVwiKTtcbiAgICAzMVx0ICAgICAgICBCdXR0b24gbGluZUJ0biA9IG5ldyBCdXR0b24oXCJMaWduZVwiKTtcbiAgICAzMlx0XG4gICAgMzNcdCAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXIgd2l0aCBidXR0b25zXG4gICAgMzRcdCAgICAgICAgSEJveCB0b29sYmFyID0gbmV3IEhCb3goMTApO1xuICAgIDM1XHQgICAgICAgIHRvb2xiYXIuc2V0UGFkZGluZyhuZXcgSW5zZXRzKDEwKSk7XG4gICAgMzZcdCAgICAgICAgdG9vbGJhci5nZXRDaGlsZHJlbigpLmFkZEFsbChyZWN0YW5nbGVCdG4sIGNpcmNsZUJ0biwgbGluZUJ0bik7XG4gICAgMzdcdFxuICAgIDM4XHQgICAgICAgIC8vIFNldCB1cCB0aGUgbGF5b3V0XG4gICAgMzlcdCAgICAgICAgQm9yZGVyUGFuZSByb290ID0gbmV3IEJvcmRlclBhbmUoKTtcbiAgICA0MFx0ICAgICAgICByb290LnNldFRvcCh0b29sYmFyKTtcbiAgICA0MVx0ICAgICAgICByb290LnNldENlbnRlcihjYW52YXMpO1xuICAgIDQyXHRcbiAgICA0M1x0ICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnMgZm9yIGJ1dHRvbnNcbiAgICA0NFx0ICAgICAgICByZWN0YW5nbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBSZWN0YW5nbGVGYWN0b3J5KCkpO1xuICAgIDQ1XHQgICAgICAgIGNpcmNsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IENpcmNsZUZhY3RvcnkoKSk7XG4gICAgNDZcdCAgICAgICAgbGluZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IExpbmVGYWN0b3J5KCkpO1xuICAgIDQ3XHRcbiAgICA0OFx0ICAgICAgICAvLyBTZXQgZGVmYXVsdCBzaGFwZVxuICAgIDQ5XHQgICAgICAgIGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKTtcbiAgICA1MFx0XG4gICAgNTFcdCAgICAgICAgLy8gU2V0IHVwIGNhbnZhcyBtb3VzZSBldmVudHNcbiAgICA1Mlx0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVByZXNzZWQoZSAtPiB7XG4gICAgNTNcdCAgICAgICAgICAgIHN0YXJ0WCA9IGUuZ2V0WCgpO1xuICAgIDU0XHQgICAgICAgICAgICBzdGFydFkgPSBlLmdldFkoKTtcbiAgICA1NVx0ICAgICAgICB9KTtcbiAgICA1Nlx0XG4gICAgNTdcdCAgICAgICAgY2FudmFzLnNldE9uTW91c2VSZWxlYXNlZChlIC0+IHtcbiAgICA1OFx0ICAgICAgICAgICAgaWYgKGN1cnJlbnRGYWN0b3J5ICE9IG51bGwpIHtcbiAgICA1OVx0ICAgICAgICAgICAgICAgIFNoYXBlIHNoYXBlID0gY3VycmVudEZhY3RvcnkuZ2V0U2hhcGUoKTtcbiAgICA2MFx0ICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlLmdldFgoKSwgZS5nZXRZKCkpO1xuICAgIDYxXHQgICAgICAgICAgICB9XG4gICAgNjJcdCAgICAgICAgfSk7XG4gICAgNjNcdFxuICAgIDY0XHQgICAgICAgIC8vIENyZWF0ZSBhbmQgc2hvdyBzY2VuZVxuICAgIDY1XHQgICAgICAgIFNjZW5lIHNjZW5lID0gbmV3IFNjZW5lKHJvb3QsIDgwMCwgNjAwKTtcbiAgICA2Nlx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0U2NlbmUoc2NlbmUpO1xuICAgIDY3XHQgICAgICAgIHByaW1hcnlTdGFnZS5zaG93KCk7XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdFxuICAgIDcwXHQgICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xuICAgIDcxXHQgICAgICAgIGxhdW5jaChhcmdzKTtcbiAgICA3Mlx0ICAgIH1cbiAgICA3M1x0fS4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvTGluZUZhY3RvcnkuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgTGluZUZhY3RvcnkgZXh0ZW5kcyBTaGFwZUZhY3Rvcnl7XG4gICAgIDRcdCAgICBAT3ZlcnJpZGVcbiAgICAgNVx0ICAgIHB1YmxpYyBTaGFwZSBnZXRTaGFwZSgpIHtcbiAgICAgNlx0ICAgICAgICByZXR1cm4gbmV3IExpbmVTaGFwZSgpO1xuICAgICA3XHQgICAgfVxuICAgICA4XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgQ2lyY2xlRmFjdG9yeSBleHRlbmRzIFNoYXBlRmFjdG9yeXtcbiAgICAgNFx0ICAgIEBPdmVycmlkZVxuICAgICA1XHQgICAgcHVibGljIFNoYXBlIGdldFNoYXBlKCkge1xuICAgICA2XHQgICAgICAgIHJldHVybiBuZXcgQ2lyY2xlU2hhcGUoKTtcbiAgICAgN1x0ICAgIH1cbiAgICAgOFx0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgYWJzdHJhY3QgY2xhc3MgU2hhcGVGYWN0b3J5IHtcbiAgICAgNFx0ICAgIHB1YmxpYyBhYnN0cmFjdCBTaGFwZSBnZXRTaGFwZSgpO1xuICAgICA1XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1JlY3RhbmdsZUZhY3RvcnkuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlRmFjdG9yeSB7XG4gICAgIDRcdH1cbi4uLlxuUGF0aDogLmdpdGlnbm9yZVxuICAgICAxXHQjIyMgSW50ZWxsaUogSURFQSAjIyNcbiAgICAgMlx0b3V0L1xuICAgICAzXHQhKiovc3JjL21haW4vKiovb3V0L1xuICAgICA0XHQhKiovc3JjL3Rlc3QvKiovb3V0L1xuICAgICA1XHRcbiAgICAgNlx0IyMjIEVjbGlwc2UgIyMjXG4gICAgIDdcdC5hcHRfZ2VuZXJhdGVkXG4gICAgIDhcdC5jbGFzc3BhdGhcbiAgICAgOVx0LmZhY3RvcnlwYXRoXG4gICAgMTBcdC5wcm9qZWN0XG4gICAgMTFcdC5zZXR0aW5nc1xuICAgIDEyXHQuc3ByaW5nQmVhbnNcbiAgICAxM1x0LnN0czQtY2FjaGVcbiAgICAxNFx0YmluL1xuICAgIDE1XHQhKiovc3JjL21haW4vKiovYmluL1xuICAgIDE2XHQhKiovc3JjL3Rlc3QvKiovYmluL1xuICAgIDE3XHRcbiAgICAxOFx0IyMjIE5ldEJlYW5zICMjI1xuICAgIDE5XHQvbmJwcm9qZWN0L3ByaXZhdGUvXG4gICAgMjBcdC9uYmJ1aWxkL1xuICAgIDIxXHQvZGlzdC9cbiAgICAyMlx0L25iZGlzdC9cbiAgICAyM1x0Ly5uYi1ncmFkbGUvXG4gICAgMjRcdFxuICAgIDI1XHQjIyMgVlMgQ29kZSAjIyNcbiAgICAyNlx0LnZzY29kZS9cbiAgICAyN1x0XG4gICAgMjhcdCMjIyBNYWMgT1MgIyMjXG4gICAgMjlcdC5EU19TdG9yZS4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMThWUVB0RFZVVFZGN0ZpVjE5TTdRTTYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ3OjQzLjg5M1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0IG1lIGNoZWNrIGlmIHRoZXJlJ3MgYSBjb21wbGV0ZSBSZWN0YW5nbGVGYWN0b3J5IGltcGxlbWVudGF0aW9uOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjM4MjQwMDBhLTYxOTctNGYwZC1hMmE1LTQ4YWZlYjc1OGZhMCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFLd0pSaEJXdlM0WXY4eW5ZbnM3d0VzIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL3V0aWwvR2VvbWV0cnlVdGlscy5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSB1dGlsO1xcblxcbnB1YmxpYyBjbGFzcyBHZW9tZXRyeVV0aWxzIHtcXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBDaGVja3MgaWYgYSBwb2ludCBpcyBpbnNpZGUgYSBjaXJjbGVcXG4gICAgICogQHBhcmFtIHBvaW50WCBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50XFxuICAgICAqIEBwYXJhbSBwb2ludFkgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxcbiAgICAgKiBAcGFyYW0gY2lyY2xlQ2VudGVyWCBYIGNvb3JkaW5hdGUgb2YgY2lyY2xlIGNlbnRlclxcbiAgICAgKiBAcGFyYW0gY2lyY2xlQ2VudGVyWSBZIGNvb3JkaW5hdGUgb2YgY2lyY2xlIGNlbnRlclxcbiAgICAgKiBAcGFyYW0gcmFkaXVzIENpcmNsZSByYWRpdXNcXG4gICAgICogQHJldHVybiB0cnVlIGlmIHBvaW50IGlzIGluc2lkZSB0aGUgY2lyY2xlXFxuICAgICAqL1xcbiAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNQb2ludEluQ2lyY2xlKGRvdWJsZSBwb2ludFgsIGRvdWJsZSBwb2ludFksIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgY2lyY2xlQ2VudGVyWCwgZG91YmxlIGNpcmNsZUNlbnRlclksIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgcmFkaXVzKSB7XFxuICAgICAgICBkb3VibGUgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3cocG9pbnRYIC0gY2lyY2xlQ2VudGVyWCwgMikgKyBcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5wb3cocG9pbnRZIC0gY2lyY2xlQ2VudGVyWSwgMikpO1xcbiAgICAgICAgcmV0dXJuIGRpc3RhbmNlIDw9IHJhZGl1cztcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xcbiAgICAgKiBAcGFyYW0geDEgWCBjb29yZGluYXRlIG9mIGZpcnN0IHBvaW50XFxuICAgICAqIEBwYXJhbSB5MSBZIGNvb3JkaW5hdGUgb2YgZmlyc3QgcG9pbnRcXG4gICAgICogQHBhcmFtIHgyIFggY29vcmRpbmF0ZSBvZiBzZWNvbmQgcG9pbnRcXG4gICAgICogQHBhcmFtIHkyIFkgY29vcmRpbmF0ZSBvZiBzZWNvbmQgcG9pbnRcXG4gICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHRoZSBwb2ludHNcXG4gICAgICovXFxuICAgIHB1YmxpYyBzdGF0aWMgZG91YmxlIGRpc3RhbmNlKGRvdWJsZSB4MSwgZG91YmxlIHkxLCBkb3VibGUgeDIsIGRvdWJsZSB5Mikge1xcbiAgICAgICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyh4MiAtIHgxLCAyKSArIE1hdGgucG93KHkyIC0geTEsIDIpKTtcXG4gICAgfVxcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJOb3cgSSB1bmRlcnN0YW5kIHRoZSBjdXJyZW50IHN0cnVjdHVyZS4gTGV0IG1lIGNyZWF0ZSBhIGRldGFpbGVkIHBsYW4gdG8gaW1wbGVtZW50IHRoZSBjb25zdHJhaW50IHRoYXQgXCJib3RoIGVuZHMgb2YgYSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXCIgYW5kIFwiYSBjaXJjbGUgY2FuIGhhdmUgb25seSBvbmUgbGluZVwiLlxuXG4jIyBBbmFseXNpcyBhbmQgUGxhblxuXG5DdXJyZW50bHksIHlvdXIgYXBwbGljYXRpb24gaXMgYSBzaW1wbGUgZHJhd2luZyB0b29sIHVzaW5nIHRoZSBGYWN0b3J5IHBhdHRlcm4uIFRvIGltcGxlbWVudCB0aGUgY29uc3RyYWludHMgeW91IG1lbnRpb25lZCwgSSBuZWVkIHRvOlxuXG4xLiAqKkNyZWF0ZSBhIGRhdGEgbW9kZWwqKiB0byB0cmFjayBkcmF3biBzaGFwZXMgYW5kIHRoZWlyIHJlbGF0aW9uc2hpcHNcbjIuICoqQWRkIGdlb21ldHJpYyBjYWxjdWxhdGlvbnMqKiB0byBkZXRlcm1pbmUgaWYgcG9pbnRzIGFyZSBpbnNpZGUgY2lyY2xlc1xuMy4gKipJbXBsZW1lbnQgdmFsaWRhdGlvbiBsb2dpYyoqIGZvciB0aGUgY29uc3RyYWludHNcbjQuICoqTW9kaWZ5IHRoZSBkcmF3aW5nIGxvZ2ljKiogdG8gZW5mb3JjZSB0aGVzZSBjb25zdHJhaW50c1xuXG4jIyBEZXRhaWxlZCBJbXBsZW1lbnRhdGlvbiBQbGFuXG5cbjEuICoqQ3JlYXRlIGEgU2hhcGVNYW5hZ2VyIGNsYXNzKiogdG8gdHJhY2sgYWxsIGRyYXduIHNoYXBlcyBhbmQgZW5mb3JjZSBjb25zdHJhaW50c1xuMi4gKipBZGQgZ2VvbWV0cmljIHV0aWxpdHkgbWV0aG9kcyoqIGZvciBwb2ludC1pbi1jaXJjbGUgY2FsY3VsYXRpb25zXG4zLiAqKkV4dGVuZCBzaGFwZSBjbGFzc2VzKiogdG8gc3RvcmUgcG9zaXRpb24gYW5kIGRpbWVuc2lvbiBpbmZvcm1hdGlvblxuNC4gKipNb2RpZnkgdGhlIE1haW4gY2xhc3MqKiB0byB1c2UgdGhlIFNoYXBlTWFuYWdlciBmb3IgdmFsaWRhdGlvblxuNS4gKipBZGQgdXNlciBmZWVkYmFjayoqIHdoZW4gY29uc3RyYWludHMgYXJlIHZpb2xhdGVkXG5cbkxldCBtZSBpbXBsZW1lbnQgdGhpcyBzdGVwIGJ5IHN0ZXA6XG5cbiMjIyBTdGVwIDE6IENyZWF0ZSBhIGdlb21ldHJpYyB1dGlsaXR5IGNsYXNzXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIHJlc3VsdCBvZiBydW5uaW5nIGBjYXQgLW5gIG9uIHNyYy9GYWN0b3J5L1JlY3RhbmdsZUZhY3RvcnkuamF2YTpcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0cHVibGljIGNsYXNzIFJlY3RhbmdsZUZhY3RvcnkgZXh0ZW5kcyBTaGFwZUZhY3Rvcnl7XG4gICAgIDRcdCAgICBAT3ZlcnJpZGVcbiAgICAgNVx0ICAgIHB1YmxpYyBTaGFwZSBnZXRTaGFwZSgpIHtcbiAgICAgNlx0ICAgICAgICByZXR1cm4gbmV3IFJlY3RhbmdsZVNoYXBlKCk7XG4gICAgIDdcdCAgICB9XG4gICAgIDhcdH1cbiAgICAgOVx0XG5Ub3RhbCBsaW5lcyBpbiBmaWxlOiA5XG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxMW5td1d2R1pLZ1Q0Z2lFdnJwNHFXQyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTQ6NDc6NDguODYzWiIsInJlc3BvbnNlX3RleHQiOiJOb3cgSSB1bmRlcnN0YW5kIHRoZSBjdXJyZW50IHN0cnVjdHVyZS4gTGV0IG1lIGNyZWF0ZSBhIGRldGFpbGVkIHBsYW4gdG8gaW1wbGVtZW50IHRoZSBjb25zdHJhaW50IHRoYXQgXCJib3RoIGVuZHMgb2YgYSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXCIgYW5kIFwiYSBjaXJjbGUgY2FuIGhhdmUgb25seSBvbmUgbGluZVwiLlxuXG4jIyBBbmFseXNpcyBhbmQgUGxhblxuXG5DdXJyZW50bHksIHlvdXIgYXBwbGljYXRpb24gaXMgYSBzaW1wbGUgZHJhd2luZyB0b29sIHVzaW5nIHRoZSBGYWN0b3J5IHBhdHRlcm4uIFRvIGltcGxlbWVudCB0aGUgY29uc3RyYWludHMgeW91IG1lbnRpb25lZCwgSSBuZWVkIHRvOlxuXG4xLiAqKkNyZWF0ZSBhIGRhdGEgbW9kZWwqKiB0byB0cmFjayBkcmF3biBzaGFwZXMgYW5kIHRoZWlyIHJlbGF0aW9uc2hpcHNcbjIuICoqQWRkIGdlb21ldHJpYyBjYWxjdWxhdGlvbnMqKiB0byBkZXRlcm1pbmUgaWYgcG9pbnRzIGFyZSBpbnNpZGUgY2lyY2xlc1xuMy4gKipJbXBsZW1lbnQgdmFsaWRhdGlvbiBsb2dpYyoqIGZvciB0aGUgY29uc3RyYWludHNcbjQuICoqTW9kaWZ5IHRoZSBkcmF3aW5nIGxvZ2ljKiogdG8gZW5mb3JjZSB0aGVzZSBjb25zdHJhaW50c1xuXG4jIyBEZXRhaWxlZCBJbXBsZW1lbnRhdGlvbiBQbGFuXG5cbjEuICoqQ3JlYXRlIGEgU2hhcGVNYW5hZ2VyIGNsYXNzKiogdG8gdHJhY2sgYWxsIGRyYXduIHNoYXBlcyBhbmQgZW5mb3JjZSBjb25zdHJhaW50c1xuMi4gKipBZGQgZ2VvbWV0cmljIHV0aWxpdHkgbWV0aG9kcyoqIGZvciBwb2ludC1pbi1jaXJjbGUgY2FsY3VsYXRpb25zXG4zLiAqKkV4dGVuZCBzaGFwZSBjbGFzc2VzKiogdG8gc3RvcmUgcG9zaXRpb24gYW5kIGRpbWVuc2lvbiBpbmZvcm1hdGlvblxuNC4gKipNb2RpZnkgdGhlIE1haW4gY2xhc3MqKiB0byB1c2UgdGhlIFNoYXBlTWFuYWdlciBmb3IgdmFsaWRhdGlvblxuNS4gKipBZGQgdXNlciBmZWVkYmFjayoqIHdoZW4gY29uc3RyYWludHMgYXJlIHZpb2xhdGVkXG5cbkxldCBtZSBpbXBsZW1lbnQgdGhpcyBzdGVwIGJ5IHN0ZXA6XG5cbiMjIyBTdGVwIDE6IENyZWF0ZSBhIGdlb21ldHJpYyB1dGlsaXR5IGNsYXNzXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMDAwZjYzOWYtMDYzOC00MTk3LWFlYTYtMzg3NWZkMDRlODk1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTFVYmFTRHo0cEJBRGZoYnBmQmhzTkYiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbW9kZWwvRHJhd25TaGFwZS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBtb2RlbDtcXG5cXG4vKipcXG4gKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBzdG9yaW5nIGluZm9ybWF0aW9uIGFib3V0IGRyYXduIHNoYXBlc1xcbiAqL1xcbnB1YmxpYyBhYnN0cmFjdCBjbGFzcyBEcmF3blNoYXBlIHtcXG4gICAgcHJvdGVjdGVkIGRvdWJsZSBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWTtcXG4gICAgcHJvdGVjdGVkIFN0cmluZyBzaGFwZVR5cGU7XFxuICAgIFxcbiAgICBwdWJsaWMgRHJhd25TaGFwZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFksIFN0cmluZyBzaGFwZVR5cGUpIHtcXG4gICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYO1xcbiAgICAgICAgdGhpcy5zdGFydFkgPSBzdGFydFk7XFxuICAgICAgICB0aGlzLmVuZFggPSBlbmRYO1xcbiAgICAgICAgdGhpcy5lbmRZID0gZW5kWTtcXG4gICAgICAgIHRoaXMuc2hhcGVUeXBlID0gc2hhcGVUeXBlO1xcbiAgICB9XFxuICAgIFxcbiAgICAvLyBHZXR0ZXJzXFxuICAgIHB1YmxpYyBkb3VibGUgZ2V0U3RhcnRYKCkgeyByZXR1cm4gc3RhcnRYOyB9XFxuICAgIHB1YmxpYyBkb3VibGUgZ2V0U3RhcnRZKCkgeyByZXR1cm4gc3RhcnRZOyB9XFxuICAgIHB1YmxpYyBkb3VibGUgZ2V0RW5kWCgpIHsgcmV0dXJuIGVuZFg7IH1cXG4gICAgcHVibGljIGRvdWJsZSBnZXRFbmRZKCkgeyByZXR1cm4gZW5kWTsgfVxcbiAgICBwdWJsaWMgU3RyaW5nIGdldFNoYXBlVHlwZSgpIHsgcmV0dXJuIHNoYXBlVHlwZTsgfVxcbiAgICBcXG4gICAgLy8gQWJzdHJhY3QgbWV0aG9kcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzcGVjaWZpYyBzaGFwZXNcXG4gICAgcHVibGljIGFic3RyYWN0IGJvb2xlYW4gY29udGFpbnNQb2ludChkb3VibGUgeCwgZG91YmxlIHkpO1xcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgU3RlcCAyOiBDcmVhdGUgc2hhcGUgZGF0YSBtb2RlbHMgdG8gc3RvcmUgcG9zaXRpb24gaW5mb3JtYXRpb25cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvdXRpbC9HZW9tZXRyeVV0aWxzLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUt3SlJoQld2UzRZdjh5blluczd3RXMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ4OjA0LjAzOVoiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgMjogQ3JlYXRlIHNoYXBlIGRhdGEgbW9kZWxzIHRvIHN0b3JlIHBvc2l0aW9uIGluZm9ybWF0aW9uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiMTZlMWU5MWQtOGRkYi00NWJiLWFjNzMtMjk3M2FiY2M5YzZkIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTRzaW1WekpuWFphS1lFWkIyRW9YdkoiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbW9kZWwvRHJhd25DaXJjbGUuamF2YVwiLCBcImZpbGVfY29udGVudFwiOiBcInBhY2thZ2UgbW9kZWw7XFxuXFxuaW1wb3J0IHV0aWwuR2VvbWV0cnlVdGlscztcXG5cXG5wdWJsaWMgY2xhc3MgRHJhd25DaXJjbGUgZXh0ZW5kcyBEcmF3blNoYXBlIHtcXG4gICAgcHJpdmF0ZSBkb3VibGUgY2VudGVyWCwgY2VudGVyWSwgcmFkaXVzO1xcbiAgICBcXG4gICAgcHVibGljIERyYXduQ2lyY2xlKGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xcbiAgICAgICAgc3VwZXIoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIFxcXCJDSVJDTEVcXFwiKTtcXG4gICAgICAgIHRoaXMucmFkaXVzID0gTWF0aC5hYnMoZW5kWCAtIHN0YXJ0WCkgLyAyO1xcbiAgICAgICAgdGhpcy5jZW50ZXJYID0gc3RhcnRYO1xcbiAgICAgICAgdGhpcy5jZW50ZXJZID0gc3RhcnRZO1xcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIGJvb2xlYW4gY29udGFpbnNQb2ludChkb3VibGUgeCwgZG91YmxlIHkpIHtcXG4gICAgICAgIHJldHVybiBHZW9tZXRyeVV0aWxzLmlzUG9pbnRJbkNpcmNsZSh4LCB5LCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgZG91YmxlIGdldENlbnRlclgoKSB7IHJldHVybiBjZW50ZXJYOyB9XFxuICAgIHB1YmxpYyBkb3VibGUgZ2V0Q2VudGVyWSgpIHsgcmV0dXJuIGNlbnRlclk7IH1cXG4gICAgcHVibGljIGRvdWJsZSBnZXRSYWRpdXMoKSB7IHJldHVybiByYWRpdXM7IH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgMzogQ3JlYXRlIHNwZWNpZmljIHNoYXBlIG1vZGVsc1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9tb2RlbC9EcmF3blNoYXBlLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTFVYmFTRHo0cEJBRGZoYnBmQmhzTkYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ4OjEzLjE2MloiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgMzogQ3JlYXRlIHNwZWNpZmljIHNoYXBlIG1vZGVsc1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImExNDEwYjdlLTc3YTMtNDBlMi1iOWM5LWFjNTIxNGE2NjQ5ZCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE3bjRpZmZBQkJBRTQzWVNQNktuOFdtIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL21vZGVsL0RyYXduTGluZS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBtb2RlbDtcXG5cXG5wdWJsaWMgY2xhc3MgRHJhd25MaW5lIGV4dGVuZHMgRHJhd25TaGFwZSB7XFxuICAgIFxcbiAgICBwdWJsaWMgRHJhd25MaW5lKGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xcbiAgICAgICAgc3VwZXIoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIFxcXCJMSU5FXFxcIik7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xcbiAgICAgICAgLy8gRm9yIGxpbmVzLCB3ZSBkb24ndCB0eXBpY2FsbHkgY2hlY2sgaWYgdGhleSBjb250YWluIHBvaW50c1xcbiAgICAgICAgLy8gVGhpcyBtZXRob2QgaXMgbWFpbmx5IHVzZWQgZm9yIGNpcmNsZXNcXG4gICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEdldCB0aGUgc3RhcnQgcG9pbnQgb2YgdGhlIGxpbmVcXG4gICAgICovXFxuICAgIHB1YmxpYyBkb3VibGVbXSBnZXRTdGFydFBvaW50KCkge1xcbiAgICAgICAgcmV0dXJuIG5ldyBkb3VibGVbXXtzdGFydFgsIHN0YXJ0WX07XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBHZXQgdGhlIGVuZCBwb2ludCBvZiB0aGUgbGluZVxcbiAgICAgKi9cXG4gICAgcHVibGljIGRvdWJsZVtdIGdldEVuZFBvaW50KCkge1xcbiAgICAgICAgcmV0dXJuIG5ldyBkb3VibGVbXXtlbmRYLCBlbmRZfTtcXG4gICAgfVxcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL21vZGVsL0RyYXduQ2lyY2xlLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTRzaW1WekpuWFphS1lFWkIyRW9YdkoifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ4OjE5LjQ0OVoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImY5MGM4NDAzLTQ0ODMtNGJjYS04NDlkLWMxOWYwYTQxNzQwYyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFTMkdqTUZUdkdTb0VyRVh0REU2a2h2IiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL21hbmFnZXIvU2hhcGVNYW5hZ2VyLmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIG1hbmFnZXI7XFxuXFxuaW1wb3J0IG1vZGVsLio7XFxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcblxcbnB1YmxpYyBjbGFzcyBTaGFwZU1hbmFnZXIge1xcbiAgICBwcml2YXRlIExpc3Q8RHJhd25TaGFwZT4gc2hhcGVzO1xcbiAgICBcXG4gICAgcHVibGljIFNoYXBlTWFuYWdlcigpIHtcXG4gICAgICAgIHRoaXMuc2hhcGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBWYWxpZGF0ZXMgaWYgYSBsaW5lIGNhbiBiZSBkcmF3biBhY2NvcmRpbmcgdG8gdGhlIGNvbnN0cmFpbnRzOlxcbiAgICAgKiAtIEJvdGggZW5kcyBvZiB0aGUgbGluZSBtdXN0IGJlIGluc2lkZSBhIGNpcmNsZVxcbiAgICAgKiAtIEEgY2lyY2xlIGNhbiBoYXZlIG9ubHkgb25lIGxpbmVcXG4gICAgICovXFxuICAgIHB1YmxpYyBWYWxpZGF0aW9uUmVzdWx0IHZhbGlkYXRlTGluZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIERyYXduQ2lyY2xlIHN0YXJ0Q2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChzdGFydFgsIHN0YXJ0WSk7XFxuICAgICAgICBEcmF3bkNpcmNsZSBlbmRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGVuZFgsIGVuZFkpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBDaGVjayBpZiBib3RoIGVuZHMgYXJlIGluc2lkZSBjaXJjbGVzXFxuICAgICAgICBpZiAoc3RhcnRDaXJjbGUgPT0gbnVsbCkge1xcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXFxcIkxlIHBvaW50IGRlIGRcXHUwMGU5cGFydCBkZSBsYSBsaWduZSBkb2l0IFxcdTAwZWF0cmUgXFx1MDBlMCBsJ2ludFxcdTAwZTlyaWV1ciBkJ3VuIGNlcmNsZVxcXCIpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBpZiAoZW5kQ2lyY2xlID09IG51bGwpIHtcXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFxcXCJMZSBwb2ludCBkJ2Fycml2XFx1MDBlOWUgZGUgbGEgbGlnbmUgZG9pdCBcXHUwMGVhdHJlIFxcdTAwZTAgbCdpbnRcXHUwMGU5cmlldXIgZCd1biBjZXJjbGVcXFwiKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ2hlY2sgaWYgY2lyY2xlcyBhbHJlYWR5IGhhdmUgbGluZXNcXG4gICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKHN0YXJ0Q2lyY2xlKSkge1xcbiAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXFxcIkxlIGNlcmNsZSBkZSBkXFx1MDBlOXBhcnQgY29udGllbnQgZFxcdTAwZTlqXFx1MDBlMCB1bmUgbGlnbmVcXFwiKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgaWYgKGNpcmNsZUhhc0xpbmUoZW5kQ2lyY2xlKSAmJiAhc3RhcnRDaXJjbGUuZXF1YWxzKGVuZENpcmNsZSkpIHtcXG4gICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFxcXCJMZSBjZXJjbGUgZCdhcnJpdlxcdTAwZTllIGNvbnRpZW50IGRcXHUwMGU5alxcdTAwZTAgdW5lIGxpZ25lXFxcIik7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh0cnVlLCBcXFwiTGlnbmUgdmFsaWRlXFxcIik7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBGaW5kcyBhIGNpcmNsZSB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludFxcbiAgICAgKi9cXG4gICAgcHJpdmF0ZSBEcmF3bkNpcmNsZSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xcbiAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XFxuICAgICAgICAgICAgaWYgKHNoYXBlIGluc3RhbmNlb2YgRHJhd25DaXJjbGUgJiYgc2hhcGUuY29udGFpbnNQb2ludCh4LCB5KSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gKERyYXduQ2lyY2xlKSBzaGFwZTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENoZWNrcyBpZiBhIGNpcmNsZSBhbHJlYWR5IGhhcyBhIGxpbmVcXG4gICAgICovXFxuICAgIHByaXZhdGUgYm9vbGVhbiBjaXJjbGVIYXNMaW5lKERyYXduQ2lyY2xlIGNpcmNsZSkge1xcbiAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XFxuICAgICAgICAgICAgaWYgKHNoYXBlIGluc3RhbmNlb2YgRHJhd25MaW5lKSB7XFxuICAgICAgICAgICAgICAgIERyYXduTGluZSBsaW5lID0gKERyYXduTGluZSkgc2hhcGU7XFxuICAgICAgICAgICAgICAgIGRvdWJsZVtdIHN0YXJ0UG9pbnQgPSBsaW5lLmdldFN0YXJ0UG9pbnQoKTtcXG4gICAgICAgICAgICAgICAgZG91YmxlW10gZW5kUG9pbnQgPSBsaW5lLmdldEVuZFBvaW50KCk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBpZiAoY2lyY2xlLmNvbnRhaW5zUG9pbnQoc3RhcnRQb2ludFswXSwgc3RhcnRQb2ludFsxXSkgfHwgXFxuICAgICAgICAgICAgICAgICAgICBjaXJjbGUuY29udGFpbnNQb2ludChlbmRQb2ludFswXSwgZW5kUG9pbnRbMV0pKSB7XFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEFkZHMgYSBzaGFwZSB0byB0aGUgbWFuYWdlclxcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgYWRkU2hhcGUoRHJhd25TaGFwZSBzaGFwZSkge1xcbiAgICAgICAgc2hhcGVzLmFkZChzaGFwZSk7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBHZXRzIGFsbCBzaGFwZXNcXG4gICAgICovXFxuICAgIHB1YmxpYyBMaXN0PERyYXduU2hhcGU+IGdldFNoYXBlcygpIHtcXG4gICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXN0PD4oc2hhcGVzKTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENsZWFycyBhbGwgc2hhcGVzXFxuICAgICAqL1xcbiAgICBwdWJsaWMgdm9pZCBjbGVhclNoYXBlcygpIHtcXG4gICAgICAgIHNoYXBlcy5jbGVhcigpO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogUmVzdWx0IGNsYXNzIGZvciB2YWxpZGF0aW9uIG9wZXJhdGlvbnNcXG4gICAgICovXFxuICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVmFsaWRhdGlvblJlc3VsdCB7XFxuICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gdmFsaWQ7XFxuICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBtZXNzYWdlO1xcbiAgICAgICAgXFxuICAgICAgICBwdWJsaWMgVmFsaWRhdGlvblJlc3VsdChib29sZWFuIHZhbGlkLCBTdHJpbmcgbWVzc2FnZSkge1xcbiAgICAgICAgICAgIHRoaXMudmFsaWQgPSB2YWxpZDtcXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKCkgeyByZXR1cm4gdmFsaWQ7IH1cXG4gICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0TWVzc2FnZSgpIHsgcmV0dXJuIG1lc3NhZ2U7IH1cXG4gICAgfVxcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgU3RlcCA0OiBDcmVhdGUgdGhlIFNoYXBlTWFuYWdlciB0byBlbmZvcmNlIGNvbnN0cmFpbnRzXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL21vZGVsL0RyYXduTGluZS5qYXZhfSIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE3bjRpZmZBQkJBRTQzWVNQNktuOFdtIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNDo0ODoyNS44MDdaIiwicmVzcG9uc2VfdGV4dCI6IiMjIyBTdGVwIDQ6IENyZWF0ZSB0aGUgU2hhcGVNYW5hZ2VyIHRvIGVuZm9yY2UgY29uc3RyYWludHNcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI5MmQzMjNlYS02YTU0LTQzODctOTAwMC1lZjczMzI4ODFiMjgiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxN1k2TWZqSmlIU1U5N1oxaGpSWGpSRSIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJpbnN0cnVjdGlvbl9yZW1pbmRlclwiOiBcIkFMV0FZUyBCUkVBSyBET1dOIEVESVRTIElOVE8gU01BTExFUiBDSFVOS1MgT0YgQVQgTU9TVCAyMDAgTElORVMgRUFDSC5cIiwgXCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL01haW4uamF2YVwiLCBcIm9sZF9zdHJcIjogXCJpbXBvcnQgRmFjdG9yeS4qO1xcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XFxuaW1wb3J0IGphdmFmeC5nZW9tZXRyeS5JbnNldHM7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5CdXR0b247XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xcbmltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuQ29sb3I7XFxuaW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogMTIsIFwibmV3X3N0clwiOiBcImltcG9ydCBGYWN0b3J5Lio7XFxuaW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xcbmltcG9ydCBtb2RlbC4qO1xcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XFxuaW1wb3J0IGphdmFmeC5nZW9tZXRyeS5JbnNldHM7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xcbmltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkJvcmRlclBhbmU7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNTogVXBkYXRlIHRoZSBNYWluIGNsYXNzIHRvIHVzZSB0aGUgU2hhcGVNYW5hZ2VyXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL21hbmFnZXIvU2hhcGVNYW5hZ2VyLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVMyR2pNRlR2R1NvRXJFWHRERTZraHYifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ4OjQ0LjAyMFoiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgNTogVXBkYXRlIHRoZSBNYWluIGNsYXNzIHRvIHVzZSB0aGUgU2hhcGVNYW5hZ2VyXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNzlkMTgzYmItNmUwOC00MGJkLWFlNTgtYjQxN2IwOGI0YmJhIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUVTWEt0MWpVam0yY0dEaGMzeXg2M1IiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25fcmVtaW5kZXJcIjogXCJBTFdBWVMgQlJFQUsgRE9XTiBFRElUUyBJTlRPIFNNQUxMRVIgQ0hVTktTIE9GIEFUIE1PU1QgMjAwIExJTkVTIEVBQ0guXCIsIFwiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9NYWluLmphdmFcIiwgXCJvbGRfc3RyXCI6IFwicHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XFxuICAgIHByaXZhdGUgU2hhcGVGYWN0b3J5IGN1cnJlbnRGYWN0b3J5O1xcbiAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDE3LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDE5LCBcIm5ld19zdHJcIjogXCJwdWJsaWMgY2xhc3MgTWFpbiBleHRlbmRzIEFwcGxpY2F0aW9uIHtcXG4gICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XFxuICAgIHByaXZhdGUgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlcjtcXG4gICAgcHJpdmF0ZSBkb3VibGUgc3RhcnRYLCBzdGFydFk7XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAgMVx0XG4gICAgIDJcdGltcG9ydCBGYWN0b3J5Lio7XG4gICAgIDNcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNFx0aW1wb3J0IG1vZGVsLio7XG4gICAgIDVcdGltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG4gICAgIDZcdGltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuICAgICA3XHRpbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkFsZXJ0O1xuICAgIDExXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xuICAgIDEyXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5Cb3JkZXJQYW5lO1xuICAgIDEzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDE0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xuICAgIDE1XHRpbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuICAgIDE2XHRcbiAgICAxN1x0cHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgMThcdCAgICBwcml2YXRlIFNoYXBlRmFjdG9yeSBjdXJyZW50RmFjdG9yeTtcbiAgICAxOVx0ICAgIHByaXZhdGUgZG91YmxlIHN0YXJ0WCwgc3RhcnRZO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxN1k2TWZqSmlIU1U5N1oxaGpSWGpSRSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTQ6NDg6NTMuNzQ0WiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiM2Q4ZTU3NmQtMzkwYy00NDRjLTg3OGItZWJiMjBhMDA0MTY1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVBLREJSMzFhNU1pQVVKRzJRdUhiRFAiLCJ0b29sX25hbWUiOiJzdHItcmVwbGFjZS1lZGl0b3IiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25fcmVtaW5kZXJcIjogXCJBTFdBWVMgQlJFQUsgRE9XTiBFRElUUyBJTlRPIFNNQUxMRVIgQ0hVTktTIE9GIEFUIE1PU1QgMjAwIExJTkVTIEVBQ0guXCIsIFwiY29tbWFuZFwiOiBcInN0cl9yZXBsYWNlXCIsIFwicGF0aFwiOiBcInNyYy9NYWluLmphdmFcIiwgXCJvbGRfc3RyXCI6IFwiICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcXG4gICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcXFwiRGVzc2luIGRlIEZvcm1lcyBHXFx1MDBlOW9tXFx1MDBlOXRyaXF1ZXNcXFwiKTtcXG5cXG4gICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcXG4gICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcXG4gICAgICAgIEdyYXBoaWNzQ29udGV4dCBnYyA9IGNhbnZhcy5nZXRHcmFwaGljc0NvbnRleHQyRCgpO1xcbiAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcXG4gICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDIyLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDMwLCBcIm5ld19zdHJcIjogXCIgICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xcbiAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFxcXCJEZXNzaW4gZGUgRm9ybWVzIEdcXHUwMGU5b21cXHUwMGU5dHJpcXVlc1xcXCIpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBJbml0aWFsaXplIHNoYXBlIG1hbmFnZXJcXG4gICAgICAgIHNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcXG5cXG4gICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcXG4gICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcXG4gICAgICAgIEdyYXBoaWNzQ29udGV4dCBnYyA9IGNhbnZhcy5nZXRHcmFwaGljc0NvbnRleHQyRCgpO1xcbiAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcXG4gICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9NYWluLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDEzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDE0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xuICAgIDE1XHRpbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuICAgIDE2XHRcbiAgICAxN1x0cHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgMThcdCAgICBwcml2YXRlIFNoYXBlRmFjdG9yeSBjdXJyZW50RmFjdG9yeTtcbiAgICAxOVx0ICAgIHByaXZhdGUgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlcjtcbiAgICAyMFx0ICAgIHByaXZhdGUgZG91YmxlIHN0YXJ0WCwgc3RhcnRZO1xuICAgIDIxXHRcbiAgICAyMlx0ICAgIEBPdmVycmlkZVxuICAgIDIzXHQgICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgMjRcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFwiRGVzc2luIGRlIEZvcm1lcyBHw6lvbcOpdHJpcXVlc1wiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUVTWEt0MWpVam0yY0dEaGMzeXg2M1IifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ5OjAwLjA2MVoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImQyYzU5YTllLTJhOWMtNGUxMS04ZTgxLTk0NzBlZjJkYjA1YiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFDNnZob01BSmZEZkJmZHBUZXc5QUJzIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uX3JlbWluZGVyXCI6IFwiQUxXQVlTIEJSRUFLIERPV04gRURJVFMgSU5UTyBTTUFMTEVSIENIVU5LUyBPRiBBVCBNT1NUIDIwMCBMSU5FUyBFQUNILlwiLCBcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvTWFpbi5qYXZhXCIsIFwib2xkX3N0clwiOiBcIiAgICAgICAgY2FudmFzLnNldE9uTW91c2VSZWxlYXNlZChlIC0+IHtcXG4gICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICBTaGFwZSBzaGFwZSA9IGN1cnJlbnRGYWN0b3J5LmdldFNoYXBlKCk7XFxuICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlLmdldFgoKSwgZS5nZXRZKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0pO1wiLCBcIm9sZF9zdHJfc3RhcnRfbGluZV9udW1iZXJcIjogNjEsIFwib2xkX3N0cl9lbmRfbGluZV9udW1iZXJcIjogNjUsIFwibmV3X3N0clwiOiBcIiAgICAgICAgY2FudmFzLnNldE9uTW91c2VSZWxlYXNlZChlIC0+IHtcXG4gICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICBkb3VibGUgZW5kWCA9IGUuZ2V0WCgpO1xcbiAgICAgICAgICAgICAgICBkb3VibGUgZW5kWSA9IGUuZ2V0WSgpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgZHJhd2luZyBhIGxpbmUgYW5kIHZhbGlkYXRlIGNvbnN0cmFpbnRzXFxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmFjdG9yeSBpbnN0YW5jZW9mIExpbmVGYWN0b3J5KSB7XFxuICAgICAgICAgICAgICAgICAgICBTaGFwZU1hbmFnZXIuVmFsaWRhdGlvblJlc3VsdCByZXN1bHQgPSBzaGFwZU1hbmFnZXIudmFsaWRhdGVMaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmlzVmFsaWQoKSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBbGVydChcXFwiQ29udHJhaW50ZSB2aW9sXFx1MDBlOWVcXFwiLCByZXN1bHQuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIC8vIERyYXcgdGhlIHNoYXBlXFxuICAgICAgICAgICAgICAgIFNoYXBlIHNoYXBlID0gY3VycmVudEZhY3RvcnkuZ2V0U2hhcGUoKTtcXG4gICAgICAgICAgICAgICAgc2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRvIHNoYXBlIG1hbmFnZXIgZm9yIHRyYWNraW5nXFxuICAgICAgICAgICAgICAgIERyYXduU2hhcGUgZHJhd25TaGFwZSA9IGNyZWF0ZURyYXduU2hhcGUoY3VycmVudEZhY3RvcnksIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICAgICAgaWYgKGRyYXduU2hhcGUgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduU2hhcGUpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfSk7XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTm93IEkgbmVlZCB0byB1cGRhdGUgdGhlIG1vdXNlIGV2ZW50IGhhbmRsZXJzIHRvIGluY2x1ZGUgdmFsaWRhdGlvbiBhbmQgc2hhcGUgdHJhY2tpbmc6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9NYWluLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE4XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTlcdCAgICBwcml2YXRlIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XG4gICAgMjBcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMVx0XG4gICAgMjJcdCAgICBAT3ZlcnJpZGVcbiAgICAyM1x0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDI0XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjVcdFxuICAgIDI2XHQgICAgICAgIC8vIEluaXRpYWxpemUgc2hhcGUgbWFuYWdlclxuICAgIDI3XHQgICAgICAgIHNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcbiAgICAyOFx0XG4gICAgMjlcdCAgICAgICAgLy8gQ3JlYXRlIGNhbnZhcyBmb3IgZHJhd2luZ1xuICAgIDMwXHQgICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAzMVx0ICAgICAgICBHcmFwaGljc0NvbnRleHQgZ2MgPSBjYW52YXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAzMlx0ICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xuICAgIDMzXHQgICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXG4gICAgMzZcdCAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXCJSZWN0YW5nbGVcIik7XG4gICAgMzdcdCAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFQS0RCUjMxYTVNaUFVSkcyUXVIYkRQIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNDo0OTowNy45NzBaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gdXBkYXRlIHRoZSBtb3VzZSBldmVudCBoYW5kbGVycyB0byBpbmNsdWRlIHZhbGlkYXRpb24gYW5kIHNoYXBlIHRyYWNraW5nOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjFlNDM4YTdlLWFjMGEtNGRmMC1hNzJmLTBlYzBmYTRiN2QxYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFUQ3hNUHZ3dkJNWHNGcEQ3c0dyamdZIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uX3JlbWluZGVyXCI6IFwiQUxXQVlTIEJSRUFLIERPV04gRURJVFMgSU5UTyBTTUFMTEVSIENIVU5LUyBPRiBBVCBNT1NUIDIwMCBMSU5FUyBFQUNILlwiLCBcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvTWFpbi5qYXZhXCIsIFwib2xkX3N0clwiOiBcIiAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XFxuICAgICAgICBsYXVuY2goYXJncyk7XFxuICAgIH1cXG59XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA5NiwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA5OSwgXCJuZXdfc3RyXCI6IFwiICAgIC8qKlxcbiAgICAgKiBDcmVhdGVzIGEgRHJhd25TaGFwZSBvYmplY3QgYmFzZWQgb24gdGhlIGZhY3RvcnkgdHlwZVxcbiAgICAgKi9cXG4gICAgcHJpdmF0ZSBEcmF3blNoYXBlIGNyZWF0ZURyYXduU2hhcGUoU2hhcGVGYWN0b3J5IGZhY3RvcnksIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xcbiAgICAgICAgaWYgKGZhY3RvcnkgaW5zdGFuY2VvZiBDaXJjbGVGYWN0b3J5KSB7XFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkge1xcbiAgICAgICAgICAgIHJldHVybiBuZXcgRHJhd25MaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgIH1cXG4gICAgICAgIC8vIFdlIGRvbid0IHRyYWNrIHJlY3RhbmdsZXMgZm9yIHRoaXMgY29uc3RyYWludCBzeXN0ZW1cXG4gICAgICAgIHJldHVybiBudWxsO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogU2hvd3MgYW4gYWxlcnQgZGlhbG9nIHRvIHRoZSB1c2VyXFxuICAgICAqL1xcbiAgICBwcml2YXRlIHZvaWQgc2hvd0FsZXJ0KFN0cmluZyB0aXRsZSwgU3RyaW5nIG1lc3NhZ2UpIHtcXG4gICAgICAgIEFsZXJ0IGFsZXJ0ID0gbmV3IEFsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5XQVJOSU5HKTtcXG4gICAgICAgIGFsZXJ0LnNldFRpdGxlKHRpdGxlKTtcXG4gICAgICAgIGFsZXJ0LnNldEhlYWRlclRleHQobnVsbCk7XFxuICAgICAgICBhbGVydC5zZXRDb250ZW50VGV4dChtZXNzYWdlKTtcXG4gICAgICAgIGFsZXJ0LnNob3dBbmRXYWl0KCk7XFxuICAgIH1cXG5cXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xcbiAgICAgICAgbGF1bmNoKGFyZ3MpO1xcbiAgICB9XFxufVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ik5vdyBJIG5lZWQgdG8gYWRkIHRoZSBoZWxwZXIgbWV0aG9kcyBhdCB0aGUgZW5kIG9mIHRoZSBNYWluIGNsYXNzOlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA2MFx0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNjFcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDYyXHQgICAgICAgIH0pO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDY1XHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDY2XHQgICAgICAgICAgICAgICAgZG91YmxlIGVuZFggPSBlLmdldFgoKTtcbiAgICA2N1x0ICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRZID0gZS5nZXRZKCk7XG4gICAgNjhcdFxuICAgIDY5XHQgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgZHJhd2luZyBhIGxpbmUgYW5kIHZhbGlkYXRlIGNvbnN0cmFpbnRzXG4gICAgNzBcdCAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkge1xuICAgIDcxXHQgICAgICAgICAgICAgICAgICAgIFNoYXBlTWFuYWdlci5WYWxpZGF0aW9uUmVzdWx0IHJlc3VsdCA9IHNoYXBlTWFuYWdlci52YWxpZGF0ZUxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDcyXHQgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmlzVmFsaWQoKSkge1xuICAgIDczXHQgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCJDb250cmFpbnRlIHZpb2zDqWVcIiwgcmVzdWx0LmdldE1lc3NhZ2UoKSk7XG4gICAgNzRcdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3NVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAgNzZcdCAgICAgICAgICAgICAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgc2hhcGVcbiAgICA3OVx0ICAgICAgICAgICAgICAgIFNoYXBlIHNoYXBlID0gY3VycmVudEZhY3RvcnkuZ2V0U2hhcGUoKTtcbiAgICA4MFx0ICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcbiAgICA4M1x0ICAgICAgICAgICAgICAgIERyYXduU2hhcGUgZHJhd25TaGFwZSA9IGNyZWF0ZURyYXduU2hhcGUoY3VycmVudEZhY3RvcnksIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA4NFx0ICAgICAgICAgICAgICAgIGlmIChkcmF3blNoYXBlICE9IG51bGwpIHtcbiAgICA4NVx0ICAgICAgICAgICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25TaGFwZSk7XG4gICAgODZcdCAgICAgICAgICAgICAgICB9XG4gICAgODdcdCAgICAgICAgICAgIH1cbiAgICA4OFx0ICAgICAgICB9KTtcbiAgICA4OVx0XG4gICAgOTBcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgOTFcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDkyXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFDNnZob01BSmZEZkJmZHBUZXc5QUJzIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNDo0OToxOC40NDdaIiwicmVzcG9uc2VfdGV4dCI6Ik5vdyBJIG5lZWQgdG8gYWRkIHRoZSBoZWxwZXIgbWV0aG9kcyBhdCB0aGUgZW5kIG9mIHRoZSBNYWluIGNsYXNzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjlkZTdmMTQ1LWI1ZTctNDU1Yi04ZDU2LWY4ODVlNmI4ZDIzMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE2eFNNTTg1QjNBYnJCYXhVQ1JOZzdQIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uX3JlbWluZGVyXCI6IFwiQUxXQVlTIEJSRUFLIERPV04gRURJVFMgSU5UTyBTTUFMTEVSIENIVU5LUyBPRiBBVCBNT1NUIDIwMCBMSU5FUyBFQUNILlwiLCBcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvTWFpbi5qYXZhXCIsIFwib2xkX3N0clwiOiBcIiAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXFxuICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcXFwiUmVjdGFuZ2xlXFxcIik7XFxuICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcXFwiQ2VyY2xlXFxcIik7XFxuICAgICAgICBCdXR0b24gbGluZUJ0biA9IG5ldyBCdXR0b24oXFxcIkxpZ25lXFxcIik7XFxuXFxuICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcXG4gICAgICAgIEhCb3ggdG9vbGJhciA9IG5ldyBIQm94KDEwKTtcXG4gICAgICAgIHRvb2xiYXIuc2V0UGFkZGluZyhuZXcgSW5zZXRzKDEwKSk7XFxuICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcIiwgXCJvbGRfc3RyX3N0YXJ0X2xpbmVfbnVtYmVyXCI6IDM1LCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDQyLCBcIm5ld19zdHJcIjogXCIgICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xcbiAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXFxcIlJlY3RhbmdsZVxcXCIpO1xcbiAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXFxcIkNlcmNsZVxcXCIpO1xcbiAgICAgICAgQnV0dG9uIGxpbmVCdG4gPSBuZXcgQnV0dG9uKFxcXCJMaWduZVxcXCIpO1xcbiAgICAgICAgQnV0dG9uIGNsZWFyQnRuID0gbmV3IEJ1dHRvbihcXFwiRWZmYWNlclxcXCIpO1xcblxcbiAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXIgd2l0aCBidXR0b25zXFxuICAgICAgICBIQm94IHRvb2xiYXIgPSBuZXcgSEJveCgxMCk7XFxuICAgICAgICB0b29sYmFyLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xcbiAgICAgICAgdG9vbGJhci5nZXRDaGlsZHJlbigpLmFkZEFsbChyZWN0YW5nbGVCdG4sIGNpcmNsZUJ0biwgbGluZUJ0biwgY2xlYXJCdG4pO1wifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBhbHNvIGFkZCBhIGNsZWFyIGJ1dHRvbiB0byByZXNldCB0aGUgY2FudmFzIGFuZCBjb25zdHJhaW50czpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL01haW4uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgOTJcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFNjZW5lKHNjZW5lKTtcbiAgICA5M1x0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2hvdygpO1xuICAgIDk0XHQgICAgfVxuICAgIDk1XHRcbiAgICA5Nlx0ICAgIC8qKlxuICAgIDk3XHQgICAgICogQ3JlYXRlcyBhIERyYXduU2hhcGUgb2JqZWN0IGJhc2VkIG9uIHRoZSBmYWN0b3J5IHR5cGVcbiAgICA5OFx0ICAgICAqL1xuICAgIDk5XHQgICAgcHJpdmF0ZSBEcmF3blNoYXBlIGNyZWF0ZURyYXduU2hhcGUoU2hhcGVGYWN0b3J5IGZhY3RvcnksIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgMTAwXHQgICAgICAgIGlmIChmYWN0b3J5IGluc3RhbmNlb2YgQ2lyY2xlRmFjdG9yeSkge1xuICAgMTAxXHQgICAgICAgICAgICByZXR1cm4gbmV3IERyYXduQ2lyY2xlKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgIDEwMlx0ICAgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkge1xuICAgMTAzXHQgICAgICAgICAgICByZXR1cm4gbmV3IERyYXduTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAxMDRcdCAgICAgICAgfVxuICAgMTA1XHQgICAgICAgIC8vIFdlIGRvbid0IHRyYWNrIHJlY3RhbmdsZXMgZm9yIHRoaXMgY29uc3RyYWludCBzeXN0ZW1cbiAgIDEwNlx0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgIDEwN1x0ICAgIH1cbiAgIDEwOFx0XG4gICAxMDlcdCAgICAvKipcbiAgIDExMFx0ICAgICAqIFNob3dzIGFuIGFsZXJ0IGRpYWxvZyB0byB0aGUgdXNlclxuICAgMTExXHQgICAgICovXG4gICAxMTJcdCAgICBwcml2YXRlIHZvaWQgc2hvd0FsZXJ0KFN0cmluZyB0aXRsZSwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgIDExM1x0ICAgICAgICBBbGVydCBhbGVydCA9IG5ldyBBbGVydChBbGVydC5BbGVydFR5cGUuV0FSTklORyk7XG4gICAxMTRcdCAgICAgICAgYWxlcnQuc2V0VGl0bGUodGl0bGUpO1xuICAgMTE1XHQgICAgICAgIGFsZXJ0LnNldEhlYWRlclRleHQobnVsbCk7XG4gICAxMTZcdCAgICAgICAgYWxlcnQuc2V0Q29udGVudFRleHQobWVzc2FnZSk7XG4gICAxMTdcdCAgICAgICAgYWxlcnQuc2hvd0FuZFdhaXQoKTtcbiAgIDExOFx0ICAgIH1cbiAgIDExOVx0XG4gICAxMjBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAxMjFcdCAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgMTIyXHQgICAgfVxuICAgMTIzXHR9XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFUQ3hNUHZ3dkJNWHNGcEQ3c0dyamdZIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNDo0OToyOC4zNzZaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBhbHNvIGFkZCBhIGNsZWFyIGJ1dHRvbiB0byByZXNldCB0aGUgY2FudmFzIGFuZCBjb25zdHJhaW50czpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJkNzc0ZjM4Yi1lNjg2LTQyMjYtYmFhOS03YmY4NWNhYzU5ZWIiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxM0daV3l2WVNLQVNTRDFncFNWR3NVQyIsInRvb2xfbmFtZSI6InN0ci1yZXBsYWNlLWVkaXRvciIsImlucHV0X2pzb24iOiJ7XCJpbnN0cnVjdGlvbl9yZW1pbmRlclwiOiBcIkFMV0FZUyBCUkVBSyBET1dOIEVESVRTIElOVE8gU01BTExFUiBDSFVOS1MgT0YgQVQgTU9TVCAyMDAgTElORVMgRUFDSC5cIiwgXCJjb21tYW5kXCI6IFwic3RyX3JlcGxhY2VcIiwgXCJwYXRoXCI6IFwic3JjL01haW4uamF2YVwiLCBcIm9sZF9zdHJcIjogXCIgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xcbiAgICAgICAgcmVjdGFuZ2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpKTtcXG4gICAgICAgIGNpcmNsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IENpcmNsZUZhY3RvcnkoKSk7XFxuICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiA1MSwgXCJvbGRfc3RyX2VuZF9saW5lX251bWJlclwiOiA1NCwgXCJuZXdfc3RyXCI6IFwiICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnMgZm9yIGJ1dHRvbnNcXG4gICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XFxuICAgICAgICBjaXJjbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBDaXJjbGVGYWN0b3J5KCkpO1xcbiAgICAgICAgbGluZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IExpbmVGYWN0b3J5KCkpO1xcbiAgICAgICAgY2xlYXJCdG4uc2V0T25BY3Rpb24oZSAtPiB7XFxuICAgICAgICAgICAgZ2MuY2xlYXJSZWN0KDAsIDAsIGNhbnZhcy5nZXRXaWR0aCgpLCBjYW52YXMuZ2V0SGVpZ2h0KCkpO1xcbiAgICAgICAgICAgIHNoYXBlTWFuYWdlci5jbGVhclNoYXBlcygpO1xcbiAgICAgICAgfSk7XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICAzMVx0ICAgICAgICBHcmFwaGljc0NvbnRleHQgZ2MgPSBjYW52YXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAzMlx0ICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xuICAgIDMzXHQgICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXG4gICAgMzZcdCAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXCJSZWN0YW5nbGVcIik7XG4gICAgMzdcdCAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG4gICAgMzhcdCAgICAgICAgQnV0dG9uIGxpbmVCdG4gPSBuZXcgQnV0dG9uKFwiTGlnbmVcIik7XG4gICAgMzlcdCAgICAgICAgQnV0dG9uIGNsZWFyQnRuID0gbmV3IEJ1dHRvbihcIkVmZmFjZXJcIik7XG4gICAgNDBcdFxuICAgIDQxXHQgICAgICAgIC8vIENyZWF0ZSB0b29sYmFyIHdpdGggYnV0dG9uc1xuICAgIDQyXHQgICAgICAgIEhCb3ggdG9vbGJhciA9IG5ldyBIQm94KDEwKTtcbiAgICA0M1x0ICAgICAgICB0b29sYmFyLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xuICAgIDQ0XHQgICAgICAgIHRvb2xiYXIuZ2V0Q2hpbGRyZW4oKS5hZGRBbGwocmVjdGFuZ2xlQnRuLCBjaXJjbGVCdG4sIGxpbmVCdG4sIGNsZWFyQnRuKTtcbiAgICA0NVx0XG4gICAgNDZcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICA0N1x0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQ4XHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuXG5SZXZpZXcgdGhlIGNoYW5nZXMgYW5kIG1ha2Ugc3VyZSB0aGV5IGFyZSBhcyBleHBlY3RlZCAoY29ycmVjdCBpbmRlbnRhdGlvbiwgbm8gZHVwbGljYXRlIGxpbmVzLCBldGMpLlxuRWRpdCB0aGUgZmlsZSBhZ2FpbiBpZiBuZWNlc3NhcnkuXG4iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNnhTTU04NUIzQWJyQmF4VUNSTmc3UCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTQ6NDk6NDAuMTY2WiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6ImNhbmNlbGxlZCIsInJlcXVlc3RfaWQiOiJ0ZW1wLWZlLWUxNDRmNjFjLTg0YTMtNGY2My1iYWJmLTMxZTc4OGQ2ODI0NSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0N1x0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQ4XHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQ5XHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDUyXHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNTNcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA1NFx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNTVcdCAgICAgICAgY2xlYXJCdG4uc2V0T25BY3Rpb24oZSAtPiB7XG4gICAgNTZcdCAgICAgICAgICAgIGdjLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMuZ2V0V2lkdGgoKSwgY2FudmFzLmdldEhlaWdodCgpKTtcbiAgICA1N1x0ICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmNsZWFyU2hhcGVzKCk7XG4gICAgNThcdCAgICAgICAgfSk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNjFcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDYyXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTNHWld5dllTS0FTU0QxZ3BTVkdzVUMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE0OjQ5OjQ3Ljk4N1oifSx7InJlcXVlc3RfaWQiOiIwNzlkZWJmOS03ZTc3LTRmMjMtYjI1Yy1mNGY3ZWY0ZGVmNTQiLCJzdGF0dXMiOiJjYW5jZWxsZWQiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLXR1cm4tZGVsaW1pdGVyIn0seyJyZXF1ZXN0X2lkIjoiY2NhMTEzNGQtYjNjYy00ZmExLWEwYWEtZDBkZWI5N2Q1ZTYzIiwidXVpZCI6IjJiOWQ4NTU3LWFiMGItNGFlMC1iNjNlLWU4ZjU0ZDdiN2Q4MiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0ODUzMDAxNDcxMCwidG9UaW1lc3RhbXAiOjE3NDg1MzAxODg5MzksInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiNTczMTliNjktYzY5My00MjI0LTgzYWYtZjc0MDQ3ODBiMzYxIiwidXVpZCI6IjhhMjYwYzk0LThkMmEtNDBmNS1hN2JjLTY5NTg0OGNkNzg1MiIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtY2hlY2twb2ludC1kZWxpbWl0ZXIiLCJzdGF0dXMiOiJzdWNjZXNzIiwiZnJvbVRpbWVzdGFtcCI6MTc0ODUzMDE4ODkzOSwidG9UaW1lc3RhbXAiOjE3NDg1MzAxOTI1NjMsInNlZW5fc3RhdGUiOiJzZWVuIn0seyJyZXF1ZXN0X2lkIjoiMzNhNmVlYjgtYzJkNC00ZWZkLWFjMDgtNGQ1OTkyOTcwYWU4Iiwic3RhdHVzIjoiY2FuY2VsbGVkIiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy10dXJuLWRlbGltaXRlciJ9LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiNjAxYTkyNi1lNDY0LTQxZTYtOWVmZS01YTNlYzgxZjk2OWEiLCJyZXF1ZXN0X21lc3NhZ2UiOiJpcyBpdCBwb3NzaWJsZSB0byB0cmFuc2Zvcm0gdG9vbGJhciB0byBhbiBvYnNlcnZhYmxlIHdpdGggIGEgc3RyYXRlZ2llIGZvciBGYWN0b3J5IGFuZCB3aGVyZSB0byBkcmF3IHRvIGFuIG9ic2VydmVyIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImlzIGl0IHBvc3NpYmxlIHRvIHRyYW5zZm9ybSB0b29sYmFyIHRvIGFuIG9ic2VydmFibGUgd2l0aCAgYSBzdHJhdGVnaWUgZm9yIEZhY3RvcnkgYW5kIHdoZXJlIHRvIGRyYXcgdG8gYW4gb2JzZXJ2ZXIifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFOMVBiTm5rc3lFbXhuWXl3dmJUNm9FIiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJTaG93IG1lIHRoZSBjdXJyZW50IHRvb2xiYXIgaW1wbGVtZW50YXRpb24sIGJ1dHRvbiBldmVudCBoYW5kbGVycywgYW5kIGhvdyB0aGUgY3VycmVudEZhY3RvcnkgaXMgYmVpbmcgdXNlZCBpbiB0aGUgTWFpbiBjbGFzcy4gSSBuZWVkIHRvIHVuZGVyc3RhbmQgdGhlIGN1cnJlbnQgY291cGxpbmcgYmV0d2VlbiBVSSBhbmQgZHJhd2luZyBsb2dpYy5cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJFeGNlbGxlbnQgcXVlc3Rpb24hIFllcywgd2UgY2FuIGRlZmluaXRlbHkgdHJhbnNmb3JtIHRoaXMgaW50byBhbiBPYnNlcnZlciBwYXR0ZXJuIHdpdGggYSBTdHJhdGVneSBwYXR0ZXJuIGZvciB0aGUgRmFjdG9yeS4gVGhpcyB3b3VsZCBjcmVhdGUgYSBtdWNoIGNsZWFuZXIsIG1vcmUgbWFpbnRhaW5hYmxlIGFyY2hpdGVjdHVyZS4gTGV0IG1lIGFuYWx5emUgdGhlIGN1cnJlbnQgY29kZSBhbmQgY3JlYXRlIGEgZGV0YWlsZWQgcGxhbi5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsInRleHRfbm9kZSI6eyJjb250ZW50IjoiaXMgaXQgcG9zc2libGUgdG8gdHJhbnNmb3JtIHRvb2xiYXIgdG8gYW4gb2JzZXJ2YWJsZSB3aXRoICBhIHN0cmF0ZWdpZSBmb3IgRmFjdG9yeSBhbmQgd2hlcmUgdG8gZHJhdyB0byBhbiBvYnNlcnZlciJ9fSx7ImlkIjoxLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MDg6MDcuMjY1WiIsInJlc3BvbnNlX3RleHQiOiJFeGNlbGxlbnQgcXVlc3Rpb24hIFllcywgd2UgY2FuIGRlZmluaXRlbHkgdHJhbnNmb3JtIHRoaXMgaW50byBhbiBPYnNlcnZlciBwYXR0ZXJuIHdpdGggYSBTdHJhdGVneSBwYXR0ZXJuIGZvciB0aGUgRmFjdG9yeS4gVGhpcyB3b3VsZCBjcmVhdGUgYSBtdWNoIGNsZWFuZXIsIG1vcmUgbWFpbnRhaW5hYmxlIGFyY2hpdGVjdHVyZS4gTGV0IG1lIGFuYWx5emUgdGhlIGN1cnJlbnQgY29kZSBhbmQgY3JlYXRlIGEgZGV0YWlsZWQgcGxhbi5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI1ZjA0MTI4Yi1hZGMyLTRhZDItYjU3ZS00OTVmMjlkOTdiOGMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTmpITjM0ckRVUUU4N1U5akhkcVE3ZSIsInRvb2xfbmFtZSI6InNhdmUtZmlsZSIsImlucHV0X2pzb24iOiJ7XCJpbnN0cnVjdGlvbnNfcmVtaW5kZXJcIjogXCJMSU1JVCBUSEUgRklMRSBDT05URU5UIFRPIEFUIE1PU1QgMzAwIExJTkVTLiBJRiBNT1JFIENPTlRFTlQgTkVFRFMgVE8gQkUgQURERUQgVVNFIFRIRSBzdHItcmVwbGFjZS1lZGl0b3IgVE9PTCBUTyBFRElUIFRIRSBGSUxFIEFGVEVSIElUIEhBUyBCRUVOIENSRUFURUQuXCIsIFwicGF0aFwiOiBcInNyYy9vYnNlcnZlci9PYnNlcnZhYmxlLmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIG9ic2VydmVyO1xcblxcbi8qKlxcbiAqIE9ic2VydmFibGUgaW50ZXJmYWNlIGZvciB0aGUgT2JzZXJ2ZXIgcGF0dGVyblxcbiAqL1xcbnB1YmxpYyBpbnRlcmZhY2UgT2JzZXJ2YWJsZTxUPiB7XFxuICAgIHZvaWQgYWRkT2JzZXJ2ZXIoT2JzZXJ2ZXI8VD4gb2JzZXJ2ZXIpO1xcbiAgICB2b2lkIHJlbW92ZU9ic2VydmVyKE9ic2VydmVyPFQ+IG9ic2VydmVyKTtcXG4gICAgdm9pZCBub3RpZnlPYnNlcnZlcnMoVCBkYXRhKTtcXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiUGVyZmVjdCEgSSBjYW4gc2VlIHRoZSBjdXJyZW50IGFyY2hpdGVjdHVyZSBhbmQgaG93IHdlIGNhbiBpbXByb3ZlIGl0IHdpdGggT2JzZXJ2ZXIgYW5kIFN0cmF0ZWd5IHBhdHRlcm5zLiBMZXQgbWUgY3JlYXRlIGEgZGV0YWlsZWQgcGxhbjpcblxuIyMgQXJjaGl0ZWN0dXJlIFRyYW5zZm9ybWF0aW9uIFBsYW5cblxuKipDdXJyZW50IElzc3VlczoqKlxuLSBUaWdodCBjb3VwbGluZyBiZXR3ZWVuIFVJICh0b29sYmFyKSBhbmQgZHJhd2luZyBsb2dpY1xuLSBNYWluIGNsYXNzIGhhbmRsZXMgYm90aCBVSSBldmVudHMgYW5kIGRyYXdpbmcgY29vcmRpbmF0aW9uXG4tIEZhY3Rvcnkgc2VsZWN0aW9uIGlzIGRpcmVjdGx5IG1hbmFnZWQgaW4gVUkgZXZlbnQgaGFuZGxlcnNcblxuKipQcm9wb3NlZCBTb2x1dGlvbjoqKlxuMS4gKipPYnNlcnZhYmxlIFRvb2xiYXIqKiAtIFRvb2xiYXIgYmVjb21lcyBhbiBPYnNlcnZhYmxlIHRoYXQgbm90aWZpZXMgd2hlbiBzaGFwZSBzZWxlY3Rpb24gY2hhbmdlc1xuMi4gKipTdHJhdGVneSBQYXR0ZXJuIGZvciBEcmF3aW5nKiogLSBEcmF3aW5nIGNvbnRleHQgdXNlcyBzdHJhdGVneSBwYXR0ZXJuIGZvciBkaWZmZXJlbnQgZHJhd2luZyBiZWhhdmlvcnNcbjMuICoqT2JzZXJ2ZXIgUGF0dGVybioqIC0gRHJhd2luZyBjYW52YXMgYW5kIG90aGVyIGNvbXBvbmVudHMgb2JzZXJ2ZSB0b29sYmFyIGNoYW5nZXNcbjQuICoqU2VwYXJhdGlvbiBvZiBDb25jZXJucyoqIC0gQ2xlYXIgc2VwYXJhdGlvbiBiZXR3ZWVuIFVJLCBkcmF3aW5nIGxvZ2ljLCBhbmQgYnVzaW5lc3MgcnVsZXNcblxuIyMgSW1wbGVtZW50YXRpb24gUGxhblxuXG4jIyMgU3RlcCAxOiBDcmVhdGUgT2JzZXJ2YWJsZS9PYnNlcnZlciBpbnRlcmZhY2VzXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvTWFpbi5qYXZhXG4gICAgIDFcdFxuICAgICAyXHRpbXBvcnQgRmFjdG9yeS4qO1xuICAgICAzXHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBtb2RlbC4qO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgMTBcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMVx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAxMlx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAxM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxNVx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAxNlx0XG4gICAgMTdcdHB1YmxpYyBjbGFzcyBNYWluIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDE4XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTlcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMFx0XG4gICAgMjFcdCAgICBAT3ZlcnJpZGVcbiAgICAyMlx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDIzXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcbiAgICAyNlx0ICAgICAgICBDYW52YXMgY2FudmFzID0gbmV3IENhbnZhcyg4MDAsIDYwMCk7XG4gICAgMjdcdCAgICAgICAgR3JhcGhpY3NDb250ZXh0IGdjID0gY2FudmFzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgMjhcdCAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcbiAgICAyOVx0ICAgICAgICBnYy5zZXRMaW5lV2lkdGgoMik7XG4gICAgMzBcdFxuICAgIDMxXHQgICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xuICAgIDMyXHQgICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgIDMzXHQgICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFwiQ2VyY2xlXCIpO1xuICAgIDM0XHQgICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgIDM1XHRcbiAgICAzNlx0ICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcbiAgICAzN1x0ICAgICAgICBIQm94IHRvb2xiYXIgPSBuZXcgSEJveCgxMCk7XG4gICAgMzhcdCAgICAgICAgdG9vbGJhci5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzOVx0ICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcbiAgICA0MFx0XG4gICAgNDFcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICA0Mlx0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQzXHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQ0XHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNDVcdFxuICAgIDQ2XHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDQ3XHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNDhcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA0OVx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNTJcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDUzXHRcbiAgICA1NFx0ICAgICAgICAvLyBTZXQgdXAgY2FudmFzIG1vdXNlIGV2ZW50c1xuICAgIDU1XHQgICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUHJlc3NlZChlIC0+IHtcbiAgICA1Nlx0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNTdcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDU4XHQgICAgICAgIH0pO1xuICAgIDU5XHRcbiAgICA2MFx0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgU2hhcGUgc2hhcGUgPSBjdXJyZW50RmFjdG9yeS5nZXRTaGFwZSgpO1xuICAgIDYzXHQgICAgICAgICAgICAgICAgc2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGUuZ2V0WCgpLCBlLmdldFkoKSk7XG4gICAgNjRcdCAgICAgICAgICAgIH1cbiAgICA2NVx0ICAgICAgICB9KTtcbiAgICA2Nlx0XG4gICAgNjdcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgNjhcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDY5XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgNzBcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNob3coKTtcbiAgICA3MVx0ICAgIH1cbiAgICA3Mlx0XG4gICAgNzNcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgNzRcdCAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgIDc1XHQgICAgfVxuICAgIDc2XHR9Li4uXG5QYXRoOiBzcmMvRmFjdG9yeS9MaW5lU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgTGluZVNoYXBlIGltcGxlbWVudHMgU2hhcGUge1xuICAgICA2XHQgICAgQE92ZXJyaWRlXG4gICAgIDdcdCAgICBwdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgIDhcdCAgICAgICAgZ2Muc3Ryb2tlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgIDlcdCAgICB9XG4gICAgMTBcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlU2hhcGUgaW1wbGVtZW50cyAgU2hhcGV7XG4gICAgIDZcdCAgICBAT3ZlcnJpZGVcbiAgICAgN1x0ICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpXG4gICAgIDhcdCAgICB7XG4gICAgIDlcdCAgICAgICAgZG91YmxlIHdpZHRoID0gTWF0aC5hYnMoZW5kWC1zdGFydFgpO1xuICAgIDEwXHQgICAgICAgIGRvdWJsZSBoZWlnaHQgPSBNYXRoLmFicyhlbmRZIC0gc3RhcnRZKTtcbiAgICAxMVx0ICAgICAgICBkb3VibGUgeCA9IE1hdGgubWluKHN0YXJ0WCwgZW5kWCk7XG4gICAgMTJcdCAgICAgICAgZG91YmxlIHkgPSBNYXRoLm1pbihzdGFydFksIGVuZFkpO1xuICAgIDEzXHQgICAgICAgIGdjLnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgMTRcdFxuICAgIDE1XHQgICAgfVxuICAgIDE2XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGludGVyZmFjZSBTaGFwZSB7XG4gICAgIDZcdCAgICB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLGRvdWJsZSBzdGFydFgsZG91YmxlIHN0YXJ0WSxkb3VibGUgZW5kWCxkb3VibGUgZW5kWSk7XG4gICAgIDdcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvQ2lyY2xlU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgQ2lyY2xlU2hhcGUgaW1wbGVtZW50cyBTaGFwZXtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmQpXG4gICAgIDhcdCAgICB7XG4gICAgIDlcdCAgICAgICAgZG91YmxlIHJhZGl1cyA9IE1hdGguYWJzKGVuZFgtc3RhcnRYKS8yO1xuICAgIDEwXHQgICAgICAgIGdjLnN0cm9rZU92YWwoc3RhcnRYIC0gcmFkaXVzLCBzdGFydFkgLSByYWRpdXMsIHJhZGl1cyAqIDIsIHJhZGl1cyAqIDIpO1xuICAgIDExXHRcbiAgICAxMlx0ICAgIH1cbiAgICAxM1x0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBMaW5lRmFjdG9yeSBleHRlbmRzIFNoYXBlRmFjdG9yeXtcbiAgICAgNFx0ICAgIEBPdmVycmlkZVxuICAgICA1XHQgICAgcHVibGljIFNoYXBlIGdldFNoYXBlKCkge1xuICAgICA2XHQgICAgICAgIHJldHVybiBuZXcgTGluZVNoYXBlKCk7XG4gICAgIDdcdCAgICB9XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL21hbmFnZXIvU2hhcGVNYW5hZ2VyLmphdmFcbiAgICAgMVx0cGFja2FnZSBtYW5hZ2VyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IG1vZGVsLio7XG4gICAgIDRcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgICA1XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDZcdFxuICAgICA3XHRwdWJsaWMgY2xhc3MgU2hhcGVNYW5hZ2VyIHtcbiAgICAgOFx0ICAgIHByaXZhdGUgTGlzdDxEcmF3blNoYXBlPiBzaGFwZXM7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIHB1YmxpYyBTaGFwZU1hbmFnZXIoKSB7XG4gICAgMTFcdCAgICAgICAgdGhpcy5zaGFwZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAxMlx0ICAgIH1cbiAgICAxM1x0ICAgIFxuICAgIDE0XHQgICAgLyoqXG4gICAgMTVcdCAgICAgKiBWYWxpZGF0ZXMgaWYgYSBsaW5lIGNhbiBiZSBkcmF3biBhY2NvcmRpbmcgdG8gdGhlIGNvbnN0cmFpbnRzOlxuICAgIDE2XHQgICAgICogLSBCb3RoIGVuZHMgb2YgdGhlIGxpbmUgbXVzdCBiZSBpbnNpZGUgYSBjaXJjbGVcbiAgICAxN1x0ICAgICAqIC0gQSBjaXJjbGUgY2FuIGhhdmUgb25seSBvbmUgbGluZVxuICAgIDE4XHQgICAgICovXG4gICAgMTlcdCAgICBwdWJsaWMgVmFsaWRhdGlvblJlc3VsdCB2YWxpZGF0ZUxpbmUoZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMjBcdCAgICAgICAgRHJhd25DaXJjbGUgc3RhcnRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KHN0YXJ0WCwgc3RhcnRZKTtcbiAgICAyMVx0ICAgICAgICBEcmF3bkNpcmNsZSBlbmRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGVuZFgsIGVuZFkpO1xuICAgIDIyXHQgICAgICAgIFxuICAgIDIzXHQgICAgICAgIC8vIENoZWNrIGlmIGJvdGggZW5kcyBhcmUgaW5zaWRlIGNpcmNsZXNcbiAgICAyNFx0ICAgICAgICBpZiAoc3RhcnRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI1XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZGUgZMOpcGFydCBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAyNlx0ICAgICAgICB9XG4gICAgMjdcdCAgICAgICAgXG4gICAgMjhcdCAgICAgICAgaWYgKGVuZENpcmNsZSA9PSBudWxsKSB7XG4gICAgMjlcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBwb2ludCBkJ2Fycml2w6llIGRlIGxhIGxpZ25lIGRvaXQgw6p0cmUgw6AgbCdpbnTDqXJpZXVyIGQndW4gY2VyY2xlXCIpO1xuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgICAgICBcbiAgICAzMlx0ICAgICAgICAvLyBDaGVjayBpZiBjaXJjbGVzIGFscmVhZHkgaGF2ZSBsaW5lc1xuICAgIDMzXHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKHN0YXJ0Q2lyY2xlKSkge1xuICAgIDM0XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgY2VyY2xlIGRlIGTDqXBhcnQgY29udGllbnQgZMOpasOgIHVuZSBsaWduZVwiKTtcbiAgICAzNVx0ICAgICAgICB9XG4gICAgMzZcdCAgICAgICAgXG4gICAgMzdcdCAgICAgICAgaWYgKGNpcmNsZUhhc0xpbmUoZW5kQ2lyY2xlKSAmJiAhc3RhcnRDaXJjbGUuZXF1YWxzKGVuZENpcmNsZSkpIHtcbiAgICAzOFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkJ2Fycml2w6llIGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzlcdCAgICAgICAgfVxuICAgIDQwXHQgICAgICAgIFxuICAgIDQxXHQgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh0cnVlLCBcIkxpZ25lIHZhbGlkZVwiKTtcbiAgICA0Mlx0ICAgIH1cbiAgICA0M1x0ICAgIFxuICAgIDQ0XHQgICAgLyoqXG4gICAgNDVcdCAgICAgKiBGaW5kcyBhIGNpcmNsZSB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludFxuICAgIDQ2XHQgICAgICovXG4gICAgNDdcdCAgICBwcml2YXRlIERyYXduQ2lyY2xlIGZpbmRDaXJjbGVDb250YWluaW5nUG9pbnQoZG91YmxlIHgsIGRvdWJsZSB5KSB7XG4gICAgNDhcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduQ2lyY2xlICYmIHNoYXBlLmNvbnRhaW5zUG9pbnQoeCwgeSkpIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIHJldHVybiAoRHJhd25DaXJjbGUpIHNoYXBlO1xuICAgIDUxXHQgICAgICAgICAgICB9XG4gICAgNTJcdCAgICAgICAgfVxuICAgIDUzXHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDU0XHQgICAgfVxuICAgIDU1XHQgICAgXG4gICAgNTZcdCAgICAvKipcbiAgICA1N1x0ICAgICAqIENoZWNrcyBpZiBhIGNpcmNsZSBhbHJlYWR5IGhhcyBhIGxpbmVcbiAgICA1OFx0ICAgICAqL1xuICAgIDU5XHQgICAgcHJpdmF0ZSBib29sZWFuIGNpcmNsZUhhc0xpbmUoRHJhd25DaXJjbGUgY2lyY2xlKSB7XG4gICAgNjBcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNjFcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduTGluZSkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgRHJhd25MaW5lIGxpbmUgPSAoRHJhd25MaW5lKSBzaGFwZTtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIHN0YXJ0UG9pbnQgPSBsaW5lLmdldFN0YXJ0UG9pbnQoKTtcbiAgICA2NFx0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIGVuZFBvaW50ID0gbGluZS5nZXRFbmRQb2ludCgpO1xuICAgIDY1XHQgICAgICAgICAgICAgICAgXG4gICAgNjZcdCAgICAgICAgICAgICAgICBpZiAoY2lyY2xlLmNvbnRhaW5zUG9pbnQoc3RhcnRQb2ludFswXSwgc3RhcnRQb2ludFsxXSkgfHwgXG4gICAgNjdcdCAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmNvbnRhaW5zUG9pbnQoZW5kUG9pbnRbMF0sIGVuZFBvaW50WzFdKSkge1xuICAgIDY4XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDY5XHQgICAgICAgICAgICAgICAgfVxuICAgIDcwXHQgICAgICAgICAgICB9XG4gICAgNzFcdCAgICAgICAgfVxuICAgIDcyXHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA3M1x0ICAgIH1cbiAgICA3NFx0ICAgIFxuICAgIDc1XHQgICAgLyoqXG4gICAgNzZcdCAgICAgKiBBZGRzIGEgc2hhcGUgdG8gdGhlIG1hbmFnZXJcbiAgICA3N1x0ICAgICAqL1xuICAgIDc4XHQgICAgcHVibGljIHZvaWQgYWRkU2hhcGUoRHJhd25TaGFwZSBzaGFwZSkge1xuICAgIDc5XHQgICAgICAgIHNoYXBlcy5hZGQoc2hhcGUpO1xuICAgIDgwXHQgICAgfVxuICAgIDgxXHQgICAgXG4gICAgODJcdCAgICAvKipcbiAgICA4M1x0ICAgICAqIEdldHMgYWxsIHNoYXBlc1xuICAgIDg0XHQgICAgICovXG4gICAgODVcdCAgICBwdWJsaWMgTGlzdDxEcmF3blNoYXBlPiBnZXRTaGFwZXMoKSB7XG4gICAgODZcdCAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8PihzaGFwZXMpO1xuICAgIDg3XHQgICAgfVxuICAgIDg4XHQgICAgXG4gICAgODlcdCAgICAvKipcbiAgICA5MFx0ICAgICAqIENsZWFycyBhbGwgc2hhcGVzXG4gICAgOTFcdCAgICAgKi9cbiAgICA5Mlx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyU2hhcGVzKCkge1xuICAgIDkzXHQgICAgICAgIHNoYXBlcy5jbGVhcigpO1xuICAgIDk0XHQgICAgfVxuICAgIDk1XHQgICAgXG4gICAgOTZcdCAgICAvKipcbiAgICA5N1x0ICAgICAqIFJlc3VsdCBjbGFzcyBmb3IgdmFsaWRhdGlvbiBvcGVyYXRpb25zXG4gICAgOThcdCAgICAgKi9cbiAgICA5OVx0ICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVmFsaWRhdGlvblJlc3VsdCB7XG4gICAxMDBcdCAgICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIHZhbGlkO1xuICAgMTAxXHQgICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIG1lc3NhZ2U7XG4gICAxMDJcdCAgICAgICAgXG4gICAxMDNcdCAgICAgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQoYm9vbGVhbiB2YWxpZCwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgIDEwNFx0ICAgICAgICAgICAgdGhpcy52YWxpZCA9IHZhbGlkO1xuICAgMTA1XHQgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgMTA2XHQgICAgICAgIH1cbiAgIDEwN1x0ICAgICAgICBcbiAgIDEwOFx0ICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKCkgeyByZXR1cm4gdmFsaWQ7IH1cbiAgIDEwOVx0ICAgICAgICBwdWJsaWMgU3RyaW5nIGdldE1lc3NhZ2UoKSB7IHJldHVybiBtZXNzYWdlOyB9XG4gICAxMTBcdCAgICB9XG4gICAxMTFcdH1cbi4uLlxuUGF0aDogc3JjL21vZGVsL0RyYXduTGluZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbW9kZWw7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgRHJhd25MaW5lIGV4dGVuZHMgRHJhd25TaGFwZSB7XG4gICAgIDRcdCAgICBcbiAgICAgNVx0ICAgIHB1YmxpYyBEcmF3bkxpbmUoZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgIDZcdCAgICAgICAgc3VwZXIoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIFwiTElORVwiKTtcbiAgICAgN1x0ICAgIH1cbiAgICAgOFx0ICAgIFxuICAgICA5XHQgICAgQE92ZXJyaWRlXG4gICAgMTBcdCAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDExXHQgICAgICAgIC8vIEZvciBsaW5lcywgd2UgZG9uJ3QgdHlwaWNhbGx5IGNoZWNrIGlmIHRoZXkgY29udGFpbiBwb2ludHNcbiAgICAxMlx0ICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBtYWlubHkgdXNlZCBmb3IgY2lyY2xlc1xuICAgIDEzXHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAxNFx0ICAgIH1cbiAgICAxNVx0ICAgIFxuICAgIDE2XHQgICAgLyoqXG4gICAgMTdcdCAgICAgKiBHZXQgdGhlIHN0YXJ0IHBvaW50IG9mIHRoZSBsaW5lXG4gICAgMThcdCAgICAgKi9cbiAgICAxOVx0ICAgIHB1YmxpYyBkb3VibGVbXSBnZXRTdGFydFBvaW50KCkge1xuICAgIDIwXHQgICAgICAgIHJldHVybiBuZXcgZG91YmxlW117c3RhcnRYLCBzdGFydFl9O1xuICAgIDIxXHQgICAgfVxuICAgIDIyXHQgICAgXG4gICAgMjNcdCAgICAvKipcbiAgICAyNFx0ICAgICAqIEdldCB0aGUgZW5kIHBvaW50IG9mIHRoZSBsaW5lXG4gICAgMjVcdCAgICAgKi9cbiAgICAyNlx0ICAgIHB1YmxpYyBkb3VibGVbXSBnZXRFbmRQb2ludCgpIHtcbiAgICAyN1x0ICAgICAgICByZXR1cm4gbmV3IGRvdWJsZVtde2VuZFgsIGVuZFl9O1xuICAgIDI4XHQgICAgfVxuICAgIDI5XHR9XG4uLi5cblBhdGg6IHNyYy9tb2RlbC9EcmF3blNoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBtb2RlbDtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBzdG9yaW5nIGluZm9ybWF0aW9uIGFib3V0IGRyYXduIHNoYXBlc1xuICAgICA1XHQgKi9cbiAgICAgNlx0cHVibGljIGFic3RyYWN0IGNsYXNzIERyYXduU2hhcGUge1xuICAgICA3XHQgICAgcHJvdGVjdGVkIGRvdWJsZSBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWTtcbiAgICAgOFx0ICAgIHByb3RlY3RlZCBTdHJpbmcgc2hhcGVUeXBlO1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBwdWJsaWMgRHJhd25TaGFwZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFksIFN0cmluZyBzaGFwZVR5cGUpIHtcbiAgICAxMVx0ICAgICAgICB0aGlzLnN0YXJ0WCA9IHN0YXJ0WDtcbiAgICAxMlx0ICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTtcbiAgICAxM1x0ICAgICAgICB0aGlzLmVuZFggPSBlbmRYO1xuICAgIDE0XHQgICAgICAgIHRoaXMuZW5kWSA9IGVuZFk7XG4gICAgMTVcdCAgICAgICAgdGhpcy5zaGFwZVR5cGUgPSBzaGFwZVR5cGU7XG4gICAgMTZcdCAgICB9XG4gICAgMTdcdCAgICBcbiAgICAxOFx0ICAgIC8vIEdldHRlcnNcbiAgICAxOVx0ICAgIHB1YmxpYyBkb3VibGUgZ2V0U3RhcnRYKCkgeyByZXR1cm4gc3RhcnRYOyB9XG4gICAgMjBcdCAgICBwdWJsaWMgZG91YmxlIGdldFN0YXJ0WSgpIHsgcmV0dXJuIHN0YXJ0WTsgfVxuICAgIDIxXHQgICAgcHVibGljIGRvdWJsZSBnZXRFbmRYKCkgeyByZXR1cm4gZW5kWDsgfVxuICAgIDIyXHQgICAgcHVibGljIGRvdWJsZSBnZXRFbmRZKCkgeyByZXR1cm4gZW5kWTsgfVxuICAgIDIzXHQgICAgcHVibGljIFN0cmluZyBnZXRTaGFwZVR5cGUoKSB7IHJldHVybiBzaGFwZVR5cGU7IH1cbiAgICAyNFx0ICAgIFxuICAgIDI1XHQgICAgLy8gQWJzdHJhY3QgbWV0aG9kcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzcGVjaWZpYyBzaGFwZXNcbiAgICAyNlx0ICAgIHB1YmxpYyBhYnN0cmFjdCBib29sZWFuIGNvbnRhaW5zUG9pbnQoZG91YmxlIHgsIGRvdWJsZSB5KTtcbiAgICAyN1x0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9SZWN0YW5nbGVGYWN0b3J5LmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0cHVibGljIGNsYXNzIFJlY3RhbmdsZUZhY3Rvcnkge1xuICAgICA0XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBTaGFwZUZhY3Rvcnkge1xuICAgICA0XHQgICAgcHVibGljIGFic3RyYWN0IFNoYXBlIGdldFNoYXBlKCk7XG4gICAgIDVcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBDaXJjbGVGYWN0b3J5IGV4dGVuZHMgU2hhcGVGYWN0b3J5e1xuICAgICA0XHQgICAgQE92ZXJyaWRlXG4gICAgIDVcdCAgICBwdWJsaWMgU2hhcGUgZ2V0U2hhcGUoKSB7XG4gICAgIDZcdCAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVTaGFwZSgpO1xuICAgICA3XHQgICAgfVxuICAgICA4XHR9XG4uLi5cblBhdGg6IHNyYy9tb2RlbC9EcmF3bkNpcmNsZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbW9kZWw7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgdXRpbC5HZW9tZXRyeVV0aWxzO1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGNsYXNzIERyYXduQ2lyY2xlIGV4dGVuZHMgRHJhd25TaGFwZSB7XG4gICAgIDZcdCAgICBwcml2YXRlIGRvdWJsZSBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXM7XG4gICAgIDdcdCAgICBcbiAgICAgOFx0ICAgIHB1YmxpYyBEcmF3bkNpcmNsZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAgOVx0ICAgICAgICBzdXBlcihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSwgXCJDSVJDTEVcIik7XG4gICAgMTBcdCAgICAgICAgdGhpcy5yYWRpdXMgPSBNYXRoLmFicyhlbmRYIC0gc3RhcnRYKSAvIDI7XG4gICAgMTFcdCAgICAgICAgdGhpcy5jZW50ZXJYID0gc3RhcnRYO1xuICAgIDEyXHQgICAgICAgIHRoaXMuY2VudGVyWSA9IHN0YXJ0WTtcbiAgICAxM1x0ICAgIH1cbiAgICAxNFx0ICAgIFxuICAgIDE1XHQgICAgQE92ZXJyaWRlXG4gICAgMTZcdCAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDE3XHQgICAgICAgIHJldHVybiBHZW9tZXRyeVV0aWxzLmlzUG9pbnRJbkNpcmNsZSh4LCB5LCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMpO1xuICAgIDE4XHQgICAgfVxuICAgIDE5XHQgICAgXG4gICAgMjBcdCAgICBwdWJsaWMgZG91YmxlIGdldENlbnRlclgoKSB7IHJldHVybiBjZW50ZXJYOyB9XG4gICAgMjFcdCAgICBwdWJsaWMgZG91YmxlIGdldENlbnRlclkoKSB7IHJldHVybiBjZW50ZXJZOyB9XG4gICAgMjJcdCAgICBwdWJsaWMgZG91YmxlIGdldFJhZGl1cygpIHsgcmV0dXJuIHJhZGl1czsgfVxuICAgIDIzXHR9XG4uLi5cblBhdGg6IHNyYy91dGlsL0dlb21ldHJ5VXRpbHMuamF2YVxuICAgICAxXHRwYWNrYWdlIHV0aWw7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgR2VvbWV0cnlVdGlscyB7XG4gICAgIDRcdCAgICBcbiAgICAgNVx0ICAgIC8qKlxuICAgICA2XHQgICAgICogQ2hlY2tzIGlmIGEgcG9pbnQgaXMgaW5zaWRlIGEgY2lyY2xlXG4gICAgIDdcdCAgICAgKiBAcGFyYW0gcG9pbnRYIFggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgOFx0ICAgICAqIEBwYXJhbSBwb2ludFkgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA5XHQgICAgICogQHBhcmFtIGNpcmNsZUNlbnRlclggWCBjb29yZGluYXRlIG9mIGNpcmNsZSBjZW50ZXJcbiAgICAxMFx0ICAgICAqIEBwYXJhbSBjaXJjbGVDZW50ZXJZIFkgY29vcmRpbmF0ZSBvZiBjaXJjbGUgY2VudGVyXG4gICAgMTFcdCAgICAgKiBAcGFyYW0gcmFkaXVzIENpcmNsZSByYWRpdXNcbiAgICAxMlx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwb2ludCBpcyBpbnNpZGUgdGhlIGNpcmNsZVxuICAgIDEzXHQgICAgICovXG4gICAgMTRcdCAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNQb2ludEluQ2lyY2xlKGRvdWJsZSBwb2ludFgsIGRvdWJsZSBwb2ludFksIFxuICAgIDE1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIGNpcmNsZUNlbnRlclgsIGRvdWJsZSBjaXJjbGVDZW50ZXJZLCBcbiAgICAxNlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSByYWRpdXMpIHtcbiAgICAxN1x0ICAgICAgICBkb3VibGUgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3cocG9pbnRYIC0gY2lyY2xlQ2VudGVyWCwgMikgKyBcbiAgICAxOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KHBvaW50WSAtIGNpcmNsZUNlbnRlclksIDIpKTtcbiAgICAxOVx0ICAgICAgICByZXR1cm4gZGlzdGFuY2UgPD0gcmFkaXVzO1xuICAgIDIwXHQgICAgfVxuICAgIDIxXHQgICAgXG4gICAgMjJcdCAgICAvKipcbiAgICAyM1x0ICAgICAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuICAgIDI0XHQgICAgICogQHBhcmFtIHgxIFggY29vcmRpbmF0ZSBvZiBmaXJzdCBwb2ludFxuICAgIDI1XHQgICAgICogQHBhcmFtIHkxIFkgY29vcmRpbmF0ZSBvZiBmaXJzdCBwb2ludFxuICAgIDI2XHQgICAgICogQHBhcmFtIHgyIFggY29vcmRpbmF0ZSBvZiBzZWNvbmQgcG9pbnRcbiAgICAyN1x0ICAgICAqIEBwYXJhbSB5MiBZIGNvb3JkaW5hdGUgb2Ygc2Vjb25kIHBvaW50XG4gICAgMjhcdCAgICAgKiBAcmV0dXJuIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50c1xuICAgIDI5XHQgICAgICovXG4gICAgMzBcdCAgICBwdWJsaWMgc3RhdGljIGRvdWJsZSBkaXN0YW5jZShkb3VibGUgeDEsIGRvdWJsZSB5MSwgZG91YmxlIHgyLCBkb3VibGUgeTIpIHtcbiAgICAzMVx0ICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIDMyXHQgICAgfVxuICAgIDMzXHR9XG4uLi5cblBhdGg6IC5naXRpZ25vcmVcbiAgICAgMVx0IyMjIEludGVsbGlKIElERUEgIyMjXG4gICAgIDJcdG91dC9cbiAgICAgM1x0ISoqL3NyYy9tYWluLyoqL291dC9cbiAgICAgNFx0ISoqL3NyYy90ZXN0LyoqL291dC9cbiAgICAgNVx0XG4gICAgIDZcdCMjIyBFY2xpcHNlICMjI1xuICAgICA3XHQuYXB0X2dlbmVyYXRlZFxuICAgICA4XHQuY2xhc3NwYXRoXG4gICAgIDlcdC5mYWN0b3J5cGF0aFxuICAgIDEwXHQucHJvamVjdFxuICAgIDExXHQuc2V0dGluZ3NcbiAgICAxMlx0LnNwcmluZ0JlYW5zXG4gICAgMTNcdC5zdHM0LWNhY2hlXG4gICAgMTRcdGJpbi9cbiAgICAxNVx0ISoqL3NyYy9tYWluLyoqL2Jpbi9cbiAgICAxNlx0ISoqL3NyYy90ZXN0LyoqL2Jpbi9cbiAgICAxN1x0XG4gICAgMThcdCMjIyBOZXRCZWFucyAjIyNcbiAgICAxOVx0L25icHJvamVjdC9wcml2YXRlL1xuICAgIDIwXHQvbmJidWlsZC9cbiAgICAyMVx0L2Rpc3QvXG4gICAgMjJcdC9uYmRpc3QvXG4gICAgMjNcdC8ubmItZ3JhZGxlL1xuICAgIDI0XHRcbiAgICAyNVx0IyMjIFZTIENvZGUgIyMjXG4gICAgMjZcdC52c2NvZGUvXG4gICAgMjdcdFxuICAgIDI4XHQjIyMgTWFjIE9TICMjI1xuICAgIDI5XHQuRFNfU3RvcmUuLi5cbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFOMVBiTm5rc3lFbXhuWXl3dmJUNm9FIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTowODoxOS4xNTJaIiwicmVzcG9uc2VfdGV4dCI6IlBlcmZlY3QhIEkgY2FuIHNlZSB0aGUgY3VycmVudCBhcmNoaXRlY3R1cmUgYW5kIGhvdyB3ZSBjYW4gaW1wcm92ZSBpdCB3aXRoIE9ic2VydmVyIGFuZCBTdHJhdGVneSBwYXR0ZXJucy4gTGV0IG1lIGNyZWF0ZSBhIGRldGFpbGVkIHBsYW46XG5cbiMjIEFyY2hpdGVjdHVyZSBUcmFuc2Zvcm1hdGlvbiBQbGFuXG5cbioqQ3VycmVudCBJc3N1ZXM6Kipcbi0gVGlnaHQgY291cGxpbmcgYmV0d2VlbiBVSSAodG9vbGJhcikgYW5kIGRyYXdpbmcgbG9naWNcbi0gTWFpbiBjbGFzcyBoYW5kbGVzIGJvdGggVUkgZXZlbnRzIGFuZCBkcmF3aW5nIGNvb3JkaW5hdGlvblxuLSBGYWN0b3J5IHNlbGVjdGlvbiBpcyBkaXJlY3RseSBtYW5hZ2VkIGluIFVJIGV2ZW50IGhhbmRsZXJzXG5cbioqUHJvcG9zZWQgU29sdXRpb246KipcbjEuICoqT2JzZXJ2YWJsZSBUb29sYmFyKiogLSBUb29sYmFyIGJlY29tZXMgYW4gT2JzZXJ2YWJsZSB0aGF0IG5vdGlmaWVzIHdoZW4gc2hhcGUgc2VsZWN0aW9uIGNoYW5nZXNcbjIuICoqU3RyYXRlZ3kgUGF0dGVybiBmb3IgRHJhd2luZyoqIC0gRHJhd2luZyBjb250ZXh0IHVzZXMgc3RyYXRlZ3kgcGF0dGVybiBmb3IgZGlmZmVyZW50IGRyYXdpbmcgYmVoYXZpb3JzXG4zLiAqKk9ic2VydmVyIFBhdHRlcm4qKiAtIERyYXdpbmcgY2FudmFzIGFuZCBvdGhlciBjb21wb25lbnRzIG9ic2VydmUgdG9vbGJhciBjaGFuZ2VzXG40LiAqKlNlcGFyYXRpb24gb2YgQ29uY2VybnMqKiAtIENsZWFyIHNlcGFyYXRpb24gYmV0d2VlbiBVSSwgZHJhd2luZyBsb2dpYywgYW5kIGJ1c2luZXNzIHJ1bGVzXG5cbiMjIEltcGxlbWVudGF0aW9uIFBsYW5cblxuIyMjIFN0ZXAgMTogQ3JlYXRlIE9ic2VydmFibGUvT2JzZXJ2ZXIgaW50ZXJmYWNlc1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjlhYzdhOWUzLWZiOGMtNDcyMS05MmQyLTUxMWJhZjI2ZTIxZCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE1dXd4V2NxcmtOMkc0UEhaTEhqVEhEIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL29ic2VydmVyL09ic2VydmVyLmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIG9ic2VydmVyO1xcblxcbi8qKlxcbiAqIE9ic2VydmVyIGludGVyZmFjZSBmb3IgdGhlIE9ic2VydmVyIHBhdHRlcm5cXG4gKi9cXG5wdWJsaWMgaW50ZXJmYWNlIE9ic2VydmVyPFQ+IHtcXG4gICAgdm9pZCB1cGRhdGUoVCBkYXRhKTtcXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9vYnNlcnZlci9PYnNlcnZhYmxlLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMU5qSE4zNHJEVVFFODdVOWpIZHFRN2UifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjA4OjI5Ljg5OVoiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijc2ZWZlNzQ4LWQzYWYtNDgwNS04MWRiLTFlM2UzYjgxNWRkNiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE1NUpEa0hVUHNVajhZYllnTmpvZGhnIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL2V2ZW50cy9Ub29sYmFyRXZlbnQuamF2YVwiLCBcImZpbGVfY29udGVudFwiOiBcInBhY2thZ2UgZXZlbnRzO1xcblxcbi8qKlxcbiAqIEV2ZW50cyB0aGF0IGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlIHRvb2xiYXJcXG4gKi9cXG5wdWJsaWMgY2xhc3MgVG9vbGJhckV2ZW50IHtcXG4gICAgXFxuICAgIHB1YmxpYyBlbnVtIEV2ZW50VHlwZSB7XFxuICAgICAgICBTSEFQRV9TRUxFQ1RFRCxcXG4gICAgICAgIENMRUFSX0NBTlZBU1xcbiAgICB9XFxuICAgIFxcbiAgICBwcml2YXRlIGZpbmFsIEV2ZW50VHlwZSB0eXBlO1xcbiAgICBwcml2YXRlIGZpbmFsIE9iamVjdCBkYXRhO1xcbiAgICBcXG4gICAgcHVibGljIFRvb2xiYXJFdmVudChFdmVudFR5cGUgdHlwZSwgT2JqZWN0IGRhdGEpIHtcXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XFxuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgVG9vbGJhckV2ZW50KEV2ZW50VHlwZSB0eXBlKSB7XFxuICAgICAgICB0aGlzKHR5cGUsIG51bGwpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgRXZlbnRUeXBlIGdldFR5cGUoKSB7XFxuICAgICAgICByZXR1cm4gdHlwZTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHVibGljIE9iamVjdCBnZXREYXRhKCkge1xcbiAgICAgICAgcmV0dXJuIGRhdGE7XFxuICAgIH1cXG4gICAgXFxuICAgIEBTdXBwcmVzc1dhcm5pbmdzKFxcXCJ1bmNoZWNrZWRcXFwiKVxcbiAgICBwdWJsaWMgPFQ+IFQgZ2V0RGF0YShDbGFzczxUPiBjbGF6eikge1xcbiAgICAgICAgaWYgKGRhdGEgIT0gbnVsbCAmJiBjbGF6ei5pc0luc3RhbmNlKGRhdGEpKSB7XFxuICAgICAgICAgICAgcmV0dXJuIChUKSBkYXRhO1xcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIG51bGw7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgMjogQ3JlYXRlIGV2ZW50cyBmb3IgY29tbXVuaWNhdGlvblxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9vYnNlcnZlci9PYnNlcnZlci5qYXZhfSIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE1dXd4V2NxcmtOMkc0UEhaTEhqVEhEIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTowODozNC40MTZaIiwicmVzcG9uc2VfdGV4dCI6IiMjIyBTdGVwIDI6IENyZWF0ZSBldmVudHMgZm9yIGNvbW11bmljYXRpb25cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxODVhNmVmNC1mMzQ2LTQ5NmMtODZhOS0zZDdmYmRkYjMzNGUiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTGhHZlBuYlh4cnhCV1ZxekFhelM2YSIsInRvb2xfbmFtZSI6InNhdmUtZmlsZSIsImlucHV0X2pzb24iOiJ7XCJpbnN0cnVjdGlvbnNfcmVtaW5kZXJcIjogXCJMSU1JVCBUSEUgRklMRSBDT05URU5UIFRPIEFUIE1PU1QgMzAwIExJTkVTLiBJRiBNT1JFIENPTlRFTlQgTkVFRFMgVE8gQkUgQURERUQgVVNFIFRIRSBzdHItcmVwbGFjZS1lZGl0b3IgVE9PTCBUTyBFRElUIFRIRSBGSUxFIEFGVEVSIElUIEhBUyBCRUVOIENSRUFURUQuXCIsIFwicGF0aFwiOiBcInNyYy9zdHJhdGVneS9EcmF3aW5nU3RyYXRlZ3kuamF2YVwiLCBcImZpbGVfY29udGVudFwiOiBcInBhY2thZ2Ugc3RyYXRlZ3k7XFxuXFxuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xcbmltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcXG5cXG4vKipcXG4gKiBTdHJhdGVneSBpbnRlcmZhY2UgZm9yIGRpZmZlcmVudCBkcmF3aW5nIGJlaGF2aW9yc1xcbiAqL1xcbnB1YmxpYyBpbnRlcmZhY2UgRHJhd2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBBdHRlbXB0cyB0byBkcmF3IGEgc2hhcGUgd2l0aCB0aGUgZ2l2ZW4gY29vcmRpbmF0ZXNcXG4gICAgICogQHBhcmFtIGdjIEdyYXBoaWNzIGNvbnRleHQgZm9yIGRyYXdpbmdcXG4gICAgICogQHBhcmFtIHNoYXBlTWFuYWdlciBNYW5hZ2VyIGZvciB0cmFja2luZyBzaGFwZXMgYW5kIGNvbnN0cmFpbnRzXFxuICAgICAqIEBwYXJhbSBzdGFydFggU3RhcnRpbmcgWCBjb29yZGluYXRlXFxuICAgICAqIEBwYXJhbSBzdGFydFkgU3RhcnRpbmcgWSBjb29yZGluYXRlXFxuICAgICAqIEBwYXJhbSBlbmRYIEVuZGluZyBYIGNvb3JkaW5hdGVcXG4gICAgICogQHBhcmFtIGVuZFkgRW5kaW5nIFkgY29vcmRpbmF0ZVxcbiAgICAgKiBAcmV0dXJuIERyYXdpbmdSZXN1bHQgaW5kaWNhdGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGFueSBtZXNzYWdlc1xcbiAgICAgKi9cXG4gICAgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSk7XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGlzIGRyYXdpbmcgc3RyYXRlZ3lcXG4gICAgICovXFxuICAgIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKTtcXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBSZXN1bHQgY2xhc3MgZm9yIGRyYXdpbmcgb3BlcmF0aW9uc1xcbiAgICAgKi9cXG4gICAgY2xhc3MgRHJhd2luZ1Jlc3VsdCB7XFxuICAgICAgICBwcml2YXRlIGZpbmFsIGJvb2xlYW4gc3VjY2VzcztcXG4gICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIG1lc3NhZ2U7XFxuICAgICAgICBcXG4gICAgICAgIHB1YmxpYyBEcmF3aW5nUmVzdWx0KGJvb2xlYW4gc3VjY2VzcywgU3RyaW5nIG1lc3NhZ2UpIHtcXG4gICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSBzdWNjZXNzO1xcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHB1YmxpYyBEcmF3aW5nUmVzdWx0KGJvb2xlYW4gc3VjY2Vzcykge1xcbiAgICAgICAgICAgIHRoaXMoc3VjY2VzcywgbnVsbCk7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHB1YmxpYyBib29sZWFuIGlzU3VjY2VzcygpIHsgcmV0dXJuIHN1Y2Nlc3M7IH1cXG4gICAgICAgIHB1YmxpYyBTdHJpbmcgZ2V0TWVzc2FnZSgpIHsgcmV0dXJuIG1lc3NhZ2U7IH1cXG4gICAgICAgIFxcbiAgICAgICAgcHVibGljIHN0YXRpYyBEcmF3aW5nUmVzdWx0IHN1Y2Nlc3MoKSB7XFxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEcmF3aW5nUmVzdWx0KHRydWUpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICBwdWJsaWMgc3RhdGljIERyYXdpbmdSZXN1bHQgc3VjY2VzcyhTdHJpbmcgbWVzc2FnZSkge1xcbiAgICAgICAgICAgIHJldHVybiBuZXcgRHJhd2luZ1Jlc3VsdCh0cnVlLCBtZXNzYWdlKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgcHVibGljIHN0YXRpYyBEcmF3aW5nUmVzdWx0IGZhaWx1cmUoU3RyaW5nIG1lc3NhZ2UpIHtcXG4gICAgICAgICAgICByZXR1cm4gbmV3IERyYXdpbmdSZXN1bHQoZmFsc2UsIG1lc3NhZ2UpO1xcbiAgICAgICAgfVxcbiAgICB9XFxufVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyBTdGVwIDM6IENyZWF0ZSBTdHJhdGVneSBwYXR0ZXJuIGZvciBkcmF3aW5nXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2V2ZW50cy9Ub29sYmFyRXZlbnQuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxNTVKRGtIVVBzVWo4WWJZZ05qb2RoZyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MDg6NDMuNDA4WiIsInJlc3BvbnNlX3RleHQiOiIjIyMgU3RlcCAzOiBDcmVhdGUgU3RyYXRlZ3kgcGF0dGVybiBmb3IgZHJhd2luZ1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6Ijk4YjkxYjM0LWY3YzUtNGY0Zi05NjU3LTU1MTJjNjhjMTg3YiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFWQk5ic0czd0NFZERpTmQxR3M2QTlLIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL3N0cmF0ZWd5L0NpcmNsZURyYXdpbmdTdHJhdGVneS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBzdHJhdGVneTtcXG5cXG5pbXBvcnQgRmFjdG9yeS5DaXJjbGVTaGFwZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XFxuaW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xcbmltcG9ydCBtb2RlbC5EcmF3bkNpcmNsZTtcXG5cXG5wdWJsaWMgY2xhc3MgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcXG4gICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xcbiAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcXG4gICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFxcXCJDZXJjbGUgZGVzc2luXFx1MDBlOSBhdmVjIHN1Y2NcXHUwMGU4c1xcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XFxuICAgICAgICByZXR1cm4gXFxcIkNpcmNsZVxcXCI7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNDogQ3JlYXRlIGNvbmNyZXRlIGRyYXdpbmcgc3RyYXRlZ2llc1xuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9zdHJhdGVneS9EcmF3aW5nU3RyYXRlZ3kuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxTGhHZlBuYlh4cnhCV1ZxekFhelM2YSJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MDg6NTMuMzU4WiIsInJlc3BvbnNlX3RleHQiOiIjIyMgU3RlcCA0OiBDcmVhdGUgY29uY3JldGUgZHJhd2luZyBzdHJhdGVnaWVzXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNmEzOGU3MTktZjhjZS00MzVhLThiZmQtMWI1YzM5NGI0ZWI1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1zQ01qTk1nU0NDZE1nTXhSZnlpUnciLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvc3RyYXRlZ3kvTGluZURyYXdpbmdTdHJhdGVneS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBzdHJhdGVneTtcXG5cXG5pbXBvcnQgRmFjdG9yeS5MaW5lU2hhcGU7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xcbmltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcXG5pbXBvcnQgbW9kZWwuRHJhd25MaW5lO1xcblxcbnB1YmxpYyBjbGFzcyBMaW5lRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gVmFsaWRhdGUgbGluZSBjb25zdHJhaW50cyBmaXJzdFxcbiAgICAgICAgICAgIFNoYXBlTWFuYWdlci5WYWxpZGF0aW9uUmVzdWx0IHZhbGlkYXRpb24gPSBcXG4gICAgICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLnZhbGlkYXRlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQoKSkge1xcbiAgICAgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKHZhbGlkYXRpb24uZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBsaW5lXFxuICAgICAgICAgICAgTGluZVNoYXBlIGxpbmVTaGFwZSA9IG5ldyBMaW5lU2hhcGUoKTtcXG4gICAgICAgICAgICBsaW5lU2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIEFkZCB0byBzaGFwZSBtYW5hZ2VyIGZvciB0cmFja2luZ1xcbiAgICAgICAgICAgIERyYXduTGluZSBkcmF3bkxpbmUgPSBuZXcgRHJhd25MaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25MaW5lKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFxcXCJMaWduZSBkZXNzaW5cXHUwMGU5ZSBhdmVjIHN1Y2NcXHUwMGU4c1xcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZGUgbGEgbGlnbmU6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpIHtcXG4gICAgICAgIHJldHVybiBcXFwiTGluZVxcXCI7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9zdHJhdGVneS9DaXJjbGVEcmF3aW5nU3RyYXRlZ3kuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVkJOYnNHM3dDRWREaU5kMUdzNkE5SyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MDk6MDAuODg5WiIsInJlc3BvbnNlX3RleHQiOiIiLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiY2Q3NGY1MjctODU3OC00N2MwLThhOWItYzQyZGEyMmU4YTQ5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMTl1ZWlQaGJuOGFHSEZRMmVWN2twZmQiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvc3RyYXRlZ3kvUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIHN0cmF0ZWd5O1xcblxcbmltcG9ydCBGYWN0b3J5LlJlY3RhbmdsZVNoYXBlO1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcXG5pbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XFxuXFxucHVibGljIGNsYXNzIFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZHJhdyB0aGUgcmVjdGFuZ2xlXFxuICAgICAgICAgICAgUmVjdGFuZ2xlU2hhcGUgcmVjdGFuZ2xlU2hhcGUgPSBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcXG4gICAgICAgICAgICByZWN0YW5nbGVTaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgLy8gTm90ZTogV2UgZG9uJ3QgdHJhY2sgcmVjdGFuZ2xlcyBpbiB0aGUgY29uc3RyYWludCBzeXN0ZW1cXG4gICAgICAgICAgICAvLyBhcyB0aGV5J3JlIG5vdCBwYXJ0IG9mIHRoZSBjaXJjbGUtbGluZSByZWxhdGlvbnNoaXBcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFxcXCJSZWN0YW5nbGUgZGVzc2luXFx1MDBlOSBhdmVjIHN1Y2NcXHUwMGU4c1xcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgcmVjdGFuZ2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XFxuICAgICAgICByZXR1cm4gXFxcIlJlY3RhbmdsZVxcXCI7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9zdHJhdGVneS9MaW5lRHJhd2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMU1zQ01qTk1nU0NDZE1nTXhSZnlpUncifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjA5OjA4LjM4MloiLCJyZXNwb25zZV90ZXh0IjoiIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImM4YzdjYmU0LTU5NDUtNDRlOS04NDQ2LTE3MjgzM2RlMmNmMSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEyTnpRdnlvTlRvbUtyV0xNTnN6anVtIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL3VpL09ic2VydmFibGVUb29sYmFyLmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIHVpO1xcblxcbmltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xcbmltcG9ydCBvYnNlcnZlci5PYnNlcnZhYmxlO1xcbmltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcXG5pbXBvcnQgc3RyYXRlZ3kuKjtcXG5pbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xcbmltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkhCb3g7XFxuXFxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XFxuaW1wb3J0IGphdmEudXRpbC5MaXN0O1xcblxcbi8qKlxcbiAqIE9ic2VydmFibGUgdG9vbGJhciB0aGF0IG5vdGlmaWVzIG9ic2VydmVycyB3aGVuIHRvb2xzIGFyZSBzZWxlY3RlZFxcbiAqL1xcbnB1YmxpYyBjbGFzcyBPYnNlcnZhYmxlVG9vbGJhciBleHRlbmRzIEhCb3ggaW1wbGVtZW50cyBPYnNlcnZhYmxlPFRvb2xiYXJFdmVudD4ge1xcbiAgICBcXG4gICAgcHJpdmF0ZSBmaW5hbCBMaXN0PE9ic2VydmVyPFRvb2xiYXJFdmVudD4+IG9ic2VydmVycztcXG4gICAgcHJpdmF0ZSBEcmF3aW5nU3RyYXRlZ3kgY3VycmVudFN0cmF0ZWd5O1xcbiAgICBcXG4gICAgLy8gRHJhd2luZyBzdHJhdGVnaWVzXFxuICAgIHByaXZhdGUgZmluYWwgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5IHJlY3RhbmdsZVN0cmF0ZWd5O1xcbiAgICBwcml2YXRlIGZpbmFsIENpcmNsZURyYXdpbmdTdHJhdGVneSBjaXJjbGVTdHJhdGVneTtcXG4gICAgcHJpdmF0ZSBmaW5hbCBMaW5lRHJhd2luZ1N0cmF0ZWd5IGxpbmVTdHJhdGVneTtcXG4gICAgXFxuICAgIHB1YmxpYyBPYnNlcnZhYmxlVG9vbGJhcigpIHtcXG4gICAgICAgIHN1cGVyKDEwKTtcXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IEFycmF5TGlzdDw+KCk7XFxuICAgICAgICB0aGlzLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBJbml0aWFsaXplIHN0cmF0ZWdpZXNcXG4gICAgICAgIHRoaXMucmVjdGFuZ2xlU3RyYXRlZ3kgPSBuZXcgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5KCk7XFxuICAgICAgICB0aGlzLmNpcmNsZVN0cmF0ZWd5ID0gbmV3IENpcmNsZURyYXdpbmdTdHJhdGVneSgpO1xcbiAgICAgICAgdGhpcy5saW5lU3RyYXRlZ3kgPSBuZXcgTGluZURyYXdpbmdTdHJhdGVneSgpO1xcbiAgICAgICAgXFxuICAgICAgICAvLyBTZXQgZGVmYXVsdCBzdHJhdGVneVxcbiAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSByZWN0YW5nbGVTdHJhdGVneTtcXG4gICAgICAgIFxcbiAgICAgICAgaW5pdGlhbGl6ZUJ1dHRvbnMoKTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHJpdmF0ZSB2b2lkIGluaXRpYWxpemVCdXR0b25zKCkge1xcbiAgICAgICAgLy8gQ3JlYXRlIGJ1dHRvbnNcXG4gICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFxcXCJSZWN0YW5nbGVcXFwiKTtcXG4gICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFxcXCJDZXJjbGVcXFwiKTtcXG4gICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcXFwiTGlnbmVcXFwiKTtcXG4gICAgICAgIEJ1dHRvbiBjbGVhckJ0biA9IG5ldyBCdXR0b24oXFxcIkVmZmFjZXJcXFwiKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzXFxuICAgICAgICByZWN0YW5nbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShyZWN0YW5nbGVTdHJhdGVneSkpO1xcbiAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gc2VsZWN0U3RyYXRlZ3koY2lyY2xlU3RyYXRlZ3kpKTtcXG4gICAgICAgIGxpbmVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShsaW5lU3RyYXRlZ3kpKTtcXG4gICAgICAgIGNsZWFyQnRuLnNldE9uQWN0aW9uKGUgLT4gY2xlYXJDYW52YXMoKSk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIEFkZCBidXR0b25zIHRvIHRvb2xiYXJcXG4gICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5hZGRBbGwocmVjdGFuZ2xlQnRuLCBjaXJjbGVCdG4sIGxpbmVCdG4sIGNsZWFyQnRuKTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHJpdmF0ZSB2b2lkIHNlbGVjdFN0cmF0ZWd5KERyYXdpbmdTdHJhdGVneSBzdHJhdGVneSkge1xcbiAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSBzdHJhdGVneTtcXG4gICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5TSEFQRV9TRUxFQ1RFRCwgc3RyYXRlZ3kpO1xcbiAgICAgICAgbm90aWZ5T2JzZXJ2ZXJzKGV2ZW50KTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ2FudmFzKCkge1xcbiAgICAgICAgVG9vbGJhckV2ZW50IGV2ZW50ID0gbmV3IFRvb2xiYXJFdmVudChUb29sYmFyRXZlbnQuRXZlbnRUeXBlLkNMRUFSX0NBTlZBUyk7XFxuICAgICAgICBub3RpZnlPYnNlcnZlcnMoZXZlbnQpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgRHJhd2luZ1N0cmF0ZWd5IGdldEN1cnJlbnRTdHJhdGVneSgpIHtcXG4gICAgICAgIHJldHVybiBjdXJyZW50U3RyYXRlZ3k7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgdm9pZCBhZGRPYnNlcnZlcihPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IG9ic2VydmVyKSB7XFxuICAgICAgICBvYnNlcnZlcnMuYWRkKG9ic2VydmVyKTtcXG4gICAgfVxcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIHJlbW92ZU9ic2VydmVyKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIpIHtcXG4gICAgICAgIG9ic2VydmVycy5yZW1vdmUob2JzZXJ2ZXIpO1xcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIHZvaWQgbm90aWZ5T2JzZXJ2ZXJzKFRvb2xiYXJFdmVudCBkYXRhKSB7XFxuICAgICAgICBmb3IgKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIgOiBvYnNlcnZlcnMpIHtcXG4gICAgICAgICAgICBvYnNlcnZlci51cGRhdGUoZGF0YSk7XFxuICAgICAgICB9XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNTogQ3JlYXRlIHRoZSBPYnNlcnZhYmxlIFRvb2xiYXJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvc3RyYXRlZ3kvUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTl1ZWlQaGJuOGFHSEZRMmVWN2twZmQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjA5OjE0LjkwNloiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgNTogQ3JlYXRlIHRoZSBPYnNlcnZhYmxlIFRvb2xiYXJcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJjZjI5ODcxZC00MjFlLTQ1MTAtOWVlYy04Nzk5NzQ5N2VkMzMiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVW5wMWNiM2R5M2hEU2lLaGl6ek5xbSIsInRvb2xfbmFtZSI6InNhdmUtZmlsZSIsImlucHV0X2pzb24iOiJ7XCJpbnN0cnVjdGlvbnNfcmVtaW5kZXJcIjogXCJMSU1JVCBUSEUgRklMRSBDT05URU5UIFRPIEFUIE1PU1QgMzAwIExJTkVTLiBJRiBNT1JFIENPTlRFTlQgTkVFRFMgVE8gQkUgQURERUQgVVNFIFRIRSBzdHItcmVwbGFjZS1lZGl0b3IgVE9PTCBUTyBFRElUIFRIRSBGSUxFIEFGVEVSIElUIEhBUyBCRUVOIENSRUFURUQuXCIsIFwicGF0aFwiOiBcInNyYy91aS9EcmF3aW5nQ2FudmFzLmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIHVpO1xcblxcbmltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xcbmltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcXG5pbXBvcnQgb2JzZXJ2ZXIuT2JzZXJ2ZXI7XFxuaW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xcblxcbi8qKlxcbiAqIERyYXdpbmcgY2FudmFzIHRoYXQgb2JzZXJ2ZXMgdG9vbGJhciBldmVudHMgYW5kIGhhbmRsZXMgZHJhd2luZyBvcGVyYXRpb25zXFxuICovXFxucHVibGljIGNsYXNzIERyYXdpbmdDYW52YXMgZXh0ZW5kcyBDYW52YXMgaW1wbGVtZW50cyBPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IHtcXG4gICAgXFxuICAgIHByaXZhdGUgZmluYWwgR3JhcGhpY3NDb250ZXh0IGdjO1xcbiAgICBwcml2YXRlIGZpbmFsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XFxuICAgIHByaXZhdGUgRHJhd2luZ1N0cmF0ZWd5IGN1cnJlbnRTdHJhdGVneTtcXG4gICAgcHJpdmF0ZSBkb3VibGUgc3RhcnRYLCBzdGFydFk7XFxuICAgIFxcbiAgICBwdWJsaWMgRHJhd2luZ0NhbnZhcyhkb3VibGUgd2lkdGgsIGRvdWJsZSBoZWlnaHQpIHtcXG4gICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQpO1xcbiAgICAgICAgdGhpcy5nYyA9IHRoaXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcXG4gICAgICAgIHRoaXMuc2hhcGVNYW5hZ2VyID0gbmV3IFNoYXBlTWFuYWdlcigpO1xcbiAgICAgICAgXFxuICAgICAgICBzZXR1cEdyYXBoaWNzQ29udGV4dCgpO1xcbiAgICAgICAgc2V0dXBNb3VzZUV2ZW50cygpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBHcmFwaGljc0NvbnRleHQoKSB7XFxuICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xcbiAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwcml2YXRlIHZvaWQgc2V0dXBNb3VzZUV2ZW50cygpIHtcXG4gICAgICAgIHRoaXMuc2V0T25Nb3VzZVByZXNzZWQoZSAtPiB7XFxuICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XFxuICAgICAgICAgICAgc3RhcnRZID0gZS5nZXRZKCk7XFxuICAgICAgICB9KTtcXG4gICAgICAgIFxcbiAgICAgICAgdGhpcy5zZXRPbk1vdXNlUmVsZWFzZWQoZSAtPiB7XFxuICAgICAgICAgICAgaWYgKGN1cnJlbnRTdHJhdGVneSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRYID0gZS5nZXRYKCk7XFxuICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRZID0gZS5nZXRZKCk7XFxuICAgICAgICAgICAgICAgIFxcbiAgICAgICAgICAgICAgICBEcmF3aW5nU3RyYXRlZ3kuRHJhd2luZ1Jlc3VsdCByZXN1bHQgPSBcXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdHJhdGVneS5kcmF3KGdjLCBzaGFwZU1hbmFnZXIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmlzU3VjY2VzcygpICYmIHJlc3VsdC5nZXRNZXNzYWdlKCkgIT0gbnVsbCkge1xcbiAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFxcXCJFcnJldXIgZGUgZGVzc2luXFxcIiwgcmVzdWx0LmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9KTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHJpdmF0ZSB2b2lkIHNob3dBbGVydChTdHJpbmcgdGl0bGUsIFN0cmluZyBtZXNzYWdlKSB7XFxuICAgICAgICBBbGVydCBhbGVydCA9IG5ldyBBbGVydChBbGVydC5BbGVydFR5cGUuV0FSTklORyk7XFxuICAgICAgICBhbGVydC5zZXRUaXRsZSh0aXRsZSk7XFxuICAgICAgICBhbGVydC5zZXRIZWFkZXJUZXh0KG51bGwpO1xcbiAgICAgICAgYWxlcnQuc2V0Q29udGVudFRleHQobWVzc2FnZSk7XFxuICAgICAgICBhbGVydC5zaG93QW5kV2FpdCgpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwcml2YXRlIHZvaWQgY2xlYXJDYW52YXMoKSB7XFxuICAgICAgICBnYy5jbGVhclJlY3QoMCwgMCwgdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpKTtcXG4gICAgICAgIHNoYXBlTWFuYWdlci5jbGVhclNoYXBlcygpO1xcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIHZvaWQgdXBkYXRlKFRvb2xiYXJFdmVudCBldmVudCkge1xcbiAgICAgICAgc3dpdGNoIChldmVudC5nZXRUeXBlKCkpIHtcXG4gICAgICAgICAgICBjYXNlIFNIQVBFX1NFTEVDVEVEOlxcbiAgICAgICAgICAgICAgICBEcmF3aW5nU3RyYXRlZ3kgc3RyYXRlZ3kgPSBldmVudC5nZXREYXRhKERyYXdpbmdTdHJhdGVneS5jbGFzcyk7XFxuICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJhdGVneSA9IHN0cmF0ZWd5O1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIGJyZWFrO1xcbiAgICAgICAgICAgICAgICBcXG4gICAgICAgICAgICBjYXNlIENMRUFSX0NBTlZBUzpcXG4gICAgICAgICAgICAgICAgY2xlYXJDYW52YXMoKTtcXG4gICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIHB1YmxpYyBTaGFwZU1hbmFnZXIgZ2V0U2hhcGVNYW5hZ2VyKCkge1xcbiAgICAgICAgcmV0dXJuIHNoYXBlTWFuYWdlcjtcXG4gICAgfVxcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgU3RlcCA2OiBDcmVhdGUgdGhlIERyYXdpbmcgQ2FudmFzIE9ic2VydmVyXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL3VpL09ic2VydmFibGVUb29sYmFyLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTJOelF2eW9OVG9tS3JXTE1Oc3pqdW0ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjA5OjMwLjMwNFoiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgNjogQ3JlYXRlIHRoZSBEcmF3aW5nIENhbnZhcyBPYnNlcnZlclxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjUwN2RjZmE3LWJlYzctNDkzOC04Y2U0LTY2N2RhOWRhOTFmOSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDE5cUdoNnR0NzVqVU1ESlVNbmZnaDRDIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL01haW5PYnNlcnZlci5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwiaW1wb3J0IHVpLkRyYXdpbmdDYW52YXM7XFxuaW1wb3J0IHVpLk9ic2VydmFibGVUb29sYmFyO1xcbmltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XFxuaW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5Cb3JkZXJQYW5lO1xcbmltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XFxuXFxuLyoqXFxuICogTWFpbiBhcHBsaWNhdGlvbiBjbGFzcyB1c2luZyBPYnNlcnZlciBwYXR0ZXJuIHdpdGggU3RyYXRlZ3kgZm9yIGRyYXdpbmdcXG4gKi9cXG5wdWJsaWMgY2xhc3MgTWFpbk9ic2VydmVyIGV4dGVuZHMgQXBwbGljYXRpb24ge1xcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xcbiAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFxcXCJEZXNzaW4gZGUgRm9ybWVzIEdcXHUwMGU5b21cXHUwMGU5dHJpcXVlcyAtIE9ic2VydmVyIFBhdHRlcm5cXFwiKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBvYnNlcnZhYmxlIHRvb2xiYXJcXG4gICAgICAgIE9ic2VydmFibGVUb29sYmFyIHRvb2xiYXIgPSBuZXcgT2JzZXJ2YWJsZVRvb2xiYXIoKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBkcmF3aW5nIGNhbnZhcyAob2JzZXJ2ZXIpXFxuICAgICAgICBEcmF3aW5nQ2FudmFzIGNhbnZhcyA9IG5ldyBEcmF3aW5nQ2FudmFzKDgwMCwgNjAwKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gUmVnaXN0ZXIgY2FudmFzIGFzIG9ic2VydmVyIG9mIHRvb2xiYXJcXG4gICAgICAgIHRvb2xiYXIuYWRkT2JzZXJ2ZXIoY2FudmFzKTtcXG4gICAgICAgIFxcbiAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcXG4gICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XFxuICAgICAgICByb290LnNldFRvcCh0b29sYmFyKTtcXG4gICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIENyZWF0ZSBhbmQgc2hvdyBzY2VuZVxcbiAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2NTApO1xcbiAgICAgICAgcHJpbWFyeVN0YWdlLnNldFNjZW5lKHNjZW5lKTtcXG4gICAgICAgIHByaW1hcnlTdGFnZS5zaG93KCk7XFxuICAgICAgICBcXG4gICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBkZWZhdWx0IHN0cmF0ZWd5XFxuICAgICAgICBjYW52YXMudXBkYXRlKG5ldyBldmVudHMuVG9vbGJhckV2ZW50KFxcbiAgICAgICAgICAgIGV2ZW50cy5Ub29sYmFyRXZlbnQuRXZlbnRUeXBlLlNIQVBFX1NFTEVDVEVELCBcXG4gICAgICAgICAgICB0b29sYmFyLmdldEN1cnJlbnRTdHJhdGVneSgpXFxuICAgICAgICApKTtcXG4gICAgfVxcbiAgICBcXG4gICAgcHVibGljIHN0YXRpYyB2b2lkIG1haW4oU3RyaW5nW10gYXJncykge1xcbiAgICAgICAgbGF1bmNoKGFyZ3MpO1xcbiAgICB9XFxufVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyBTdGVwIDc6IENyZWF0ZSB0aGUgbmV3IE1haW4gY2xhc3MgdXNpbmcgT2JzZXJ2ZXIgcGF0dGVyblxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy91aS9EcmF3aW5nQ2FudmFzLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVVucDFjYjNkeTNoRFNpS2hpenpOcW0ifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjA5OjQ0LjU1N1oiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgNzogQ3JlYXRlIHRoZSBuZXcgTWFpbiBjbGFzcyB1c2luZyBPYnNlcnZlciBwYXR0ZXJuXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiOTlhOWYzY2ItZWUyZS00OGFjLTk0NzAtZjQ5ZjdlN2IwYjBjIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMgU3VtbWFyeVxuXG5JJ3ZlIHN1Y2Nlc3NmdWxseSB0cmFuc2Zvcm1lZCB5b3VyIGFwcGxpY2F0aW9uIHRvIHVzZSB0aGUgKipPYnNlcnZlciBwYXR0ZXJuKiogd2l0aCAqKlN0cmF0ZWd5IHBhdHRlcm4qKiBmb3IgdGhlIEZhY3RvcnkuIEhlcmUncyB3aGF0IHdhcyBpbXBsZW1lbnRlZDpcblxuIyMjICoqQXJjaGl0ZWN0dXJlIE92ZXJ2aWV3OioqXG5cbjEuICoqT2JzZXJ2YWJsZSBUb29sYmFyKiogKGBPYnNlcnZhYmxlVG9vbGJhcmApOlxuICAgLSBFeHRlbmRzIEphdmFGWCBIQm94IGFuZCBpbXBsZW1lbnRzIE9ic2VydmFibGUgaW50ZXJmYWNlXG4gICAtIENvbnRhaW5zIGRyYXdpbmcgc3RyYXRlZ2llcyBhbmQgbm90aWZpZXMgb2JzZXJ2ZXJzIHdoZW4gdG9vbHMgYXJlIHNlbGVjdGVkXG4gICAtIERlY291cGxlZCBmcm9tIGRyYXdpbmcgbG9naWNcblxuMi4gKipTdHJhdGVneSBQYXR0ZXJuIGZvciBEcmF3aW5nKiogKGBEcmF3aW5nU3RyYXRlZ3lgIGludGVyZmFjZSk6XG4gICAtIGBDaXJjbGVEcmF3aW5nU3RyYXRlZ3lgIC0gSGFuZGxlcyBjaXJjbGUgZHJhd2luZ1xuICAgLSBgTGluZURyYXdpbmdTdHJhdGVneWAgLSBIYW5kbGVzIGxpbmUgZHJhd2luZyB3aXRoIGNvbnN0cmFpbnQgdmFsaWRhdGlvblxuICAgLSBgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5YCAtIEhhbmRsZXMgcmVjdGFuZ2xlIGRyYXdpbmdcbiAgIC0gRWFjaCBzdHJhdGVneSBlbmNhcHN1bGF0ZXMgc3BlY2lmaWMgZHJhd2luZyBiZWhhdmlvciBhbmQgdmFsaWRhdGlvblxuXG4zLiAqKk9ic2VydmVyIFBhdHRlcm4qKiAoYE9ic2VydmVyYC9gT2JzZXJ2YWJsZWAgaW50ZXJmYWNlcyk6XG4gICAtIGBEcmF3aW5nQ2FudmFzYCBvYnNlcnZlcyB0b29sYmFyIGV2ZW50c1xuICAgLSBMb29zZSBjb3VwbGluZyBiZXR3ZWVuIFVJIGNvbXBvbmVudHNcbiAgIC0gRXZlbnQtZHJpdmVuIGNvbW11bmljYXRpb24gdmlhIGBUb29sYmFyRXZlbnRgXG5cbjQuICoqQ2xlYW4gU2VwYXJhdGlvbiBvZiBDb25jZXJucyoqOlxuICAgLSBVSSBsb2dpYyBpbiBgT2JzZXJ2YWJsZVRvb2xiYXJgIGFuZCBgRHJhd2luZ0NhbnZhc2BcbiAgIC0gRHJhd2luZyBzdHJhdGVnaWVzIGhhbmRsZSBzaGFwZS1zcGVjaWZpYyBsb2dpY1xuICAgLSBDb25zdHJhaW50IHZhbGlkYXRpb24gcmVtYWlucyBpbiBgU2hhcGVNYW5hZ2VyYFxuICAgLSBFdmVudCBjb21tdW5pY2F0aW9uIHZpYSBkZWRpY2F0ZWQgZXZlbnQgY2xhc3Nlc1xuXG4jIyMgKipLZXkgQmVuZWZpdHM6Kipcblxu4pyFICoqRGVjb3VwbGVkIEFyY2hpdGVjdHVyZSoqOiBUb29sYmFyIGFuZCBjYW52YXMgY29tbXVuaWNhdGUgdGhyb3VnaCBldmVudHMsIG5vdCBkaXJlY3QgcmVmZXJlbmNlc1xuXG7inIUgKipTdHJhdGVneSBQYXR0ZXJuKio6IEVhc3kgdG8gYWRkIG5ldyBkcmF3aW5nIHRvb2xzIGJ5IGltcGxlbWVudGluZyBgRHJhd2luZ1N0cmF0ZWd5YFxuXG7inIUgKipPYnNlcnZlciBQYXR0ZXJuKio6IE11bHRpcGxlIGNvbXBvbmVudHMgY2FuIG9ic2VydmUgdG9vbGJhciBjaGFuZ2VzXG5cbuKchSAqKk1haW50YWluYWJsZSoqOiBFYWNoIGNsYXNzIGhhcyBhIHNpbmdsZSByZXNwb25zaWJpbGl0eVxuXG7inIUgKipFeHRlbnNpYmxlKio6IEVhc3kgdG8gYWRkIG5ldyBvYnNlcnZlcnMgb3Igc3RyYXRlZ2llc1xuXG4jIyMgKipVc2FnZToqKlxuXG5SdW4gdGhlIG5ldyBhcHBsaWNhdGlvbiB3aXRoOlxuYGBgamF2YVxuLy8gVXNlIE1haW5PYnNlcnZlciBpbnN0ZWFkIG9mIE1haW5cbmphdmEgTWFpbk9ic2VydmVyXG5gYGBcblxuVGhlIGNvbnN0cmFpbnRzIHlvdSBzcGVjaWZpZWQgKGxpbmUgZW5kcG9pbnRzIGluIGNpcmNsZXMsIG9uZSBsaW5lIHBlciBjaXJjbGUpIGFyZSBzdGlsbCBlbmZvcmNlZCB0aHJvdWdoIHRoZSBgTGluZURyYXdpbmdTdHJhdGVneWAgd2hpY2ggdXNlcyB0aGUgZXhpc3RpbmcgYFNoYXBlTWFuYWdlcmAgdmFsaWRhdGlvbi5cblxuV291bGQgeW91IGxpa2UgbWUgdG86XG4xLiBBZGQgbW9yZSBvYnNlcnZlcnMgKGxpa2UgYSBzdGF0dXMgYmFyIHNob3dpbmcgY3VycmVudCB0b29sKT9cbjIuIEV4dGVuZCB0aGUgc3RyYXRlZ3kgcGF0dGVybiB3aXRoIG1vcmUgZHJhd2luZyB0b29scz9cbjMuIEFkZCB1bmRvL3JlZG8gZnVuY3Rpb25hbGl0eSB1c2luZyB0aGUgQ29tbWFuZCBwYXR0ZXJuP1xuNC4gVGVzdCB0aGUgbmV3IGFyY2hpdGVjdHVyZT9cblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvdWkvT2JzZXJ2YWJsZVRvb2xiYXIuamF2YVwiIG1vZGU9XCJFWENFUlBUXCI+XG5gYGBqYXZhXG5wdWJsaWMgY2xhc3MgT2JzZXJ2YWJsZVRvb2xiYXIgZXh0ZW5kcyBIQm94IGltcGxlbWVudHMgT2JzZXJ2YWJsZTxUb29sYmFyRXZlbnQ+IHtcbiAgICBwcml2YXRlIGZpbmFsIExpc3Q8T2JzZXJ2ZXI8VG9vbGJhckV2ZW50Pj4gb2JzZXJ2ZXJzO1xuICAgIHByaXZhdGUgRHJhd2luZ1N0cmF0ZWd5IGN1cnJlbnRTdHJhdGVneTtcbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2VsZWN0U3RyYXRlZ3koRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5TSEFQRV9TRUxFQ1RFRCwgc3RyYXRlZ3kpO1xuICAgICAgICBub3RpZnlPYnNlcnZlcnMoZXZlbnQpO1xuICAgIH1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIyMgU3VtbWFyeVxuXG5JJ3ZlIHN1Y2Nlc3NmdWxseSB0cmFuc2Zvcm1lZCB5b3VyIGFwcGxpY2F0aW9uIHRvIHVzZSB0aGUgKipPYnNlcnZlciBwYXR0ZXJuKiogd2l0aCAqKlN0cmF0ZWd5IHBhdHRlcm4qKiBmb3IgdGhlIEZhY3RvcnkuIEhlcmUncyB3aGF0IHdhcyBpbXBsZW1lbnRlZDpcblxuIyMjICoqQXJjaGl0ZWN0dXJlIE92ZXJ2aWV3OioqXG5cbjEuICoqT2JzZXJ2YWJsZSBUb29sYmFyKiogKGBPYnNlcnZhYmxlVG9vbGJhcmApOlxuICAgLSBFeHRlbmRzIEphdmFGWCBIQm94IGFuZCBpbXBsZW1lbnRzIE9ic2VydmFibGUgaW50ZXJmYWNlXG4gICAtIENvbnRhaW5zIGRyYXdpbmcgc3RyYXRlZ2llcyBhbmQgbm90aWZpZXMgb2JzZXJ2ZXJzIHdoZW4gdG9vbHMgYXJlIHNlbGVjdGVkXG4gICAtIERlY291cGxlZCBmcm9tIGRyYXdpbmcgbG9naWNcblxuMi4gKipTdHJhdGVneSBQYXR0ZXJuIGZvciBEcmF3aW5nKiogKGBEcmF3aW5nU3RyYXRlZ3lgIGludGVyZmFjZSk6XG4gICAtIGBDaXJjbGVEcmF3aW5nU3RyYXRlZ3lgIC0gSGFuZGxlcyBjaXJjbGUgZHJhd2luZ1xuICAgLSBgTGluZURyYXdpbmdTdHJhdGVneWAgLSBIYW5kbGVzIGxpbmUgZHJhd2luZyB3aXRoIGNvbnN0cmFpbnQgdmFsaWRhdGlvblxuICAgLSBgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5YCAtIEhhbmRsZXMgcmVjdGFuZ2xlIGRyYXdpbmdcbiAgIC0gRWFjaCBzdHJhdGVneSBlbmNhcHN1bGF0ZXMgc3BlY2lmaWMgZHJhd2luZyBiZWhhdmlvciBhbmQgdmFsaWRhdGlvblxuXG4zLiAqKk9ic2VydmVyIFBhdHRlcm4qKiAoYE9ic2VydmVyYC9gT2JzZXJ2YWJsZWAgaW50ZXJmYWNlcyk6XG4gICAtIGBEcmF3aW5nQ2FudmFzYCBvYnNlcnZlcyB0b29sYmFyIGV2ZW50c1xuICAgLSBMb29zZSBjb3VwbGluZyBiZXR3ZWVuIFVJIGNvbXBvbmVudHNcbiAgIC0gRXZlbnQtZHJpdmVuIGNvbW11bmljYXRpb24gdmlhIGBUb29sYmFyRXZlbnRgXG5cbjQuICoqQ2xlYW4gU2VwYXJhdGlvbiBvZiBDb25jZXJucyoqOlxuICAgLSBVSSBsb2dpYyBpbiBgT2JzZXJ2YWJsZVRvb2xiYXJgIGFuZCBgRHJhd2luZ0NhbnZhc2BcbiAgIC0gRHJhd2luZyBzdHJhdGVnaWVzIGhhbmRsZSBzaGFwZS1zcGVjaWZpYyBsb2dpY1xuICAgLSBDb25zdHJhaW50IHZhbGlkYXRpb24gcmVtYWlucyBpbiBgU2hhcGVNYW5hZ2VyYFxuICAgLSBFdmVudCBjb21tdW5pY2F0aW9uIHZpYSBkZWRpY2F0ZWQgZXZlbnQgY2xhc3Nlc1xuXG4jIyMgKipLZXkgQmVuZWZpdHM6Kipcblxu4pyFICoqRGVjb3VwbGVkIEFyY2hpdGVjdHVyZSoqOiBUb29sYmFyIGFuZCBjYW52YXMgY29tbXVuaWNhdGUgdGhyb3VnaCBldmVudHMsIG5vdCBkaXJlY3QgcmVmZXJlbmNlc1xuXG7inIUgKipTdHJhdGVneSBQYXR0ZXJuKio6IEVhc3kgdG8gYWRkIG5ldyBkcmF3aW5nIHRvb2xzIGJ5IGltcGxlbWVudGluZyBgRHJhd2luZ1N0cmF0ZWd5YFxuXG7inIUgKipPYnNlcnZlciBQYXR0ZXJuKio6IE11bHRpcGxlIGNvbXBvbmVudHMgY2FuIG9ic2VydmUgdG9vbGJhciBjaGFuZ2VzXG5cbuKchSAqKk1haW50YWluYWJsZSoqOiBFYWNoIGNsYXNzIGhhcyBhIHNpbmdsZSByZXNwb25zaWJpbGl0eVxuXG7inIUgKipFeHRlbnNpYmxlKio6IEVhc3kgdG8gYWRkIG5ldyBvYnNlcnZlcnMgb3Igc3RyYXRlZ2llc1xuXG4jIyMgKipVc2FnZToqKlxuXG5SdW4gdGhlIG5ldyBhcHBsaWNhdGlvbiB3aXRoOlxuYGBgamF2YVxuLy8gVXNlIE1haW5PYnNlcnZlciBpbnN0ZWFkIG9mIE1haW5cbmphdmEgTWFpbk9ic2VydmVyXG5gYGBcblxuVGhlIGNvbnN0cmFpbnRzIHlvdSBzcGVjaWZpZWQgKGxpbmUgZW5kcG9pbnRzIGluIGNpcmNsZXMsIG9uZSBsaW5lIHBlciBjaXJjbGUpIGFyZSBzdGlsbCBlbmZvcmNlZCB0aHJvdWdoIHRoZSBgTGluZURyYXdpbmdTdHJhdGVneWAgd2hpY2ggdXNlcyB0aGUgZXhpc3RpbmcgYFNoYXBlTWFuYWdlcmAgdmFsaWRhdGlvbi5cblxuV291bGQgeW91IGxpa2UgbWUgdG86XG4xLiBBZGQgbW9yZSBvYnNlcnZlcnMgKGxpa2UgYSBzdGF0dXMgYmFyIHNob3dpbmcgY3VycmVudCB0b29sKT9cbjIuIEV4dGVuZCB0aGUgc3RyYXRlZ3kgcGF0dGVybiB3aXRoIG1vcmUgZHJhd2luZyB0b29scz9cbjMuIEFkZCB1bmRvL3JlZG8gZnVuY3Rpb25hbGl0eSB1c2luZyB0aGUgQ29tbWFuZCBwYXR0ZXJuP1xuNC4gVGVzdCB0aGUgbmV3IGFyY2hpdGVjdHVyZT9cblxuYGBgYGphdmEgcGF0aD1zcmMvdWkvT2JzZXJ2YWJsZVRvb2xiYXIuamF2YSBtb2RlPUVYQ0VSUFRcbnB1YmxpYyBjbGFzcyBPYnNlcnZhYmxlVG9vbGJhciBleHRlbmRzIEhCb3ggaW1wbGVtZW50cyBPYnNlcnZhYmxlPFRvb2xiYXJFdmVudD4ge1xuICAgIHByaXZhdGUgZmluYWwgTGlzdDxPYnNlcnZlcjxUb29sYmFyRXZlbnQ+PiBvYnNlcnZlcnM7XG4gICAgcHJpdmF0ZSBEcmF3aW5nU3RyYXRlZ3kgY3VycmVudFN0cmF0ZWd5O1xuICAgIFxuICAgIHByaXZhdGUgdm9pZCBzZWxlY3RTdHJhdGVneShEcmF3aW5nU3RyYXRlZ3kgc3RyYXRlZ3kpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSBzdHJhdGVneTtcbiAgICAgICAgVG9vbGJhckV2ZW50IGV2ZW50ID0gbmV3IFRvb2xiYXJFdmVudChUb29sYmFyRXZlbnQuRXZlbnRUeXBlLlNIQVBFX1NFTEVDVEVELCBzdHJhdGVneSk7XG4gICAgICAgIG5vdGlmeU9ic2VydmVycyhldmVudCk7XG4gICAgfVxuYGBgYFxuIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL01haW5PYnNlcnZlci5qYXZhfSIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDE5cUdoNnR0NzVqVU1ESlVNbmZnaDRDIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTowOTo1Ny42ODFaIiwicmVzcG9uc2VfdGV4dCI6IiMjIFN1bW1hcnlcblxuSSd2ZSBzdWNjZXNzZnVsbHkgdHJhbnNmb3JtZWQgeW91ciBhcHBsaWNhdGlvbiB0byB1c2UgdGhlICoqT2JzZXJ2ZXIgcGF0dGVybioqIHdpdGggKipTdHJhdGVneSBwYXR0ZXJuKiogZm9yIHRoZSBGYWN0b3J5LiBIZXJlJ3Mgd2hhdCB3YXMgaW1wbGVtZW50ZWQ6XG5cbiMjIyAqKkFyY2hpdGVjdHVyZSBPdmVydmlldzoqKlxuXG4xLiAqKk9ic2VydmFibGUgVG9vbGJhcioqIChgT2JzZXJ2YWJsZVRvb2xiYXJgKTpcbiAgIC0gRXh0ZW5kcyBKYXZhRlggSEJveCBhbmQgaW1wbGVtZW50cyBPYnNlcnZhYmxlIGludGVyZmFjZVxuICAgLSBDb250YWlucyBkcmF3aW5nIHN0cmF0ZWdpZXMgYW5kIG5vdGlmaWVzIG9ic2VydmVycyB3aGVuIHRvb2xzIGFyZSBzZWxlY3RlZFxuICAgLSBEZWNvdXBsZWQgZnJvbSBkcmF3aW5nIGxvZ2ljXG5cbjIuICoqU3RyYXRlZ3kgUGF0dGVybiBmb3IgRHJhd2luZyoqIChgRHJhd2luZ1N0cmF0ZWd5YCBpbnRlcmZhY2UpOlxuICAgLSBgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5YCAtIEhhbmRsZXMgY2lyY2xlIGRyYXdpbmdcbiAgIC0gYExpbmVEcmF3aW5nU3RyYXRlZ3lgIC0gSGFuZGxlcyBsaW5lIGRyYXdpbmcgd2l0aCBjb25zdHJhaW50IHZhbGlkYXRpb25cbiAgIC0gYFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneWAgLSBIYW5kbGVzIHJlY3RhbmdsZSBkcmF3aW5nXG4gICAtIEVhY2ggc3RyYXRlZ3kgZW5jYXBzdWxhdGVzIHNwZWNpZmljIGRyYXdpbmcgYmVoYXZpb3IgYW5kIHZhbGlkYXRpb25cblxuMy4gKipPYnNlcnZlciBQYXR0ZXJuKiogKGBPYnNlcnZlcmAvYE9ic2VydmFibGVgIGludGVyZmFjZXMpOlxuICAgLSBgRHJhd2luZ0NhbnZhc2Agb2JzZXJ2ZXMgdG9vbGJhciBldmVudHNcbiAgIC0gTG9vc2UgY291cGxpbmcgYmV0d2VlbiBVSSBjb21wb25lbnRzXG4gICAtIEV2ZW50LWRyaXZlbiBjb21tdW5pY2F0aW9uIHZpYSBgVG9vbGJhckV2ZW50YFxuXG40LiAqKkNsZWFuIFNlcGFyYXRpb24gb2YgQ29uY2VybnMqKjpcbiAgIC0gVUkgbG9naWMgaW4gYE9ic2VydmFibGVUb29sYmFyYCBhbmQgYERyYXdpbmdDYW52YXNgXG4gICAtIERyYXdpbmcgc3RyYXRlZ2llcyBoYW5kbGUgc2hhcGUtc3BlY2lmaWMgbG9naWNcbiAgIC0gQ29uc3RyYWludCB2YWxpZGF0aW9uIHJlbWFpbnMgaW4gYFNoYXBlTWFuYWdlcmBcbiAgIC0gRXZlbnQgY29tbXVuaWNhdGlvbiB2aWEgZGVkaWNhdGVkIGV2ZW50IGNsYXNzZXNcblxuIyMjICoqS2V5IEJlbmVmaXRzOioqXG5cbuKchSAqKkRlY291cGxlZCBBcmNoaXRlY3R1cmUqKjogVG9vbGJhciBhbmQgY2FudmFzIGNvbW11bmljYXRlIHRocm91Z2ggZXZlbnRzLCBub3QgZGlyZWN0IHJlZmVyZW5jZXNcblxu4pyFICoqU3RyYXRlZ3kgUGF0dGVybioqOiBFYXN5IHRvIGFkZCBuZXcgZHJhd2luZyB0b29scyBieSBpbXBsZW1lbnRpbmcgYERyYXdpbmdTdHJhdGVneWBcblxu4pyFICoqT2JzZXJ2ZXIgUGF0dGVybioqOiBNdWx0aXBsZSBjb21wb25lbnRzIGNhbiBvYnNlcnZlIHRvb2xiYXIgY2hhbmdlc1xuXG7inIUgKipNYWludGFpbmFibGUqKjogRWFjaCBjbGFzcyBoYXMgYSBzaW5nbGUgcmVzcG9uc2liaWxpdHlcblxu4pyFICoqRXh0ZW5zaWJsZSoqOiBFYXN5IHRvIGFkZCBuZXcgb2JzZXJ2ZXJzIG9yIHN0cmF0ZWdpZXNcblxuIyMjICoqVXNhZ2U6KipcblxuUnVuIHRoZSBuZXcgYXBwbGljYXRpb24gd2l0aDpcbmBgYGphdmFcbi8vIFVzZSBNYWluT2JzZXJ2ZXIgaW5zdGVhZCBvZiBNYWluXG5qYXZhIE1haW5PYnNlcnZlclxuYGBgXG5cblRoZSBjb25zdHJhaW50cyB5b3Ugc3BlY2lmaWVkIChsaW5lIGVuZHBvaW50cyBpbiBjaXJjbGVzLCBvbmUgbGluZSBwZXIgY2lyY2xlKSBhcmUgc3RpbGwgZW5mb3JjZWQgdGhyb3VnaCB0aGUgYExpbmVEcmF3aW5nU3RyYXRlZ3lgIHdoaWNoIHVzZXMgdGhlIGV4aXN0aW5nIGBTaGFwZU1hbmFnZXJgIHZhbGlkYXRpb24uXG5cbldvdWxkIHlvdSBsaWtlIG1lIHRvOlxuMS4gQWRkIG1vcmUgb2JzZXJ2ZXJzIChsaWtlIGEgc3RhdHVzIGJhciBzaG93aW5nIGN1cnJlbnQgdG9vbCk/XG4yLiBFeHRlbmQgdGhlIHN0cmF0ZWd5IHBhdHRlcm4gd2l0aCBtb3JlIGRyYXdpbmcgdG9vbHM/XG4zLiBBZGQgdW5kby9yZWRvIGZ1bmN0aW9uYWxpdHkgdXNpbmcgdGhlIENvbW1hbmQgcGF0dGVybj9cbjQuIFRlc3QgdGhlIG5ldyBhcmNoaXRlY3R1cmU/XG5cbmBgYGBqYXZhIHBhdGg9c3JjL3VpL09ic2VydmFibGVUb29sYmFyLmphdmEgbW9kZT1FWENFUlBUXG5wdWJsaWMgY2xhc3MgT2JzZXJ2YWJsZVRvb2xiYXIgZXh0ZW5kcyBIQm94IGltcGxlbWVudHMgT2JzZXJ2YWJsZTxUb29sYmFyRXZlbnQ+IHtcbiAgICBwcml2YXRlIGZpbmFsIExpc3Q8T2JzZXJ2ZXI8VG9vbGJhckV2ZW50Pj4gb2JzZXJ2ZXJzO1xuICAgIHByaXZhdGUgRHJhd2luZ1N0cmF0ZWd5IGN1cnJlbnRTdHJhdGVneTtcbiAgICBcbiAgICBwcml2YXRlIHZvaWQgc2VsZWN0U3RyYXRlZ3koRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5KSB7XG4gICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5TSEFQRV9TRUxFQ1RFRCwgc3RyYXRlZ3kpO1xuICAgICAgICBub3RpZnlPYnNlcnZlcnMoZXZlbnQpO1xuICAgIH1cbmBgYGBcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsicmVxdWVzdF9pZCI6IjM4Mzc3YzMwLTljOTYtNDdjZC1iMjkzLTgzYTE5NWYxMDYwZCIsInV1aWQiOiJlMGRlY2U2YS01MDQwLTQ0OTQtODk1Ny0yNWZkMDhkNmY1NzMiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDg1MzAxOTI1NjMsInRvVGltZXN0YW1wIjoxNzQ4NTMxNDEzOTE1LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6IjI0NWQzMmI2LTI2NzMtNGJkOC1iMjY4LWQzNmU1ZWY5YjJkNiIsInV1aWQiOiI0YTYyZDE4OS1jMjYwLTQ4NDYtODBkNi1jNDQwY2E0Zjc0YjUiLCJjaGF0SXRlbVR5cGUiOiJhZ2VudGljLWNoZWNrcG9pbnQtZGVsaW1pdGVyIiwic3RhdHVzIjoic3VjY2VzcyIsImZyb21UaW1lc3RhbXAiOjE3NDg1MzE0MTM5MTUsInRvVGltZXN0YW1wIjoxNzQ4NTMxNTM2NzQ3LCJzZWVuX3N0YXRlIjoic2VlbiJ9LHsicmVxdWVzdF9pZCI6IjU4MzMyZGQyLTg1YTctNGIwMC1hNjhiLTkzOGZiMDk2NWRlOSIsInN0YXR1cyI6ImNhbmNlbGxlZCIsImNoYXRJdGVtVHlwZSI6ImFnZW50aWMtdHVybi1kZWxpbWl0ZXIifSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDdlYmJiNDYtOWNjZi00ZDJkLWFjNzktZGI3MTVlNzc5MGQ4IiwicmVxdWVzdF9tZXNzYWdlIjoiY3JlYXRlIGEgbG9nZ2luZyBzdHJhdGVneSBkZXNpZ24gcGF0dGVybiB0byA6XG5Kb3VybmFsaXNlciBsZXMgYWN0aW9ucyBkZSBs4oCZdXRpbGlzYXRldXIgKHPDqWxlY3Rpb24sIGRlc3NpbiwuLilcclxu4oCiIExhIGpvdXJuYWxpc2F0aW9uIHBldXQgw6p0cmUgcsOpYWxpc8OpZSBzZWxvbiB0cm9pcyBzdHJhdMOpZ2llcyA6XHJcbm8gRGFucyBsYSBjb25zb2xlXHJcbm8gRGFucyB1biBmaWNoaWVyIHRleHRlXHJcbm8gRGFucyB1bmUgYmFzZSBkZSBkb25uw6llcyIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgiLCJjb250ZW50IjpbeyJ0eXBlIjoidGV4dCIsInRleHQiOiJjcmVhdGUgYSBsb2dnaW5nIHN0cmF0ZWd5IGRlc2lnbiBwYXR0ZXJuIHRvIDoifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IkpvdXJuYWxpc2VyIGxlcyBhY3Rpb25zIGRlIGzigJl1dGlsaXNhdGV1ciAoc8OpbGVjdGlvbiwgZGVzc2luLC4uKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiLigKIgTGEgam91cm5hbGlzYXRpb24gcGV1dCDDqnRyZSByw6lhbGlzw6llIHNlbG9uIHRyb2lzIHN0cmF0w6lnaWVzIDpcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoibyBEYW5zIGxhIGNvbnNvbGVcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoibyBEYW5zIHVuIGZpY2hpZXIgdGV4dGVcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoibyBEYW5zIHVuZSBiYXNlIGRlIGRvbm7DqWVzIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVFQyZEpzcmJnSnlwbjhYSGl0THR2ayIsInRvb2xfbmFtZSI6ImNvZGViYXNlLXJldHJpZXZhbCIsImlucHV0X2pzb24iOiJ7XCJpbmZvcm1hdGlvbl9yZXF1ZXN0XCI6IFwiU2hvdyBtZSB0aGUgY3VycmVudCBldmVudCBzeXN0ZW0gYW5kIHVzZXIgYWN0aW9ucyB0aGF0IG5lZWQgdG8gYmUgbG9nZ2VkLCBpbmNsdWRpbmcgdG9vbGJhciBldmVudHMsIGRyYXdpbmcgb3BlcmF0aW9ucywgYW5kIGFueSBvdGhlciB1c2VyIGludGVyYWN0aW9ucyBpbiB0aGUgYXBwbGljYXRpb24uXCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiRXhjZWxsZW50IGlkZWEhIEknbGwgY3JlYXRlIGEgbG9nZ2luZyBzdHJhdGVneSBkZXNpZ24gcGF0dGVybiB0byB0cmFjayB1c2VyIGFjdGlvbnMuIFRoaXMgd2lsbCBhZGQgYW5vdGhlciBsYXllciBvZiB0aGUgU3RyYXRlZ3kgcGF0dGVybiB0byB5b3VyIGFwcGxpY2F0aW9uIGZvciBkaWZmZXJlbnQgbG9nZ2luZyBhcHByb2FjaGVzLlxuXG5MZXQgbWUgYW5hbHl6ZSB0aGUgY3VycmVudCBzdHJ1Y3R1cmUgYW5kIGNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgbG9nZ2luZyBzeXN0ZW0uXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6ImNyZWF0ZSBhIGxvZ2dpbmcgc3RyYXRlZ3kgZGVzaWduIHBhdHRlcm4gdG8gOlxuSm91cm5hbGlzZXIgbGVzIGFjdGlvbnMgZGUgbOKAmXV0aWxpc2F0ZXVyIChzw6lsZWN0aW9uLCBkZXNzaW4sLi4pXHJcbuKAoiBMYSBqb3VybmFsaXNhdGlvbiBwZXV0IMOqdHJlIHLDqWFsaXPDqWUgc2Vsb24gdHJvaXMgc3RyYXTDqWdpZXMgOlxyXG5vIERhbnMgbGEgY29uc29sZVxyXG5vIERhbnMgdW4gZmljaGllciB0ZXh0ZVxyXG5vIERhbnMgdW5lIGJhc2UgZGUgZG9ubsOpZXMifX0seyJpZCI6MSwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM0OjQ3LjQwM1oiLCJyZXNwb25zZV90ZXh0IjoiRXhjZWxsZW50IGlkZWEhIEknbGwgY3JlYXRlIGEgbG9nZ2luZyBzdHJhdGVneSBkZXNpZ24gcGF0dGVybiB0byB0cmFjayB1c2VyIGFjdGlvbnMuIFRoaXMgd2lsbCBhZGQgYW5vdGhlciBsYXllciBvZiB0aGUgU3RyYXRlZ3kgcGF0dGVybiB0byB5b3VyIGFwcGxpY2F0aW9uIGZvciBkaWZmZXJlbnQgbG9nZ2luZyBhcHByb2FjaGVzLlxuXG5MZXQgbWUgYW5hbHl6ZSB0aGUgY3VycmVudCBzdHJ1Y3R1cmUgYW5kIGNyZWF0ZSBhIGNvbXByZWhlbnNpdmUgbG9nZ2luZyBzeXN0ZW0uXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYjZmZjEwN2MtMGI1NC00MjU5LWE1MGYtYWIzOGE5NDU2YTY3IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUFWU2FEd1VhNjZ6ZUN5eHlwOW9ZeXgiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbG9nZ2luZy9Mb2dFbnRyeS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBsb2dnaW5nO1xcblxcbmltcG9ydCBqYXZhLnRpbWUuTG9jYWxEYXRlVGltZTtcXG5pbXBvcnQgamF2YS50aW1lLmZvcm1hdC5EYXRlVGltZUZvcm1hdHRlcjtcXG5cXG4vKipcXG4gKiBSZXByZXNlbnRzIGEgbG9nIGVudHJ5IGZvciB1c2VyIGFjdGlvbnNcXG4gKi9cXG5wdWJsaWMgY2xhc3MgTG9nRW50cnkge1xcbiAgICBcXG4gICAgcHVibGljIGVudW0gQWN0aW9uVHlwZSB7XFxuICAgICAgICBUT09MX1NFTEVDVElPTixcXG4gICAgICAgIFNIQVBFX0RSQVdOLFxcbiAgICAgICAgQ0FOVkFTX0NMRUFSRUQsXFxuICAgICAgICBEUkFXSU5HX0ZBSUxFRCxcXG4gICAgICAgIEFQUExJQ0FUSU9OX1NUQVJURUQsXFxuICAgICAgICBBUFBMSUNBVElPTl9DTE9TRURcXG4gICAgfVxcbiAgICBcXG4gICAgcHJpdmF0ZSBmaW5hbCBMb2NhbERhdGVUaW1lIHRpbWVzdGFtcDtcXG4gICAgcHJpdmF0ZSBmaW5hbCBBY3Rpb25UeXBlIGFjdGlvblR5cGU7XFxuICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGRlc2NyaXB0aW9uO1xcbiAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBkZXRhaWxzO1xcbiAgICBwcml2YXRlIGZpbmFsIFN0cmluZyB1c2VySWQ7XFxuICAgIFxcbiAgICBwdWJsaWMgTG9nRW50cnkoQWN0aW9uVHlwZSBhY3Rpb25UeXBlLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBkZXRhaWxzLCBTdHJpbmcgdXNlcklkKSB7XFxuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IExvY2FsRGF0ZVRpbWUubm93KCk7XFxuICAgICAgICB0aGlzLmFjdGlvblR5cGUgPSBhY3Rpb25UeXBlO1xcbiAgICAgICAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xcbiAgICAgICAgdGhpcy5kZXRhaWxzID0gZGV0YWlscztcXG4gICAgICAgIHRoaXMudXNlcklkID0gdXNlcklkO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgTG9nRW50cnkoQWN0aW9uVHlwZSBhY3Rpb25UeXBlLCBTdHJpbmcgZGVzY3JpcHRpb24sIFN0cmluZyBkZXRhaWxzKSB7XFxuICAgICAgICB0aGlzKGFjdGlvblR5cGUsIGRlc2NyaXB0aW9uLCBkZXRhaWxzLCBcXFwidXNlclxcXCIpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgTG9nRW50cnkoQWN0aW9uVHlwZSBhY3Rpb25UeXBlLCBTdHJpbmcgZGVzY3JpcHRpb24pIHtcXG4gICAgICAgIHRoaXMoYWN0aW9uVHlwZSwgZGVzY3JpcHRpb24sIG51bGwsIFxcXCJ1c2VyXFxcIik7XFxuICAgIH1cXG4gICAgXFxuICAgIC8vIEdldHRlcnNcXG4gICAgcHVibGljIExvY2FsRGF0ZVRpbWUgZ2V0VGltZXN0YW1wKCkgeyByZXR1cm4gdGltZXN0YW1wOyB9XFxuICAgIHB1YmxpYyBBY3Rpb25UeXBlIGdldEFjdGlvblR5cGUoKSB7IHJldHVybiBhY3Rpb25UeXBlOyB9XFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0RGVzY3JpcHRpb24oKSB7IHJldHVybiBkZXNjcmlwdGlvbjsgfVxcbiAgICBwdWJsaWMgU3RyaW5nIGdldERldGFpbHMoKSB7IHJldHVybiBkZXRhaWxzOyB9XFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0VXNlcklkKCkgeyByZXR1cm4gdXNlcklkOyB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogRm9ybWF0cyB0aGUgbG9nIGVudHJ5IGFzIGEgcmVhZGFibGUgc3RyaW5nXFxuICAgICAqL1xcbiAgICBwdWJsaWMgU3RyaW5nIHRvRm9ybWF0dGVkU3RyaW5nKCkge1xcbiAgICAgICAgRGF0ZVRpbWVGb3JtYXR0ZXIgZm9ybWF0dGVyID0gRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKFxcXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXFxcIik7XFxuICAgICAgICBTdHJpbmdCdWlsZGVyIHNiID0gbmV3IFN0cmluZ0J1aWxkZXIoKTtcXG4gICAgICAgIFxcbiAgICAgICAgc2IuYXBwZW5kKFxcXCJbXFxcIikuYXBwZW5kKHRpbWVzdGFtcC5mb3JtYXQoZm9ybWF0dGVyKSkuYXBwZW5kKFxcXCJdIFxcXCIpO1xcbiAgICAgICAgc2IuYXBwZW5kKFxcXCJbXFxcIikuYXBwZW5kKGFjdGlvblR5cGUpLmFwcGVuZChcXFwiXSBcXFwiKTtcXG4gICAgICAgIHNiLmFwcGVuZChcXFwiW1xcXCIpLmFwcGVuZCh1c2VySWQpLmFwcGVuZChcXFwiXSBcXFwiKTtcXG4gICAgICAgIHNiLmFwcGVuZChkZXNjcmlwdGlvbik7XFxuICAgICAgICBcXG4gICAgICAgIGlmIChkZXRhaWxzICE9IG51bGwgJiYgIWRldGFpbHMudHJpbSgpLmlzRW1wdHkoKSkge1xcbiAgICAgICAgICAgIHNiLmFwcGVuZChcXFwiIC0gXFxcIikuYXBwZW5kKGRldGFpbHMpO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICByZXR1cm4gc2IudG9TdHJpbmcoKTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEZvcm1hdHMgdGhlIGxvZyBlbnRyeSBhcyBDU1ZcXG4gICAgICovXFxuICAgIHB1YmxpYyBTdHJpbmcgdG9Dc3ZTdHJpbmcoKSB7XFxuICAgICAgICBEYXRlVGltZUZvcm1hdHRlciBmb3JtYXR0ZXIgPSBEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oXFxcInl5eXktTU0tZGQgSEg6bW06c3NcXFwiKTtcXG4gICAgICAgIHJldHVybiBTdHJpbmcuZm9ybWF0KFxcXCJcXFxcXFxcIiVzXFxcXFxcXCIsXFxcXFxcXCIlc1xcXFxcXFwiLFxcXFxcXFwiJXNcXFxcXFxcIixcXFxcXFxcIiVzXFxcXFxcXCIsXFxcXFxcXCIlc1xcXFxcXFwiXFxcIixcXG4gICAgICAgICAgICB0aW1lc3RhbXAuZm9ybWF0KGZvcm1hdHRlciksXFxuICAgICAgICAgICAgYWN0aW9uVHlwZSxcXG4gICAgICAgICAgICB1c2VySWQsXFxuICAgICAgICAgICAgZGVzY3JpcHRpb24ucmVwbGFjZShcXFwiXFxcXFxcXCJcXFwiLCBcXFwiXFxcXFxcXCJcXFxcXFxcIlxcXCIpLFxcbiAgICAgICAgICAgIGRldGFpbHMgIT0gbnVsbCA/IGRldGFpbHMucmVwbGFjZShcXFwiXFxcXFxcXCJcXFwiLCBcXFwiXFxcXFxcXCJcXFxcXFxcIlxcXCIpIDogXFxcIlxcXCJcXG4gICAgICAgICk7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgU3RyaW5nIHRvU3RyaW5nKCkge1xcbiAgICAgICAgcmV0dXJuIHRvRm9ybWF0dGVkU3RyaW5nKCk7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiUGVyZmVjdCEgTm93IEkgdW5kZXJzdGFuZCB0aGUgY3VycmVudCBhcmNoaXRlY3R1cmUuIExldCBtZSBjcmVhdGUgYSBjb21wcmVoZW5zaXZlIGxvZ2dpbmcgc3RyYXRlZ3kgc3lzdGVtIHRoYXQgd2lsbCB0cmFjayBhbGwgdXNlciBhY3Rpb25zLiBIZXJlJ3MgbXkgZGV0YWlsZWQgcGxhbjpcblxuIyMgTG9nZ2luZyBTdHJhdGVneSBEZXNpZ24gUGF0dGVybiBJbXBsZW1lbnRhdGlvblxuXG4jIyMgU3RlcCAxOiBDcmVhdGUgdGhlIGxvZ2dpbmcgZGF0YSBtb2RlbFxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL2V2ZW50cy9Ub29sYmFyRXZlbnQuamF2YVxuICAgICAxXHRwYWNrYWdlIGV2ZW50cztcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBFdmVudHMgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZSB0b29sYmFyXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgY2xhc3MgVG9vbGJhckV2ZW50IHtcbiAgICAgN1x0ICAgIFxuICAgICA4XHQgICAgcHVibGljIGVudW0gRXZlbnRUeXBlIHtcbiAgICAgOVx0ICAgICAgICBTSEFQRV9TRUxFQ1RFRCxcbiAgICAxMFx0ICAgICAgICBDTEVBUl9DQU5WQVNcbiAgICAxMVx0ICAgIH1cbiAgICAxMlx0ICAgIFxuICAgIDEzXHQgICAgcHJpdmF0ZSBmaW5hbCBFdmVudFR5cGUgdHlwZTtcbiAgICAxNFx0ICAgIHByaXZhdGUgZmluYWwgT2JqZWN0IGRhdGE7XG4gICAgMTVcdCAgICBcbiAgICAxNlx0ICAgIHB1YmxpYyBUb29sYmFyRXZlbnQoRXZlbnRUeXBlIHR5cGUsIE9iamVjdCBkYXRhKSB7XG4gICAgMTdcdCAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAxOFx0ICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIDE5XHQgICAgfVxuICAgIDIwXHQgICAgXG4gICAgMjFcdCAgICBwdWJsaWMgVG9vbGJhckV2ZW50KEV2ZW50VHlwZSB0eXBlKSB7XG4gICAgMjJcdCAgICAgICAgdGhpcyh0eXBlLCBudWxsKTtcbiAgICAyM1x0ICAgIH1cbiAgICAyNFx0ICAgIFxuICAgIDI1XHQgICAgcHVibGljIEV2ZW50VHlwZSBnZXRUeXBlKCkge1xuICAgIDI2XHQgICAgICAgIHJldHVybiB0eXBlO1xuICAgIDI3XHQgICAgfVxuICAgIDI4XHQgICAgXG4gICAgMjlcdCAgICBwdWJsaWMgT2JqZWN0IGdldERhdGEoKSB7XG4gICAgMzBcdCAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdCAgICBcbiAgICAzM1x0ICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgMzRcdCAgICBwdWJsaWMgPFQ+IFQgZ2V0RGF0YShDbGFzczxUPiBjbGF6eikge1xuICAgIDM1XHQgICAgICAgIGlmIChkYXRhICE9IG51bGwgJiYgY2xhenouaXNJbnN0YW5jZShkYXRhKSkge1xuICAgIDM2XHQgICAgICAgICAgICByZXR1cm4gKFQpIGRhdGE7XG4gICAgMzdcdCAgICAgICAgfVxuICAgIDM4XHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDM5XHQgICAgfVxuICAgIDQwXHR9XG4uLi5cblBhdGg6IHNyYy91aS9PYnNlcnZhYmxlVG9vbGJhci5qYXZhXG4gICAgIDFcdHBhY2thZ2UgdWk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZXZlbnRzLlRvb2xiYXJFdmVudDtcbiAgICAgNFx0aW1wb3J0IG9ic2VydmVyLk9ic2VydmFibGU7XG4gICAgIDVcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNlx0aW1wb3J0IHN0cmF0ZWd5Lio7XG4gICAgIDdcdGltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDEwXHRcbiAgICAxMVx0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgMTJcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAxM1x0XG4gICAgMTRcdC8qKlxuICAgIDE1XHQgKiBPYnNlcnZhYmxlIHRvb2xiYXIgdGhhdCBub3RpZmllcyBvYnNlcnZlcnMgd2hlbiB0b29scyBhcmUgc2VsZWN0ZWRcbiAgICAxNlx0ICovXG4gICAgMTdcdHB1YmxpYyBjbGFzcyBPYnNlcnZhYmxlVG9vbGJhciBleHRlbmRzIEhCb3ggaW1wbGVtZW50cyBPYnNlcnZhYmxlPFRvb2xiYXJFdmVudD4ge1xuICAgIDE4XHQgICAgXG4gICAgMTlcdCAgICBwcml2YXRlIGZpbmFsIExpc3Q8T2JzZXJ2ZXI8VG9vbGJhckV2ZW50Pj4gb2JzZXJ2ZXJzO1xuICAgIDIwXHQgICAgcHJpdmF0ZSBEcmF3aW5nU3RyYXRlZ3kgY3VycmVudFN0cmF0ZWd5O1xuICAgIDIxXHQgICAgXG4gICAgMjJcdCAgICAvLyBEcmF3aW5nIHN0cmF0ZWdpZXNcbiAgICAyM1x0ICAgIHByaXZhdGUgZmluYWwgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5IHJlY3RhbmdsZVN0cmF0ZWd5O1xuICAgIDI0XHQgICAgcHJpdmF0ZSBmaW5hbCBDaXJjbGVEcmF3aW5nU3RyYXRlZ3kgY2lyY2xlU3RyYXRlZ3k7XG4gICAgMjVcdCAgICBwcml2YXRlIGZpbmFsIExpbmVEcmF3aW5nU3RyYXRlZ3kgbGluZVN0cmF0ZWd5O1xuICAgIDI2XHQgICAgXG4gICAgMjdcdCAgICBwdWJsaWMgT2JzZXJ2YWJsZVRvb2xiYXIoKSB7XG4gICAgMjhcdCAgICAgICAgc3VwZXIoMTApO1xuICAgIDI5XHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgMzBcdCAgICAgICAgdGhpcy5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzMVx0ICAgICAgICBcbiAgICAzMlx0ICAgICAgICAvLyBJbml0aWFsaXplIHN0cmF0ZWdpZXNcbiAgICAzM1x0ICAgICAgICB0aGlzLnJlY3RhbmdsZVN0cmF0ZWd5ID0gbmV3IFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneSgpO1xuICAgIDM0XHQgICAgICAgIHRoaXMuY2lyY2xlU3RyYXRlZ3kgPSBuZXcgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5KCk7XG4gICAgMzVcdCAgICAgICAgdGhpcy5saW5lU3RyYXRlZ3kgPSBuZXcgTGluZURyYXdpbmdTdHJhdGVneSgpO1xuICAgIDM2XHQgICAgICAgIFxuICAgIDM3XHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHN0cmF0ZWd5XG4gICAgMzhcdCAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSByZWN0YW5nbGVTdHJhdGVneTtcbiAgICAzOVx0ICAgICAgICBcbiAgICA0MFx0ICAgICAgICBpbml0aWFsaXplQnV0dG9ucygpO1xuICAgIDQxXHQgICAgfVxuICAgIDQyXHQgICAgXG4gICAgNDNcdCAgICBwcml2YXRlIHZvaWQgaW5pdGlhbGl6ZUJ1dHRvbnMoKSB7XG4gICAgNDRcdCAgICAgICAgLy8gQ3JlYXRlIGJ1dHRvbnNcbiAgICA0NVx0ICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcIlJlY3RhbmdsZVwiKTtcbiAgICA0Nlx0ICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcIkNlcmNsZVwiKTtcbiAgICA0N1x0ICAgICAgICBCdXR0b24gbGluZUJ0biA9IG5ldyBCdXR0b24oXCJMaWduZVwiKTtcbiAgICA0OFx0ICAgICAgICBCdXR0b24gY2xlYXJCdG4gPSBuZXcgQnV0dG9uKFwiRWZmYWNlclwiKTtcbiAgICA0OVx0ICAgICAgICBcbiAgICA1MFx0ICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnNcbiAgICA1MVx0ICAgICAgICByZWN0YW5nbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShyZWN0YW5nbGVTdHJhdGVneSkpO1xuICAgIDUyXHQgICAgICAgIGNpcmNsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IHNlbGVjdFN0cmF0ZWd5KGNpcmNsZVN0cmF0ZWd5KSk7XG4gICAgNTNcdCAgICAgICAgbGluZUJ0bi5zZXRPbkFjdGlvbihlIC0+IHNlbGVjdFN0cmF0ZWd5KGxpbmVTdHJhdGVneSkpO1xuICAgIDU0XHQgICAgICAgIGNsZWFyQnRuLnNldE9uQWN0aW9uKGUgLT4gY2xlYXJDYW52YXMoKSk7XG4gICAgNTVcdCAgICAgICAgXG4gICAgNTZcdCAgICAgICAgLy8gQWRkIGJ1dHRvbnMgdG8gdG9vbGJhclxuICAgIDU3XHQgICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5hZGRBbGwocmVjdGFuZ2xlQnRuLCBjaXJjbGVCdG4sIGxpbmVCdG4sIGNsZWFyQnRuKTtcbiAgICA1OFx0ICAgIH1cbiAgICA1OVx0ICAgIFxuICAgIDYwXHQgICAgcHJpdmF0ZSB2b2lkIHNlbGVjdFN0cmF0ZWd5KERyYXdpbmdTdHJhdGVneSBzdHJhdGVneSkge1xuICAgIDYxXHQgICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgNjJcdCAgICAgICAgVG9vbGJhckV2ZW50IGV2ZW50ID0gbmV3IFRvb2xiYXJFdmVudChUb29sYmFyRXZlbnQuRXZlbnRUeXBlLlNIQVBFX1NFTEVDVEVELCBzdHJhdGVneSk7XG4gICAgNjNcdCAgICAgICAgbm90aWZ5T2JzZXJ2ZXJzKGV2ZW50KTtcbiAgICA2NFx0ICAgIH1cbiAgICA2NVx0ICAgIFxuICAgIDY2XHQgICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ2FudmFzKCkge1xuICAgIDY3XHQgICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5DTEVBUl9DQU5WQVMpO1xuICAgIDY4XHQgICAgICAgIG5vdGlmeU9ic2VydmVycyhldmVudCk7XG4gICAgNjlcdCAgICB9XG4gICAgNzBcdCAgICBcbiAgICA3MVx0ICAgIHB1YmxpYyBEcmF3aW5nU3RyYXRlZ3kgZ2V0Q3VycmVudFN0cmF0ZWd5KCkge1xuICAgIDcyXHQgICAgICAgIHJldHVybiBjdXJyZW50U3RyYXRlZ3k7XG4gICAgNzNcdCAgICB9XG4gICAgNzRcdCAgICBcbiAgICA3NVx0ICAgIEBPdmVycmlkZVxuICAgIDc2XHQgICAgcHVibGljIHZvaWQgYWRkT2JzZXJ2ZXIoT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiBvYnNlcnZlcikge1xuICAgIDc3XHQgICAgICAgIG9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgIDc4XHQgICAgfVxuICAgIDc5XHQgICAgXG4gICAgODBcdCAgICBAT3ZlcnJpZGVcbiAgICA4MVx0ICAgIHB1YmxpYyB2b2lkIHJlbW92ZU9ic2VydmVyKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIpIHtcbiAgICA4Mlx0ICAgICAgICBvYnNlcnZlcnMucmVtb3ZlKG9ic2VydmVyKTtcbiAgICA4M1x0ICAgIH1cbiAgICA4NFx0ICAgIFxuICAgIDg1XHQgICAgQE92ZXJyaWRlXG4gICAgODZcdCAgICBwdWJsaWMgdm9pZCBub3RpZnlPYnNlcnZlcnMoVG9vbGJhckV2ZW50IGRhdGEpIHtcbiAgICA4N1x0ICAgICAgICBmb3IgKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIgOiBvYnNlcnZlcnMpIHtcbiAgICA4OFx0ICAgICAgICAgICAgb2JzZXJ2ZXIudXBkYXRlKGRhdGEpO1xuICAgIDg5XHQgICAgICAgIH1cbiAgICA5MFx0ICAgIH1cbiAgICA5MVx0fVxuLi4uXG5QYXRoOiBzcmMvTWFpbk9ic2VydmVyLmphdmFcbiAgICAgMVx0aW1wb3J0IHVpLkRyYXdpbmdDYW52YXM7XG4gICAgIDJcdGltcG9ydCB1aS5PYnNlcnZhYmxlVG9vbGJhcjtcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgNVx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAgNlx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAgN1x0XG4gICAgIDhcdC8qKlxuICAgICA5XHQgKiBNYWluIGFwcGxpY2F0aW9uIGNsYXNzIHVzaW5nIE9ic2VydmVyIHBhdHRlcm4gd2l0aCBTdHJhdGVneSBmb3IgZHJhd2luZ1xuICAgIDEwXHQgKi9cbiAgICAxMVx0cHVibGljIGNsYXNzIE1haW5PYnNlcnZlciBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICAxMlx0ICAgIFxuICAgIDEzXHQgICAgQE92ZXJyaWRlXG4gICAgMTRcdCAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAxNVx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0VGl0bGUoXCJEZXNzaW4gZGUgRm9ybWVzIEfDqW9tw6l0cmlxdWVzIC0gT2JzZXJ2ZXIgUGF0dGVyblwiKTtcbiAgICAxNlx0ICAgICAgICBcbiAgICAxN1x0ICAgICAgICAvLyBDcmVhdGUgdGhlIG9ic2VydmFibGUgdG9vbGJhclxuICAgIDE4XHQgICAgICAgIE9ic2VydmFibGVUb29sYmFyIHRvb2xiYXIgPSBuZXcgT2JzZXJ2YWJsZVRvb2xiYXIoKTtcbiAgICAxOVx0ICAgICAgICBcbiAgICAyMFx0ICAgICAgICAvLyBDcmVhdGUgdGhlIGRyYXdpbmcgY2FudmFzIChvYnNlcnZlcilcbiAgICAyMVx0ICAgICAgICBEcmF3aW5nQ2FudmFzIGNhbnZhcyA9IG5ldyBEcmF3aW5nQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAyMlx0ICAgICAgICBcbiAgICAyM1x0ICAgICAgICAvLyBSZWdpc3RlciBjYW52YXMgYXMgb2JzZXJ2ZXIgb2YgdG9vbGJhclxuICAgIDI0XHQgICAgICAgIHRvb2xiYXIuYWRkT2JzZXJ2ZXIoY2FudmFzKTtcbiAgICAyNVx0ICAgICAgICBcbiAgICAyNlx0ICAgICAgICAvLyBTZXQgdXAgdGhlIGxheW91dFxuICAgIDI3XHQgICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XG4gICAgMjhcdCAgICAgICAgcm9vdC5zZXRUb3AodG9vbGJhcik7XG4gICAgMjlcdCAgICAgICAgcm9vdC5zZXRDZW50ZXIoY2FudmFzKTtcbiAgICAzMFx0ICAgICAgICBcbiAgICAzMVx0ICAgICAgICAvLyBDcmVhdGUgYW5kIHNob3cgc2NlbmVcbiAgICAzMlx0ICAgICAgICBTY2VuZSBzY2VuZSA9IG5ldyBTY2VuZShyb290LCA4MDAsIDY1MCk7XG4gICAgMzNcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFNjZW5lKHNjZW5lKTtcbiAgICAzNFx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2hvdygpO1xuICAgIDM1XHQgICAgICAgIFxuICAgIDM2XHQgICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBkZWZhdWx0IHN0cmF0ZWd5XG4gICAgMzdcdCAgICAgICAgY2FudmFzLnVwZGF0ZShuZXcgZXZlbnRzLlRvb2xiYXJFdmVudChcbiAgICAzOFx0ICAgICAgICAgICAgZXZlbnRzLlRvb2xiYXJFdmVudC5FdmVudFR5cGUuU0hBUEVfU0VMRUNURUQsIFxuICAgIDM5XHQgICAgICAgICAgICB0b29sYmFyLmdldEN1cnJlbnRTdHJhdGVneSgpXG4gICAgNDBcdCAgICAgICAgKSk7XG4gICAgNDFcdCAgICB9XG4uLi5cblBhdGg6IHNyYy91aS9EcmF3aW5nQ2FudmFzLmphdmFcbiAgICAgMVx0cGFja2FnZSB1aTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xuICAgICA0XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDVcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNlx0aW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKiBEcmF3aW5nIGNhbnZhcyB0aGF0IG9ic2VydmVzIHRvb2xiYXIgZXZlbnRzIGFuZCBoYW5kbGVzIGRyYXdpbmcgb3BlcmF0aW9uc1xuICAgIDE0XHQgKi9cbiAgICAxNVx0cHVibGljIGNsYXNzIERyYXdpbmdDYW52YXMgZXh0ZW5kcyBDYW52YXMgaW1wbGVtZW50cyBPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IHtcbiAgICAxNlx0ICAgIFxuICAgIDE3XHQgICAgcHJpdmF0ZSBmaW5hbCBHcmFwaGljc0NvbnRleHQgZ2M7XG4gICAgMThcdCAgICBwcml2YXRlIGZpbmFsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XG4gICAgMTlcdCAgICBwcml2YXRlIERyYXdpbmdTdHJhdGVneSBjdXJyZW50U3RyYXRlZ3k7XG4gICAgMjBcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMVx0ICAgIFxuICAgIDIyXHQgICAgcHVibGljIERyYXdpbmdDYW52YXMoZG91YmxlIHdpZHRoLCBkb3VibGUgaGVpZ2h0KSB7XG4gICAgMjNcdCAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XG4gICAgMjRcdCAgICAgICAgdGhpcy5nYyA9IHRoaXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAyNVx0ICAgICAgICB0aGlzLnNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcbiAgICAyNlx0ICAgICAgICBcbiAgICAyN1x0ICAgICAgICBzZXR1cEdyYXBoaWNzQ29udGV4dCgpO1xuICAgIDI4XHQgICAgICAgIHNldHVwTW91c2VFdmVudHMoKTtcbiAgICAyOVx0ICAgIH1cbiAgICAzMFx0ICAgIFxuICAgIDMxXHQgICAgcHJpdmF0ZSB2b2lkIHNldHVwR3JhcGhpY3NDb250ZXh0KCkge1xuICAgIDMyXHQgICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgMzNcdCAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgIDM0XHQgICAgfVxuICAgIDM1XHQgICAgXG4gICAgMzZcdCAgICBwcml2YXRlIHZvaWQgc2V0dXBNb3VzZUV2ZW50cygpIHtcbiAgICAzN1x0ICAgICAgICB0aGlzLnNldE9uTW91c2VQcmVzc2VkKGUgLT4ge1xuICAgIDM4XHQgICAgICAgICAgICBzdGFydFggPSBlLmdldFgoKTtcbiAgICAzOVx0ICAgICAgICAgICAgc3RhcnRZID0gZS5nZXRZKCk7XG4gICAgNDBcdCAgICAgICAgfSk7XG4gICAgNDFcdCAgICAgICAgXG4gICAgNDJcdCAgICAgICAgdGhpcy5zZXRPbk1vdXNlUmVsZWFzZWQoZSAtPiB7XG4gICAgNDNcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3RyYXRlZ3kgIT0gbnVsbCkge1xuICAgIDQ0XHQgICAgICAgICAgICAgICAgZG91YmxlIGVuZFggPSBlLmdldFgoKTtcbiAgICA0NVx0ICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRZID0gZS5nZXRZKCk7XG4gICAgNDZcdCAgICAgICAgICAgICAgICBcbiAgICA0N1x0ICAgICAgICAgICAgICAgIERyYXdpbmdTdHJhdGVneS5EcmF3aW5nUmVzdWx0IHJlc3VsdCA9IFxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdHJhdGVneS5kcmF3KGdjLCBzaGFwZU1hbmFnZXIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA0OVx0ICAgICAgICAgICAgICAgIFxuICAgIDUwXHQgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuaXNTdWNjZXNzKCkgJiYgcmVzdWx0LmdldE1lc3NhZ2UoKSAhPSBudWxsKSB7XG4gICAgNTFcdCAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwiRXJyZXVyIGRlIGRlc3NpblwiLCByZXN1bHQuZ2V0TWVzc2FnZSgpKTtcbiAgICA1Mlx0ICAgICAgICAgICAgICAgIH1cbiAgICA1M1x0ICAgICAgICAgICAgfVxuICAgIDU0XHQgICAgICAgIH0pO1xuICAgIDU1XHQgICAgfVxuICAgIDU2XHQgICAgXG4gICAgNTdcdCAgICBwcml2YXRlIHZvaWQgc2hvd0FsZXJ0KFN0cmluZyB0aXRsZSwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgICA1OFx0ICAgICAgICBBbGVydCBhbGVydCA9IG5ldyBBbGVydChBbGVydC5BbGVydFR5cGUuV0FSTklORyk7XG4gICAgNTlcdCAgICAgICAgYWxlcnQuc2V0VGl0bGUodGl0bGUpO1xuICAgIDYwXHQgICAgICAgIGFsZXJ0LnNldEhlYWRlclRleHQobnVsbCk7XG4gICAgNjFcdCAgICAgICAgYWxlcnQuc2V0Q29udGVudFRleHQobWVzc2FnZSk7XG4gICAgNjJcdCAgICAgICAgYWxlcnQuc2hvd0FuZFdhaXQoKTtcbiAgICA2M1x0ICAgIH1cbiAgICA2NFx0ICAgIFxuICAgIDY1XHQgICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ2FudmFzKCkge1xuICAgIDY2XHQgICAgICAgIGdjLmNsZWFyUmVjdCgwLCAwLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCkpO1xuICAgIDY3XHQgICAgICAgIHNoYXBlTWFuYWdlci5jbGVhclNoYXBlcygpO1xuICAgIDY4XHQgICAgfVxuICAgIDY5XHQgICAgXG4gICAgNzBcdCAgICBAT3ZlcnJpZGVcbiAgICA3MVx0ICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShUb29sYmFyRXZlbnQgZXZlbnQpIHtcbiAgICA3Mlx0ICAgICAgICBzd2l0Y2ggKGV2ZW50LmdldFR5cGUoKSkge1xuICAgIDczXHQgICAgICAgICAgICBjYXNlIFNIQVBFX1NFTEVDVEVEOlxuICAgIDc0XHQgICAgICAgICAgICAgICAgRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5ID0gZXZlbnQuZ2V0RGF0YShEcmF3aW5nU3RyYXRlZ3kuY2xhc3MpO1xuICAgIDc1XHQgICAgICAgICAgICAgICAgaWYgKHN0cmF0ZWd5ICE9IG51bGwpIHtcbiAgICA3Nlx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgIDc3XHQgICAgICAgICAgICAgICAgfVxuICAgIDc4XHQgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgNzlcdCAgICAgICAgICAgICAgICBcbiAgICA4MFx0ICAgICAgICAgICAgY2FzZSBDTEVBUl9DQU5WQVM6XG4gICAgODFcdCAgICAgICAgICAgICAgICBjbGVhckNhbnZhcygpO1xuICAgIDgyXHQgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgODNcdCAgICAgICAgfVxuICAgIDg0XHQgICAgfVxuICAgIDg1XHQgICAgXG4gICAgODZcdCAgICBwdWJsaWMgU2hhcGVNYW5hZ2VyIGdldFNoYXBlTWFuYWdlcigpIHtcbiAgICA4N1x0ICAgICAgICByZXR1cm4gc2hhcGVNYW5hZ2VyO1xuICAgIDg4XHQgICAgfVxuICAgIDg5XHR9XG4uLi5cblBhdGg6IHNyYy9tYW5hZ2VyL1NoYXBlTWFuYWdlci5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbWFuYWdlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBtb2RlbC4qO1xuICAgICA0XHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAgNVx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgICA2XHRcbiAgICAgN1x0cHVibGljIGNsYXNzIFNoYXBlTWFuYWdlciB7XG4gICAgIDhcdCAgICBwcml2YXRlIExpc3Q8RHJhd25TaGFwZT4gc2hhcGVzO1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBwdWJsaWMgU2hhcGVNYW5hZ2VyKCkge1xuICAgIDExXHQgICAgICAgIHRoaXMuc2hhcGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgMTJcdCAgICB9XG4gICAgMTNcdCAgICBcbiAgICAxNFx0ICAgIC8qKlxuICAgIDE1XHQgICAgICogVmFsaWRhdGVzIGlmIGEgbGluZSBjYW4gYmUgZHJhd24gYWNjb3JkaW5nIHRvIHRoZSBjb25zdHJhaW50czpcbiAgICAxNlx0ICAgICAqIC0gQm90aCBlbmRzIG9mIHRoZSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXG4gICAgMTdcdCAgICAgKiAtIEEgY2lyY2xlIGNhbiBoYXZlIG9ubHkgb25lIGxpbmVcbiAgICAxOFx0ICAgICAqL1xuICAgIDE5XHQgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQgdmFsaWRhdGVMaW5lKGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDIwXHQgICAgICAgIERyYXduQ2lyY2xlIHN0YXJ0Q2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChzdGFydFgsIHN0YXJ0WSk7XG4gICAgMjFcdCAgICAgICAgRHJhd25DaXJjbGUgZW5kQ2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChlbmRYLCBlbmRZKTtcbiAgICAyMlx0ICAgICAgICBcbiAgICAyM1x0ICAgICAgICAvLyBDaGVjayBpZiBib3RoIGVuZHMgYXJlIGluc2lkZSBjaXJjbGVzXG4gICAgMjRcdCAgICAgICAgaWYgKHN0YXJ0Q2lyY2xlID09IG51bGwpIHtcbiAgICAyNVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIHBvaW50IGRlIGTDqXBhcnQgZGUgbGEgbGlnbmUgZG9pdCDDqnRyZSDDoCBsJ2ludMOpcmlldXIgZCd1biBjZXJjbGVcIik7XG4gICAgMjZcdCAgICAgICAgfVxuICAgIDI3XHQgICAgICAgIFxuICAgIDI4XHQgICAgICAgIGlmIChlbmRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI5XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZCdhcnJpdsOpZSBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICAgICAgXG4gICAgMzJcdCAgICAgICAgLy8gQ2hlY2sgaWYgY2lyY2xlcyBhbHJlYWR5IGhhdmUgbGluZXNcbiAgICAzM1x0ICAgICAgICBpZiAoY2lyY2xlSGFzTGluZShzdGFydENpcmNsZSkpIHtcbiAgICAzNFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkZSBkw6lwYXJ0IGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzVcdCAgICAgICAgfVxuICAgIDM2XHQgICAgICAgIFxuICAgIDM3XHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKGVuZENpcmNsZSkgJiYgIXN0YXJ0Q2lyY2xlLmVxdWFscyhlbmRDaXJjbGUpKSB7XG4gICAgMzhcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBjZXJjbGUgZCdhcnJpdsOpZSBjb250aWVudCBkw6lqw6AgdW5lIGxpZ25lXCIpO1xuICAgIDM5XHQgICAgICAgIH1cbiAgICA0MFx0ICAgICAgICBcbiAgICA0MVx0ICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQodHJ1ZSwgXCJMaWduZSB2YWxpZGVcIik7XG4gICAgNDJcdCAgICB9XG4gICAgNDNcdCAgICBcbiAgICA0NFx0ICAgIC8qKlxuICAgIDQ1XHQgICAgICogRmluZHMgYSBjaXJjbGUgdGhhdCBjb250YWlucyB0aGUgZ2l2ZW4gcG9pbnRcbiAgICA0Nlx0ICAgICAqL1xuICAgIDQ3XHQgICAgcHJpdmF0ZSBEcmF3bkNpcmNsZSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDQ4XHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDQ5XHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkNpcmNsZSAmJiBzaGFwZS5jb250YWluc1BvaW50KHgsIHkpKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICByZXR1cm4gKERyYXduQ2lyY2xlKSBzaGFwZTtcbiAgICA1MVx0ICAgICAgICAgICAgfVxuICAgIDUyXHQgICAgICAgIH1cbiAgICA1M1x0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA1NFx0ICAgIH1cbiAgICA1NVx0ICAgIFxuICAgIDU2XHQgICAgLyoqXG4gICAgNTdcdCAgICAgKiBDaGVja3MgaWYgYSBjaXJjbGUgYWxyZWFkeSBoYXMgYSBsaW5lXG4gICAgNThcdCAgICAgKi9cbiAgICA1OVx0ICAgIHByaXZhdGUgYm9vbGVhbiBjaXJjbGVIYXNMaW5lKERyYXduQ2lyY2xlIGNpcmNsZSkge1xuICAgIDYwXHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkxpbmUpIHtcbiAgICA2Mlx0ICAgICAgICAgICAgICAgIERyYXduTGluZSBsaW5lID0gKERyYXduTGluZSkgc2hhcGU7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBzdGFydFBvaW50ID0gbGluZS5nZXRTdGFydFBvaW50KCk7XG4gICAgNjRcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBlbmRQb2ludCA9IGxpbmUuZ2V0RW5kUG9pbnQoKTtcbiAgICA2NVx0ICAgICAgICAgICAgICAgIFxuICAgIDY2XHQgICAgICAgICAgICAgICAgaWYgKGNpcmNsZS5jb250YWluc1BvaW50KHN0YXJ0UG9pbnRbMF0sIHN0YXJ0UG9pbnRbMV0pIHx8IFxuICAgIDY3XHQgICAgICAgICAgICAgICAgICAgIGNpcmNsZS5jb250YWluc1BvaW50KGVuZFBvaW50WzBdLCBlbmRQb2ludFsxXSkpIHtcbiAgICA2OFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA2OVx0ICAgICAgICAgICAgICAgIH1cbiAgICA3MFx0ICAgICAgICAgICAgfVxuICAgIDcxXHQgICAgICAgIH1cbiAgICA3Mlx0ICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNzNcdCAgICB9XG4gICAgNzRcdCAgICBcbiAgICA3NVx0ICAgIC8qKlxuICAgIDc2XHQgICAgICogQWRkcyBhIHNoYXBlIHRvIHRoZSBtYW5hZ2VyXG4gICAgNzdcdCAgICAgKi9cbiAgICA3OFx0ICAgIHB1YmxpYyB2b2lkIGFkZFNoYXBlKERyYXduU2hhcGUgc2hhcGUpIHtcbiAgICA3OVx0ICAgICAgICBzaGFwZXMuYWRkKHNoYXBlKTtcbiAgICA4MFx0ICAgIH1cbiAgICA4MVx0ICAgIFxuICAgIDgyXHQgICAgLyoqXG4gICAgODNcdCAgICAgKiBHZXRzIGFsbCBzaGFwZXNcbiAgICA4NFx0ICAgICAqL1xuICAgIDg1XHQgICAgcHVibGljIExpc3Q8RHJhd25TaGFwZT4gZ2V0U2hhcGVzKCkge1xuICAgIDg2XHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXN0PD4oc2hhcGVzKTtcbiAgICA4N1x0ICAgIH1cbiAgICA4OFx0ICAgIFxuICAgIDg5XHQgICAgLyoqXG4gICAgOTBcdCAgICAgKiBDbGVhcnMgYWxsIHNoYXBlc1xuICAgIDkxXHQgICAgICovXG4gICAgOTJcdCAgICBwdWJsaWMgdm9pZCBjbGVhclNoYXBlcygpIHtcbiAgICA5M1x0ICAgICAgICBzaGFwZXMuY2xlYXIoKTtcbiAgICA5NFx0ICAgIH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L1JlY3RhbmdsZURyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgRmFjdG9yeS5SZWN0YW5nbGVTaGFwZTtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDZcdFxuICAgICA3XHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcbiAgICAgOFx0ICAgIFxuICAgICA5XHQgICAgQE92ZXJyaWRlXG4gICAgMTBcdCAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXG4gICAgMTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMTJcdCAgICAgICAgdHJ5IHtcbiAgICAxM1x0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSByZWN0YW5nbGVcbiAgICAxNFx0ICAgICAgICAgICAgUmVjdGFuZ2xlU2hhcGUgcmVjdGFuZ2xlU2hhcGUgPSBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcbiAgICAxNVx0ICAgICAgICAgICAgcmVjdGFuZ2xlU2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDE2XHQgICAgICAgICAgICBcbiAgICAxN1x0ICAgICAgICAgICAgLy8gTm90ZTogV2UgZG9uJ3QgdHJhY2sgcmVjdGFuZ2xlcyBpbiB0aGUgY29uc3RyYWludCBzeXN0ZW1cbiAgICAxOFx0ICAgICAgICAgICAgLy8gYXMgdGhleSdyZSBub3QgcGFydCBvZiB0aGUgY2lyY2xlLWxpbmUgcmVsYXRpb25zaGlwXG4gICAgMTlcdCAgICAgICAgICAgIFxuICAgIDIwXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFwiUmVjdGFuZ2xlIGRlc3NpbsOpIGF2ZWMgc3VjY8Ooc1wiKTtcbiAgICAyMVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDIyXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFwiRXJyZXVyIGxvcnMgZHUgZGVzc2luIGR1IHJlY3RhbmdsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgMjNcdCAgICAgICAgfVxuICAgIDI0XHQgICAgfVxuICAgIDI1XHQgICAgXG4gICAgMjZcdCAgICBAT3ZlcnJpZGVcbiAgICAyN1x0ICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCkge1xuICAgIDI4XHQgICAgICAgIHJldHVybiBcIlJlY3RhbmdsZVwiO1xuICAgIDI5XHQgICAgfVxuICAgIDMwXHR9XG4uLi5cblBhdGg6IHNyYy9vYnNlcnZlci9PYnNlcnZhYmxlLmphdmFcbiAgICAgMVx0cGFja2FnZSBvYnNlcnZlcjtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBPYnNlcnZhYmxlIGludGVyZmFjZSBmb3IgdGhlIE9ic2VydmVyIHBhdHRlcm5cbiAgICAgNVx0ICovXG4gICAgIDZcdHB1YmxpYyBpbnRlcmZhY2UgT2JzZXJ2YWJsZTxUPiB7XG4gICAgIDdcdCAgICB2b2lkIGFkZE9ic2VydmVyKE9ic2VydmVyPFQ+IG9ic2VydmVyKTtcbiAgICAgOFx0ICAgIHZvaWQgcmVtb3ZlT2JzZXJ2ZXIoT2JzZXJ2ZXI8VD4gb2JzZXJ2ZXIpO1xuICAgICA5XHQgICAgdm9pZCBub3RpZnlPYnNlcnZlcnMoVCBkYXRhKTtcbiAgICAxMFx0fVxuLi4uXG5QYXRoOiBzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBGYWN0b3J5LkNpcmNsZVNoYXBlO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNlx0aW1wb3J0IG1vZGVsLkRyYXduQ2lyY2xlO1xuICAgICA3XHRcbiAgICAgOFx0cHVibGljIGNsYXNzIENpcmNsZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIEBPdmVycmlkZVxuICAgIDExXHQgICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDEzXHQgICAgICAgIHRyeSB7XG4gICAgMTRcdCAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZHJhdyB0aGUgY2lyY2xlXG4gICAgMTVcdCAgICAgICAgICAgIENpcmNsZVNoYXBlIGNpcmNsZVNoYXBlID0gbmV3IENpcmNsZVNoYXBlKCk7XG4gICAgMTZcdCAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAxN1x0ICAgICAgICAgICAgXG4gICAgMThcdCAgICAgICAgICAgIC8vIEFkZCB0byBzaGFwZSBtYW5hZ2VyIGZvciB0cmFja2luZ1xuICAgIDE5XHQgICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMjBcdCAgICAgICAgICAgIHNoYXBlTWFuYWdlci5hZGRTaGFwZShkcmF3bkNpcmNsZSk7XG4gICAgMjFcdCAgICAgICAgICAgIFxuICAgIDIyXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFwiQ2VyY2xlIGRlc3NpbsOpIGF2ZWMgc3VjY8Ooc1wiKTtcbiAgICAyM1x0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDI0XHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFwiRXJyZXVyIGxvcnMgZHUgZGVzc2luIGR1IGNlcmNsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgMjVcdCAgICAgICAgfVxuICAgIDI2XHQgICAgfVxuICAgIDI3XHQgICAgXG4gICAgMjhcdCAgICBAT3ZlcnJpZGVcbiAgICAyOVx0ICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCkge1xuICAgIDMwXHQgICAgICAgIHJldHVybiBcIkNpcmNsZVwiO1xuICAgIDMxXHQgICAgfVxuICAgIDMyXHR9XG4uLi5cblBhdGg6IHNyYy9zdHJhdGVneS9MaW5lRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBGYWN0b3J5LkxpbmVTaGFwZTtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDZcdGltcG9ydCBtb2RlbC5EcmF3bkxpbmU7XG4gICAgIDdcdFxuICAgICA4XHRwdWJsaWMgY2xhc3MgTGluZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIEBPdmVycmlkZVxuICAgIDExXHQgICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDEzXHQgICAgICAgIHRyeSB7XG4gICAgMTRcdCAgICAgICAgICAgIC8vIFZhbGlkYXRlIGxpbmUgY29uc3RyYWludHMgZmlyc3RcbiAgICAxNVx0ICAgICAgICAgICAgU2hhcGVNYW5hZ2VyLlZhbGlkYXRpb25SZXN1bHQgdmFsaWRhdGlvbiA9IFxuICAgIDE2XHQgICAgICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLnZhbGlkYXRlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMTdcdCAgICAgICAgICAgIFxuICAgIDE4XHQgICAgICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCgpKSB7XG4gICAgMTlcdCAgICAgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKHZhbGlkYXRpb24uZ2V0TWVzc2FnZSgpKTtcbiAgICAyMFx0ICAgICAgICAgICAgfVxuICAgIDIxXHQgICAgICAgICAgICBcbiAgICAyMlx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBsaW5lXG4gICAgMjNcdCAgICAgICAgICAgIExpbmVTaGFwZSBsaW5lU2hhcGUgPSBuZXcgTGluZVNoYXBlKCk7XG4gICAgMjRcdCAgICAgICAgICAgIGxpbmVTaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMjVcdCAgICAgICAgICAgIFxuICAgIDI2XHQgICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcbiAgICAyN1x0ICAgICAgICAgICAgRHJhd25MaW5lIGRyYXduTGluZSA9IG5ldyBEcmF3bkxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDI4XHQgICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25MaW5lKTtcbiAgICAyOVx0ICAgICAgICAgICAgXG4gICAgMzBcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LnN1Y2Nlc3MoXCJMaWduZSBkZXNzaW7DqWUgYXZlYyBzdWNjw6hzXCIpO1xuICAgIDMxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMzJcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LmZhaWx1cmUoXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZGUgbGEgbGlnbmU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDMzXHQgICAgICAgIH1cbiAgICAzNFx0ICAgIH1cbiAgICAzNVx0ICAgIFxuICAgIDM2XHQgICAgQE92ZXJyaWRlXG4gICAgMzdcdCAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpIHtcbiAgICAzOFx0ICAgICAgICByZXR1cm4gXCJMaW5lXCI7XG4gICAgMzlcdCAgICB9XG4gICAgNDBcdH1cbi4uLlxuUGF0aDogc3JjL29ic2VydmVyL09ic2VydmVyLmphdmFcbiAgICAgMVx0cGFja2FnZSBvYnNlcnZlcjtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBPYnNlcnZlciBpbnRlcmZhY2UgZm9yIHRoZSBPYnNlcnZlciBwYXR0ZXJuXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgaW50ZXJmYWNlIE9ic2VydmVyPFQ+IHtcbiAgICAgN1x0ICAgIHZvaWQgdXBkYXRlKFQgZGF0YSk7XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L0RyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNVx0XG4gICAgIDZcdC8qKlxuICAgICA3XHQgKiBTdHJhdGVneSBpbnRlcmZhY2UgZm9yIGRpZmZlcmVudCBkcmF3aW5nIGJlaGF2aW9yc1xuICAgICA4XHQgKi9cbiAgICAgOVx0cHVibGljIGludGVyZmFjZSBEcmF3aW5nU3RyYXRlZ3kge1xuICAgIDEwXHQgICAgXG4gICAgMTFcdCAgICAvKipcbiAgICAxMlx0ICAgICAqIEF0dGVtcHRzIHRvIGRyYXcgYSBzaGFwZSB3aXRoIHRoZSBnaXZlbiBjb29yZGluYXRlc1xuICAgIDEzXHQgICAgICogQHBhcmFtIGdjIEdyYXBoaWNzIGNvbnRleHQgZm9yIGRyYXdpbmdcbiAgICAxNFx0ICAgICAqIEBwYXJhbSBzaGFwZU1hbmFnZXIgTWFuYWdlciBmb3IgdHJhY2tpbmcgc2hhcGVzIGFuZCBjb25zdHJhaW50c1xuICAgIDE1XHQgICAgICogQHBhcmFtIHN0YXJ0WCBTdGFydGluZyBYIGNvb3JkaW5hdGVcbiAgICAxNlx0ICAgICAqIEBwYXJhbSBzdGFydFkgU3RhcnRpbmcgWSBjb29yZGluYXRlXG4gICAgMTdcdCAgICAgKiBAcGFyYW0gZW5kWCBFbmRpbmcgWCBjb29yZGluYXRlXG4gICAgMThcdCAgICAgKiBAcGFyYW0gZW5kWSBFbmRpbmcgWSBjb29yZGluYXRlXG4gICAgMTlcdCAgICAgKiBAcmV0dXJuIERyYXdpbmdSZXN1bHQgaW5kaWNhdGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGFueSBtZXNzYWdlc1xuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAyMlx0ICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSk7XG4gICAgMjNcdCAgICBcbiAgICAyNFx0ICAgIC8qKlxuICAgIDI1XHQgICAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGlzIGRyYXdpbmcgc3RyYXRlZ3lcbiAgICAyNlx0ICAgICAqL1xuICAgIDI3XHQgICAgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpO1xuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9SZWN0YW5nbGVTaGFwZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0XG4gICAgIDVcdHB1YmxpYyBjbGFzcyBSZWN0YW5nbGVTaGFwZSBpbXBsZW1lbnRzICBTaGFwZXtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSlcbiAgICAgOFx0ICAgIHtcbiAgICAgOVx0ICAgICAgICBkb3VibGUgd2lkdGggPSBNYXRoLmFicyhlbmRYLXN0YXJ0WCk7XG4gICAgMTBcdCAgICAgICAgZG91YmxlIGhlaWdodCA9IE1hdGguYWJzKGVuZFkgLSBzdGFydFkpO1xuICAgIDExXHQgICAgICAgIGRvdWJsZSB4ID0gTWF0aC5taW4oc3RhcnRYLCBlbmRYKTtcbiAgICAxMlx0ICAgICAgICBkb3VibGUgeSA9IE1hdGgubWluKHN0YXJ0WSwgZW5kWSk7XG4gICAgMTNcdCAgICAgICAgZ2Muc3Ryb2tlUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAxNFx0XG4gICAgMTVcdCAgICB9XG4gICAgMTZcdH1cbi4uLlxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVRUMmRKc3JiZ0p5cG44WEhpdEx0dmsifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM0OjU5LjY5MVoiLCJyZXNwb25zZV90ZXh0IjoiUGVyZmVjdCEgTm93IEkgdW5kZXJzdGFuZCB0aGUgY3VycmVudCBhcmNoaXRlY3R1cmUuIExldCBtZSBjcmVhdGUgYSBjb21wcmVoZW5zaXZlIGxvZ2dpbmcgc3RyYXRlZ3kgc3lzdGVtIHRoYXQgd2lsbCB0cmFjayBhbGwgdXNlciBhY3Rpb25zLiBIZXJlJ3MgbXkgZGV0YWlsZWQgcGxhbjpcblxuIyMgTG9nZ2luZyBTdHJhdGVneSBEZXNpZ24gUGF0dGVybiBJbXBsZW1lbnRhdGlvblxuXG4jIyMgU3RlcCAxOiBDcmVhdGUgdGhlIGxvZ2dpbmcgZGF0YSBtb2RlbFxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImI1YjAyODk1LTVlNzEtNGFmMC05YzkzLWU2MzE4NWEzNGU5MSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFRRmptOTF4dENIYnZ2TmczWjVlZ2hzIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL2xvZ2dpbmcvTG9nZ2luZ1N0cmF0ZWd5LmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIGxvZ2dpbmc7XFxuXFxuLyoqXFxuICogU3RyYXRlZ3kgaW50ZXJmYWNlIGZvciBkaWZmZXJlbnQgbG9nZ2luZyBpbXBsZW1lbnRhdGlvbnNcXG4gKi9cXG5wdWJsaWMgaW50ZXJmYWNlIExvZ2dpbmdTdHJhdGVneSB7XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogTG9ncyBhIHNpbmdsZSBlbnRyeVxcbiAgICAgKiBAcGFyYW0gZW50cnkgVGhlIGxvZyBlbnRyeSB0byB3cml0ZVxcbiAgICAgKiBAcmV0dXJuIHRydWUgaWYgbG9nZ2luZyB3YXMgc3VjY2Vzc2Z1bCwgZmFsc2Ugb3RoZXJ3aXNlXFxuICAgICAqL1xcbiAgICBib29sZWFuIGxvZyhMb2dFbnRyeSBlbnRyeSk7XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGxvZ2dpbmcgc3RyYXRlZ3kgKGUuZy4sIGNyZWF0ZSBmaWxlcywgY29ubmVjdCB0byBkYXRhYmFzZSlcXG4gICAgICogQHJldHVybiB0cnVlIGlmIGluaXRpYWxpemF0aW9uIHdhcyBzdWNjZXNzZnVsLCBmYWxzZSBvdGhlcndpc2VcXG4gICAgICovXFxuICAgIGJvb2xlYW4gaW5pdGlhbGl6ZSgpO1xcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENsb3Nlcy9jbGVhbnMgdXAgdGhlIGxvZ2dpbmcgc3RyYXRlZ3lcXG4gICAgICogQHJldHVybiB0cnVlIGlmIGNsZWFudXAgd2FzIHN1Y2Nlc3NmdWwsIGZhbHNlIG90aGVyd2lzZVxcbiAgICAgKi9cXG4gICAgYm9vbGVhbiBjbG9zZSgpO1xcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEdldHMgdGhlIG5hbWUgb2YgdGhpcyBsb2dnaW5nIHN0cmF0ZWd5XFxuICAgICAqL1xcbiAgICBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCk7XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogQ2hlY2tzIGlmIHRoZSBsb2dnaW5nIHN0cmF0ZWd5IGlzIGN1cnJlbnRseSBhdmFpbGFibGUvd29ya2luZ1xcbiAgICAgKi9cXG4gICAgYm9vbGVhbiBpc0F2YWlsYWJsZSgpO1xcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgU3RlcCAyOiBDcmVhdGUgdGhlIGxvZ2dpbmcgc3RyYXRlZ3kgaW50ZXJmYWNlXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvTG9nRW50cnkuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQVZTYUR3VWE2NnplQ3l4eXA5b1l5eCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MzU6MTcuMTk1WiIsInJlc3BvbnNlX3RleHQiOiIjIyMgU3RlcCAyOiBDcmVhdGUgdGhlIGxvZ2dpbmcgc3RyYXRlZ3kgaW50ZXJmYWNlXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDY2NTRjYmEtOGVmMi00YjA4LWI5NzMtNGY3MjFmODY1MjVkIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMThLcjdmTkFhNFRvTlVxYkJGcXdSZ0ciLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbG9nZ2luZy9Db25zb2xlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcIiwgXCJmaWxlX2NvbnRlbnRcIjogXCJwYWNrYWdlIGxvZ2dpbmc7XFxuXFxuLyoqXFxuICogQ29uc29sZSBsb2dnaW5nIHN0cmF0ZWd5IC0gbG9ncyB0byBTeXN0ZW0ub3V0XFxuICovXFxucHVibGljIGNsYXNzIENvbnNvbGVMb2dnaW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBMb2dnaW5nU3RyYXRlZ3kge1xcbiAgICBcXG4gICAgcHJpdmF0ZSBib29sZWFuIGluaXRpYWxpemVkID0gZmFsc2U7XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIGJvb2xlYW4gbG9nKExvZ0VudHJ5IGVudHJ5KSB7XFxuICAgICAgICBpZiAoIWluaXRpYWxpemVkKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJDb25zb2xlIGxvZ2dpbmcgc3RyYXRlZ3kgbm90IGluaXRpYWxpemVkXFxcIik7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihlbnRyeS50b0Zvcm1hdHRlZFN0cmluZygpKTtcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJFcnJvciBsb2dnaW5nIHRvIGNvbnNvbGU6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIGJvb2xlYW4gaW5pdGlhbGl6ZSgpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCI9PT0gQ29uc29sZSBMb2dnaW5nIFN0cmF0ZWd5IEluaXRpYWxpemVkID09PVxcXCIpO1xcbiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihcXFwiRm9ybWF0OiBbVGltZXN0YW1wXSBbQWN0aW9uVHlwZV0gW1VzZXJJZF0gRGVzY3JpcHRpb24gLSBEZXRhaWxzXFxcIik7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCI9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cXFwiKTtcXG4gICAgICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRmFpbGVkIHRvIGluaXRpYWxpemUgY29uc29sZSBsb2dnaW5nOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyBib29sZWFuIGNsb3NlKCkge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBpZiAoaW5pdGlhbGl6ZWQpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCI9PT0gQ29uc29sZSBMb2dnaW5nIFN0cmF0ZWd5IENsb3NlZCA9PT1cXFwiKTtcXG4gICAgICAgICAgICAgICAgaW5pdGlhbGl6ZWQgPSBmYWxzZTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3IgY2xvc2luZyBjb25zb2xlIGxvZ2dpbmc6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XFxuICAgICAgICByZXR1cm4gXFxcIkNvbnNvbGUgTG9nZ2luZ1xcXCI7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBpc0F2YWlsYWJsZSgpIHtcXG4gICAgICAgIHJldHVybiBpbml0aWFsaXplZDtcXG4gICAgfVxcbn1cIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiIjIyMgU3RlcCAzOiBDcmVhdGUgQ29uc29sZSBMb2dnaW5nIFN0cmF0ZWd5XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvTG9nZ2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMVFGam05MXh0Q0hidnZOZzNaNWVnaHMifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM1OjI0LjQwMVoiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgMzogQ3JlYXRlIENvbnNvbGUgTG9nZ2luZyBTdHJhdGVneVxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjIyMmViMWEwLTk5MTAtNDE3ZC05OTJhLTIxNjE5MDEyYTY4MCIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFOZGNXaXVQRWQyTVZrek4zWWN3S0RlIiwidG9vbF9uYW1lIjoic2F2ZS1maWxlIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uc19yZW1pbmRlclwiOiBcIkxJTUlUIFRIRSBGSUxFIENPTlRFTlQgVE8gQVQgTU9TVCAzMDAgTElORVMuIElGIE1PUkUgQ09OVEVOVCBORUVEUyBUTyBCRSBBRERFRCBVU0UgVEhFIHN0ci1yZXBsYWNlLWVkaXRvciBUT09MIFRPIEVESVQgVEhFIEZJTEUgQUZURVIgSVQgSEFTIEJFRU4gQ1JFQVRFRC5cIiwgXCJwYXRoXCI6IFwic3JjL2xvZ2dpbmcvRmlsZUxvZ2dpbmdTdHJhdGVneS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBsb2dnaW5nO1xcblxcbmltcG9ydCBqYXZhLmlvLio7XFxuaW1wb3J0IGphdmEubmlvLmZpbGUuRmlsZXM7XFxuaW1wb3J0IGphdmEubmlvLmZpbGUuUGF0aDtcXG5pbXBvcnQgamF2YS5uaW8uZmlsZS5QYXRocztcXG5pbXBvcnQgamF2YS5uaW8uZmlsZS5TdGFuZGFyZE9wZW5PcHRpb247XFxuaW1wb3J0IGphdmEudGltZS5Mb2NhbERhdGVUaW1lO1xcbmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyO1xcblxcbi8qKlxcbiAqIEZpbGUgbG9nZ2luZyBzdHJhdGVneSAtIGxvZ3MgdG8gYSB0ZXh0IGZpbGVcXG4gKi9cXG5wdWJsaWMgY2xhc3MgRmlsZUxvZ2dpbmdTdHJhdGVneSBpbXBsZW1lbnRzIExvZ2dpbmdTdHJhdGVneSB7XFxuICAgIFxcbiAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBsb2dEaXJlY3Rvcnk7XFxuICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGxvZ0ZpbGVOYW1lO1xcbiAgICBwcml2YXRlIFBhdGggbG9nRmlsZVBhdGg7XFxuICAgIHByaXZhdGUgYm9vbGVhbiBpbml0aWFsaXplZCA9IGZhbHNlO1xcbiAgICBcXG4gICAgcHVibGljIEZpbGVMb2dnaW5nU3RyYXRlZ3koKSB7XFxuICAgICAgICB0aGlzKFxcXCJsb2dzXFxcIiwgbnVsbCk7XFxuICAgIH1cXG4gICAgXFxuICAgIHB1YmxpYyBGaWxlTG9nZ2luZ1N0cmF0ZWd5KFN0cmluZyBsb2dEaXJlY3RvcnksIFN0cmluZyBsb2dGaWxlTmFtZSkge1xcbiAgICAgICAgdGhpcy5sb2dEaXJlY3RvcnkgPSBsb2dEaXJlY3RvcnkgIT0gbnVsbCA/IGxvZ0RpcmVjdG9yeSA6IFxcXCJsb2dzXFxcIjtcXG4gICAgICAgIHRoaXMubG9nRmlsZU5hbWUgPSBsb2dGaWxlTmFtZSAhPSBudWxsID8gbG9nRmlsZU5hbWUgOiBnZW5lcmF0ZUxvZ0ZpbGVOYW1lKCk7XFxuICAgIH1cXG4gICAgXFxuICAgIHByaXZhdGUgU3RyaW5nIGdlbmVyYXRlTG9nRmlsZU5hbWUoKSB7XFxuICAgICAgICBEYXRlVGltZUZvcm1hdHRlciBmb3JtYXR0ZXIgPSBEYXRlVGltZUZvcm1hdHRlci5vZlBhdHRlcm4oXFxcInl5eXktTU0tZGRfSEgtbW0tc3NcXFwiKTtcXG4gICAgICAgIHJldHVybiBcXFwiZHJhd2luZ19hcHBfXFxcIiArIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KGZvcm1hdHRlcikgKyBcXFwiLmxvZ1xcXCI7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBsb2coTG9nRW50cnkgZW50cnkpIHtcXG4gICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcXG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXFxcIkZpbGUgbG9nZ2luZyBzdHJhdGVneSBub3QgaW5pdGlhbGl6ZWRcXFwiKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgU3RyaW5nIGxvZ0xpbmUgPSBlbnRyeS50b0Zvcm1hdHRlZFN0cmluZygpICsgU3lzdGVtLmxpbmVTZXBhcmF0b3IoKTtcXG4gICAgICAgICAgICBGaWxlcy53cml0ZShsb2dGaWxlUGF0aCwgbG9nTGluZS5nZXRCeXRlcygpLCBcXG4gICAgICAgICAgICAgICAgICAgICAgIFN0YW5kYXJkT3Blbk9wdGlvbi5DUkVBVEUsIFN0YW5kYXJkT3Blbk9wdGlvbi5BUFBFTkQpO1xcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3Igd3JpdGluZyB0byBsb2cgZmlsZTogXFxcIiArIGUuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBpbml0aWFsaXplKCkge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAvLyBDcmVhdGUgbG9ncyBkaXJlY3RvcnkgaWYgaXQgZG9lc24ndCBleGlzdFxcbiAgICAgICAgICAgIFBhdGggbG9nRGlyID0gUGF0aHMuZ2V0KGxvZ0RpcmVjdG9yeSk7XFxuICAgICAgICAgICAgaWYgKCFGaWxlcy5leGlzdHMobG9nRGlyKSkge1xcbiAgICAgICAgICAgICAgICBGaWxlcy5jcmVhdGVEaXJlY3Rvcmllcyhsb2dEaXIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBDcmVhdGUgbG9nIGZpbGUgcGF0aFxcbiAgICAgICAgICAgIGxvZ0ZpbGVQYXRoID0gbG9nRGlyLnJlc29sdmUobG9nRmlsZU5hbWUpO1xcbiAgICAgICAgICAgIFxcbiAgICAgICAgICAgIC8vIFdyaXRlIGhlYWRlciB0byBsb2cgZmlsZVxcbiAgICAgICAgICAgIFN0cmluZyBoZWFkZXIgPSBcXFwiPT09IERyYXdpbmcgQXBwbGljYXRpb24gTG9nIFN0YXJ0ZWQgYXQgXFxcIiArIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgTG9jYWxEYXRlVGltZS5ub3coKS5mb3JtYXQoRGF0ZVRpbWVGb3JtYXR0ZXIub2ZQYXR0ZXJuKFxcXCJ5eXl5LU1NLWRkIEhIOm1tOnNzXFxcIikpICsgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICBcXFwiID09PVxcXCIgKyBTeXN0ZW0ubGluZVNlcGFyYXRvcigpO1xcbiAgICAgICAgICAgIEZpbGVzLndyaXRlKGxvZ0ZpbGVQYXRoLCBoZWFkZXIuZ2V0Qnl0ZXMoKSwgXFxuICAgICAgICAgICAgICAgICAgICAgICBTdGFuZGFyZE9wZW5PcHRpb24uQ1JFQVRFLCBTdGFuZGFyZE9wZW5PcHRpb24uQVBQRU5EKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJGaWxlIGxvZ2dpbmcgaW5pdGlhbGl6ZWQ6IFxcXCIgKyBsb2dGaWxlUGF0aC50b0Fic29sdXRlUGF0aCgpKTtcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0gY2F0Y2ggKElPRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXFxcIkZhaWxlZCB0byBpbml0aWFsaXplIGZpbGUgbG9nZ2luZzogXFxcIiArIGUuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBjbG9zZSgpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgaWYgKGluaXRpYWxpemVkICYmIGxvZ0ZpbGVQYXRoICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgU3RyaW5nIGZvb3RlciA9IFxcXCI9PT0gRHJhd2luZyBBcHBsaWNhdGlvbiBMb2cgRW5kZWQgYXQgXFxcIiArIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExvY2FsRGF0ZVRpbWUubm93KCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybihcXFwieXl5eS1NTS1kZCBISDptbTpzc1xcXCIpKSArIFxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxcXCIgPT09XFxcIiArIFN5c3RlbS5saW5lU2VwYXJhdG9yKCk7XFxuICAgICAgICAgICAgICAgIEZpbGVzLndyaXRlKGxvZ0ZpbGVQYXRoLCBmb290ZXIuZ2V0Qnl0ZXMoKSwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RhbmRhcmRPcGVuT3B0aW9uLkNSRUFURSwgU3RhbmRhcmRPcGVuT3B0aW9uLkFQUEVORCk7XFxuICAgICAgICAgICAgICAgIGluaXRpYWxpemVkID0gZmFsc2U7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xcbiAgICAgICAgfSBjYXRjaCAoSU9FeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3IgY2xvc2luZyBmaWxlIGxvZ2dpbmc6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XFxuICAgICAgICByZXR1cm4gXFxcIkZpbGUgTG9nZ2luZ1xcXCI7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBpc0F2YWlsYWJsZSgpIHtcXG4gICAgICAgIHJldHVybiBpbml0aWFsaXplZCAmJiBsb2dGaWxlUGF0aCAhPSBudWxsICYmIEZpbGVzLmV4aXN0cyhsb2dGaWxlUGF0aC5nZXRQYXJlbnQoKSk7XFxuICAgIH1cXG4gICAgXFxuICAgIHB1YmxpYyBTdHJpbmcgZ2V0TG9nRmlsZVBhdGgoKSB7XFxuICAgICAgICByZXR1cm4gbG9nRmlsZVBhdGggIT0gbnVsbCA/IGxvZ0ZpbGVQYXRoLnRvQWJzb2x1dGVQYXRoKCkudG9TdHJpbmcoKSA6IG51bGw7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNDogQ3JlYXRlIEZpbGUgTG9nZ2luZyBTdHJhdGVneVxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9sb2dnaW5nL0NvbnNvbGVMb2dnaW5nU3RyYXRlZ3kuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxOEtyN2ZOQWE0VG9OVXFiQkZxd1JnRyJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MzU6MzcuMDM4WiIsInJlc3BvbnNlX3RleHQiOiIjIyMgU3RlcCA0OiBDcmVhdGUgRmlsZSBMb2dnaW5nIFN0cmF0ZWd5XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYjI5MzZjNGEtOTRlOC00Y2I3LThjODAtN2Q4ODdiZWVmZTE1IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUgzc1ZXdUwxM2NLOHEySFA0bjdUMnkiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbG9nZ2luZy9EYXRhYmFzZUxvZ2dpbmdTdHJhdGVneS5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBsb2dnaW5nO1xcblxcbmltcG9ydCBqYXZhLnNxbC4qO1xcbmltcG9ydCBqYXZhLnRpbWUuZm9ybWF0LkRhdGVUaW1lRm9ybWF0dGVyO1xcblxcbi8qKlxcbiAqIERhdGFiYXNlIGxvZ2dpbmcgc3RyYXRlZ3kgLSBsb2dzIHRvIFNRTGl0ZSBkYXRhYmFzZVxcbiAqIFVzZXMgU1FMaXRlIGZvciBzaW1wbGljaXR5IChubyBleHRlcm5hbCBkYXRhYmFzZSBzZXJ2ZXIgcmVxdWlyZWQpXFxuICovXFxucHVibGljIGNsYXNzIERhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgTG9nZ2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIGRhdGFiYXNlUGF0aDtcXG4gICAgcHJpdmF0ZSBDb25uZWN0aW9uIGNvbm5lY3Rpb247XFxuICAgIHByaXZhdGUgYm9vbGVhbiBpbml0aWFsaXplZCA9IGZhbHNlO1xcbiAgICBcXG4gICAgcHVibGljIERhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5KCkge1xcbiAgICAgICAgdGhpcyhcXFwibG9ncy9kcmF3aW5nX2FwcC5kYlxcXCIpO1xcbiAgICB9XFxuICAgIFxcbiAgICBwdWJsaWMgRGF0YWJhc2VMb2dnaW5nU3RyYXRlZ3koU3RyaW5nIGRhdGFiYXNlUGF0aCkge1xcbiAgICAgICAgdGhpcy5kYXRhYmFzZVBhdGggPSBkYXRhYmFzZVBhdGg7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgYm9vbGVhbiBsb2coTG9nRW50cnkgZW50cnkpIHtcXG4gICAgICAgIGlmICghaW5pdGlhbGl6ZWQgfHwgY29ubmVjdGlvbiA9PSBudWxsKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJEYXRhYmFzZSBsb2dnaW5nIHN0cmF0ZWd5IG5vdCBpbml0aWFsaXplZFxcXCIpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgU3RyaW5nIHNxbCA9IFxcXCJJTlNFUlQgSU5UTyBsb2dfZW50cmllcyAodGltZXN0YW1wLCBhY3Rpb25fdHlwZSwgdXNlcl9pZCwgZGVzY3JpcHRpb24sIGRldGFpbHMpIFZBTFVFUyAoPywgPywgPywgPywgPylcXFwiO1xcbiAgICAgICAgXFxuICAgICAgICB0cnkgKFByZXBhcmVkU3RhdGVtZW50IHBzdG10ID0gY29ubmVjdGlvbi5wcmVwYXJlU3RhdGVtZW50KHNxbCkpIHtcXG4gICAgICAgICAgICBwc3RtdC5zZXRTdHJpbmcoMSwgZW50cnkuZ2V0VGltZXN0YW1wKCkuZm9ybWF0KERhdGVUaW1lRm9ybWF0dGVyLm9mUGF0dGVybihcXFwieXl5eS1NTS1kZCBISDptbTpzc1xcXCIpKSk7XFxuICAgICAgICAgICAgcHN0bXQuc2V0U3RyaW5nKDIsIGVudHJ5LmdldEFjdGlvblR5cGUoKS50b1N0cmluZygpKTtcXG4gICAgICAgICAgICBwc3RtdC5zZXRTdHJpbmcoMywgZW50cnkuZ2V0VXNlcklkKCkpO1xcbiAgICAgICAgICAgIHBzdG10LnNldFN0cmluZyg0LCBlbnRyeS5nZXREZXNjcmlwdGlvbigpKTtcXG4gICAgICAgICAgICBwc3RtdC5zZXRTdHJpbmcoNSwgZW50cnkuZ2V0RGV0YWlscygpKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBwc3RtdC5leGVjdXRlVXBkYXRlKCk7XFxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XFxuICAgICAgICB9IGNhdGNoIChTUUxFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3IgaW5zZXJ0aW5nIGxvZyBlbnRyeSBpbnRvIGRhdGFiYXNlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyBib29sZWFuIGluaXRpYWxpemUoKSB7XFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIC8vIENyZWF0ZSBsb2dzIGRpcmVjdG9yeSBpZiBpdCBkb2Vzbid0IGV4aXN0XFxuICAgICAgICAgICAgamF2YS5uaW8uZmlsZS5QYXRoIGRiUGF0aCA9IGphdmEubmlvLmZpbGUuUGF0aHMuZ2V0KGRhdGFiYXNlUGF0aCk7XFxuICAgICAgICAgICAgamF2YS5uaW8uZmlsZS5QYXRoIHBhcmVudERpciA9IGRiUGF0aC5nZXRQYXJlbnQoKTtcXG4gICAgICAgICAgICBpZiAocGFyZW50RGlyICE9IG51bGwgJiYgIWphdmEubmlvLmZpbGUuRmlsZXMuZXhpc3RzKHBhcmVudERpcikpIHtcXG4gICAgICAgICAgICAgICAgamF2YS5uaW8uZmlsZS5GaWxlcy5jcmVhdGVEaXJlY3RvcmllcyhwYXJlbnREaXIpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBDb25uZWN0IHRvIFNRTGl0ZSBkYXRhYmFzZSAoY3JlYXRlcyBmaWxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QpXFxuICAgICAgICAgICAgU3RyaW5nIHVybCA9IFxcXCJqZGJjOnNxbGl0ZTpcXFwiICsgZGF0YWJhc2VQYXRoO1xcbiAgICAgICAgICAgIGNvbm5lY3Rpb24gPSBEcml2ZXJNYW5hZ2VyLmdldENvbm5lY3Rpb24odXJsKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxcbiAgICAgICAgICAgIGNyZWF0ZVRhYmxlSWZOb3RFeGlzdHMoKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICBpbml0aWFsaXplZCA9IHRydWU7XFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCJEYXRhYmFzZSBsb2dnaW5nIGluaXRpYWxpemVkOiBcXFwiICsgZGF0YWJhc2VQYXRoKTtcXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiB8IGphdmEuaW8uSU9FeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRmFpbGVkIHRvIGluaXRpYWxpemUgZGF0YWJhc2UgbG9nZ2luZzogXFxcIiArIGUuZ2V0TWVzc2FnZSgpKTtcXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XFxuICAgICAgICB9XFxuICAgIH1cXG4gICAgXFxuICAgIHByaXZhdGUgdm9pZCBjcmVhdGVUYWJsZUlmTm90RXhpc3RzKCkgdGhyb3dzIFNRTEV4Y2VwdGlvbiB7XFxuICAgICAgICBTdHJpbmcgc3FsID0gXFxcIlxcXCJcXFwiXFxuICAgICAgICAgICAgQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgbG9nX2VudHJpZXMgKFxcbiAgICAgICAgICAgICAgICBpZCBJTlRFR0VSIFBSSU1BUlkgS0VZIEFVVE9JTkNSRU1FTlQsXFxuICAgICAgICAgICAgICAgIHRpbWVzdGFtcCBURVhUIE5PVCBOVUxMLFxcbiAgICAgICAgICAgICAgICBhY3Rpb25fdHlwZSBURVhUIE5PVCBOVUxMLFxcbiAgICAgICAgICAgICAgICB1c2VyX2lkIFRFWFQgTk9UIE5VTEwsXFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uIFRFWFQgTk9UIE5VTEwsXFxuICAgICAgICAgICAgICAgIGRldGFpbHMgVEVYVCxcXG4gICAgICAgICAgICAgICAgY3JlYXRlZF9hdCBEQVRFVElNRSBERUZBVUxUIENVUlJFTlRfVElNRVNUQU1QXFxuICAgICAgICAgICAgKVxcbiAgICAgICAgICAgIFxcXCJcXFwiXFxcIjtcXG4gICAgICAgIFxcbiAgICAgICAgdHJ5IChTdGF0ZW1lbnQgc3RtdCA9IGNvbm5lY3Rpb24uY3JlYXRlU3RhdGVtZW50KCkpIHtcXG4gICAgICAgICAgICBzdG10LmV4ZWN1dGUoc3FsKTtcXG4gICAgICAgIH1cXG4gICAgfVxcbiAgICBcXG4gICAgQE92ZXJyaWRlXFxuICAgIHB1YmxpYyBib29sZWFuIGNsb3NlKCkge1xcbiAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICBpZiAoY29ubmVjdGlvbiAhPSBudWxsICYmICFjb25uZWN0aW9uLmlzQ2xvc2VkKCkpIHtcXG4gICAgICAgICAgICAgICAgY29ubmVjdGlvbi5jbG9zZSgpO1xcbiAgICAgICAgICAgICAgICBpbml0aWFsaXplZCA9IGZhbHNlO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJFcnJvciBjbG9zaW5nIGRhdGFiYXNlIGNvbm5lY3Rpb246IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XFxuICAgICAgICByZXR1cm4gXFxcIkRhdGFiYXNlIExvZ2dpbmcgKFNRTGl0ZSlcXFwiO1xcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIGJvb2xlYW4gaXNBdmFpbGFibGUoKSB7XFxuICAgICAgICB0cnkge1xcbiAgICAgICAgICAgIHJldHVybiBpbml0aWFsaXplZCAmJiBjb25uZWN0aW9uICE9IG51bGwgJiYgIWNvbm5lY3Rpb24uaXNDbG9zZWQoKTtcXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgfVxcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogUmV0cmlldmVzIHJlY2VudCBsb2cgZW50cmllcyBmcm9tIHRoZSBkYXRhYmFzZVxcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgcHJpbnRSZWNlbnRMb2dzKGludCBsaW1pdCkge1xcbiAgICAgICAgaWYgKCFpc0F2YWlsYWJsZSgpKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJEYXRhYmFzZSBsb2dnaW5nIG5vdCBhdmFpbGFibGVcXFwiKTtcXG4gICAgICAgICAgICByZXR1cm47XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIFN0cmluZyBzcWwgPSBcXFwiU0VMRUNUICogRlJPTSBsb2dfZW50cmllcyBPUkRFUiBCWSBjcmVhdGVkX2F0IERFU0MgTElNSVQgP1xcXCI7XFxuICAgICAgICBcXG4gICAgICAgIHRyeSAoUHJlcGFyZWRTdGF0ZW1lbnQgcHN0bXQgPSBjb25uZWN0aW9uLnByZXBhcmVTdGF0ZW1lbnQoc3FsKSkge1xcbiAgICAgICAgICAgIHBzdG10LnNldEludCgxLCBsaW1pdCk7XFxuICAgICAgICAgICAgUmVzdWx0U2V0IHJzID0gcHN0bXQuZXhlY3V0ZVF1ZXJ5KCk7XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKFxcXCI9PT0gUmVjZW50IExvZyBFbnRyaWVzID09PVxcXCIpO1xcbiAgICAgICAgICAgIHdoaWxlIChycy5uZXh0KCkpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGYoXFxcIlslc10gWyVzXSBbJXNdICVzIC0gJXMlblxcXCIsXFxuICAgICAgICAgICAgICAgICAgICBycy5nZXRTdHJpbmcoXFxcInRpbWVzdGFtcFxcXCIpLFxcbiAgICAgICAgICAgICAgICAgICAgcnMuZ2V0U3RyaW5nKFxcXCJhY3Rpb25fdHlwZVxcXCIpLFxcbiAgICAgICAgICAgICAgICAgICAgcnMuZ2V0U3RyaW5nKFxcXCJ1c2VyX2lkXFxcIiksXFxuICAgICAgICAgICAgICAgICAgICBycy5nZXRTdHJpbmcoXFxcImRlc2NyaXB0aW9uXFxcIiksXFxuICAgICAgICAgICAgICAgICAgICBycy5nZXRTdHJpbmcoXFxcImRldGFpbHNcXFwiKSAhPSBudWxsID8gcnMuZ2V0U3RyaW5nKFxcXCJkZXRhaWxzXFxcIikgOiBcXFwiXFxcIlxcbiAgICAgICAgICAgICAgICApO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH0gY2F0Y2ggKFNRTEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJFcnJvciByZXRyaWV2aW5nIGxvZyBlbnRyaWVzOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XFxufVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IiMjIyBTdGVwIDU6IENyZWF0ZSBEYXRhYmFzZSBMb2dnaW5nIFN0cmF0ZWd5XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvRmlsZUxvZ2dpbmdTdHJhdGVneS5qYXZhfSIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFOZGNXaXVQRWQyTVZrek4zWWN3S0RlIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTozNTo1My43MTlaIiwicmVzcG9uc2VfdGV4dCI6IiMjIyBTdGVwIDU6IENyZWF0ZSBEYXRhYmFzZSBMb2dnaW5nIFN0cmF0ZWd5XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiN2E5ZDM0NWItODI5OC00YzhkLTlhNGYtMGViMzg4ZmQyMjc5IiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUJtMTluTndjWFNMRFBmU0c3bVduRFgiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbG9nZ2luZy9Mb2dnaW5nTWFuYWdlci5qYXZhXCIsIFwiZmlsZV9jb250ZW50XCI6IFwicGFja2FnZSBsb2dnaW5nO1xcblxcbmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xcbmltcG9ydCBqYXZhLnV0aWwuTGlzdDtcXG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuQ29tcGxldGFibGVGdXR1cmU7XFxuaW1wb3J0IGphdmEudXRpbC5jb25jdXJyZW50LkV4ZWN1dG9yU2VydmljZTtcXG5pbXBvcnQgamF2YS51dGlsLmNvbmN1cnJlbnQuRXhlY3V0b3JzO1xcblxcbi8qKlxcbiAqIE1hbmFnZXMgbXVsdGlwbGUgbG9nZ2luZyBzdHJhdGVnaWVzIGFuZCBwcm92aWRlcyBhIHVuaWZpZWQgbG9nZ2luZyBpbnRlcmZhY2VcXG4gKi9cXG5wdWJsaWMgY2xhc3MgTG9nZ2luZ01hbmFnZXIge1xcbiAgICBcXG4gICAgcHJpdmF0ZSBmaW5hbCBMaXN0PExvZ2dpbmdTdHJhdGVneT4gc3RyYXRlZ2llcztcXG4gICAgcHJpdmF0ZSBmaW5hbCBFeGVjdXRvclNlcnZpY2UgZXhlY3V0b3JTZXJ2aWNlO1xcbiAgICBwcml2YXRlIGJvb2xlYW4gaW5pdGlhbGl6ZWQgPSBmYWxzZTtcXG4gICAgXFxuICAgIHB1YmxpYyBMb2dnaW5nTWFuYWdlcigpIHtcXG4gICAgICAgIHRoaXMuc3RyYXRlZ2llcyA9IG5ldyBBcnJheUxpc3Q8PigpO1xcbiAgICAgICAgdGhpcy5leGVjdXRvclNlcnZpY2UgPSBFeGVjdXRvcnMubmV3Rml4ZWRUaHJlYWRQb29sKDMpOyAvLyBPbmUgdGhyZWFkIHBlciBzdHJhdGVneSB0eXBlXFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBBZGRzIGEgbG9nZ2luZyBzdHJhdGVneVxcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgYWRkU3RyYXRlZ3koTG9nZ2luZ1N0cmF0ZWd5IHN0cmF0ZWd5KSB7XFxuICAgICAgICBzdHJhdGVnaWVzLmFkZChzdHJhdGVneSk7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBSZW1vdmVzIGEgbG9nZ2luZyBzdHJhdGVneVxcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgcmVtb3ZlU3RyYXRlZ3koTG9nZ2luZ1N0cmF0ZWd5IHN0cmF0ZWd5KSB7XFxuICAgICAgICBzdHJhdGVnaWVzLnJlbW92ZShzdHJhdGVneSk7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBJbml0aWFsaXplcyBhbGwgbG9nZ2luZyBzdHJhdGVnaWVzXFxuICAgICAqL1xcbiAgICBwdWJsaWMgYm9vbGVhbiBpbml0aWFsaXplKCkge1xcbiAgICAgICAgYm9vbGVhbiBhbGxTdWNjZXNzZnVsID0gdHJ1ZTtcXG4gICAgICAgIFxcbiAgICAgICAgZm9yIChMb2dnaW5nU3RyYXRlZ3kgc3RyYXRlZ3kgOiBzdHJhdGVnaWVzKSB7XFxuICAgICAgICAgICAgdHJ5IHtcXG4gICAgICAgICAgICAgICAgYm9vbGVhbiBzdWNjZXNzID0gc3RyYXRlZ3kuaW5pdGlhbGl6ZSgpO1xcbiAgICAgICAgICAgICAgICBpZiAoIXN1Y2Nlc3MpIHtcXG4gICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRmFpbGVkIHRvIGluaXRpYWxpemUgc3RyYXRlZ3k6IFxcXCIgKyBzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSk7XFxuICAgICAgICAgICAgICAgICAgICBhbGxTdWNjZXNzZnVsID0gZmFsc2U7XFxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XFxuICAgICAgICAgICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oXFxcIkluaXRpYWxpemVkIHN0cmF0ZWd5OiBcXFwiICsgc3RyYXRlZ3kuZ2V0U3RyYXRlZ3lOYW1lKCkpO1xcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFxcXCJFeGNlcHRpb24gaW5pdGlhbGl6aW5nIHN0cmF0ZWd5IFxcXCIgKyBzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSArIFxcXCI6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgICAgIGFsbFN1Y2Nlc3NmdWwgPSBmYWxzZTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICB9XFxuICAgICAgICBcXG4gICAgICAgIGluaXRpYWxpemVkID0gdHJ1ZTtcXG4gICAgICAgIHJldHVybiBhbGxTdWNjZXNzZnVsO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogTG9ncyBhbiBlbnRyeSB0byBhbGwgYXZhaWxhYmxlIHN0cmF0ZWdpZXMgYXN5bmNocm9ub3VzbHlcXG4gICAgICovXFxuICAgIHB1YmxpYyB2b2lkIGxvZyhMb2dFbnRyeSBlbnRyeSkge1xcbiAgICAgICAgaWYgKCFpbml0aWFsaXplZCkge1xcbiAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiTG9nZ2luZ01hbmFnZXIgbm90IGluaXRpYWxpemVkXFxcIik7XFxuICAgICAgICAgICAgcmV0dXJuO1xcbiAgICAgICAgfVxcbiAgICAgICAgXFxuICAgICAgICAvLyBMb2cgYXN5bmNocm9ub3VzbHkgdG8gYXZvaWQgYmxvY2tpbmcgdGhlIFVJXFxuICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZS5ydW5Bc3luYygoKSAtPiB7XFxuICAgICAgICAgICAgZm9yIChMb2dnaW5nU3RyYXRlZ3kgc3RyYXRlZ3kgOiBzdHJhdGVnaWVzKSB7XFxuICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneS5pc0F2YWlsYWJsZSgpKSB7XFxuICAgICAgICAgICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmF0ZWd5LmxvZyhlbnRyeSk7XFxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xcbiAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3IgbG9nZ2luZyB3aXRoIHN0cmF0ZWd5IFxcXCIgKyBzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSArIFxcXCI6IFxcXCIgKyBlLmdldE1lc3NhZ2UoKSk7XFxuICAgICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9XFxuICAgICAgICB9LCBleGVjdXRvclNlcnZpY2UpO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGxvZyB0b29sIHNlbGVjdGlvblxcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgbG9nVG9vbFNlbGVjdGlvbihTdHJpbmcgdG9vbE5hbWUpIHtcXG4gICAgICAgIExvZ0VudHJ5IGVudHJ5ID0gbmV3IExvZ0VudHJ5KFxcbiAgICAgICAgICAgIExvZ0VudHJ5LkFjdGlvblR5cGUuVE9PTF9TRUxFQ1RJT04sXFxuICAgICAgICAgICAgXFxcIk91dGlsIHNcXHUwMGU5bGVjdGlvbm5cXHUwMGU5OiBcXFwiICsgdG9vbE5hbWVcXG4gICAgICAgICk7XFxuICAgICAgICBsb2coZW50cnkpO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGxvZyBzaGFwZSBkcmF3aW5nXFxuICAgICAqL1xcbiAgICBwdWJsaWMgdm9pZCBsb2dTaGFwZURyYXduKFN0cmluZyBzaGFwZU5hbWUsIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xcbiAgICAgICAgU3RyaW5nIGRldGFpbHMgPSBTdHJpbmcuZm9ybWF0KFxcXCJDb29yZG9ublxcdTAwZTllczogKCUuMWYsJS4xZikgXFx1MDBlMCAoJS4xZiwlLjFmKVxcXCIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgIExvZ0VudHJ5IGVudHJ5ID0gbmV3IExvZ0VudHJ5KFxcbiAgICAgICAgICAgIExvZ0VudHJ5LkFjdGlvblR5cGUuU0hBUEVfRFJBV04sXFxuICAgICAgICAgICAgXFxcIkZvcm1lIGRlc3NpblxcdTAwZTllOiBcXFwiICsgc2hhcGVOYW1lLFxcbiAgICAgICAgICAgIGRldGFpbHNcXG4gICAgICAgICk7XFxuICAgICAgICBsb2coZW50cnkpO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGxvZyBkcmF3aW5nIGZhaWx1cmVzXFxuICAgICAqL1xcbiAgICBwdWJsaWMgdm9pZCBsb2dEcmF3aW5nRmFpbGVkKFN0cmluZyBzaGFwZU5hbWUsIFN0cmluZyByZWFzb24pIHtcXG4gICAgICAgIExvZ0VudHJ5IGVudHJ5ID0gbmV3IExvZ0VudHJ5KFxcbiAgICAgICAgICAgIExvZ0VudHJ5LkFjdGlvblR5cGUuRFJBV0lOR19GQUlMRUQsXFxuICAgICAgICAgICAgXFxcIlxcdTAwYzljaGVjIGR1IGRlc3NpbjogXFxcIiArIHNoYXBlTmFtZSxcXG4gICAgICAgICAgICBcXFwiUmFpc29uOiBcXFwiICsgcmVhc29uXFxuICAgICAgICApO1xcbiAgICAgICAgbG9nKGVudHJ5KTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBsb2cgY2FudmFzIGNsZWFyaW5nXFxuICAgICAqL1xcbiAgICBwdWJsaWMgdm9pZCBsb2dDYW52YXNDbGVhcmVkKCkge1xcbiAgICAgICAgTG9nRW50cnkgZW50cnkgPSBuZXcgTG9nRW50cnkoXFxuICAgICAgICAgICAgTG9nRW50cnkuQWN0aW9uVHlwZS5DQU5WQVNfQ0xFQVJFRCxcXG4gICAgICAgICAgICBcXFwiQ2FudmFzIGVmZmFjXFx1MDBlOVxcXCJcXG4gICAgICAgICk7XFxuICAgICAgICBsb2coZW50cnkpO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGxvZyBhcHBsaWNhdGlvbiBldmVudHNcXG4gICAgICovXFxuICAgIHB1YmxpYyB2b2lkIGxvZ0FwcGxpY2F0aW9uRXZlbnQoTG9nRW50cnkuQWN0aW9uVHlwZSBhY3Rpb25UeXBlLCBTdHJpbmcgZGVzY3JpcHRpb24pIHtcXG4gICAgICAgIExvZ0VudHJ5IGVudHJ5ID0gbmV3IExvZ0VudHJ5KGFjdGlvblR5cGUsIGRlc2NyaXB0aW9uKTtcXG4gICAgICAgIGxvZyhlbnRyeSk7XFxuICAgIH1cXG4gICAgXFxuICAgIC8qKlxcbiAgICAgKiBDbG9zZXMgYWxsIGxvZ2dpbmcgc3RyYXRlZ2llc1xcbiAgICAgKi9cXG4gICAgcHVibGljIHZvaWQgY2xvc2UoKSB7XFxuICAgICAgICBmb3IgKExvZ2dpbmdTdHJhdGVneSBzdHJhdGVneSA6IHN0cmF0ZWdpZXMpIHtcXG4gICAgICAgICAgICB0cnkge1xcbiAgICAgICAgICAgICAgICBzdHJhdGVneS5jbG9zZSgpO1xcbiAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcXFwiRXJyb3IgY2xvc2luZyBzdHJhdGVneSBcXFwiICsgc3RyYXRlZ3kuZ2V0U3RyYXRlZ3lOYW1lKCkgKyBcXFwiOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgIH1cXG4gICAgICAgIFxcbiAgICAgICAgZXhlY3V0b3JTZXJ2aWNlLnNodXRkb3duKCk7XFxuICAgICAgICBpbml0aWFsaXplZCA9IGZhbHNlO1xcbiAgICB9XFxuICAgIFxcbiAgICAvKipcXG4gICAgICogR2V0cyB0aGUgbGlzdCBvZiBhY3RpdmUgc3RyYXRlZ2llc1xcbiAgICAgKi9cXG4gICAgcHVibGljIExpc3Q8U3RyaW5nPiBnZXRBY3RpdmVTdHJhdGVnaWVzKCkge1xcbiAgICAgICAgTGlzdDxTdHJpbmc+IGFjdGl2ZSA9IG5ldyBBcnJheUxpc3Q8PigpO1xcbiAgICAgICAgZm9yIChMb2dnaW5nU3RyYXRlZ3kgc3RyYXRlZ3kgOiBzdHJhdGVnaWVzKSB7XFxuICAgICAgICAgICAgaWYgKHN0cmF0ZWd5LmlzQXZhaWxhYmxlKCkpIHtcXG4gICAgICAgICAgICAgICAgYWN0aXZlLmFkZChzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgfVxcbiAgICAgICAgcmV0dXJuIGFjdGl2ZTtcXG4gICAgfVxcbiAgICBcXG4gICAgLyoqXFxuICAgICAqIEdldHMgdGhlIHRvdGFsIG51bWJlciBvZiBzdHJhdGVnaWVzXFxuICAgICAqL1xcbiAgICBwdWJsaWMgaW50IGdldFN0cmF0ZWd5Q291bnQoKSB7XFxuICAgICAgICByZXR1cm4gc3RyYXRlZ2llcy5zaXplKCk7XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNjogQ3JlYXRlIHRoZSBMb2dnaW5nIE1hbmFnZXJcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbG9nZ2luZy9EYXRhYmFzZUxvZ2dpbmdTdHJhdGVneS5qYXZhfSIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFIM3NWV3VMMTNjSzhxMkhQNG43VDJ5In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTozNjoxMy45NDJaIiwicmVzcG9uc2VfdGV4dCI6IiMjIyBTdGVwIDY6IENyZWF0ZSB0aGUgTG9nZ2luZyBNYW5hZ2VyXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiYzk2NzlhYTYtOWUwYy00OGQ2LWE3MjQtM2VlYTUzN2UxNWYwIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMVRtbjJKYU1MQ1hrUFhlMTRyQ29QcHAiLCJ0b29sX25hbWUiOiJzYXZlLWZpbGUiLCJpbnB1dF9qc29uIjoie1wiaW5zdHJ1Y3Rpb25zX3JlbWluZGVyXCI6IFwiTElNSVQgVEhFIEZJTEUgQ09OVEVOVCBUTyBBVCBNT1NUIDMwMCBMSU5FUy4gSUYgTU9SRSBDT05URU5UIE5FRURTIFRPIEJFIEFEREVEIFVTRSBUSEUgc3RyLXJlcGxhY2UtZWRpdG9yIFRPT0wgVE8gRURJVCBUSEUgRklMRSBBRlRFUiBJVCBIQVMgQkVFTiBDUkVBVEVELlwiLCBcInBhdGhcIjogXCJzcmMvbG9nZ2luZy9Mb2dnaW5nT2JzZXJ2ZXIuamF2YVwiLCBcImZpbGVfY29udGVudFwiOiBcInBhY2thZ2UgbG9nZ2luZztcXG5cXG5pbXBvcnQgZXZlbnRzLlRvb2xiYXJFdmVudDtcXG5pbXBvcnQgb2JzZXJ2ZXIuT2JzZXJ2ZXI7XFxuaW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcXG5cXG4vKipcXG4gKiBPYnNlcnZlciB0aGF0IGxvZ3MgdG9vbGJhciBldmVudHNcXG4gKi9cXG5wdWJsaWMgY2xhc3MgTG9nZ2luZ09ic2VydmVyIGltcGxlbWVudHMgT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiB7XFxuICAgIFxcbiAgICBwcml2YXRlIGZpbmFsIExvZ2dpbmdNYW5hZ2VyIGxvZ2dpbmdNYW5hZ2VyO1xcbiAgICBcXG4gICAgcHVibGljIExvZ2dpbmdPYnNlcnZlcihMb2dnaW5nTWFuYWdlciBsb2dnaW5nTWFuYWdlcikge1xcbiAgICAgICAgdGhpcy5sb2dnaW5nTWFuYWdlciA9IGxvZ2dpbmdNYW5hZ2VyO1xcbiAgICB9XFxuICAgIFxcbiAgICBAT3ZlcnJpZGVcXG4gICAgcHVibGljIHZvaWQgdXBkYXRlKFRvb2xiYXJFdmVudCBldmVudCkge1xcbiAgICAgICAgc3dpdGNoIChldmVudC5nZXRUeXBlKCkpIHtcXG4gICAgICAgICAgICBjYXNlIFNIQVBFX1NFTEVDVEVEOlxcbiAgICAgICAgICAgICAgICBEcmF3aW5nU3RyYXRlZ3kgc3RyYXRlZ3kgPSBldmVudC5nZXREYXRhKERyYXdpbmdTdHJhdGVneS5jbGFzcyk7XFxuICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgICAgICBsb2dnaW5nTWFuYWdlci5sb2dUb29sU2VsZWN0aW9uKHN0cmF0ZWd5LmdldFN0cmF0ZWd5TmFtZSgpKTtcXG4gICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICBicmVhaztcXG4gICAgICAgICAgICAgICAgXFxuICAgICAgICAgICAgY2FzZSBDTEVBUl9DQU5WQVM6XFxuICAgICAgICAgICAgICAgIGxvZ2dpbmdNYW5hZ2VyLmxvZ0NhbnZhc0NsZWFyZWQoKTtcXG4gICAgICAgICAgICAgICAgYnJlYWs7XFxuICAgICAgICB9XFxuICAgIH1cXG59XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgNzogQ3JlYXRlIGEgTG9nZ2luZyBPYnNlcnZlciB0byBpbnRlZ3JhdGUgd2l0aCB0aGUgZXhpc3RpbmcgT2JzZXJ2ZXIgcGF0dGVyblxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9sb2dnaW5nL0xvZ2dpbmdNYW5hZ2VyLmphdmF9IiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUJtMTluTndjWFNMRFBmU0c3bVduRFgifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM2OjM3LjQ1N1oiLCJyZXNwb25zZV90ZXh0IjoiIyMjIFN0ZXAgNzogQ3JlYXRlIGEgTG9nZ2luZyBPYnNlcnZlciB0byBpbnRlZ3JhdGUgd2l0aCB0aGUgZXhpc3RpbmcgT2JzZXJ2ZXIgcGF0dGVyblxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjI5NWQ0YmRlLTAyYmUtNDUyNy1iNmZjLTliODQ0ZjVlMTgxNSIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFVUzJ2UWZEVm1xU0dWcEpRcXBDOUxLIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uX3JlbWluZGVyXCI6IFwiQUxXQVlTIEJSRUFLIERPV04gRURJVFMgSU5UTyBTTUFMTEVSIENIVU5LUyBPRiBBVCBNT1NUIDIwMCBMSU5FUyBFQUNILlwiLCBcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcIiwgXCJvbGRfc3RyXCI6IFwicGFja2FnZSBzdHJhdGVneTtcXG5cXG5pbXBvcnQgRmFjdG9yeS5DaXJjbGVTaGFwZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XFxuaW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xcbmltcG9ydCBtb2RlbC5EcmF3bkNpcmNsZTtcXG5cXG5wdWJsaWMgY2xhc3MgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcXG4gICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xcbiAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcXG4gICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFxcXCJDZXJjbGUgZGVzc2luXFx1MDBlOSBhdmVjIHN1Y2NcXHUwMGU4c1xcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDI1LCBcIm5ld19zdHJcIjogXCJwYWNrYWdlIHN0cmF0ZWd5O1xcblxcbmltcG9ydCBGYWN0b3J5LkNpcmNsZVNoYXBlO1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcXG5pbXBvcnQgbG9nZ2luZy5Mb2dnaW5nTWFuYWdlcjtcXG5pbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XFxuaW1wb3J0IG1vZGVsLkRyYXduQ2lyY2xlO1xcblxcbnB1YmxpYyBjbGFzcyBDaXJjbGVEcmF3aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBEcmF3aW5nU3RyYXRlZ3kge1xcbiAgICBcXG4gICAgcHJpdmF0ZSBMb2dnaW5nTWFuYWdlciBsb2dnaW5nTWFuYWdlcjtcXG4gICAgXFxuICAgIHB1YmxpYyB2b2lkIHNldExvZ2dpbmdNYW5hZ2VyKExvZ2dpbmdNYW5hZ2VyIGxvZ2dpbmdNYW5hZ2VyKSB7XFxuICAgICAgICB0aGlzLmxvZ2dpbmdNYW5hZ2VyID0gbG9nZ2luZ01hbmFnZXI7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcXG4gICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xcbiAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcXG4gICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBMb2cgdGhlIHN1Y2Nlc3NmdWwgZHJhd2luZ1xcbiAgICAgICAgICAgIGlmIChsb2dnaW5nTWFuYWdlciAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIGxvZ2dpbmdNYW5hZ2VyLmxvZ1NoYXBlRHJhd24oXFxcIkNlcmNsZVxcXCIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuc3VjY2VzcyhcXFwiQ2VyY2xlIGRlc3NpblxcdTAwZTkgYXZlYyBzdWNjXFx1MDBlOHNcXFwiKTtcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgLy8gTG9nIHRoZSBmYWlsdXJlXFxuICAgICAgICAgICAgaWYgKGxvZ2dpbmdNYW5hZ2VyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgbG9nZ2luZ01hbmFnZXIubG9nRHJhd2luZ0ZhaWxlZChcXFwiQ2VyY2xlXFxcIiwgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiIyMjIFN0ZXAgODogVXBkYXRlIERyYXdpbmcgU3RyYXRlZ2llcyB0byBpbmNsdWRlIGxvZ2dpbmdcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbG9nZ2luZy9Mb2dnaW5nT2JzZXJ2ZXIuamF2YX0iLCJpc19lcnJvciI6ZmFsc2UsInJlcXVlc3RfaWQiOiIiLCJ0b29sX3VzZV9pZCI6InRvb2x1XzAxVG1uMkphTUxDWGtQWGUxNHJDb1BwcCJ9fSx7ImlkIjoyLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMjlUMTU6MzY6NDkuOTA5WiIsInJlc3BvbnNlX3RleHQiOiIjIyMgU3RlcCA4OiBVcGRhdGUgRHJhd2luZyBTdHJhdGVnaWVzIHRvIGluY2x1ZGUgbG9nZ2luZ1xuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImFmMzAxYTZjLWFlYWUtNDc5MC1iMzJiLWYwOTJhZjc3MTZkYiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFFN2pibU5UNmlvRTdKbUdlWTFhOGdyIiwidG9vbF9uYW1lIjoidmlldyIsImlucHV0X2pzb24iOiJ7XCJwYXRoXCI6IFwic3JjXCIsIFwidHlwZVwiOiBcImRpcmVjdG9yeVwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBjaGVjayB0aGUgY3VycmVudCBmaWxlIHN0cnVjdHVyZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgbm90IGZvdW5kOiBzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmEiLCJpc19lcnJvciI6dHJ1ZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFVUzJ2UWZEVm1xU0dWcEpRcXBDOUxLIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTozNzowMy4zODZaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayB0aGUgY3VycmVudCBmaWxlIHN0cnVjdHVyZTpcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W119LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiI2MGZjZTMzNi1hODE0LTRmNzktOGY4Zi01ZDU0OTRkM2VjNjYiLCJyZXF1ZXN0X21lc3NhZ2UiOiIiLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjUsImNvbnRlbnQiOiIiLCJ0b29sX3VzZSI6eyJ0b29sX3VzZV9pZCI6InRvb2x1XzAxQ3pMdFRSd1NoZkJNellwUHpoVktYeCIsInRvb2xfbmFtZSI6InZpZXciLCJpbnB1dF9qc29uIjoie1wicGF0aFwiOiBcInNyY1wiLCBcInR5cGVcIjogXCJkaXJlY3RvcnlcIn0iLCJtY3Bfc2VydmVyX25hbWUiOiIiLCJtY3BfdG9vbF9uYW1lIjoiIn19LHsiaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJJIHNlZSB0aGF0IHRoZSBzdHJhdGVneSBmaWxlcyB3ZXJlbid0IGNyZWF0ZWQgeWV0LiBMZXQgbWUgY2hlY2sgd2hhdCBleGlzdHM6XG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJIZXJlJ3MgdGhlIGZpbGVzIGFuZCBkaXJlY3RvcmllcyB1cCB0byAyIGxldmVscyBkZWVwIGluIHNyYywgZXhjbHVkaW5nIGhpZGRlbiBpdGVtczpcbnNyYy9GYWN0b3J5XG5zcmMvRmFjdG9yeVxcQ2lyY2xlRmFjdG9yeS5qYXZhXG5zcmMvRmFjdG9yeVxcQ2lyY2xlU2hhcGUuamF2YVxuc3JjL0ZhY3RvcnlcXExpbmVGYWN0b3J5LmphdmFcbnNyYy9GYWN0b3J5XFxMaW5lU2hhcGUuamF2YVxuc3JjL0ZhY3RvcnlcXFJlY3RhbmdsZUZhY3RvcnkuamF2YVxuc3JjL0ZhY3RvcnlcXFJlY3RhbmdsZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxTaGFwZS5qYXZhXG5zcmMvRmFjdG9yeVxcU2hhcGVGYWN0b3J5LmphdmFcbnNyYy9NYWluLmphdmFcbnNyYy9ldmVudHNcbnNyYy9sb2dnaW5nXG5zcmMvbG9nZ2luZ1xcQ29uc29sZUxvZ2dpbmdTdHJhdGVneS5qYXZhXG5zcmMvbG9nZ2luZ1xcRGF0YWJhc2VMb2dnaW5nU3RyYXRlZ3kuamF2YVxuc3JjL2xvZ2dpbmdcXEZpbGVMb2dnaW5nU3RyYXRlZ3kuamF2YVxuc3JjL2xvZ2dpbmdcXExvZ0VudHJ5LmphdmFcbnNyYy9sb2dnaW5nXFxMb2dnaW5nTWFuYWdlci5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ09ic2VydmVyLmphdmFcbnNyYy9sb2dnaW5nXFxMb2dnaW5nU3RyYXRlZ3kuamF2YVxuIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMUU3amJtTlQ2aW9FN0ptR2VZMWE4Z3IifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM3OjA5LjMwN1oiLCJyZXNwb25zZV90ZXh0IjoiSSBzZWUgdGhhdCB0aGUgc3RyYXRlZ3kgZmlsZXMgd2VyZW4ndCBjcmVhdGVkIHlldC4gTGV0IG1lIGNoZWNrIHdoYXQgZXhpc3RzOlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6IjgwMjFmNDJmLTBmM2UtNDI3MS04OWU1LTg0ZjgxNjZmZTg1MiIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDEzZTVWdnhqVFJUTjZITHU3TVBlWHh0IiwidG9vbF9uYW1lIjoiY29kZWJhc2UtcmV0cmlldmFsIiwiaW5wdXRfanNvbiI6IntcImluZm9ybWF0aW9uX3JlcXVlc3RcIjogXCJTaG93IG1lIGFsbCB0aGUgZmlsZXMgaW4gdGhlIHN0cmF0ZWd5LCB1aSwgb2JzZXJ2ZXIsIG1hbmFnZXIsIG1vZGVsLCBhbmQgdXRpbCBkaXJlY3RvcmllcyB0byB1bmRlcnN0YW5kIHRoZSBjdXJyZW50IGZpbGUgc3RydWN0dXJlLlwifSIsIm1jcF9zZXJ2ZXJfbmFtZSI6IiIsIm1jcF90b29sX25hbWUiOiIifX0seyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCBtZSBjaGVjayBpZiB0aGUgc3RyYXRlZ3kgYW5kIG90aGVyIGRpcmVjdG9yaWVzIGV4aXN0OlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiIifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6MSwidG9vbF9yZXN1bHRfbm9kZSI6eyJjb250ZW50IjoiSGVyZSdzIHRoZSBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgdXAgdG8gMiBsZXZlbHMgZGVlcCBpbiBzcmMsIGV4Y2x1ZGluZyBoaWRkZW4gaXRlbXM6XG5zcmMvRmFjdG9yeVxuc3JjL0ZhY3RvcnlcXENpcmNsZUZhY3RvcnkuamF2YVxuc3JjL0ZhY3RvcnlcXENpcmNsZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxMaW5lRmFjdG9yeS5qYXZhXG5zcmMvRmFjdG9yeVxcTGluZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVGYWN0b3J5LmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVTaGFwZS5qYXZhXG5zcmMvRmFjdG9yeVxcU2hhcGUuamF2YVxuc3JjL0ZhY3RvcnlcXFNoYXBlRmFjdG9yeS5qYXZhXG5zcmMvTWFpbi5qYXZhXG5zcmMvZXZlbnRzXG5zcmMvbG9nZ2luZ1xuc3JjL2xvZ2dpbmdcXENvbnNvbGVMb2dnaW5nU3RyYXRlZ3kuamF2YVxuc3JjL2xvZ2dpbmdcXERhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxGaWxlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxMb2dFbnRyeS5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ01hbmFnZXIuamF2YVxuc3JjL2xvZ2dpbmdcXExvZ2dpbmdPYnNlcnZlci5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbiIsImlzX2Vycm9yIjpmYWxzZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFDekx0VFJ3U2hmQk16WXBQemhWS1h4In19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTozNzoxMy42MDFaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayBpZiB0aGUgc3RyYXRlZ3kgYW5kIG90aGVyIGRpcmVjdG9yaWVzIGV4aXN0OlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbXX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImVjMDE5Njk3LTExNGEtNDk0YS04MWE4LTcyZGUwYzBlODdlYyIsInJlcXVlc3RfbWVzc2FnZSI6IiIsInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MSwidHlwZSI6NSwiY29udGVudCI6IiIsInRvb2xfdXNlIjp7InRvb2xfdXNlX2lkIjoidG9vbHVfMDFKMTMxU3dHMVVYcDJnY0Z4cmd5cWJEIiwidG9vbF9uYW1lIjoic3RyLXJlcGxhY2UtZWRpdG9yIiwiaW5wdXRfanNvbiI6IntcImluc3RydWN0aW9uX3JlbWluZGVyXCI6IFwiQUxXQVlTIEJSRUFLIERPV04gRURJVFMgSU5UTyBTTUFMTEVSIENIVU5LUyBPRiBBVCBNT1NUIDIwMCBMSU5FUyBFQUNILlwiLCBcImNvbW1hbmRcIjogXCJzdHJfcmVwbGFjZVwiLCBcInBhdGhcIjogXCJzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcIiwgXCJvbGRfc3RyXCI6IFwicGFja2FnZSBzdHJhdGVneTtcXG5cXG5pbXBvcnQgRmFjdG9yeS5DaXJjbGVTaGFwZTtcXG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XFxuaW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xcbmltcG9ydCBtb2RlbC5EcmF3bkNpcmNsZTtcXG5cXG5wdWJsaWMgY2xhc3MgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcXG4gICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xcbiAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcXG4gICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFxcXCJDZXJjbGUgZGVzc2luXFx1MDBlOSBhdmVjIHN1Y2NcXHUwMGU4c1xcXCIpO1xcbiAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XCIsIFwib2xkX3N0cl9zdGFydF9saW5lX251bWJlclwiOiAxLCBcIm9sZF9zdHJfZW5kX2xpbmVfbnVtYmVyXCI6IDI1LCBcIm5ld19zdHJcIjogXCJwYWNrYWdlIHN0cmF0ZWd5O1xcblxcbmltcG9ydCBGYWN0b3J5LkNpcmNsZVNoYXBlO1xcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcXG5pbXBvcnQgbG9nZ2luZy5Mb2dnaW5nTWFuYWdlcjtcXG5pbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XFxuaW1wb3J0IG1vZGVsLkRyYXduQ2lyY2xlO1xcblxcbnB1YmxpYyBjbGFzcyBDaXJjbGVEcmF3aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBEcmF3aW5nU3RyYXRlZ3kge1xcbiAgICBcXG4gICAgcHJpdmF0ZSBMb2dnaW5nTWFuYWdlciBsb2dnaW5nTWFuYWdlcjtcXG4gICAgXFxuICAgIHB1YmxpYyB2b2lkIHNldExvZ2dpbmdNYW5hZ2VyKExvZ2dpbmdNYW5hZ2VyIGxvZ2dpbmdNYW5hZ2VyKSB7XFxuICAgICAgICB0aGlzLmxvZ2dpbmdNYW5hZ2VyID0gbG9nZ2luZ01hbmFnZXI7XFxuICAgIH1cXG4gICAgXFxuICAgIEBPdmVycmlkZVxcbiAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcXG4gICAgICAgIHRyeSB7XFxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcXG4gICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xcbiAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcXG4gICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XFxuICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcXG4gICAgICAgICAgICBcXG4gICAgICAgICAgICAvLyBMb2cgdGhlIHN1Y2Nlc3NmdWwgZHJhd2luZ1xcbiAgICAgICAgICAgIGlmIChsb2dnaW5nTWFuYWdlciAhPSBudWxsKSB7XFxuICAgICAgICAgICAgICAgIGxvZ2dpbmdNYW5hZ2VyLmxvZ1NoYXBlRHJhd24oXFxcIkNlcmNsZVxcXCIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgXFxuICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuc3VjY2VzcyhcXFwiQ2VyY2xlIGRlc3NpblxcdTAwZTkgYXZlYyBzdWNjXFx1MDBlOHNcXFwiKTtcXG4gICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XFxuICAgICAgICAgICAgLy8gTG9nIHRoZSBmYWlsdXJlXFxuICAgICAgICAgICAgaWYgKGxvZ2dpbmdNYW5hZ2VyICE9IG51bGwpIHtcXG4gICAgICAgICAgICAgICAgbG9nZ2luZ01hbmFnZXIubG9nRHJhd2luZ0ZhaWxlZChcXFwiQ2VyY2xlXFxcIiwgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFxcXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcXFwiICsgZS5nZXRNZXNzYWdlKCkpO1xcbiAgICAgICAgfVxcbiAgICB9XCJ9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiR3JlYXQhIEkgY2FuIHNlZSB0aGF0IGFsbCB0aGUgZmlsZXMgZXhpc3QuIE5vdyBsZXQgbWUgdXBkYXRlIHRoZSBleGlzdGluZyBkcmF3aW5nIHN0cmF0ZWdpZXMgdG8gaW5jbHVkZSBsb2dnaW5nIHN1cHBvcnQ6XG5cbiMjIyBTdGVwIDg6IFVwZGF0ZSBEcmF3aW5nIFN0cmF0ZWdpZXMgdG8gaW5jbHVkZSBsb2dnaW5nXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6IiJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjoxLCJ0b29sX3Jlc3VsdF9ub2RlIjp7ImNvbnRlbnQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvdWkvT2JzZXJ2YWJsZVRvb2xiYXIuamF2YVxuICAgICAxXHRwYWNrYWdlIHVpO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGV2ZW50cy5Ub29sYmFyRXZlbnQ7XG4gICAgIDRcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZhYmxlO1xuICAgICA1XHRpbXBvcnQgb2JzZXJ2ZXIuT2JzZXJ2ZXI7XG4gICAgIDZcdGltcG9ydCBzdHJhdGVneS4qO1xuICAgICA3XHRpbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAgOVx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxMFx0XG4gICAgMTFcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgIDEyXHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgMTNcdFxuICAgIDE0XHQvKipcbiAgICAxNVx0ICogT2JzZXJ2YWJsZSB0b29sYmFyIHRoYXQgbm90aWZpZXMgb2JzZXJ2ZXJzIHdoZW4gdG9vbHMgYXJlIHNlbGVjdGVkXG4gICAgMTZcdCAqL1xuICAgIDE3XHRwdWJsaWMgY2xhc3MgT2JzZXJ2YWJsZVRvb2xiYXIgZXh0ZW5kcyBIQm94IGltcGxlbWVudHMgT2JzZXJ2YWJsZTxUb29sYmFyRXZlbnQ+IHtcbiAgICAxOFx0ICAgIFxuICAgIDE5XHQgICAgcHJpdmF0ZSBmaW5hbCBMaXN0PE9ic2VydmVyPFRvb2xiYXJFdmVudD4+IG9ic2VydmVycztcbiAgICAyMFx0ICAgIHByaXZhdGUgRHJhd2luZ1N0cmF0ZWd5IGN1cnJlbnRTdHJhdGVneTtcbiAgICAyMVx0ICAgIFxuICAgIDIyXHQgICAgLy8gRHJhd2luZyBzdHJhdGVnaWVzXG4gICAgMjNcdCAgICBwcml2YXRlIGZpbmFsIFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneSByZWN0YW5nbGVTdHJhdGVneTtcbiAgICAyNFx0ICAgIHByaXZhdGUgZmluYWwgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5IGNpcmNsZVN0cmF0ZWd5O1xuICAgIDI1XHQgICAgcHJpdmF0ZSBmaW5hbCBMaW5lRHJhd2luZ1N0cmF0ZWd5IGxpbmVTdHJhdGVneTtcbiAgICAyNlx0ICAgIFxuICAgIDI3XHQgICAgcHVibGljIE9ic2VydmFibGVUb29sYmFyKCkge1xuICAgIDI4XHQgICAgICAgIHN1cGVyKDEwKTtcbiAgICAyOVx0ICAgICAgICB0aGlzLm9ic2VydmVycyA9IG5ldyBBcnJheUxpc3Q8PigpO1xuICAgIDMwXHQgICAgICAgIHRoaXMuc2V0UGFkZGluZyhuZXcgSW5zZXRzKDEwKSk7XG4gICAgMzFcdCAgICAgICAgXG4gICAgMzJcdCAgICAgICAgLy8gSW5pdGlhbGl6ZSBzdHJhdGVnaWVzXG4gICAgMzNcdCAgICAgICAgdGhpcy5yZWN0YW5nbGVTdHJhdGVneSA9IG5ldyBSZWN0YW5nbGVEcmF3aW5nU3RyYXRlZ3koKTtcbiAgICAzNFx0ICAgICAgICB0aGlzLmNpcmNsZVN0cmF0ZWd5ID0gbmV3IENpcmNsZURyYXdpbmdTdHJhdGVneSgpO1xuICAgIDM1XHQgICAgICAgIHRoaXMubGluZVN0cmF0ZWd5ID0gbmV3IExpbmVEcmF3aW5nU3RyYXRlZ3koKTtcbiAgICAzNlx0ICAgICAgICBcbiAgICAzN1x0ICAgICAgICAvLyBTZXQgZGVmYXVsdCBzdHJhdGVneVxuICAgIDM4XHQgICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gcmVjdGFuZ2xlU3RyYXRlZ3k7XG4gICAgMzlcdCAgICAgICAgXG4gICAgNDBcdCAgICAgICAgaW5pdGlhbGl6ZUJ1dHRvbnMoKTtcbiAgICA0MVx0ICAgIH1cbiAgICA0Mlx0ICAgIFxuICAgIDQzXHQgICAgcHJpdmF0ZSB2b2lkIGluaXRpYWxpemVCdXR0b25zKCkge1xuICAgIDQ0XHQgICAgICAgIC8vIENyZWF0ZSBidXR0b25zXG4gICAgNDVcdCAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXCJSZWN0YW5nbGVcIik7XG4gICAgNDZcdCAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG4gICAgNDdcdCAgICAgICAgQnV0dG9uIGxpbmVCdG4gPSBuZXcgQnV0dG9uKFwiTGlnbmVcIik7XG4gICAgNDhcdCAgICAgICAgQnV0dG9uIGNsZWFyQnRuID0gbmV3IEJ1dHRvbihcIkVmZmFjZXJcIik7XG4gICAgNDlcdCAgICAgICAgXG4gICAgNTBcdCAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzXG4gICAgNTFcdCAgICAgICAgcmVjdGFuZ2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gc2VsZWN0U3RyYXRlZ3kocmVjdGFuZ2xlU3RyYXRlZ3kpKTtcbiAgICA1Mlx0ICAgICAgICBjaXJjbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShjaXJjbGVTdHJhdGVneSkpO1xuICAgIDUzXHQgICAgICAgIGxpbmVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShsaW5lU3RyYXRlZ3kpKTtcbiAgICA1NFx0ICAgICAgICBjbGVhckJ0bi5zZXRPbkFjdGlvbihlIC0+IGNsZWFyQ2FudmFzKCkpO1xuICAgIDU1XHQgICAgICAgIFxuICAgIDU2XHQgICAgICAgIC8vIEFkZCBidXR0b25zIHRvIHRvb2xiYXJcbiAgICA1N1x0ICAgICAgICB0aGlzLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuLCBjbGVhckJ0bik7XG4gICAgNThcdCAgICB9XG4gICAgNTlcdCAgICBcbiAgICA2MFx0ICAgIHByaXZhdGUgdm9pZCBzZWxlY3RTdHJhdGVneShEcmF3aW5nU3RyYXRlZ3kgc3RyYXRlZ3kpIHtcbiAgICA2MVx0ICAgICAgICB0aGlzLmN1cnJlbnRTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgIDYyXHQgICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5TSEFQRV9TRUxFQ1RFRCwgc3RyYXRlZ3kpO1xuICAgIDYzXHQgICAgICAgIG5vdGlmeU9ic2VydmVycyhldmVudCk7XG4gICAgNjRcdCAgICB9XG4gICAgNjVcdCAgICBcbiAgICA2Nlx0ICAgIHByaXZhdGUgdm9pZCBjbGVhckNhbnZhcygpIHtcbiAgICA2N1x0ICAgICAgICBUb29sYmFyRXZlbnQgZXZlbnQgPSBuZXcgVG9vbGJhckV2ZW50KFRvb2xiYXJFdmVudC5FdmVudFR5cGUuQ0xFQVJfQ0FOVkFTKTtcbiAgICA2OFx0ICAgICAgICBub3RpZnlPYnNlcnZlcnMoZXZlbnQpO1xuICAgIDY5XHQgICAgfVxuICAgIDcwXHQgICAgXG4gICAgNzFcdCAgICBwdWJsaWMgRHJhd2luZ1N0cmF0ZWd5IGdldEN1cnJlbnRTdHJhdGVneSgpIHtcbiAgICA3Mlx0ICAgICAgICByZXR1cm4gY3VycmVudFN0cmF0ZWd5O1xuICAgIDczXHQgICAgfVxuICAgIDc0XHQgICAgXG4gICAgNzVcdCAgICBAT3ZlcnJpZGVcbiAgICA3Nlx0ICAgIHB1YmxpYyB2b2lkIGFkZE9ic2VydmVyKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIpIHtcbiAgICA3N1x0ICAgICAgICBvYnNlcnZlcnMuYWRkKG9ic2VydmVyKTtcbiAgICA3OFx0ICAgIH1cbiAgICA3OVx0ICAgIFxuICAgIDgwXHQgICAgQE92ZXJyaWRlXG4gICAgODFcdCAgICBwdWJsaWMgdm9pZCByZW1vdmVPYnNlcnZlcihPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IG9ic2VydmVyKSB7XG4gICAgODJcdCAgICAgICAgb2JzZXJ2ZXJzLnJlbW92ZShvYnNlcnZlcik7XG4gICAgODNcdCAgICB9XG4gICAgODRcdCAgICBcbiAgICA4NVx0ICAgIEBPdmVycmlkZVxuICAgIDg2XHQgICAgcHVibGljIHZvaWQgbm90aWZ5T2JzZXJ2ZXJzKFRvb2xiYXJFdmVudCBkYXRhKSB7XG4gICAgODdcdCAgICAgICAgZm9yIChPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IG9ic2VydmVyIDogb2JzZXJ2ZXJzKSB7XG4gICAgODhcdCAgICAgICAgICAgIG9ic2VydmVyLnVwZGF0ZShkYXRhKTtcbiAgICA4OVx0ICAgICAgICB9XG4gICAgOTBcdCAgICB9XG4gICAgOTFcdH1cbi4uLlxuUGF0aDogc3JjL01haW5PYnNlcnZlci5qYXZhXG4gICAgIDFcdGltcG9ydCB1aS5EcmF3aW5nQ2FudmFzO1xuICAgICAyXHRpbXBvcnQgdWkuT2JzZXJ2YWJsZVRvb2xiYXI7XG4gICAgIDNcdGltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG4gICAgIDRcdGltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG4gICAgIDVcdGltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkJvcmRlclBhbmU7XG4gICAgIDZcdGltcG9ydCBqYXZhZnguc3RhZ2UuU3RhZ2U7XG4gICAgIDdcdFxuICAgICA4XHQvKipcbiAgICAgOVx0ICogTWFpbiBhcHBsaWNhdGlvbiBjbGFzcyB1c2luZyBPYnNlcnZlciBwYXR0ZXJuIHdpdGggU3RyYXRlZ3kgZm9yIGRyYXdpbmdcbiAgICAxMFx0ICovXG4gICAgMTFcdHB1YmxpYyBjbGFzcyBNYWluT2JzZXJ2ZXIgZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgMTJcdCAgICBcbiAgICAxM1x0ICAgIEBPdmVycmlkZVxuICAgIDE0XHQgICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgMTVcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFwiRGVzc2luIGRlIEZvcm1lcyBHw6lvbcOpdHJpcXVlcyAtIE9ic2VydmVyIFBhdHRlcm5cIik7XG4gICAgMTZcdCAgICAgICAgXG4gICAgMTdcdCAgICAgICAgLy8gQ3JlYXRlIHRoZSBvYnNlcnZhYmxlIHRvb2xiYXJcbiAgICAxOFx0ICAgICAgICBPYnNlcnZhYmxlVG9vbGJhciB0b29sYmFyID0gbmV3IE9ic2VydmFibGVUb29sYmFyKCk7XG4gICAgMTlcdCAgICAgICAgXG4gICAgMjBcdCAgICAgICAgLy8gQ3JlYXRlIHRoZSBkcmF3aW5nIGNhbnZhcyAob2JzZXJ2ZXIpXG4gICAgMjFcdCAgICAgICAgRHJhd2luZ0NhbnZhcyBjYW52YXMgPSBuZXcgRHJhd2luZ0NhbnZhcyg4MDAsIDYwMCk7XG4gICAgMjJcdCAgICAgICAgXG4gICAgMjNcdCAgICAgICAgLy8gUmVnaXN0ZXIgY2FudmFzIGFzIG9ic2VydmVyIG9mIHRvb2xiYXJcbiAgICAyNFx0ICAgICAgICB0b29sYmFyLmFkZE9ic2VydmVyKGNhbnZhcyk7XG4gICAgMjVcdCAgICAgICAgXG4gICAgMjZcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICAyN1x0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDI4XHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDI5XHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgMzBcdCAgICAgICAgXG4gICAgMzFcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgMzJcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2NTApO1xuICAgIDMzXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgMzRcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNob3coKTtcbiAgICAzNVx0ICAgICAgICBcbiAgICAzNlx0ICAgICAgICAvLyBJbml0aWFsaXplIHdpdGggZGVmYXVsdCBzdHJhdGVneVxuICAgIDM3XHQgICAgICAgIGNhbnZhcy51cGRhdGUobmV3IGV2ZW50cy5Ub29sYmFyRXZlbnQoXG4gICAgMzhcdCAgICAgICAgICAgIGV2ZW50cy5Ub29sYmFyRXZlbnQuRXZlbnRUeXBlLlNIQVBFX1NFTEVDVEVELCBcbiAgICAzOVx0ICAgICAgICAgICAgdG9vbGJhci5nZXRDdXJyZW50U3RyYXRlZ3koKVxuICAgIDQwXHQgICAgICAgICkpO1xuICAgIDQxXHQgICAgfVxuLi4uXG5QYXRoOiBzcmMvbG9nZ2luZy9Mb2dnaW5nT2JzZXJ2ZXIuamF2YVxuICAgICAxXHRwYWNrYWdlIGxvZ2dpbmc7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZXZlbnRzLlRvb2xiYXJFdmVudDtcbiAgICAgNFx0aW1wb3J0IG9ic2VydmVyLk9ic2VydmVyO1xuICAgICA1XHRpbXBvcnQgc3RyYXRlZ3kuRHJhd2luZ1N0cmF0ZWd5O1xuICAgICA2XHRcbiAgICAgN1x0LyoqXG4gICAgIDhcdCAqIE9ic2VydmVyIHRoYXQgbG9ncyB0b29sYmFyIGV2ZW50c1xuICAgICA5XHQgKi9cbiAgICAxMFx0cHVibGljIGNsYXNzIExvZ2dpbmdPYnNlcnZlciBpbXBsZW1lbnRzIE9ic2VydmVyPFRvb2xiYXJFdmVudD4ge1xuICAgIDExXHQgICAgXG4gICAgMTJcdCAgICBwcml2YXRlIGZpbmFsIExvZ2dpbmdNYW5hZ2VyIGxvZ2dpbmdNYW5hZ2VyO1xuICAgIDEzXHQgICAgXG4gICAgMTRcdCAgICBwdWJsaWMgTG9nZ2luZ09ic2VydmVyKExvZ2dpbmdNYW5hZ2VyIGxvZ2dpbmdNYW5hZ2VyKSB7XG4gICAgMTVcdCAgICAgICAgdGhpcy5sb2dnaW5nTWFuYWdlciA9IGxvZ2dpbmdNYW5hZ2VyO1xuICAgIDE2XHQgICAgfVxuICAgIDE3XHQgICAgXG4gICAgMThcdCAgICBAT3ZlcnJpZGVcbiAgICAxOVx0ICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShUb29sYmFyRXZlbnQgZXZlbnQpIHtcbiAgICAyMFx0ICAgICAgICBzd2l0Y2ggKGV2ZW50LmdldFR5cGUoKSkge1xuICAgIDIxXHQgICAgICAgICAgICBjYXNlIFNIQVBFX1NFTEVDVEVEOlxuICAgIDIyXHQgICAgICAgICAgICAgICAgRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5ID0gZXZlbnQuZ2V0RGF0YShEcmF3aW5nU3RyYXRlZ3kuY2xhc3MpO1xuICAgIDIzXHQgICAgICAgICAgICAgICAgaWYgKHN0cmF0ZWd5ICE9IG51bGwpIHtcbiAgICAyNFx0ICAgICAgICAgICAgICAgICAgICBsb2dnaW5nTWFuYWdlci5sb2dUb29sU2VsZWN0aW9uKHN0cmF0ZWd5LmdldFN0cmF0ZWd5TmFtZSgpKTtcbiAgICAyNVx0ICAgICAgICAgICAgICAgIH1cbiAgICAyNlx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIDI3XHQgICAgICAgICAgICAgICAgXG4gICAgMjhcdCAgICAgICAgICAgIGNhc2UgQ0xFQVJfQ0FOVkFTOlxuICAgIDI5XHQgICAgICAgICAgICAgICAgbG9nZ2luZ01hbmFnZXIubG9nQ2FudmFzQ2xlYXJlZCgpO1xuICAgIDMwXHQgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgMzFcdCAgICAgICAgfVxuICAgIDMyXHQgICAgfVxuICAgIDMzXHR9XG4uLi5cblBhdGg6IHNyYy91aS9EcmF3aW5nQ2FudmFzLmphdmFcbiAgICAgMVx0cGFja2FnZSB1aTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xuICAgICA0XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDVcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNlx0aW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKiBEcmF3aW5nIGNhbnZhcyB0aGF0IG9ic2VydmVzIHRvb2xiYXIgZXZlbnRzIGFuZCBoYW5kbGVzIGRyYXdpbmcgb3BlcmF0aW9uc1xuICAgIDE0XHQgKi9cbiAgICAxNVx0cHVibGljIGNsYXNzIERyYXdpbmdDYW52YXMgZXh0ZW5kcyBDYW52YXMgaW1wbGVtZW50cyBPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IHtcbiAgICAxNlx0ICAgIFxuICAgIDE3XHQgICAgcHJpdmF0ZSBmaW5hbCBHcmFwaGljc0NvbnRleHQgZ2M7XG4gICAgMThcdCAgICBwcml2YXRlIGZpbmFsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XG4gICAgMTlcdCAgICBwcml2YXRlIERyYXdpbmdTdHJhdGVneSBjdXJyZW50U3RyYXRlZ3k7XG4gICAgMjBcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMVx0ICAgIFxuICAgIDIyXHQgICAgcHVibGljIERyYXdpbmdDYW52YXMoZG91YmxlIHdpZHRoLCBkb3VibGUgaGVpZ2h0KSB7XG4gICAgMjNcdCAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XG4gICAgMjRcdCAgICAgICAgdGhpcy5nYyA9IHRoaXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAyNVx0ICAgICAgICB0aGlzLnNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcbiAgICAyNlx0ICAgICAgICBcbiAgICAyN1x0ICAgICAgICBzZXR1cEdyYXBoaWNzQ29udGV4dCgpO1xuICAgIDI4XHQgICAgICAgIHNldHVwTW91c2VFdmVudHMoKTtcbiAgICAyOVx0ICAgIH1cbiAgICAzMFx0ICAgIFxuICAgIDMxXHQgICAgcHJpdmF0ZSB2b2lkIHNldHVwR3JhcGhpY3NDb250ZXh0KCkge1xuICAgIDMyXHQgICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgMzNcdCAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgIDM0XHQgICAgfVxuLi4uXG4gICAgNjRcdCAgICBcbiAgICA2NVx0ICAgIHByaXZhdGUgdm9pZCBjbGVhckNhbnZhcygpIHtcbiAgICA2Nlx0ICAgICAgICBnYy5jbGVhclJlY3QoMCwgMCwgdGhpcy5nZXRXaWR0aCgpLCB0aGlzLmdldEhlaWdodCgpKTtcbiAgICA2N1x0ICAgICAgICBzaGFwZU1hbmFnZXIuY2xlYXJTaGFwZXMoKTtcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0ICAgIFxuICAgIDcwXHQgICAgQE92ZXJyaWRlXG4gICAgNzFcdCAgICBwdWJsaWMgdm9pZCB1cGRhdGUoVG9vbGJhckV2ZW50IGV2ZW50KSB7XG4gICAgNzJcdCAgICAgICAgc3dpdGNoIChldmVudC5nZXRUeXBlKCkpIHtcbiAgICA3M1x0ICAgICAgICAgICAgY2FzZSBTSEFQRV9TRUxFQ1RFRDpcbiAgICA3NFx0ICAgICAgICAgICAgICAgIERyYXdpbmdTdHJhdGVneSBzdHJhdGVneSA9IGV2ZW50LmdldERhdGEoRHJhd2luZ1N0cmF0ZWd5LmNsYXNzKTtcbiAgICA3NVx0ICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7XG4gICAgNzZcdCAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSBzdHJhdGVneTtcbiAgICA3N1x0ICAgICAgICAgICAgICAgIH1cbiAgICA3OFx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIDc5XHQgICAgICAgICAgICAgICAgXG4gICAgODBcdCAgICAgICAgICAgIGNhc2UgQ0xFQVJfQ0FOVkFTOlxuICAgIDgxXHQgICAgICAgICAgICAgICAgY2xlYXJDYW52YXMoKTtcbiAgICA4Mlx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIDgzXHQgICAgICAgIH1cbiAgICA4NFx0ICAgIH1cbiAgICA4NVx0ICAgIFxuICAgIDg2XHQgICAgcHVibGljIFNoYXBlTWFuYWdlciBnZXRTaGFwZU1hbmFnZXIoKSB7XG4gICAgODdcdCAgICAgICAgcmV0dXJuIHNoYXBlTWFuYWdlcjtcbiAgICA4OFx0ICAgIH1cbiAgICA4OVx0fVxuLi4uXG5QYXRoOiBzcmMvc3RyYXRlZ3kvRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0aW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xuICAgICA1XHRcbiAgICAgNlx0LyoqXG4gICAgIDdcdCAqIFN0cmF0ZWd5IGludGVyZmFjZSBmb3IgZGlmZmVyZW50IGRyYXdpbmcgYmVoYXZpb3JzXG4gICAgIDhcdCAqL1xuICAgICA5XHRwdWJsaWMgaW50ZXJmYWNlIERyYXdpbmdTdHJhdGVneSB7XG4gICAgMTBcdCAgICBcbiAgICAxMVx0ICAgIC8qKlxuICAgIDEyXHQgICAgICogQXR0ZW1wdHMgdG8gZHJhdyBhIHNoYXBlIHdpdGggdGhlIGdpdmVuIGNvb3JkaW5hdGVzXG4gICAgMTNcdCAgICAgKiBAcGFyYW0gZ2MgR3JhcGhpY3MgY29udGV4dCBmb3IgZHJhd2luZ1xuICAgIDE0XHQgICAgICogQHBhcmFtIHNoYXBlTWFuYWdlciBNYW5hZ2VyIGZvciB0cmFja2luZyBzaGFwZXMgYW5kIGNvbnN0cmFpbnRzXG4gICAgMTVcdCAgICAgKiBAcGFyYW0gc3RhcnRYIFN0YXJ0aW5nIFggY29vcmRpbmF0ZVxuICAgIDE2XHQgICAgICogQHBhcmFtIHN0YXJ0WSBTdGFydGluZyBZIGNvb3JkaW5hdGVcbiAgICAxN1x0ICAgICAqIEBwYXJhbSBlbmRYIEVuZGluZyBYIGNvb3JkaW5hdGVcbiAgICAxOFx0ICAgICAqIEBwYXJhbSBlbmRZIEVuZGluZyBZIGNvb3JkaW5hdGVcbiAgICAxOVx0ICAgICAqIEByZXR1cm4gRHJhd2luZ1Jlc3VsdCBpbmRpY2F0aW5nIHN1Y2Nlc3MvZmFpbHVyZSBhbmQgYW55IG1lc3NhZ2VzXG4gICAgMjBcdCAgICAgKi9cbiAgICAyMVx0ICAgIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDIyXHQgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKTtcbiAgICAyM1x0ICAgIFxuICAgIDI0XHQgICAgLyoqXG4gICAgMjVcdCAgICAgKiBHZXRzIHRoZSBuYW1lIG9mIHRoaXMgZHJhd2luZyBzdHJhdGVneVxuICAgIDI2XHQgICAgICovXG4gICAgMjdcdCAgICBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCk7XG4uLi5cblBhdGg6IHNyYy9zdHJhdGVneS9SZWN0YW5nbGVEcmF3aW5nU3RyYXRlZ3kuamF2YVxuICAgICAxXHRwYWNrYWdlIHN0cmF0ZWd5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IEZhY3RvcnkuUmVjdGFuZ2xlU2hhcGU7XG4gICAgIDRcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNVx0aW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xuICAgICA2XHRcbiAgICAgN1x0cHVibGljIGNsYXNzIFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XG4gICAgIDhcdCAgICBcbiAgICAgOVx0ICAgIEBPdmVycmlkZVxuICAgIDEwXHQgICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDExXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDEyXHQgICAgICAgIHRyeSB7XG4gICAgMTNcdCAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZHJhdyB0aGUgcmVjdGFuZ2xlXG4gICAgMTRcdCAgICAgICAgICAgIFJlY3RhbmdsZVNoYXBlIHJlY3RhbmdsZVNoYXBlID0gbmV3IFJlY3RhbmdsZVNoYXBlKCk7XG4gICAgMTVcdCAgICAgICAgICAgIHJlY3RhbmdsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAxNlx0ICAgICAgICAgICAgXG4gICAgMTdcdCAgICAgICAgICAgIC8vIE5vdGU6IFdlIGRvbid0IHRyYWNrIHJlY3RhbmdsZXMgaW4gdGhlIGNvbnN0cmFpbnQgc3lzdGVtXG4gICAgMThcdCAgICAgICAgICAgIC8vIGFzIHRoZXkncmUgbm90IHBhcnQgb2YgdGhlIGNpcmNsZS1saW5lIHJlbGF0aW9uc2hpcFxuICAgIDE5XHQgICAgICAgICAgICBcbiAgICAyMFx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuc3VjY2VzcyhcIlJlY3RhbmdsZSBkZXNzaW7DqSBhdmVjIHN1Y2PDqHNcIik7XG4gICAgMjFcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAyMlx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuZmFpbHVyZShcIkVycmV1ciBsb3JzIGR1IGRlc3NpbiBkdSByZWN0YW5nbGU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDIzXHQgICAgICAgIH1cbiAgICAyNFx0ICAgIH1cbiAgICAyNVx0ICAgIFxuICAgIDI2XHQgICAgQE92ZXJyaWRlXG4gICAgMjdcdCAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpIHtcbiAgICAyOFx0ICAgICAgICByZXR1cm4gXCJSZWN0YW5nbGVcIjtcbiAgICAyOVx0ICAgIH1cbiAgICAzMFx0fVxuLi4uXG5QYXRoOiBzcmMvb2JzZXJ2ZXIvT2JzZXJ2YWJsZS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugb2JzZXJ2ZXI7XG4gICAgIDJcdFxuICAgICAzXHQvKipcbiAgICAgNFx0ICogT2JzZXJ2YWJsZSBpbnRlcmZhY2UgZm9yIHRoZSBPYnNlcnZlciBwYXR0ZXJuXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xuICAgICA3XHQgICAgdm9pZCBhZGRPYnNlcnZlcihPYnNlcnZlcjxUPiBvYnNlcnZlcik7XG4gICAgIDhcdCAgICB2b2lkIHJlbW92ZU9ic2VydmVyKE9ic2VydmVyPFQ+IG9ic2VydmVyKTtcbiAgICAgOVx0ICAgIHZvaWQgbm90aWZ5T2JzZXJ2ZXJzKFQgZGF0YSk7XG4gICAgMTBcdH1cbi4uLlxuUGF0aDogc3JjL21hbmFnZXIvU2hhcGVNYW5hZ2VyLmphdmFcbiAgICAgMVx0cGFja2FnZSBtYW5hZ2VyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IG1vZGVsLio7XG4gICAgIDRcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgICA1XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDZcdFxuICAgICA3XHRwdWJsaWMgY2xhc3MgU2hhcGVNYW5hZ2VyIHtcbiAgICAgOFx0ICAgIHByaXZhdGUgTGlzdDxEcmF3blNoYXBlPiBzaGFwZXM7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIHB1YmxpYyBTaGFwZU1hbmFnZXIoKSB7XG4gICAgMTFcdCAgICAgICAgdGhpcy5zaGFwZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAxMlx0ICAgIH1cbiAgICAxM1x0ICAgIFxuICAgIDE0XHQgICAgLyoqXG4gICAgMTVcdCAgICAgKiBWYWxpZGF0ZXMgaWYgYSBsaW5lIGNhbiBiZSBkcmF3biBhY2NvcmRpbmcgdG8gdGhlIGNvbnN0cmFpbnRzOlxuICAgIDE2XHQgICAgICogLSBCb3RoIGVuZHMgb2YgdGhlIGxpbmUgbXVzdCBiZSBpbnNpZGUgYSBjaXJjbGVcbiAgICAxN1x0ICAgICAqIC0gQSBjaXJjbGUgY2FuIGhhdmUgb25seSBvbmUgbGluZVxuICAgIDE4XHQgICAgICovXG4gICAgMTlcdCAgICBwdWJsaWMgVmFsaWRhdGlvblJlc3VsdCB2YWxpZGF0ZUxpbmUoZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMjBcdCAgICAgICAgRHJhd25DaXJjbGUgc3RhcnRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KHN0YXJ0WCwgc3RhcnRZKTtcbiAgICAyMVx0ICAgICAgICBEcmF3bkNpcmNsZSBlbmRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGVuZFgsIGVuZFkpO1xuICAgIDIyXHQgICAgICAgIFxuICAgIDIzXHQgICAgICAgIC8vIENoZWNrIGlmIGJvdGggZW5kcyBhcmUgaW5zaWRlIGNpcmNsZXNcbiAgICAyNFx0ICAgICAgICBpZiAoc3RhcnRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI1XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZGUgZMOpcGFydCBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAyNlx0ICAgICAgICB9XG4gICAgMjdcdCAgICAgICAgXG4gICAgMjhcdCAgICAgICAgaWYgKGVuZENpcmNsZSA9PSBudWxsKSB7XG4gICAgMjlcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBwb2ludCBkJ2Fycml2w6llIGRlIGxhIGxpZ25lIGRvaXQgw6p0cmUgw6AgbCdpbnTDqXJpZXVyIGQndW4gY2VyY2xlXCIpO1xuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgICAgICBcbiAgICAzMlx0ICAgICAgICAvLyBDaGVjayBpZiBjaXJjbGVzIGFscmVhZHkgaGF2ZSBsaW5lc1xuICAgIDMzXHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKHN0YXJ0Q2lyY2xlKSkge1xuICAgIDM0XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgY2VyY2xlIGRlIGTDqXBhcnQgY29udGllbnQgZMOpasOgIHVuZSBsaWduZVwiKTtcbiAgICAzNVx0ICAgICAgICB9XG4gICAgMzZcdCAgICAgICAgXG4gICAgMzdcdCAgICAgICAgaWYgKGNpcmNsZUhhc0xpbmUoZW5kQ2lyY2xlKSAmJiAhc3RhcnRDaXJjbGUuZXF1YWxzKGVuZENpcmNsZSkpIHtcbiAgICAzOFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkJ2Fycml2w6llIGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzlcdCAgICAgICAgfVxuICAgIDQwXHQgICAgICAgIFxuICAgIDQxXHQgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh0cnVlLCBcIkxpZ25lIHZhbGlkZVwiKTtcbiAgICA0Mlx0ICAgIH1cbiAgICA0M1x0ICAgIFxuICAgIDQ0XHQgICAgLyoqXG4gICAgNDVcdCAgICAgKiBGaW5kcyBhIGNpcmNsZSB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludFxuICAgIDQ2XHQgICAgICovXG4gICAgNDdcdCAgICBwcml2YXRlIERyYXduQ2lyY2xlIGZpbmRDaXJjbGVDb250YWluaW5nUG9pbnQoZG91YmxlIHgsIGRvdWJsZSB5KSB7XG4gICAgNDhcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduQ2lyY2xlICYmIHNoYXBlLmNvbnRhaW5zUG9pbnQoeCwgeSkpIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIHJldHVybiAoRHJhd25DaXJjbGUpIHNoYXBlO1xuICAgIDUxXHQgICAgICAgICAgICB9XG4gICAgNTJcdCAgICAgICAgfVxuICAgIDUzXHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDU0XHQgICAgfVxuICAgIDU1XHQgICAgXG4gICAgNTZcdCAgICAvKipcbiAgICA1N1x0ICAgICAqIENoZWNrcyBpZiBhIGNpcmNsZSBhbHJlYWR5IGhhcyBhIGxpbmVcbiAgICA1OFx0ICAgICAqL1xuICAgIDU5XHQgICAgcHJpdmF0ZSBib29sZWFuIGNpcmNsZUhhc0xpbmUoRHJhd25DaXJjbGUgY2lyY2xlKSB7XG4gICAgNjBcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNjFcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduTGluZSkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgRHJhd25MaW5lIGxpbmUgPSAoRHJhd25MaW5lKSBzaGFwZTtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIHN0YXJ0UG9pbnQgPSBsaW5lLmdldFN0YXJ0UG9pbnQoKTtcbiAgICA2NFx0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIGVuZFBvaW50ID0gbGluZS5nZXRFbmRQb2ludCgpO1xuICAgIDY1XHQgICAgICAgICAgICAgICAgXG4gICAgNjZcdCAgICAgICAgICAgICAgICBpZiAoY2lyY2xlLmNvbnRhaW5zUG9pbnQoc3RhcnRQb2ludFswXSwgc3RhcnRQb2ludFsxXSkgfHwgXG4gICAgNjdcdCAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmNvbnRhaW5zUG9pbnQoZW5kUG9pbnRbMF0sIGVuZFBvaW50WzFdKSkge1xuICAgIDY4XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDY5XHQgICAgICAgICAgICAgICAgfVxuICAgIDcwXHQgICAgICAgICAgICB9XG4gICAgNzFcdCAgICAgICAgfVxuICAgIDcyXHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA3M1x0ICAgIH1cbiAgICA3NFx0ICAgIFxuICAgIDc1XHQgICAgLyoqXG4gICAgNzZcdCAgICAgKiBBZGRzIGEgc2hhcGUgdG8gdGhlIG1hbmFnZXJcbiAgICA3N1x0ICAgICAqL1xuICAgIDc4XHQgICAgcHVibGljIHZvaWQgYWRkU2hhcGUoRHJhd25TaGFwZSBzaGFwZSkge1xuICAgIDc5XHQgICAgICAgIHNoYXBlcy5hZGQoc2hhcGUpO1xuICAgIDgwXHQgICAgfVxuICAgIDgxXHQgICAgXG4gICAgODJcdCAgICAvKipcbiAgICA4M1x0ICAgICAqIEdldHMgYWxsIHNoYXBlc1xuICAgIDg0XHQgICAgICovXG4gICAgODVcdCAgICBwdWJsaWMgTGlzdDxEcmF3blNoYXBlPiBnZXRTaGFwZXMoKSB7XG4gICAgODZcdCAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8PihzaGFwZXMpO1xuICAgIDg3XHQgICAgfVxuICAgIDg4XHQgICAgXG4gICAgODlcdCAgICAvKipcbiAgICA5MFx0ICAgICAqIENsZWFycyBhbGwgc2hhcGVzXG4gICAgOTFcdCAgICAgKi9cbiAgICA5Mlx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyU2hhcGVzKCkge1xuICAgIDkzXHQgICAgICAgIHNoYXBlcy5jbGVhcigpO1xuICAgIDk0XHQgICAgfVxuICAgIDk1XHQgICAgXG4gICAgOTZcdCAgICAvKipcbiAgICA5N1x0ICAgICAqIFJlc3VsdCBjbGFzcyBmb3IgdmFsaWRhdGlvbiBvcGVyYXRpb25zXG4gICAgOThcdCAgICAgKi9cbiAgICA5OVx0ICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVmFsaWRhdGlvblJlc3VsdCB7XG4gICAxMDBcdCAgICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIHZhbGlkO1xuICAgMTAxXHQgICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIG1lc3NhZ2U7XG4gICAxMDJcdCAgICAgICAgXG4gICAxMDNcdCAgICAgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQoYm9vbGVhbiB2YWxpZCwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgIDEwNFx0ICAgICAgICAgICAgdGhpcy52YWxpZCA9IHZhbGlkO1xuICAgMTA1XHQgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgMTA2XHQgICAgICAgIH1cbiAgIDEwN1x0ICAgICAgICBcbiAgIDEwOFx0ICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKCkgeyByZXR1cm4gdmFsaWQ7IH1cbiAgIDEwOVx0ICAgICAgICBwdWJsaWMgU3RyaW5nIGdldE1lc3NhZ2UoKSB7IHJldHVybiBtZXNzYWdlOyB9XG4gICAxMTBcdCAgICB9XG4gICAxMTFcdH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L0NpcmNsZURyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgRmFjdG9yeS5DaXJjbGVTaGFwZTtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDZcdGltcG9ydCBtb2RlbC5EcmF3bkNpcmNsZTtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBjbGFzcyBDaXJjbGVEcmF3aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBEcmF3aW5nU3RyYXRlZ3kge1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBAT3ZlcnJpZGVcbiAgICAxMVx0ICAgIHB1YmxpYyBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAxMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAxM1x0ICAgICAgICB0cnkge1xuICAgIDE0XHQgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRyYXcgdGhlIGNpcmNsZVxuICAgIDE1XHQgICAgICAgICAgICBDaXJjbGVTaGFwZSBjaXJjbGVTaGFwZSA9IG5ldyBDaXJjbGVTaGFwZSgpO1xuICAgIDE2XHQgICAgICAgICAgICBjaXJjbGVTaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMTdcdCAgICAgICAgICAgIFxuICAgIDE4XHQgICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcbiAgICAxOVx0ICAgICAgICAgICAgRHJhd25DaXJjbGUgZHJhd25DaXJjbGUgPSBuZXcgRHJhd25DaXJjbGUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDIwXHQgICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25DaXJjbGUpO1xuICAgIDIxXHQgICAgICAgICAgICBcbiAgICAyMlx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuc3VjY2VzcyhcIkNlcmNsZSBkZXNzaW7DqSBhdmVjIHN1Y2PDqHNcIik7XG4gICAgMjNcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAyNFx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuZmFpbHVyZShcIkVycmV1ciBsb3JzIGR1IGRlc3NpbiBkdSBjZXJjbGU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDI1XHQgICAgICAgIH1cbiAgICAyNlx0ICAgIH1cbiAgICAyN1x0ICAgIFxuICAgIDI4XHQgICAgQE92ZXJyaWRlXG4gICAgMjlcdCAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpIHtcbiAgICAzMFx0ICAgICAgICByZXR1cm4gXCJDaXJjbGVcIjtcbiAgICAzMVx0ICAgIH1cbiAgICAzMlx0fVxuLi4uXG5QYXRoOiBzcmMvb2JzZXJ2ZXIvT2JzZXJ2ZXIuamF2YVxuICAgICAxXHRwYWNrYWdlIG9ic2VydmVyO1xuICAgICAyXHRcbiAgICAgM1x0LyoqXG4gICAgIDRcdCAqIE9ic2VydmVyIGludGVyZmFjZSBmb3IgdGhlIE9ic2VydmVyIHBhdHRlcm5cbiAgICAgNVx0ICovXG4gICAgIDZcdHB1YmxpYyBpbnRlcmZhY2UgT2JzZXJ2ZXI8VD4ge1xuICAgICA3XHQgICAgdm9pZCB1cGRhdGUoVCBkYXRhKTtcbiAgICAgOFx0fVxuLi4uXG5QYXRoOiBzcmMvc3RyYXRlZ3kvTGluZURyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgRmFjdG9yeS5MaW5lU2hhcGU7XG4gICAgIDRcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNVx0aW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xuICAgICA2XHRpbXBvcnQgbW9kZWwuRHJhd25MaW5lO1xuICAgICA3XHRcbiAgICAgOFx0cHVibGljIGNsYXNzIExpbmVEcmF3aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBEcmF3aW5nU3RyYXRlZ3kge1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBAT3ZlcnJpZGVcbiAgICAxMVx0ICAgIHB1YmxpYyBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAxMlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAxM1x0ICAgICAgICB0cnkge1xuICAgIDE0XHQgICAgICAgICAgICAvLyBWYWxpZGF0ZSBsaW5lIGNvbnN0cmFpbnRzIGZpcnN0XG4gICAgMTVcdCAgICAgICAgICAgIFNoYXBlTWFuYWdlci5WYWxpZGF0aW9uUmVzdWx0IHZhbGlkYXRpb24gPSBcbiAgICAxNlx0ICAgICAgICAgICAgICAgIHNoYXBlTWFuYWdlci52YWxpZGF0ZUxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDE3XHQgICAgICAgICAgICBcbiAgICAxOFx0ICAgICAgICAgICAgaWYgKCF2YWxpZGF0aW9uLmlzVmFsaWQoKSkge1xuICAgIDE5XHQgICAgICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuZmFpbHVyZSh2YWxpZGF0aW9uLmdldE1lc3NhZ2UoKSk7XG4gICAgMjBcdCAgICAgICAgICAgIH1cbiAgICAyMVx0ICAgICAgICAgICAgXG4gICAgMjJcdCAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZHJhdyB0aGUgbGluZVxuICAgIDIzXHQgICAgICAgICAgICBMaW5lU2hhcGUgbGluZVNoYXBlID0gbmV3IExpbmVTaGFwZSgpO1xuICAgIDI0XHQgICAgICAgICAgICBsaW5lU2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDI1XHQgICAgICAgICAgICBcbiAgICAyNlx0ICAgICAgICAgICAgLy8gQWRkIHRvIHNoYXBlIG1hbmFnZXIgZm9yIHRyYWNraW5nXG4gICAgMjdcdCAgICAgICAgICAgIERyYXduTGluZSBkcmF3bkxpbmUgPSBuZXcgRHJhd25MaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAyOFx0ICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduTGluZSk7XG4gICAgMjlcdCAgICAgICAgICAgIFxuICAgIDMwXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFwiTGlnbmUgZGVzc2luw6llIGF2ZWMgc3VjY8Ooc1wiKTtcbiAgICAzMVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDMyXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFwiRXJyZXVyIGxvcnMgZHUgZGVzc2luIGRlIGxhIGxpZ25lOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAzM1x0ICAgICAgICB9XG4gICAgMzRcdCAgICB9XG4gICAgMzVcdCAgICBcbiAgICAzNlx0ICAgIEBPdmVycmlkZVxuICAgIDM3XHQgICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XG4gICAgMzhcdCAgICAgICAgcmV0dXJuIFwiTGluZVwiO1xuICAgIDM5XHQgICAgfVxuICAgIDQwXHR9XG4uLi5cblBhdGg6IHNyYy9sb2dnaW5nL0xvZ2dpbmdNYW5hZ2VyLmphdmFcbi4uLlxuICAgIDYxXHQgICAgXG4gICAgNjJcdCAgICAvKipcbiAgICA2M1x0ICAgICAqIExvZ3MgYW4gZW50cnkgdG8gYWxsIGF2YWlsYWJsZSBzdHJhdGVnaWVzIGFzeW5jaHJvbm91c2x5XG4gICAgNjRcdCAgICAgKi9cbiAgICA2NVx0ICAgIHB1YmxpYyB2b2lkIGxvZyhMb2dFbnRyeSBlbnRyeSkge1xuICAgIDY2XHQgICAgICAgIGlmICghaW5pdGlhbGl6ZWQpIHtcbiAgICA2N1x0ICAgICAgICAgICAgU3lzdGVtLmVyci5wcmludGxuKFwiTG9nZ2luZ01hbmFnZXIgbm90IGluaXRpYWxpemVkXCIpO1xuICAgIDY4XHQgICAgICAgICAgICByZXR1cm47XG4gICAgNjlcdCAgICAgICAgfVxuICAgIDcwXHQgICAgICAgIFxuICAgIDcxXHQgICAgICAgIC8vIExvZyBhc3luY2hyb25vdXNseSB0byBhdm9pZCBibG9ja2luZyB0aGUgVUlcbiAgICA3Mlx0ICAgICAgICBDb21wbGV0YWJsZUZ1dHVyZS5ydW5Bc3luYygoKSAtPiB7XG4gICAgNzNcdCAgICAgICAgICAgIGZvciAoTG9nZ2luZ1N0cmF0ZWd5IHN0cmF0ZWd5IDogc3RyYXRlZ2llcykge1xuICAgIDc0XHQgICAgICAgICAgICAgICAgaWYgKHN0cmF0ZWd5LmlzQXZhaWxhYmxlKCkpIHtcbiAgICA3NVx0ICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgIDc2XHQgICAgICAgICAgICAgICAgICAgICAgICBzdHJhdGVneS5sb2coZW50cnkpO1xuICAgIDc3XHQgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgNzhcdCAgICAgICAgICAgICAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkVycm9yIGxvZ2dpbmcgd2l0aCBzdHJhdGVneSBcIiArIHN0cmF0ZWd5LmdldFN0cmF0ZWd5TmFtZSgpICsgXCI6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDc5XHQgICAgICAgICAgICAgICAgICAgIH1cbiAgICA4MFx0ICAgICAgICAgICAgICAgIH1cbiAgICA4MVx0ICAgICAgICAgICAgfVxuICAgIDgyXHQgICAgICAgIH0sIGV4ZWN1dG9yU2VydmljZSk7XG4gICAgODNcdCAgICB9XG4gICAgODRcdCAgICBcbiAgICA4NVx0ICAgIC8qKlxuICAgIDg2XHQgICAgICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIGxvZyB0b29sIHNlbGVjdGlvblxuICAgIDg3XHQgICAgICovXG4gICAgODhcdCAgICBwdWJsaWMgdm9pZCBsb2dUb29sU2VsZWN0aW9uKFN0cmluZyB0b29sTmFtZSkge1xuICAgIDg5XHQgICAgICAgIExvZ0VudHJ5IGVudHJ5ID0gbmV3IExvZ0VudHJ5KFxuICAgIDkwXHQgICAgICAgICAgICBMb2dFbnRyeS5BY3Rpb25UeXBlLlRPT0xfU0VMRUNUSU9OLFxuICAgLi4uIiwiaXNfZXJyb3IiOmZhbHNlLCJyZXF1ZXN0X2lkIjoiIiwidG9vbF91c2VfaWQiOiJ0b29sdV8wMTNlNVZ2eGpUUlRONkhMdTdNUGVYeHQifX0seyJpZCI6MiwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTI5VDE1OjM3OjIxLjc1NVoiLCJyZXNwb25zZV90ZXh0IjoiR3JlYXQhIEkgY2FuIHNlZSB0aGF0IGFsbCB0aGUgZmlsZXMgZXhpc3QuIE5vdyBsZXQgbWUgdXBkYXRlIHRoZSBleGlzdGluZyBkcmF3aW5nIHN0cmF0ZWdpZXMgdG8gaW5jbHVkZSBsb2dnaW5nIHN1cHBvcnQ6XG5cbiMjIyBTdGVwIDg6IFVwZGF0ZSBEcmF3aW5nIFN0cmF0ZWdpZXMgdG8gaW5jbHVkZSBsb2dnaW5nXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNjBlODlmNDktMWVkNi00MmM2LWIzNGMtZWI0ODgzMzkyNzJhIiwicmVxdWVzdF9tZXNzYWdlIjoiIiwic3RydWN0dXJlZF9vdXRwdXRfbm9kZXMiOlt7ImlkIjoxLCJ0eXBlIjo1LCJjb250ZW50IjoiIiwidG9vbF91c2UiOnsidG9vbF91c2VfaWQiOiJ0b29sdV8wMUdTeE40bzlidnlqY3hLREZUY2VGYVUiLCJ0b29sX25hbWUiOiJsYXVuY2gtcHJvY2VzcyIsImlucHV0X2pzb24iOiJ7XCJjb21tYW5kXCI6IFwiZmluZCBzcmMgLW5hbWUgXFxcIiouamF2YVxcXCIgfCBncmVwIC1pIHN0cmF0ZWd5XCIsIFwid2FpdFwiOiB0cnVlLCBcIm1heF93YWl0X3NlY29uZHNcIjogMTB9IiwibWNwX3NlcnZlcl9uYW1lIjoiIiwibWNwX3Rvb2xfbmFtZSI6IiJ9fSx7ImlkIjowLCJ0eXBlIjowLCJjb250ZW50IjoiTGV0IG1lIGNoZWNrIHRoZSBleGFjdCBmaWxlIHN0cnVjdHVyZTpcbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50IjoiIn1dLCJzZWVuX3N0YXRlIjoic2VlbiIsInN0cnVjdHVyZWRfcmVxdWVzdF9ub2RlcyI6W3siaWQiOjEsInR5cGUiOjEsInRvb2xfcmVzdWx0X25vZGUiOnsiY29udGVudCI6IkZpbGUgbm90IGZvdW5kOiBzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmEiLCJpc19lcnJvciI6dHJ1ZSwicmVxdWVzdF9pZCI6IiIsInRvb2xfdXNlX2lkIjoidG9vbHVfMDFKMTMxU3dHMVVYcDJnY0Z4cmd5cWJEIn19LHsiaWQiOjIsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0yOVQxNTozNzo0MS41NzdaIiwicmVzcG9uc2VfdGV4dCI6IkxldCBtZSBjaGVjayB0aGUgZXhhY3QgZmlsZSBzdHJ1Y3R1cmU6XG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOltdfSx7InJlcXVlc3RfaWQiOiI2ZjVkOWFlZC04NTFjLTQ2ZWUtYjQxMS1jNzFjNTBhYTA4MTYiLCJ1dWlkIjoiMWFjNjJmNzMtZmNkZS00ZGQyLTk3ZmEtNTdjODhhNTgzYTQ0IiwiY2hhdEl0ZW1UeXBlIjoiYWdlbnRpYy1jaGVja3BvaW50LWRlbGltaXRlciIsInN0YXR1cyI6InN1Y2Nlc3MiLCJmcm9tVGltZXN0YW1wIjoxNzQ4NTMxNTM2NzQ3LCJ0b1RpbWVzdGFtcCI6MTc0ODU5MDcyNjY0OCwic2Vlbl9zdGF0ZSI6InNlZW4ifV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtZjc2MGMzYjQtZjhkMi00NzVkLTkwM2EtOTBmMDIwYmFjMGIwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lOTU5MzM1Yy01YzRhLTQ0YjItYWQxZi01M2JkYWRlNjYyYmYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTNmNWM4YWVmLTFkOWUtNDkzOC05Y2RmLWMyODVmNmI3YzE2YyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzMzYzMyODMtMjMzZC00ZDAwLThiZWItODFiMDdiMmQxNTA1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0xZTk1MGQxZC01ZDVjLTRkOGItOWRiZS1lMTZhYjAwNWI2ZjciOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTE3NzZkZmM1LTZiZTMtNGRjOS1hNDkzLTQ5MDU2OWU3M2QzZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYzBmMThjZmUtZWM5ZC00MjE0LThhYWMtMmFhM2E0ZDc5MDMzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03NGQ2YjIzOC0xNDVhLTRmY2YtOGFkMS0wYjQyMDZhNmU1NGQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWQxYWQ4ZTU2LWU3NDctNDlkYS05YmJhLWNmMWNkYmNjMzAxZCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZmUxNDdlMDYtMDg2OC00MGQ3LTljNGYtMmUzZmUzNmQwNDA4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1hNzdiNDhhZS1iMmU4LTRmNGYtOGRhYi0wYWE3MjUwNWUwOTMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWNhODg3NmVhLWVkOTQtNGUyNy1iZDIwLWZlZjVmYjJjZDQ0MyI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZmE3MDk0YzAtYmEwOC00M2MzLWJlMmUtZDJkMjY5NWYyMWNhIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lYjZiODExNC0zYTQzLTQxNTMtYWZjMC00MWY4MDViZGM4ZTMiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTFjYWY3NWM1LTUwZjMtNDY2MC1iM2IwLWRkNzQ0ZTJlODY1NSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZTE0NGY2MWMtODRhMy00ZjYzLWJhYmYtMzFlNzg4ZDY4MjQ1Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02MDkwZmVmOC1mNTYzLTQ3ZjctYmEzNC1mZjUzZWQ4MWZkNjYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTI1YmJkNjM0LTUzNDgtNGI2Ny1iNDQ3LTg3MDhjYTM2OGVkMiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNTE0OGU2MTEtNTZmZi00MzNjLTk3ZGYtOWQ3YjYwOWViOTc2Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jOTY4ZGM5Mi0yMTVjLTQ3MTAtOWQwNS1lMDdjOWRkMDFjNTEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTM2OTI4ZjI2LWY4ZWEtNDljYy1iNmYzLTEwMmZkMTE0MWI2NiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYWVlMjU1OTMtMzk5YS00NGVmLWJjZDctZmFjODFmNTlmMzkzIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0wZGU2NTJjYy1lY2ZhLTQwOTQtOGQ3YS1kNzYwN2E5ZGY0YWQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTNhODcyMWRhLTg0NjktNDAzZC04ODhhLTU2MmVkM2EzYWNmOSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMWY1MDFiZjktZWIyNi00YzNkLWEwNzEtMGFjYTAzNmNiYWQ3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1jY2MzN2IzYi0xZWEyLTQ3YzktODJkYS1kNDQ0ZjllMjhlMDciOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWIzOTdlYTIxLWI1OGQtNGYyMS1iYWY5LTY2ODkwZmQ3NzBmMSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNjZjODE4YmItYzQwNS00NGM0LTgwYWUtZmJlMTljOGQ1NzE5Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yNThiYjk2Yi1iMzk4LTRmZWMtYTZkYy1mYzhjNmMwODNhNTQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWQ3OTQ0YWVhLWUyYzktNDc3ZC04MzJmLTMwOWVhMzE2YWY3MSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtN2QzMzQ4YmQtYTg4MC00MDY5LTkxZDAtMDE2NWVlNmM2MDAwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS0yNmMyYTcyOS1kNzZlLTQxZDItODhkNS0xOTU0MDgwMTY2OTYiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTk2MmMzYzNlLWUzY2UtNGVkOS04ZGZkLWQzNDIwYmRlNWFiZiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtNzMxMjNlZDgtMjU2Yy00ZDc3LThkYmYtNTVhNDUyMTUwODkwIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS02N2ViYzU4NS1hYmM3LTQxMjYtYWE0NS03NDYyOTE0MzVkODQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWI5YWZmMmNkLTQwYWQtNGQxNi1iOWIzLWUyMDJlYzYzNDI2YiI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtZGY5NDFlY2YtZjUyMS00ZTU2LWE0MTctMGM2NWYxYzQ0MmE3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1kNjNjOGUwNy1jNmE4LTQyYzUtOGZhYy0xZTAwZTY3NTBiMjAiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTQ4MGQyNDBlLTAwNDEtNGJjYy05YzI5LWYxNzc1NjM3NThmYSI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtMDIyYzNiZGYtMDlkMS00NDc4LWFiNWEtMzRjNzYyNGI4OWI4Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS03YzhhNGYwMC0xODJlLTRlNmUtYjg4NC0wYjgzMjRjMGI4YTQiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLWI3ZGE3NGM0LWI1YzAtNDMyMC1hNTgwLTMxZDAzY2QzYWEyOCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn19LCJ0b29sVXNlU3RhdGVzIjp7IjhkODhiNzc1LTdlMWMtNDZkZi1iMDY0LTE5Yjk1MTdkZTM2MTt0b29sdV8wMTY2VUdUdTI3UVBHQUZvY3pwYjdOaWQiOnsicmVxdWVzdElkIjoiOGQ4OGI3NzUtN2UxYy00NmRmLWIwNjQtMTliOTUxN2RlMzYxIiwidG9vbFVzZUlkIjoidG9vbHVfMDE2NlVHVHUyN1FQR0FGb2N6cGI3TmlkIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSByZXN1bHQgb2YgcnVubmluZyBgY2F0IC1uYCBvbiBzcmMvTWFpbi5qYXZhOlxuICAgICAxXHRcbiAgICAgMlx0aW1wb3J0IEZhY3RvcnkuKjtcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5nZW9tZXRyeS5JbnNldHM7XG4gICAgIDVcdGltcG9ydCBqYXZhZnguc2NlbmUuU2NlbmU7XG4gICAgIDZcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkNhbnZhcztcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5Cb3JkZXJQYW5lO1xuICAgIDEwXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDExXHRpbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xuICAgIDEyXHRpbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuICAgIDEzXHRcbiAgICAxNFx0cHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgMTVcdCAgICBwcml2YXRlIFNoYXBlRmFjdG9yeSBjdXJyZW50RmFjdG9yeTtcbiAgICAxNlx0ICAgIHByaXZhdGUgZG91YmxlIHN0YXJ0WCwgc3RhcnRZO1xuICAgIDE3XHRcbiAgICAxOFx0ICAgIEBPdmVycmlkZVxuICAgIDE5XHQgICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgMjBcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFwiRGVzc2luIGRlIEZvcm1lcyBHw6lvbcOpdHJpcXVlc1wiKTtcbiAgICAyMVx0XG4gICAgMjJcdCAgICAgICAgLy8gQ3JlYXRlIGNhbnZhcyBmb3IgZHJhd2luZ1xuICAgIDIzXHQgICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAyNFx0ICAgICAgICBHcmFwaGljc0NvbnRleHQgZ2MgPSBjYW52YXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAyNVx0ICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xuICAgIDI2XHQgICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAyN1x0XG4gICAgMjhcdCAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXG4gICAgMjlcdCAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXCJSZWN0YW5nbGVcIik7XG4gICAgMzBcdCAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG4gICAgMzFcdCAgICAgICAgQnV0dG9uIGxpbmVCdG4gPSBuZXcgQnV0dG9uKFwiTGlnbmVcIik7XG4gICAgMzJcdFxuICAgIDMzXHQgICAgICAgIC8vIENyZWF0ZSB0b29sYmFyIHdpdGggYnV0dG9uc1xuICAgIDM0XHQgICAgICAgIEhCb3ggdG9vbGJhciA9IG5ldyBIQm94KDEwKTtcbiAgICAzNVx0ICAgICAgICB0b29sYmFyLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xuICAgIDM2XHQgICAgICAgIHRvb2xiYXIuZ2V0Q2hpbGRyZW4oKS5hZGRBbGwocmVjdGFuZ2xlQnRuLCBjaXJjbGVCdG4sIGxpbmVCdG4pO1xuICAgIDM3XHRcbiAgICAzOFx0ICAgICAgICAvLyBTZXQgdXAgdGhlIGxheW91dFxuICAgIDM5XHQgICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XG4gICAgNDBcdCAgICAgICAgcm9vdC5zZXRUb3AodG9vbGJhcik7XG4gICAgNDFcdCAgICAgICAgcm9vdC5zZXRDZW50ZXIoY2FudmFzKTtcbiAgICA0Mlx0XG4gICAgNDNcdCAgICAgICAgLy8gU2V0IHVwIGV2ZW50IGhhbmRsZXJzIGZvciBidXR0b25zXG4gICAgNDRcdCAgICAgICAgcmVjdGFuZ2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpKTtcbiAgICA0NVx0ICAgICAgICBjaXJjbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBDaXJjbGVGYWN0b3J5KCkpO1xuICAgIDQ2XHQgICAgICAgIGxpbmVCdG4uc2V0T25BY3Rpb24oZSAtPiBjdXJyZW50RmFjdG9yeSA9IG5ldyBMaW5lRmFjdG9yeSgpKTtcbiAgICA0N1x0XG4gICAgNDhcdCAgICAgICAgLy8gU2V0IGRlZmF1bHQgc2hhcGVcbiAgICA0OVx0ICAgICAgICBjdXJyZW50RmFjdG9yeSA9IG5ldyBSZWN0YW5nbGVGYWN0b3J5KCk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIFNldCB1cCBjYW52YXMgbW91c2UgZXZlbnRzXG4gICAgNTJcdCAgICAgICAgY2FudmFzLnNldE9uTW91c2VQcmVzc2VkKGUgLT4ge1xuICAgIDUzXHQgICAgICAgICAgICBzdGFydFggPSBlLmdldFgoKTtcbiAgICA1NFx0ICAgICAgICAgICAgc3RhcnRZID0gZS5nZXRZKCk7XG4gICAgNTVcdCAgICAgICAgfSk7XG4gICAgNTZcdFxuICAgIDU3XHQgICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUmVsZWFzZWQoZSAtPiB7XG4gICAgNThcdCAgICAgICAgICAgIGlmIChjdXJyZW50RmFjdG9yeSAhPSBudWxsKSB7XG4gICAgNTlcdCAgICAgICAgICAgICAgICBTaGFwZSBzaGFwZSA9IGN1cnJlbnRGYWN0b3J5LmdldFNoYXBlKCk7XG4gICAgNjBcdCAgICAgICAgICAgICAgICBzaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZS5nZXRYKCksIGUuZ2V0WSgpKTtcbiAgICA2MVx0ICAgICAgICAgICAgfVxuICAgIDYyXHQgICAgICAgIH0pO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICAvLyBDcmVhdGUgYW5kIHNob3cgc2NlbmVcbiAgICA2NVx0ICAgICAgICBTY2VuZSBzY2VuZSA9IG5ldyBTY2VuZShyb290LCA4MDAsIDYwMCk7XG4gICAgNjZcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFNjZW5lKHNjZW5lKTtcbiAgICA2N1x0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2hvdygpO1xuICAgIDY4XHQgICAgfVxuICAgIDY5XHRcbiAgICA3MFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgICA3MVx0ICAgICAgICBsYXVuY2goYXJncyk7XG4gICAgNzJcdCAgICB9XG4gICAgNzNcdH1cblRvdGFsIGxpbmVzIGluIGZpbGU6IDczXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI3MzRkZWI4ZC04ZmQxLTQzNGYtOWU4Yy0zMTBiMTI5ZjE1ZGY7dG9vbHVfMDE4VlFQdERWVVRWRjdGaVYxOU03UU02Ijp7InJlcXVlc3RJZCI6IjczNGRlYjhkLThmZDEtNDM0Zi05ZThjLTMxMGIxMjlmMTVkZiIsInRvb2xVc2VJZCI6InRvb2x1XzAxOFZRUHREVlVUVkY3RmlWMTlNN1FNNiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlRoZSBmb2xsb3dpbmcgY29kZSBzZWN0aW9ucyB3ZXJlIHJldHJpZXZlZDpcblBhdGg6IHNyYy9GYWN0b3J5L0NpcmNsZVNoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGNsYXNzIENpcmNsZVNoYXBlIGltcGxlbWVudHMgU2hhcGV7XG4gICAgIDZcdCAgICBAT3ZlcnJpZGVcbiAgICAgN1x0ICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kKVxuICAgICA4XHQgICAge1xuICAgICA5XHQgICAgICAgIGRvdWJsZSByYWRpdXMgPSBNYXRoLmFicyhlbmRYLXN0YXJ0WCkvMjtcbiAgICAxMFx0ICAgICAgICBnYy5zdHJva2VPdmFsKHN0YXJ0WCAtIHJhZGl1cywgc3RhcnRZIC0gcmFkaXVzLCByYWRpdXMgKiAyLCByYWRpdXMgKiAyKTtcbiAgICAxMVx0XG4gICAgMTJcdCAgICB9XG4gICAgMTNcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgaW50ZXJmYWNlIFNoYXBlIHtcbiAgICAgNlx0ICAgIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsZG91YmxlIHN0YXJ0WCxkb3VibGUgc3RhcnRZLGRvdWJsZSBlbmRYLGRvdWJsZSBlbmRZKTtcbiAgICAgN1x0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9SZWN0YW5nbGVTaGFwZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0XG4gICAgIDVcdHB1YmxpYyBjbGFzcyBSZWN0YW5nbGVTaGFwZSBpbXBsZW1lbnRzICBTaGFwZXtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSlcbiAgICAgOFx0ICAgIHtcbiAgICAgOVx0ICAgICAgICBkb3VibGUgd2lkdGggPSBNYXRoLmFicyhlbmRYLXN0YXJ0WCk7XG4gICAgMTBcdCAgICAgICAgZG91YmxlIGhlaWdodCA9IE1hdGguYWJzKGVuZFkgLSBzdGFydFkpO1xuICAgIDExXHQgICAgICAgIGRvdWJsZSB4ID0gTWF0aC5taW4oc3RhcnRYLCBlbmRYKTtcbiAgICAxMlx0ICAgICAgICBkb3VibGUgeSA9IE1hdGgubWluKHN0YXJ0WSwgZW5kWSk7XG4gICAgMTNcdCAgICAgICAgZ2Muc3Ryb2tlUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAxNFx0XG4gICAgMTVcdCAgICB9XG4gICAgMTZcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvTGluZVNoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGNsYXNzIExpbmVTaGFwZSBpbXBsZW1lbnRzIFNoYXBlIHtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgICA4XHQgICAgICAgIGdjLnN0cm9rZUxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgICA5XHQgICAgfVxuICAgIDEwXHR9XG4uLi5cblBhdGg6IHNyYy9NYWluLmphdmFcbiAgICAgMVx0XG4gICAgIDJcdGltcG9ydCBGYWN0b3J5Lio7XG4gICAgIDNcdGltcG9ydCBqYXZhZnguYXBwbGljYXRpb24uQXBwbGljYXRpb247XG4gICAgIDRcdGltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5DYW52YXM7XG4gICAgIDdcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAgOVx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxMVx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxMlx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAxM1x0XG4gICAgMTRcdHB1YmxpYyBjbGFzcyBNYWluIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDE1XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTZcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAxN1x0XG4gICAgMThcdCAgICBAT3ZlcnJpZGVcbiAgICAxOVx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDIwXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjFcdFxuICAgIDIyXHQgICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcbiAgICAyM1x0ICAgICAgICBDYW52YXMgY2FudmFzID0gbmV3IENhbnZhcyg4MDAsIDYwMCk7XG4gICAgMjRcdCAgICAgICAgR3JhcGhpY3NDb250ZXh0IGdjID0gY2FudmFzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgMjVcdCAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcbiAgICAyNlx0ICAgICAgICBnYy5zZXRMaW5lV2lkdGgoMik7XG4gICAgMjdcdFxuICAgIDI4XHQgICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xuICAgIDI5XHQgICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgIDMwXHQgICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFwiQ2VyY2xlXCIpO1xuICAgIDMxXHQgICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgIDMyXHRcbiAgICAzM1x0ICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcbiAgICAzNFx0ICAgICAgICBIQm94IHRvb2xiYXIgPSBuZXcgSEJveCgxMCk7XG4gICAgMzVcdCAgICAgICAgdG9vbGJhci5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzNlx0ICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcbiAgICAzN1x0XG4gICAgMzhcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICAzOVx0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQwXHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQxXHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNDJcdFxuICAgIDQzXHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDQ0XHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNDVcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA0Nlx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNDdcdFxuICAgIDQ4XHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNDlcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDUwXHRcbiAgICA1MVx0ICAgICAgICAvLyBTZXQgdXAgY2FudmFzIG1vdXNlIGV2ZW50c1xuICAgIDUyXHQgICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUHJlc3NlZChlIC0+IHtcbiAgICA1M1x0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNTRcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDU1XHQgICAgICAgIH0pO1xuICAgIDU2XHRcbiAgICA1N1x0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDU4XHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDU5XHQgICAgICAgICAgICAgICAgU2hhcGUgc2hhcGUgPSBjdXJyZW50RmFjdG9yeS5nZXRTaGFwZSgpO1xuICAgIDYwXHQgICAgICAgICAgICAgICAgc2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGUuZ2V0WCgpLCBlLmdldFkoKSk7XG4gICAgNjFcdCAgICAgICAgICAgIH1cbiAgICA2Mlx0ICAgICAgICB9KTtcbiAgICA2M1x0XG4gICAgNjRcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgNjVcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDY2XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgNjdcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNob3coKTtcbiAgICA2OFx0ICAgIH1cbiAgICA2OVx0XG4gICAgNzBcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgNzFcdCAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgIDcyXHQgICAgfVxuICAgIDczXHR9Li4uXG5QYXRoOiBzcmMvRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBMaW5lRmFjdG9yeSBleHRlbmRzIFNoYXBlRmFjdG9yeXtcbiAgICAgNFx0ICAgIEBPdmVycmlkZVxuICAgICA1XHQgICAgcHVibGljIFNoYXBlIGdldFNoYXBlKCkge1xuICAgICA2XHQgICAgICAgIHJldHVybiBuZXcgTGluZVNoYXBlKCk7XG4gICAgIDdcdCAgICB9XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBDaXJjbGVGYWN0b3J5IGV4dGVuZHMgU2hhcGVGYWN0b3J5e1xuICAgICA0XHQgICAgQE92ZXJyaWRlXG4gICAgIDVcdCAgICBwdWJsaWMgU2hhcGUgZ2V0U2hhcGUoKSB7XG4gICAgIDZcdCAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVTaGFwZSgpO1xuICAgICA3XHQgICAgfVxuICAgICA4XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBTaGFwZUZhY3Rvcnkge1xuICAgICA0XHQgICAgcHVibGljIGFic3RyYWN0IFNoYXBlIGdldFNoYXBlKCk7XG4gICAgIDVcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBSZWN0YW5nbGVGYWN0b3J5IHtcbiAgICAgNFx0fVxuLi4uXG5QYXRoOiAuZ2l0aWdub3JlXG4gICAgIDFcdCMjIyBJbnRlbGxpSiBJREVBICMjI1xuICAgICAyXHRvdXQvXG4gICAgIDNcdCEqKi9zcmMvbWFpbi8qKi9vdXQvXG4gICAgIDRcdCEqKi9zcmMvdGVzdC8qKi9vdXQvXG4gICAgIDVcdFxuICAgICA2XHQjIyMgRWNsaXBzZSAjIyNcbiAgICAgN1x0LmFwdF9nZW5lcmF0ZWRcbiAgICAgOFx0LmNsYXNzcGF0aFxuICAgICA5XHQuZmFjdG9yeXBhdGhcbiAgICAxMFx0LnByb2plY3RcbiAgICAxMVx0LnNldHRpbmdzXG4gICAgMTJcdC5zcHJpbmdCZWFuc1xuICAgIDEzXHQuc3RzNC1jYWNoZVxuICAgIDE0XHRiaW4vXG4gICAgMTVcdCEqKi9zcmMvbWFpbi8qKi9iaW4vXG4gICAgMTZcdCEqKi9zcmMvdGVzdC8qKi9iaW4vXG4gICAgMTdcdFxuICAgIDE4XHQjIyMgTmV0QmVhbnMgIyMjXG4gICAgMTlcdC9uYnByb2plY3QvcHJpdmF0ZS9cbiAgICAyMFx0L25iYnVpbGQvXG4gICAgMjFcdC9kaXN0L1xuICAgIDIyXHQvbmJkaXN0L1xuICAgIDIzXHQvLm5iLWdyYWRsZS9cbiAgICAyNFx0XG4gICAgMjVcdCMjIyBWUyBDb2RlICMjI1xuICAgIDI2XHQudnNjb2RlL1xuICAgIDI3XHRcbiAgICAyOFx0IyMjIE1hYyBPUyAjIyNcbiAgICAyOVx0LkRTX1N0b3JlLi4uXG4iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI2YTUyNDIyMy1jMzAwLTRmNWMtOTY0NC1jNmJlZTczYzViYzU7dG9vbHVfMDExbm13V3ZHWktnVDRnaUV2cnA0cVdDIjp7InJlcXVlc3RJZCI6IjZhNTI0MjIzLWMzMDAtNGY1Yy05NjQ0LWM2YmVlNzNjNWJjNSIsInRvb2xVc2VJZCI6InRvb2x1XzAxMW5td1d2R1pLZ1Q0Z2lFdnJwNHFXQyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkhlcmUncyB0aGUgcmVzdWx0IG9mIHJ1bm5pbmcgYGNhdCAtbmAgb24gc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlRmFjdG9yeS5qYXZhOlxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlRmFjdG9yeSBleHRlbmRzIFNoYXBlRmFjdG9yeXtcbiAgICAgNFx0ICAgIEBPdmVycmlkZVxuICAgICA1XHQgICAgcHVibGljIFNoYXBlIGdldFNoYXBlKCkge1xuICAgICA2XHQgICAgICAgIHJldHVybiBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcbiAgICAgN1x0ICAgIH1cbiAgICAgOFx0fVxuICAgICA5XHRcblRvdGFsIGxpbmVzIGluIGZpbGU6IDlcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjM4MjQwMDBhLTYxOTctNGYwZC1hMmE1LTQ4YWZlYjc1OGZhMDt0b29sdV8wMUt3SlJoQld2UzRZdjh5blluczd3RXMiOnsicmVxdWVzdElkIjoiMzgyNDAwMGEtNjE5Ny00ZjBkLWEyYTUtNDhhZmViNzU4ZmEwIiwidG9vbFVzZUlkIjoidG9vbHVfMDFLd0pSaEJXdlM0WXY4eW5ZbnM3d0VzIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy91dGlsL0dlb21ldHJ5VXRpbHMuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIwMDBmNjM5Zi0wNjM4LTQxOTctYWVhNi0zODc1ZmQwNGU4OTU7dG9vbHVfMDExVWJhU0R6NHBCQURmaGJwZkJoc05GIjp7InJlcXVlc3RJZCI6IjAwMGY2MzlmLTA2MzgtNDE5Ny1hZWE2LTM4NzVmZDA0ZTg5NSIsInRvb2xVc2VJZCI6InRvb2x1XzAxMVViYVNEejRwQkFEZmhicGZCaHNORiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbW9kZWwvRHJhd25TaGFwZS5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjE2ZTFlOTFkLThkZGItNDViYi1hYzczLTI5NzNhYmNjOWM2ZDt0b29sdV8wMTRzaW1WekpuWFphS1lFWkIyRW9YdkoiOnsicmVxdWVzdElkIjoiMTZlMWU5MWQtOGRkYi00NWJiLWFjNzMtMjk3M2FiY2M5YzZkIiwidG9vbFVzZUlkIjoidG9vbHVfMDE0c2ltVnpKblhaYUtZRVpCMkVvWHZKIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9tb2RlbC9EcmF3bkNpcmNsZS5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImExNDEwYjdlLTc3YTMtNDBlMi1iOWM5LWFjNTIxNGE2NjQ5ZDt0b29sdV8wMTduNGlmZkFCQkFFNDNZU1A2S244V20iOnsicmVxdWVzdElkIjoiYTE0MTBiN2UtNzdhMy00MGUyLWI5YzktYWM1MjE0YTY2NDlkIiwidG9vbFVzZUlkIjoidG9vbHVfMDE3bjRpZmZBQkJBRTQzWVNQNktuOFdtIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9tb2RlbC9EcmF3bkxpbmUuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJmOTBjODQwMy00NDgzLTRiY2EtODQ5ZC1jMTlmMGE0MTc0MGM7dG9vbHVfMDFTMkdqTUZUdkdTb0VyRVh0REU2a2h2Ijp7InJlcXVlc3RJZCI6ImY5MGM4NDAzLTQ0ODMtNGJjYS04NDlkLWMxOWYwYTQxNzQwYyIsInRvb2xVc2VJZCI6InRvb2x1XzAxUzJHak1GVHZHU29FckVYdERFNmtodiIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbWFuYWdlci9TaGFwZU1hbmFnZXIuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI5MmQzMjNlYS02YTU0LTQzODctOTAwMC1lZjczMzI4ODFiMjg7dG9vbHVfMDE3WTZNZmpKaUhTVTk3WjFoalJYalJFIjp7InJlcXVlc3RJZCI6IjkyZDMyM2VhLTZhNTQtNDM4Ny05MDAwLWVmNzMzMjg4MWIyOCIsInRvb2xVc2VJZCI6InRvb2x1XzAxN1k2TWZqSmlIU1U5N1oxaGpSWGpSRSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IlN1Y2Nlc3NmdWxseSBlZGl0ZWQgdGhlIGZpbGUgc3JjL01haW4uamF2YS5cblJlc3VsdCBmb3Igc3RyX3JlcGxhY2UgZm9yIGVudHJ5IHdpdGggaW5kZXggWzBdOlxuUmVwbGFjZW1lbnQgc3VjY2Vzc2Z1bC5cbkVkaXRlZCBzZWN0aW9uIGFmdGVyIElERSBhdXRvLWZvcm1hdHRpbmcgd2FzIGFwcGxpZWQ6XG4gICAgIDFcdFxuICAgICAyXHRpbXBvcnQgRmFjdG9yeS4qO1xuICAgICAzXHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBtb2RlbC4qO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgMTBcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMVx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAxMlx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAxM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxNVx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAxNlx0XG4gICAgMTdcdHB1YmxpYyBjbGFzcyBNYWluIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDE4XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTlcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNzlkMTgzYmItNmUwOC00MGJkLWFlNTgtYjQxN2IwOGI0YmJhO3Rvb2x1XzAxRVNYS3QxalVqbTJjR0RoYzN5eDYzUiI6eyJyZXF1ZXN0SWQiOiI3OWQxODNiYi02ZTA4LTQwYmQtYWU1OC1iNDE3YjA4YjRiYmEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUVTWEt0MWpVam0yY0dEaGMzeXg2M1IiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9NYWluLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDEzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDE0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLnBhaW50LkNvbG9yO1xuICAgIDE1XHRpbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuICAgIDE2XHRcbiAgICAxN1x0cHVibGljIGNsYXNzIE1haW4gZXh0ZW5kcyBBcHBsaWNhdGlvbiB7XG4gICAgMThcdCAgICBwcml2YXRlIFNoYXBlRmFjdG9yeSBjdXJyZW50RmFjdG9yeTtcbiAgICAxOVx0ICAgIHByaXZhdGUgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlcjtcbiAgICAyMFx0ICAgIHByaXZhdGUgZG91YmxlIHN0YXJ0WCwgc3RhcnRZO1xuICAgIDIxXHRcbiAgICAyMlx0ICAgIEBPdmVycmlkZVxuICAgIDIzXHQgICAgcHVibGljIHZvaWQgc3RhcnQoU3RhZ2UgcHJpbWFyeVN0YWdlKSB7XG4gICAgMjRcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFRpdGxlKFwiRGVzc2luIGRlIEZvcm1lcyBHw6lvbcOpdHJpcXVlc1wiKTtcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiM2Q4ZTU3NmQtMzkwYy00NDRjLTg3OGItZWJiMjBhMDA0MTY1O3Rvb2x1XzAxUEtEQlIzMWE1TWlBVUpHMlF1SGJEUCI6eyJyZXF1ZXN0SWQiOiIzZDhlNTc2ZC0zOTBjLTQ0NGMtODc4Yi1lYmIyMGEwMDQxNjUiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVBLREJSMzFhNU1pQVVKRzJRdUhiRFAiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9NYWluLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDE4XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTlcdCAgICBwcml2YXRlIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XG4gICAgMjBcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMVx0XG4gICAgMjJcdCAgICBAT3ZlcnJpZGVcbiAgICAyM1x0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDI0XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjVcdFxuICAgIDI2XHQgICAgICAgIC8vIEluaXRpYWxpemUgc2hhcGUgbWFuYWdlclxuICAgIDI3XHQgICAgICAgIHNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcbiAgICAyOFx0XG4gICAgMjlcdCAgICAgICAgLy8gQ3JlYXRlIGNhbnZhcyBmb3IgZHJhd2luZ1xuICAgIDMwXHQgICAgICAgIENhbnZhcyBjYW52YXMgPSBuZXcgQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAzMVx0ICAgICAgICBHcmFwaGljc0NvbnRleHQgZ2MgPSBjYW52YXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAzMlx0ICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xuICAgIDMzXHQgICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAzNFx0XG4gICAgMzVcdCAgICAgICAgLy8gQ3JlYXRlIHNoYXBlIHNlbGVjdGlvbiBidXR0b25zXG4gICAgMzZcdCAgICAgICAgQnV0dG9uIHJlY3RhbmdsZUJ0biA9IG5ldyBCdXR0b24oXCJSZWN0YW5nbGVcIik7XG4gICAgMzdcdCAgICAgICAgQnV0dG9uIGNpcmNsZUJ0biA9IG5ldyBCdXR0b24oXCJDZXJjbGVcIik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImQyYzU5YTllLTJhOWMtNGUxMS04ZTgxLTk0NzBlZjJkYjA1Yjt0b29sdV8wMUM2dmhvTUFKZkRmQmZkcFRldzlBQnMiOnsicmVxdWVzdElkIjoiZDJjNTlhOWUtMmE5Yy00ZTExLThlODEtOTQ3MGVmMmRiMDViIiwidG9vbFVzZUlkIjoidG9vbHVfMDFDNnZob01BSmZEZkJmZHBUZXc5QUJzIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA2MFx0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNjFcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDYyXHQgICAgICAgIH0pO1xuICAgIDYzXHRcbiAgICA2NFx0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDY1XHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDY2XHQgICAgICAgICAgICAgICAgZG91YmxlIGVuZFggPSBlLmdldFgoKTtcbiAgICA2N1x0ICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRZID0gZS5nZXRZKCk7XG4gICAgNjhcdFxuICAgIDY5XHQgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgd2UncmUgZHJhd2luZyBhIGxpbmUgYW5kIHZhbGlkYXRlIGNvbnN0cmFpbnRzXG4gICAgNzBcdCAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkge1xuICAgIDcxXHQgICAgICAgICAgICAgICAgICAgIFNoYXBlTWFuYWdlci5WYWxpZGF0aW9uUmVzdWx0IHJlc3VsdCA9IHNoYXBlTWFuYWdlci52YWxpZGF0ZUxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDcyXHQgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LmlzVmFsaWQoKSkge1xuICAgIDczXHQgICAgICAgICAgICAgICAgICAgICAgICBzaG93QWxlcnQoXCJDb250cmFpbnRlIHZpb2zDqWVcIiwgcmVzdWx0LmdldE1lc3NhZ2UoKSk7XG4gICAgNzRcdCAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICA3NVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAgNzZcdCAgICAgICAgICAgICAgICB9XG4gICAgNzdcdFxuICAgIDc4XHQgICAgICAgICAgICAgICAgLy8gRHJhdyB0aGUgc2hhcGVcbiAgICA3OVx0ICAgICAgICAgICAgICAgIFNoYXBlIHNoYXBlID0gY3VycmVudEZhY3RvcnkuZ2V0U2hhcGUoKTtcbiAgICA4MFx0ICAgICAgICAgICAgICAgIHNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA4MVx0XG4gICAgODJcdCAgICAgICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcbiAgICA4M1x0ICAgICAgICAgICAgICAgIERyYXduU2hhcGUgZHJhd25TaGFwZSA9IGNyZWF0ZURyYXduU2hhcGUoY3VycmVudEZhY3RvcnksIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA4NFx0ICAgICAgICAgICAgICAgIGlmIChkcmF3blNoYXBlICE9IG51bGwpIHtcbiAgICA4NVx0ICAgICAgICAgICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25TaGFwZSk7XG4gICAgODZcdCAgICAgICAgICAgICAgICB9XG4gICAgODdcdCAgICAgICAgICAgIH1cbiAgICA4OFx0ICAgICAgICB9KTtcbiAgICA4OVx0XG4gICAgOTBcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgOTFcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDkyXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjFlNDM4YTdlLWFjMGEtNGRmMC1hNzJmLTBlYzBmYTRiN2QxYjt0b29sdV8wMVRDeE1Qdnd2Qk1Yc0ZwRDdzR3JqZ1kiOnsicmVxdWVzdElkIjoiMWU0MzhhN2UtYWMwYS00ZGYwLWE3MmYtMGVjMGZhNGI3ZDFiIiwidG9vbFVzZUlkIjoidG9vbHVfMDFUQ3hNUHZ3dkJNWHNGcEQ3c0dyamdZIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA5Mlx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0U2NlbmUoc2NlbmUpO1xuICAgIDkzXHQgICAgICAgIHByaW1hcnlTdGFnZS5zaG93KCk7XG4gICAgOTRcdCAgICB9XG4gICAgOTVcdFxuICAgIDk2XHQgICAgLyoqXG4gICAgOTdcdCAgICAgKiBDcmVhdGVzIGEgRHJhd25TaGFwZSBvYmplY3QgYmFzZWQgb24gdGhlIGZhY3RvcnkgdHlwZVxuICAgIDk4XHQgICAgICovXG4gICAgOTlcdCAgICBwcml2YXRlIERyYXduU2hhcGUgY3JlYXRlRHJhd25TaGFwZShTaGFwZUZhY3RvcnkgZmFjdG9yeSwgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAxMDBcdCAgICAgICAgaWYgKGZhY3RvcnkgaW5zdGFuY2VvZiBDaXJjbGVGYWN0b3J5KSB7XG4gICAxMDFcdCAgICAgICAgICAgIHJldHVybiBuZXcgRHJhd25DaXJjbGUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgMTAyXHQgICAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeSBpbnN0YW5jZW9mIExpbmVGYWN0b3J5KSB7XG4gICAxMDNcdCAgICAgICAgICAgIHJldHVybiBuZXcgRHJhd25MaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgIDEwNFx0ICAgICAgICB9XG4gICAxMDVcdCAgICAgICAgLy8gV2UgZG9uJ3QgdHJhY2sgcmVjdGFuZ2xlcyBmb3IgdGhpcyBjb25zdHJhaW50IHN5c3RlbVxuICAgMTA2XHQgICAgICAgIHJldHVybiBudWxsO1xuICAgMTA3XHQgICAgfVxuICAgMTA4XHRcbiAgIDEwOVx0ICAgIC8qKlxuICAgMTEwXHQgICAgICogU2hvd3MgYW4gYWxlcnQgZGlhbG9nIHRvIHRoZSB1c2VyXG4gICAxMTFcdCAgICAgKi9cbiAgIDExMlx0ICAgIHByaXZhdGUgdm9pZCBzaG93QWxlcnQoU3RyaW5nIHRpdGxlLCBTdHJpbmcgbWVzc2FnZSkge1xuICAgMTEzXHQgICAgICAgIEFsZXJ0IGFsZXJ0ID0gbmV3IEFsZXJ0KEFsZXJ0LkFsZXJ0VHlwZS5XQVJOSU5HKTtcbiAgIDExNFx0ICAgICAgICBhbGVydC5zZXRUaXRsZSh0aXRsZSk7XG4gICAxMTVcdCAgICAgICAgYWxlcnQuc2V0SGVhZGVyVGV4dChudWxsKTtcbiAgIDExNlx0ICAgICAgICBhbGVydC5zZXRDb250ZW50VGV4dChtZXNzYWdlKTtcbiAgIDExN1x0ICAgICAgICBhbGVydC5zaG93QW5kV2FpdCgpO1xuICAgMTE4XHQgICAgfVxuICAgMTE5XHRcbiAgIDEyMFx0ICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZ1tdIGFyZ3MpIHtcbiAgIDEyMVx0ICAgICAgICBsYXVuY2goYXJncyk7XG4gICAxMjJcdCAgICB9XG4gICAxMjNcdH1cblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOWRlN2YxNDUtYjVlNy00NTViLThkNTYtZjg4NWU2YjhkMjMxO3Rvb2x1XzAxNnhTTU04NUIzQWJyQmF4VUNSTmc3UCI6eyJyZXF1ZXN0SWQiOiI5ZGU3ZjE0NS1iNWU3LTQ1NWItOGQ1Ni1mODg1ZTZiOGQyMzEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTZ4U01NODVCM0FickJheFVDUk5nN1AiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJTdWNjZXNzZnVsbHkgZWRpdGVkIHRoZSBmaWxlIHNyYy9NYWluLmphdmEuXG5SZXN1bHQgZm9yIHN0cl9yZXBsYWNlIGZvciBlbnRyeSB3aXRoIGluZGV4IFswXTpcblJlcGxhY2VtZW50IHN1Y2Nlc3NmdWwuXG5FZGl0ZWQgc2VjdGlvbiBhZnRlciBJREUgYXV0by1mb3JtYXR0aW5nIHdhcyBhcHBsaWVkOlxuICAgIDMxXHQgICAgICAgIEdyYXBoaWNzQ29udGV4dCBnYyA9IGNhbnZhcy5nZXRHcmFwaGljc0NvbnRleHQyRCgpO1xuICAgIDMyXHQgICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgMzNcdCAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgIDM0XHRcbiAgICAzNVx0ICAgICAgICAvLyBDcmVhdGUgc2hhcGUgc2VsZWN0aW9uIGJ1dHRvbnNcbiAgICAzNlx0ICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcIlJlY3RhbmdsZVwiKTtcbiAgICAzN1x0ICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcIkNlcmNsZVwiKTtcbiAgICAzOFx0ICAgICAgICBCdXR0b24gbGluZUJ0biA9IG5ldyBCdXR0b24oXCJMaWduZVwiKTtcbiAgICAzOVx0ICAgICAgICBCdXR0b24gY2xlYXJCdG4gPSBuZXcgQnV0dG9uKFwiRWZmYWNlclwiKTtcbiAgICA0MFx0XG4gICAgNDFcdCAgICAgICAgLy8gQ3JlYXRlIHRvb2xiYXIgd2l0aCBidXR0b25zXG4gICAgNDJcdCAgICAgICAgSEJveCB0b29sYmFyID0gbmV3IEhCb3goMTApO1xuICAgIDQzXHQgICAgICAgIHRvb2xiYXIuc2V0UGFkZGluZyhuZXcgSW5zZXRzKDEwKSk7XG4gICAgNDRcdCAgICAgICAgdG9vbGJhci5nZXRDaGlsZHJlbigpLmFkZEFsbChyZWN0YW5nbGVCdG4sIGNpcmNsZUJ0biwgbGluZUJ0biwgY2xlYXJCdG4pO1xuICAgIDQ1XHRcbiAgICA0Nlx0ICAgICAgICAvLyBTZXQgdXAgdGhlIGxheW91dFxuICAgIDQ3XHQgICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XG4gICAgNDhcdCAgICAgICAgcm9vdC5zZXRUb3AodG9vbGJhcik7XG5cblJldmlldyB0aGUgY2hhbmdlcyBhbmQgbWFrZSBzdXJlIHRoZXkgYXJlIGFzIGV4cGVjdGVkIChjb3JyZWN0IGluZGVudGF0aW9uLCBubyBkdXBsaWNhdGUgbGluZXMsIGV0YykuXG5FZGl0IHRoZSBmaWxlIGFnYWluIGlmIG5lY2Vzc2FyeS5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImQ3NzRmMzhiLWU2ODYtNDIyNi1iYWE5LTdiZjg1Y2FjNTllYjt0b29sdV8wMTNHWld5dllTS0FTU0QxZ3BTVkdzVUMiOnsicmVxdWVzdElkIjoiZDc3NGYzOGItZTY4Ni00MjI2LWJhYTktN2JmODVjYWM1OWViIiwidG9vbFVzZUlkIjoidG9vbHVfMDEzR1pXeXZZU0tBU1NEMWdwU1ZHc1VDIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiU3VjY2Vzc2Z1bGx5IGVkaXRlZCB0aGUgZmlsZSBzcmMvTWFpbi5qYXZhLlxuUmVzdWx0IGZvciBzdHJfcmVwbGFjZSBmb3IgZW50cnkgd2l0aCBpbmRleCBbMF06XG5SZXBsYWNlbWVudCBzdWNjZXNzZnVsLlxuRWRpdGVkIHNlY3Rpb24gYWZ0ZXIgSURFIGF1dG8tZm9ybWF0dGluZyB3YXMgYXBwbGllZDpcbiAgICA0N1x0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQ4XHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQ5XHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDUyXHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNTNcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA1NFx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNTVcdCAgICAgICAgY2xlYXJCdG4uc2V0T25BY3Rpb24oZSAtPiB7XG4gICAgNTZcdCAgICAgICAgICAgIGdjLmNsZWFyUmVjdCgwLCAwLCBjYW52YXMuZ2V0V2lkdGgoKSwgY2FudmFzLmdldEhlaWdodCgpKTtcbiAgICA1N1x0ICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmNsZWFyU2hhcGVzKCk7XG4gICAgNThcdCAgICAgICAgfSk7XG4gICAgNTlcdFxuICAgIDYwXHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNjFcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDYyXHRcblxuUmV2aWV3IHRoZSBjaGFuZ2VzIGFuZCBtYWtlIHN1cmUgdGhleSBhcmUgYXMgZXhwZWN0ZWQgKGNvcnJlY3QgaW5kZW50YXRpb24sIG5vIGR1cGxpY2F0ZSBsaW5lcywgZXRjKS5cbkVkaXQgdGhlIGZpbGUgYWdhaW4gaWYgbmVjZXNzYXJ5LlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYjYwMWE5MjYtZTQ2NC00MWU2LTllZmUtNWEzZWM4MWY5NjlhO3Rvb2x1XzAxTjFQYk5ua3N5RW14bll5d3ZiVDZvRSI6eyJyZXF1ZXN0SWQiOiJiNjAxYTkyNi1lNDY0LTQxZTYtOWVmZS01YTNlYzgxZjk2OWEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMU4xUGJObmtzeUVteG5ZeXd2YlQ2b0UiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJUaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgd2VyZSByZXRyaWV2ZWQ6XG5QYXRoOiBzcmMvTWFpbi5qYXZhXG4gICAgIDFcdFxuICAgICAyXHRpbXBvcnQgRmFjdG9yeS4qO1xuICAgICAzXHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDRcdGltcG9ydCBtb2RlbC4qO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4Lmdlb21ldHJ5Lkluc2V0cztcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgMTBcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMVx0aW1wb3J0IGphdmFmeC5zY2VuZS5jb250cm9sLkJ1dHRvbjtcbiAgICAxMlx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAxM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuSEJveDtcbiAgICAxNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxNVx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAxNlx0XG4gICAgMTdcdHB1YmxpYyBjbGFzcyBNYWluIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDE4XHQgICAgcHJpdmF0ZSBTaGFwZUZhY3RvcnkgY3VycmVudEZhY3Rvcnk7XG4gICAgMTlcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMFx0XG4gICAgMjFcdCAgICBAT3ZlcnJpZGVcbiAgICAyMlx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDIzXHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXNcIik7XG4gICAgMjRcdFxuICAgIDI1XHQgICAgICAgIC8vIENyZWF0ZSBjYW52YXMgZm9yIGRyYXdpbmdcbiAgICAyNlx0ICAgICAgICBDYW52YXMgY2FudmFzID0gbmV3IENhbnZhcyg4MDAsIDYwMCk7XG4gICAgMjdcdCAgICAgICAgR3JhcGhpY3NDb250ZXh0IGdjID0gY2FudmFzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgMjhcdCAgICAgICAgZ2Muc2V0U3Ryb2tlKENvbG9yLkJMQUNLKTtcbiAgICAyOVx0ICAgICAgICBnYy5zZXRMaW5lV2lkdGgoMik7XG4gICAgMzBcdFxuICAgIDMxXHQgICAgICAgIC8vIENyZWF0ZSBzaGFwZSBzZWxlY3Rpb24gYnV0dG9uc1xuICAgIDMyXHQgICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgIDMzXHQgICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFwiQ2VyY2xlXCIpO1xuICAgIDM0XHQgICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgIDM1XHRcbiAgICAzNlx0ICAgICAgICAvLyBDcmVhdGUgdG9vbGJhciB3aXRoIGJ1dHRvbnNcbiAgICAzN1x0ICAgICAgICBIQm94IHRvb2xiYXIgPSBuZXcgSEJveCgxMCk7XG4gICAgMzhcdCAgICAgICAgdG9vbGJhci5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzOVx0ICAgICAgICB0b29sYmFyLmdldENoaWxkcmVuKCkuYWRkQWxsKHJlY3RhbmdsZUJ0biwgY2lyY2xlQnRuLCBsaW5lQnRuKTtcbiAgICA0MFx0XG4gICAgNDFcdCAgICAgICAgLy8gU2V0IHVwIHRoZSBsYXlvdXRcbiAgICA0Mlx0ICAgICAgICBCb3JkZXJQYW5lIHJvb3QgPSBuZXcgQm9yZGVyUGFuZSgpO1xuICAgIDQzXHQgICAgICAgIHJvb3Quc2V0VG9wKHRvb2xiYXIpO1xuICAgIDQ0XHQgICAgICAgIHJvb3Quc2V0Q2VudGVyKGNhbnZhcyk7XG4gICAgNDVcdFxuICAgIDQ2XHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVycyBmb3IgYnV0dG9uc1xuICAgIDQ3XHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IGN1cnJlbnRGYWN0b3J5ID0gbmV3IFJlY3RhbmdsZUZhY3RvcnkoKSk7XG4gICAgNDhcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgQ2lyY2xlRmFjdG9yeSgpKTtcbiAgICA0OVx0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gY3VycmVudEZhY3RvcnkgPSBuZXcgTGluZUZhY3RvcnkoKSk7XG4gICAgNTBcdFxuICAgIDUxXHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHNoYXBlXG4gICAgNTJcdCAgICAgICAgY3VycmVudEZhY3RvcnkgPSBuZXcgUmVjdGFuZ2xlRmFjdG9yeSgpO1xuICAgIDUzXHRcbiAgICA1NFx0ICAgICAgICAvLyBTZXQgdXAgY2FudmFzIG1vdXNlIGV2ZW50c1xuICAgIDU1XHQgICAgICAgIGNhbnZhcy5zZXRPbk1vdXNlUHJlc3NlZChlIC0+IHtcbiAgICA1Nlx0ICAgICAgICAgICAgc3RhcnRYID0gZS5nZXRYKCk7XG4gICAgNTdcdCAgICAgICAgICAgIHN0YXJ0WSA9IGUuZ2V0WSgpO1xuICAgIDU4XHQgICAgICAgIH0pO1xuICAgIDU5XHRcbiAgICA2MFx0ICAgICAgICBjYW52YXMuc2V0T25Nb3VzZVJlbGVhc2VkKGUgLT4ge1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoY3VycmVudEZhY3RvcnkgIT0gbnVsbCkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgU2hhcGUgc2hhcGUgPSBjdXJyZW50RmFjdG9yeS5nZXRTaGFwZSgpO1xuICAgIDYzXHQgICAgICAgICAgICAgICAgc2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGUuZ2V0WCgpLCBlLmdldFkoKSk7XG4gICAgNjRcdCAgICAgICAgICAgIH1cbiAgICA2NVx0ICAgICAgICB9KTtcbiAgICA2Nlx0XG4gICAgNjdcdCAgICAgICAgLy8gQ3JlYXRlIGFuZCBzaG93IHNjZW5lXG4gICAgNjhcdCAgICAgICAgU2NlbmUgc2NlbmUgPSBuZXcgU2NlbmUocm9vdCwgODAwLCA2MDApO1xuICAgIDY5XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRTY2VuZShzY2VuZSk7XG4gICAgNzBcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNob3coKTtcbiAgICA3MVx0ICAgIH1cbiAgICA3Mlx0XG4gICAgNzNcdCAgICBwdWJsaWMgc3RhdGljIHZvaWQgbWFpbihTdHJpbmdbXSBhcmdzKSB7XG4gICAgNzRcdCAgICAgICAgbGF1bmNoKGFyZ3MpO1xuICAgIDc1XHQgICAgfVxuICAgIDc2XHR9Li4uXG5QYXRoOiBzcmMvRmFjdG9yeS9MaW5lU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgTGluZVNoYXBlIGltcGxlbWVudHMgU2hhcGUge1xuICAgICA2XHQgICAgQE92ZXJyaWRlXG4gICAgIDdcdCAgICBwdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgIDhcdCAgICAgICAgZ2Muc3Ryb2tlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgIDlcdCAgICB9XG4gICAgMTBcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlU2hhcGUgaW1wbGVtZW50cyAgU2hhcGV7XG4gICAgIDZcdCAgICBAT3ZlcnJpZGVcbiAgICAgN1x0ICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpXG4gICAgIDhcdCAgICB7XG4gICAgIDlcdCAgICAgICAgZG91YmxlIHdpZHRoID0gTWF0aC5hYnMoZW5kWC1zdGFydFgpO1xuICAgIDEwXHQgICAgICAgIGRvdWJsZSBoZWlnaHQgPSBNYXRoLmFicyhlbmRZIC0gc3RhcnRZKTtcbiAgICAxMVx0ICAgICAgICBkb3VibGUgeCA9IE1hdGgubWluKHN0YXJ0WCwgZW5kWCk7XG4gICAgMTJcdCAgICAgICAgZG91YmxlIHkgPSBNYXRoLm1pbihzdGFydFksIGVuZFkpO1xuICAgIDEzXHQgICAgICAgIGdjLnN0cm9rZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCk7XG4gICAgMTRcdFxuICAgIDE1XHQgICAgfVxuICAgIDE2XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGludGVyZmFjZSBTaGFwZSB7XG4gICAgIDZcdCAgICB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLGRvdWJsZSBzdGFydFgsZG91YmxlIHN0YXJ0WSxkb3VibGUgZW5kWCxkb3VibGUgZW5kWSk7XG4gICAgIDdcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvQ2lyY2xlU2hhcGUuamF2YVxuICAgICAxXHRwYWNrYWdlIEZhY3Rvcnk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdFxuICAgICA1XHRwdWJsaWMgY2xhc3MgQ2lyY2xlU2hhcGUgaW1wbGVtZW50cyBTaGFwZXtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmQpXG4gICAgIDhcdCAgICB7XG4gICAgIDlcdCAgICAgICAgZG91YmxlIHJhZGl1cyA9IE1hdGguYWJzKGVuZFgtc3RhcnRYKS8yO1xuICAgIDEwXHQgICAgICAgIGdjLnN0cm9rZU92YWwoc3RhcnRYIC0gcmFkaXVzLCBzdGFydFkgLSByYWRpdXMsIHJhZGl1cyAqIDIsIHJhZGl1cyAqIDIpO1xuICAgIDExXHRcbiAgICAxMlx0ICAgIH1cbiAgICAxM1x0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBMaW5lRmFjdG9yeSBleHRlbmRzIFNoYXBlRmFjdG9yeXtcbiAgICAgNFx0ICAgIEBPdmVycmlkZVxuICAgICA1XHQgICAgcHVibGljIFNoYXBlIGdldFNoYXBlKCkge1xuICAgICA2XHQgICAgICAgIHJldHVybiBuZXcgTGluZVNoYXBlKCk7XG4gICAgIDdcdCAgICB9XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL21hbmFnZXIvU2hhcGVNYW5hZ2VyLmphdmFcbiAgICAgMVx0cGFja2FnZSBtYW5hZ2VyO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IG1vZGVsLio7XG4gICAgIDRcdGltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0O1xuICAgICA1XHRpbXBvcnQgamF2YS51dGlsLkxpc3Q7XG4gICAgIDZcdFxuICAgICA3XHRwdWJsaWMgY2xhc3MgU2hhcGVNYW5hZ2VyIHtcbiAgICAgOFx0ICAgIHByaXZhdGUgTGlzdDxEcmF3blNoYXBlPiBzaGFwZXM7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIHB1YmxpYyBTaGFwZU1hbmFnZXIoKSB7XG4gICAgMTFcdCAgICAgICAgdGhpcy5zaGFwZXMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAxMlx0ICAgIH1cbiAgICAxM1x0ICAgIFxuICAgIDE0XHQgICAgLyoqXG4gICAgMTVcdCAgICAgKiBWYWxpZGF0ZXMgaWYgYSBsaW5lIGNhbiBiZSBkcmF3biBhY2NvcmRpbmcgdG8gdGhlIGNvbnN0cmFpbnRzOlxuICAgIDE2XHQgICAgICogLSBCb3RoIGVuZHMgb2YgdGhlIGxpbmUgbXVzdCBiZSBpbnNpZGUgYSBjaXJjbGVcbiAgICAxN1x0ICAgICAqIC0gQSBjaXJjbGUgY2FuIGhhdmUgb25seSBvbmUgbGluZVxuICAgIDE4XHQgICAgICovXG4gICAgMTlcdCAgICBwdWJsaWMgVmFsaWRhdGlvblJlc3VsdCB2YWxpZGF0ZUxpbmUoZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMjBcdCAgICAgICAgRHJhd25DaXJjbGUgc3RhcnRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KHN0YXJ0WCwgc3RhcnRZKTtcbiAgICAyMVx0ICAgICAgICBEcmF3bkNpcmNsZSBlbmRDaXJjbGUgPSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGVuZFgsIGVuZFkpO1xuICAgIDIyXHQgICAgICAgIFxuICAgIDIzXHQgICAgICAgIC8vIENoZWNrIGlmIGJvdGggZW5kcyBhcmUgaW5zaWRlIGNpcmNsZXNcbiAgICAyNFx0ICAgICAgICBpZiAoc3RhcnRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI1XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZGUgZMOpcGFydCBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAyNlx0ICAgICAgICB9XG4gICAgMjdcdCAgICAgICAgXG4gICAgMjhcdCAgICAgICAgaWYgKGVuZENpcmNsZSA9PSBudWxsKSB7XG4gICAgMjlcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBwb2ludCBkJ2Fycml2w6llIGRlIGxhIGxpZ25lIGRvaXQgw6p0cmUgw6AgbCdpbnTDqXJpZXVyIGQndW4gY2VyY2xlXCIpO1xuICAgIDMwXHQgICAgICAgIH1cbiAgICAzMVx0ICAgICAgICBcbiAgICAzMlx0ICAgICAgICAvLyBDaGVjayBpZiBjaXJjbGVzIGFscmVhZHkgaGF2ZSBsaW5lc1xuICAgIDMzXHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKHN0YXJ0Q2lyY2xlKSkge1xuICAgIDM0XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgY2VyY2xlIGRlIGTDqXBhcnQgY29udGllbnQgZMOpasOgIHVuZSBsaWduZVwiKTtcbiAgICAzNVx0ICAgICAgICB9XG4gICAgMzZcdCAgICAgICAgXG4gICAgMzdcdCAgICAgICAgaWYgKGNpcmNsZUhhc0xpbmUoZW5kQ2lyY2xlKSAmJiAhc3RhcnRDaXJjbGUuZXF1YWxzKGVuZENpcmNsZSkpIHtcbiAgICAzOFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkJ2Fycml2w6llIGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzlcdCAgICAgICAgfVxuICAgIDQwXHQgICAgICAgIFxuICAgIDQxXHQgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdCh0cnVlLCBcIkxpZ25lIHZhbGlkZVwiKTtcbiAgICA0Mlx0ICAgIH1cbiAgICA0M1x0ICAgIFxuICAgIDQ0XHQgICAgLyoqXG4gICAgNDVcdCAgICAgKiBGaW5kcyBhIGNpcmNsZSB0aGF0IGNvbnRhaW5zIHRoZSBnaXZlbiBwb2ludFxuICAgIDQ2XHQgICAgICovXG4gICAgNDdcdCAgICBwcml2YXRlIERyYXduQ2lyY2xlIGZpbmRDaXJjbGVDb250YWluaW5nUG9pbnQoZG91YmxlIHgsIGRvdWJsZSB5KSB7XG4gICAgNDhcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNDlcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduQ2lyY2xlICYmIHNoYXBlLmNvbnRhaW5zUG9pbnQoeCwgeSkpIHtcbiAgICA1MFx0ICAgICAgICAgICAgICAgIHJldHVybiAoRHJhd25DaXJjbGUpIHNoYXBlO1xuICAgIDUxXHQgICAgICAgICAgICB9XG4gICAgNTJcdCAgICAgICAgfVxuICAgIDUzXHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDU0XHQgICAgfVxuICAgIDU1XHQgICAgXG4gICAgNTZcdCAgICAvKipcbiAgICA1N1x0ICAgICAqIENoZWNrcyBpZiBhIGNpcmNsZSBhbHJlYWR5IGhhcyBhIGxpbmVcbiAgICA1OFx0ICAgICAqL1xuICAgIDU5XHQgICAgcHJpdmF0ZSBib29sZWFuIGNpcmNsZUhhc0xpbmUoRHJhd25DaXJjbGUgY2lyY2xlKSB7XG4gICAgNjBcdCAgICAgICAgZm9yIChEcmF3blNoYXBlIHNoYXBlIDogc2hhcGVzKSB7XG4gICAgNjFcdCAgICAgICAgICAgIGlmIChzaGFwZSBpbnN0YW5jZW9mIERyYXduTGluZSkge1xuICAgIDYyXHQgICAgICAgICAgICAgICAgRHJhd25MaW5lIGxpbmUgPSAoRHJhd25MaW5lKSBzaGFwZTtcbiAgICA2M1x0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIHN0YXJ0UG9pbnQgPSBsaW5lLmdldFN0YXJ0UG9pbnQoKTtcbiAgICA2NFx0ICAgICAgICAgICAgICAgIGRvdWJsZVtdIGVuZFBvaW50ID0gbGluZS5nZXRFbmRQb2ludCgpO1xuICAgIDY1XHQgICAgICAgICAgICAgICAgXG4gICAgNjZcdCAgICAgICAgICAgICAgICBpZiAoY2lyY2xlLmNvbnRhaW5zUG9pbnQoc3RhcnRQb2ludFswXSwgc3RhcnRQb2ludFsxXSkgfHwgXG4gICAgNjdcdCAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmNvbnRhaW5zUG9pbnQoZW5kUG9pbnRbMF0sIGVuZFBvaW50WzFdKSkge1xuICAgIDY4XHQgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgIDY5XHQgICAgICAgICAgICAgICAgfVxuICAgIDcwXHQgICAgICAgICAgICB9XG4gICAgNzFcdCAgICAgICAgfVxuICAgIDcyXHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICA3M1x0ICAgIH1cbiAgICA3NFx0ICAgIFxuICAgIDc1XHQgICAgLyoqXG4gICAgNzZcdCAgICAgKiBBZGRzIGEgc2hhcGUgdG8gdGhlIG1hbmFnZXJcbiAgICA3N1x0ICAgICAqL1xuICAgIDc4XHQgICAgcHVibGljIHZvaWQgYWRkU2hhcGUoRHJhd25TaGFwZSBzaGFwZSkge1xuICAgIDc5XHQgICAgICAgIHNoYXBlcy5hZGQoc2hhcGUpO1xuICAgIDgwXHQgICAgfVxuICAgIDgxXHQgICAgXG4gICAgODJcdCAgICAvKipcbiAgICA4M1x0ICAgICAqIEdldHMgYWxsIHNoYXBlc1xuICAgIDg0XHQgICAgICovXG4gICAgODVcdCAgICBwdWJsaWMgTGlzdDxEcmF3blNoYXBlPiBnZXRTaGFwZXMoKSB7XG4gICAgODZcdCAgICAgICAgcmV0dXJuIG5ldyBBcnJheUxpc3Q8PihzaGFwZXMpO1xuICAgIDg3XHQgICAgfVxuICAgIDg4XHQgICAgXG4gICAgODlcdCAgICAvKipcbiAgICA5MFx0ICAgICAqIENsZWFycyBhbGwgc2hhcGVzXG4gICAgOTFcdCAgICAgKi9cbiAgICA5Mlx0ICAgIHB1YmxpYyB2b2lkIGNsZWFyU2hhcGVzKCkge1xuICAgIDkzXHQgICAgICAgIHNoYXBlcy5jbGVhcigpO1xuICAgIDk0XHQgICAgfVxuICAgIDk1XHQgICAgXG4gICAgOTZcdCAgICAvKipcbiAgICA5N1x0ICAgICAqIFJlc3VsdCBjbGFzcyBmb3IgdmFsaWRhdGlvbiBvcGVyYXRpb25zXG4gICAgOThcdCAgICAgKi9cbiAgICA5OVx0ICAgIHB1YmxpYyBzdGF0aWMgY2xhc3MgVmFsaWRhdGlvblJlc3VsdCB7XG4gICAxMDBcdCAgICAgICAgcHJpdmF0ZSBmaW5hbCBib29sZWFuIHZhbGlkO1xuICAgMTAxXHQgICAgICAgIHByaXZhdGUgZmluYWwgU3RyaW5nIG1lc3NhZ2U7XG4gICAxMDJcdCAgICAgICAgXG4gICAxMDNcdCAgICAgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQoYm9vbGVhbiB2YWxpZCwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgIDEwNFx0ICAgICAgICAgICAgdGhpcy52YWxpZCA9IHZhbGlkO1xuICAgMTA1XHQgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgMTA2XHQgICAgICAgIH1cbiAgIDEwN1x0ICAgICAgICBcbiAgIDEwOFx0ICAgICAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKCkgeyByZXR1cm4gdmFsaWQ7IH1cbiAgIDEwOVx0ICAgICAgICBwdWJsaWMgU3RyaW5nIGdldE1lc3NhZ2UoKSB7IHJldHVybiBtZXNzYWdlOyB9XG4gICAxMTBcdCAgICB9XG4gICAxMTFcdH1cbi4uLlxuUGF0aDogc3JjL21vZGVsL0RyYXduTGluZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbW9kZWw7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgRHJhd25MaW5lIGV4dGVuZHMgRHJhd25TaGFwZSB7XG4gICAgIDRcdCAgICBcbiAgICAgNVx0ICAgIHB1YmxpYyBEcmF3bkxpbmUoZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgIDZcdCAgICAgICAgc3VwZXIoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFksIFwiTElORVwiKTtcbiAgICAgN1x0ICAgIH1cbiAgICAgOFx0ICAgIFxuICAgICA5XHQgICAgQE92ZXJyaWRlXG4gICAgMTBcdCAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDExXHQgICAgICAgIC8vIEZvciBsaW5lcywgd2UgZG9uJ3QgdHlwaWNhbGx5IGNoZWNrIGlmIHRoZXkgY29udGFpbiBwb2ludHNcbiAgICAxMlx0ICAgICAgICAvLyBUaGlzIG1ldGhvZCBpcyBtYWlubHkgdXNlZCBmb3IgY2lyY2xlc1xuICAgIDEzXHQgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAxNFx0ICAgIH1cbiAgICAxNVx0ICAgIFxuICAgIDE2XHQgICAgLyoqXG4gICAgMTdcdCAgICAgKiBHZXQgdGhlIHN0YXJ0IHBvaW50IG9mIHRoZSBsaW5lXG4gICAgMThcdCAgICAgKi9cbiAgICAxOVx0ICAgIHB1YmxpYyBkb3VibGVbXSBnZXRTdGFydFBvaW50KCkge1xuICAgIDIwXHQgICAgICAgIHJldHVybiBuZXcgZG91YmxlW117c3RhcnRYLCBzdGFydFl9O1xuICAgIDIxXHQgICAgfVxuICAgIDIyXHQgICAgXG4gICAgMjNcdCAgICAvKipcbiAgICAyNFx0ICAgICAqIEdldCB0aGUgZW5kIHBvaW50IG9mIHRoZSBsaW5lXG4gICAgMjVcdCAgICAgKi9cbiAgICAyNlx0ICAgIHB1YmxpYyBkb3VibGVbXSBnZXRFbmRQb2ludCgpIHtcbiAgICAyN1x0ICAgICAgICByZXR1cm4gbmV3IGRvdWJsZVtde2VuZFgsIGVuZFl9O1xuICAgIDI4XHQgICAgfVxuICAgIDI5XHR9XG4uLi5cblBhdGg6IHNyYy9tb2RlbC9EcmF3blNoYXBlLmphdmFcbiAgICAgMVx0cGFja2FnZSBtb2RlbDtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBBYnN0cmFjdCBiYXNlIGNsYXNzIGZvciBzdG9yaW5nIGluZm9ybWF0aW9uIGFib3V0IGRyYXduIHNoYXBlc1xuICAgICA1XHQgKi9cbiAgICAgNlx0cHVibGljIGFic3RyYWN0IGNsYXNzIERyYXduU2hhcGUge1xuICAgICA3XHQgICAgcHJvdGVjdGVkIGRvdWJsZSBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWTtcbiAgICAgOFx0ICAgIHByb3RlY3RlZCBTdHJpbmcgc2hhcGVUeXBlO1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBwdWJsaWMgRHJhd25TaGFwZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFksIFN0cmluZyBzaGFwZVR5cGUpIHtcbiAgICAxMVx0ICAgICAgICB0aGlzLnN0YXJ0WCA9IHN0YXJ0WDtcbiAgICAxMlx0ICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTtcbiAgICAxM1x0ICAgICAgICB0aGlzLmVuZFggPSBlbmRYO1xuICAgIDE0XHQgICAgICAgIHRoaXMuZW5kWSA9IGVuZFk7XG4gICAgMTVcdCAgICAgICAgdGhpcy5zaGFwZVR5cGUgPSBzaGFwZVR5cGU7XG4gICAgMTZcdCAgICB9XG4gICAgMTdcdCAgICBcbiAgICAxOFx0ICAgIC8vIEdldHRlcnNcbiAgICAxOVx0ICAgIHB1YmxpYyBkb3VibGUgZ2V0U3RhcnRYKCkgeyByZXR1cm4gc3RhcnRYOyB9XG4gICAgMjBcdCAgICBwdWJsaWMgZG91YmxlIGdldFN0YXJ0WSgpIHsgcmV0dXJuIHN0YXJ0WTsgfVxuICAgIDIxXHQgICAgcHVibGljIGRvdWJsZSBnZXRFbmRYKCkgeyByZXR1cm4gZW5kWDsgfVxuICAgIDIyXHQgICAgcHVibGljIGRvdWJsZSBnZXRFbmRZKCkgeyByZXR1cm4gZW5kWTsgfVxuICAgIDIzXHQgICAgcHVibGljIFN0cmluZyBnZXRTaGFwZVR5cGUoKSB7IHJldHVybiBzaGFwZVR5cGU7IH1cbiAgICAyNFx0ICAgIFxuICAgIDI1XHQgICAgLy8gQWJzdHJhY3QgbWV0aG9kcyB0byBiZSBpbXBsZW1lbnRlZCBieSBzcGVjaWZpYyBzaGFwZXNcbiAgICAyNlx0ICAgIHB1YmxpYyBhYnN0cmFjdCBib29sZWFuIGNvbnRhaW5zUG9pbnQoZG91YmxlIHgsIGRvdWJsZSB5KTtcbiAgICAyN1x0fVxuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9SZWN0YW5nbGVGYWN0b3J5LmphdmFcbiAgICAgMVx0cGFja2FnZSBGYWN0b3J5O1xuICAgICAyXHRcbiAgICAgM1x0cHVibGljIGNsYXNzIFJlY3RhbmdsZUZhY3Rvcnkge1xuICAgICA0XHR9XG4uLi5cblBhdGg6IHNyYy9GYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBhYnN0cmFjdCBjbGFzcyBTaGFwZUZhY3Rvcnkge1xuICAgICA0XHQgICAgcHVibGljIGFic3RyYWN0IFNoYXBlIGdldFNoYXBlKCk7XG4gICAgIDVcdH1cbi4uLlxuUGF0aDogc3JjL0ZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdHB1YmxpYyBjbGFzcyBDaXJjbGVGYWN0b3J5IGV4dGVuZHMgU2hhcGVGYWN0b3J5e1xuICAgICA0XHQgICAgQE92ZXJyaWRlXG4gICAgIDVcdCAgICBwdWJsaWMgU2hhcGUgZ2V0U2hhcGUoKSB7XG4gICAgIDZcdCAgICAgICAgcmV0dXJuIG5ldyBDaXJjbGVTaGFwZSgpO1xuICAgICA3XHQgICAgfVxuICAgICA4XHR9XG4uLi5cblBhdGg6IHNyYy9tb2RlbC9EcmF3bkNpcmNsZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbW9kZWw7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgdXRpbC5HZW9tZXRyeVV0aWxzO1xuICAgICA0XHRcbiAgICAgNVx0cHVibGljIGNsYXNzIERyYXduQ2lyY2xlIGV4dGVuZHMgRHJhd25TaGFwZSB7XG4gICAgIDZcdCAgICBwcml2YXRlIGRvdWJsZSBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXM7XG4gICAgIDdcdCAgICBcbiAgICAgOFx0ICAgIHB1YmxpYyBEcmF3bkNpcmNsZShkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAgOVx0ICAgICAgICBzdXBlcihzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSwgXCJDSVJDTEVcIik7XG4gICAgMTBcdCAgICAgICAgdGhpcy5yYWRpdXMgPSBNYXRoLmFicyhlbmRYIC0gc3RhcnRYKSAvIDI7XG4gICAgMTFcdCAgICAgICAgdGhpcy5jZW50ZXJYID0gc3RhcnRYO1xuICAgIDEyXHQgICAgICAgIHRoaXMuY2VudGVyWSA9IHN0YXJ0WTtcbiAgICAxM1x0ICAgIH1cbiAgICAxNFx0ICAgIFxuICAgIDE1XHQgICAgQE92ZXJyaWRlXG4gICAgMTZcdCAgICBwdWJsaWMgYm9vbGVhbiBjb250YWluc1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDE3XHQgICAgICAgIHJldHVybiBHZW9tZXRyeVV0aWxzLmlzUG9pbnRJbkNpcmNsZSh4LCB5LCBjZW50ZXJYLCBjZW50ZXJZLCByYWRpdXMpO1xuICAgIDE4XHQgICAgfVxuICAgIDE5XHQgICAgXG4gICAgMjBcdCAgICBwdWJsaWMgZG91YmxlIGdldENlbnRlclgoKSB7IHJldHVybiBjZW50ZXJYOyB9XG4gICAgMjFcdCAgICBwdWJsaWMgZG91YmxlIGdldENlbnRlclkoKSB7IHJldHVybiBjZW50ZXJZOyB9XG4gICAgMjJcdCAgICBwdWJsaWMgZG91YmxlIGdldFJhZGl1cygpIHsgcmV0dXJuIHJhZGl1czsgfVxuICAgIDIzXHR9XG4uLi5cblBhdGg6IHNyYy91dGlsL0dlb21ldHJ5VXRpbHMuamF2YVxuICAgICAxXHRwYWNrYWdlIHV0aWw7XG4gICAgIDJcdFxuICAgICAzXHRwdWJsaWMgY2xhc3MgR2VvbWV0cnlVdGlscyB7XG4gICAgIDRcdCAgICBcbiAgICAgNVx0ICAgIC8qKlxuICAgICA2XHQgICAgICogQ2hlY2tzIGlmIGEgcG9pbnQgaXMgaW5zaWRlIGEgY2lyY2xlXG4gICAgIDdcdCAgICAgKiBAcGFyYW0gcG9pbnRYIFggY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnRcbiAgICAgOFx0ICAgICAqIEBwYXJhbSBwb2ludFkgWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludFxuICAgICA5XHQgICAgICogQHBhcmFtIGNpcmNsZUNlbnRlclggWCBjb29yZGluYXRlIG9mIGNpcmNsZSBjZW50ZXJcbiAgICAxMFx0ICAgICAqIEBwYXJhbSBjaXJjbGVDZW50ZXJZIFkgY29vcmRpbmF0ZSBvZiBjaXJjbGUgY2VudGVyXG4gICAgMTFcdCAgICAgKiBAcGFyYW0gcmFkaXVzIENpcmNsZSByYWRpdXNcbiAgICAxMlx0ICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwb2ludCBpcyBpbnNpZGUgdGhlIGNpcmNsZVxuICAgIDEzXHQgICAgICovXG4gICAgMTRcdCAgICBwdWJsaWMgc3RhdGljIGJvb2xlYW4gaXNQb2ludEluQ2lyY2xlKGRvdWJsZSBwb2ludFgsIGRvdWJsZSBwb2ludFksIFxuICAgIDE1XHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIGNpcmNsZUNlbnRlclgsIGRvdWJsZSBjaXJjbGVDZW50ZXJZLCBcbiAgICAxNlx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSByYWRpdXMpIHtcbiAgICAxN1x0ICAgICAgICBkb3VibGUgZGlzdGFuY2UgPSBNYXRoLnNxcnQoTWF0aC5wb3cocG9pbnRYIC0gY2lyY2xlQ2VudGVyWCwgMikgKyBcbiAgICAxOFx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE1hdGgucG93KHBvaW50WSAtIGNpcmNsZUNlbnRlclksIDIpKTtcbiAgICAxOVx0ICAgICAgICByZXR1cm4gZGlzdGFuY2UgPD0gcmFkaXVzO1xuICAgIDIwXHQgICAgfVxuICAgIDIxXHQgICAgXG4gICAgMjJcdCAgICAvKipcbiAgICAyM1x0ICAgICAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdHdvIHBvaW50c1xuICAgIDI0XHQgICAgICogQHBhcmFtIHgxIFggY29vcmRpbmF0ZSBvZiBmaXJzdCBwb2ludFxuICAgIDI1XHQgICAgICogQHBhcmFtIHkxIFkgY29vcmRpbmF0ZSBvZiBmaXJzdCBwb2ludFxuICAgIDI2XHQgICAgICogQHBhcmFtIHgyIFggY29vcmRpbmF0ZSBvZiBzZWNvbmQgcG9pbnRcbiAgICAyN1x0ICAgICAqIEBwYXJhbSB5MiBZIGNvb3JkaW5hdGUgb2Ygc2Vjb25kIHBvaW50XG4gICAgMjhcdCAgICAgKiBAcmV0dXJuIGRpc3RhbmNlIGJldHdlZW4gdGhlIHBvaW50c1xuICAgIDI5XHQgICAgICovXG4gICAgMzBcdCAgICBwdWJsaWMgc3RhdGljIGRvdWJsZSBkaXN0YW5jZShkb3VibGUgeDEsIGRvdWJsZSB5MSwgZG91YmxlIHgyLCBkb3VibGUgeTIpIHtcbiAgICAzMVx0ICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIDMyXHQgICAgfVxuICAgIDMzXHR9XG4uLi5cblBhdGg6IC5naXRpZ25vcmVcbiAgICAgMVx0IyMjIEludGVsbGlKIElERUEgIyMjXG4gICAgIDJcdG91dC9cbiAgICAgM1x0ISoqL3NyYy9tYWluLyoqL291dC9cbiAgICAgNFx0ISoqL3NyYy90ZXN0LyoqL291dC9cbiAgICAgNVx0XG4gICAgIDZcdCMjIyBFY2xpcHNlICMjI1xuICAgICA3XHQuYXB0X2dlbmVyYXRlZFxuICAgICA4XHQuY2xhc3NwYXRoXG4gICAgIDlcdC5mYWN0b3J5cGF0aFxuICAgIDEwXHQucHJvamVjdFxuICAgIDExXHQuc2V0dGluZ3NcbiAgICAxMlx0LnNwcmluZ0JlYW5zXG4gICAgMTNcdC5zdHM0LWNhY2hlXG4gICAgMTRcdGJpbi9cbiAgICAxNVx0ISoqL3NyYy9tYWluLyoqL2Jpbi9cbiAgICAxNlx0ISoqL3NyYy90ZXN0LyoqL2Jpbi9cbiAgICAxN1x0XG4gICAgMThcdCMjIyBOZXRCZWFucyAjIyNcbiAgICAxOVx0L25icHJvamVjdC9wcml2YXRlL1xuICAgIDIwXHQvbmJidWlsZC9cbiAgICAyMVx0L2Rpc3QvXG4gICAgMjJcdC9uYmRpc3QvXG4gICAgMjNcdC8ubmItZ3JhZGxlL1xuICAgIDI0XHRcbiAgICAyNVx0IyMjIFZTIENvZGUgIyMjXG4gICAgMjZcdC52c2NvZGUvXG4gICAgMjdcdFxuICAgIDI4XHQjIyMgTWFjIE9TICMjI1xuICAgIDI5XHQuRFNfU3RvcmUuLi5cbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjVmMDQxMjhiLWFkYzItNGFkMi1iNTdlLTQ5NWYyOWQ5N2I4Yzt0b29sdV8wMU5qSE4zNHJEVVFFODdVOWpIZHFRN2UiOnsicmVxdWVzdElkIjoiNWYwNDEyOGItYWRjMi00YWQyLWI1N2UtNDk1ZjI5ZDk3YjhjIiwidG9vbFVzZUlkIjoidG9vbHVfMDFOakhOMzRyRFVRRTg3VTlqSGRxUTdlIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9vYnNlcnZlci9PYnNlcnZhYmxlLmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOWFjN2E5ZTMtZmI4Yy00NzIxLTkyZDItNTExYmFmMjZlMjFkO3Rvb2x1XzAxNXV3eFdjcXJrTjJHNFBIWkxIalRIRCI6eyJyZXF1ZXN0SWQiOiI5YWM3YTllMy1mYjhjLTQ3MjEtOTJkMi01MTFiYWYyNmUyMWQiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTV1d3hXY3Fya04yRzRQSFpMSGpUSEQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL29ic2VydmVyL09ic2VydmVyLmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNzZlZmU3NDgtZDNhZi00ODA1LTgxZGItMWUzZTNiODE1ZGQ2O3Rvb2x1XzAxNTVKRGtIVVBzVWo4WWJZZ05qb2RoZyI6eyJyZXF1ZXN0SWQiOiI3NmVmZTc0OC1kM2FmLTQ4MDUtODFkYi0xZTNlM2I4MTVkZDYiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTU1SkRrSFVQc1VqOFliWWdOam9kaGciLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2V2ZW50cy9Ub29sYmFyRXZlbnQuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIxODVhNmVmNC1mMzQ2LTQ5NmMtODZhOS0zZDdmYmRkYjMzNGU7dG9vbHVfMDFMaEdmUG5iWHhyeEJXVnF6QWF6UzZhIjp7InJlcXVlc3RJZCI6IjE4NWE2ZWY0LWYzNDYtNDk2Yy04NmE5LTNkN2ZiZGRiMzM0ZSIsInRvb2xVc2VJZCI6InRvb2x1XzAxTGhHZlBuYlh4cnhCV1ZxekFhelM2YSIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvc3RyYXRlZ3kvRHJhd2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiOThiOTFiMzQtZjdjNS00ZjRmLTk2NTctNTUxMmM2OGMxODdiO3Rvb2x1XzAxVkJOYnNHM3dDRWREaU5kMUdzNkE5SyI6eyJyZXF1ZXN0SWQiOiI5OGI5MWIzNC1mN2M1LTRmNGYtOTY1Ny01NTEyYzY4YzE4N2IiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMVZCTmJzRzN3Q0VkRGlOZDFHczZBOUsiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL3N0cmF0ZWd5L0NpcmNsZURyYXdpbmdTdHJhdGVneS5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjZhMzhlNzE5LWY4Y2UtNDM1YS04YmZkLTFiNWMzOTRiNGViNTt0b29sdV8wMU1zQ01qTk1nU0NDZE1nTXhSZnlpUnciOnsicmVxdWVzdElkIjoiNmEzOGU3MTktZjhjZS00MzVhLThiZmQtMWI1YzM5NGI0ZWI1IiwidG9vbFVzZUlkIjoidG9vbHVfMDFNc0NNak5NZ1NDQ2RNZ014UmZ5aVJ3IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9zdHJhdGVneS9MaW5lRHJhd2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiY2Q3NGY1MjctODU3OC00N2MwLThhOWItYzQyZGEyMmU4YTQ5O3Rvb2x1XzAxOXVlaVBoYm44YUdIRlEyZVY3a3BmZCI6eyJyZXF1ZXN0SWQiOiJjZDc0ZjUyNy04NTc4LTQ3YzAtOGE5Yi1jNDJkYTIyZThhNDkiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTl1ZWlQaGJuOGFHSEZRMmVWN2twZmQiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL3N0cmF0ZWd5L1JlY3RhbmdsZURyYXdpbmdTdHJhdGVneS5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImM4YzdjYmU0LTU5NDUtNDRlOS04NDQ2LTE3MjgzM2RlMmNmMTt0b29sdV8wMTJOelF2eW9OVG9tS3JXTE1Oc3pqdW0iOnsicmVxdWVzdElkIjoiYzhjN2NiZTQtNTk0NS00NGU5LTg0NDYtMTcyODMzZGUyY2YxIiwidG9vbFVzZUlkIjoidG9vbHVfMDEyTnpRdnlvTlRvbUtyV0xNTnN6anVtIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy91aS9PYnNlcnZhYmxlVG9vbGJhci5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImNmMjk4NzFkLTQyMWUtNDUxMC05ZWVjLTg3OTk3NDk3ZWQzMzt0b29sdV8wMVVucDFjYjNkeTNoRFNpS2hpenpOcW0iOnsicmVxdWVzdElkIjoiY2YyOTg3MWQtNDIxZS00NTEwLTllZWMtODc5OTc0OTdlZDMzIiwidG9vbFVzZUlkIjoidG9vbHVfMDFVbnAxY2IzZHkzaERTaUtoaXp6TnFtIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy91aS9EcmF3aW5nQ2FudmFzLmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiNTA3ZGNmYTctYmVjNy00OTM4LThjZTQtNjY3ZGE5ZGE5MWY5O3Rvb2x1XzAxOXFHaDZ0dDc1alVNREpVTW5mZ2g0QyI6eyJyZXF1ZXN0SWQiOiI1MDdkY2ZhNy1iZWM3LTQ5MzgtOGNlNC02NjdkYTlkYTkxZjkiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMTlxR2g2dHQ3NWpVTURKVU1uZmdoNEMiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL01haW5PYnNlcnZlci5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjQ3ZWJiYjQ2LTljY2YtNGQyZC1hYzc5LWRiNzE1ZTc3OTBkODt0b29sdV8wMVRUMmRKc3JiZ0p5cG44WEhpdEx0dmsiOnsicmVxdWVzdElkIjoiNDdlYmJiNDYtOWNjZi00ZDJkLWFjNzktZGI3MTVlNzc5MGQ4IiwidG9vbFVzZUlkIjoidG9vbHVfMDFUVDJkSnNyYmdKeXBuOFhIaXRMdHZrIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL2V2ZW50cy9Ub29sYmFyRXZlbnQuamF2YVxuICAgICAxXHRwYWNrYWdlIGV2ZW50cztcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBFdmVudHMgdGhhdCBjYW4gYmUgdHJpZ2dlcmVkIGJ5IHRoZSB0b29sYmFyXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgY2xhc3MgVG9vbGJhckV2ZW50IHtcbiAgICAgN1x0ICAgIFxuICAgICA4XHQgICAgcHVibGljIGVudW0gRXZlbnRUeXBlIHtcbiAgICAgOVx0ICAgICAgICBTSEFQRV9TRUxFQ1RFRCxcbiAgICAxMFx0ICAgICAgICBDTEVBUl9DQU5WQVNcbiAgICAxMVx0ICAgIH1cbiAgICAxMlx0ICAgIFxuICAgIDEzXHQgICAgcHJpdmF0ZSBmaW5hbCBFdmVudFR5cGUgdHlwZTtcbiAgICAxNFx0ICAgIHByaXZhdGUgZmluYWwgT2JqZWN0IGRhdGE7XG4gICAgMTVcdCAgICBcbiAgICAxNlx0ICAgIHB1YmxpYyBUb29sYmFyRXZlbnQoRXZlbnRUeXBlIHR5cGUsIE9iamVjdCBkYXRhKSB7XG4gICAgMTdcdCAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICAxOFx0ICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIDE5XHQgICAgfVxuICAgIDIwXHQgICAgXG4gICAgMjFcdCAgICBwdWJsaWMgVG9vbGJhckV2ZW50KEV2ZW50VHlwZSB0eXBlKSB7XG4gICAgMjJcdCAgICAgICAgdGhpcyh0eXBlLCBudWxsKTtcbiAgICAyM1x0ICAgIH1cbiAgICAyNFx0ICAgIFxuICAgIDI1XHQgICAgcHVibGljIEV2ZW50VHlwZSBnZXRUeXBlKCkge1xuICAgIDI2XHQgICAgICAgIHJldHVybiB0eXBlO1xuICAgIDI3XHQgICAgfVxuICAgIDI4XHQgICAgXG4gICAgMjlcdCAgICBwdWJsaWMgT2JqZWN0IGdldERhdGEoKSB7XG4gICAgMzBcdCAgICAgICAgcmV0dXJuIGRhdGE7XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdCAgICBcbiAgICAzM1x0ICAgIEBTdXBwcmVzc1dhcm5pbmdzKFwidW5jaGVja2VkXCIpXG4gICAgMzRcdCAgICBwdWJsaWMgPFQ+IFQgZ2V0RGF0YShDbGFzczxUPiBjbGF6eikge1xuICAgIDM1XHQgICAgICAgIGlmIChkYXRhICE9IG51bGwgJiYgY2xhenouaXNJbnN0YW5jZShkYXRhKSkge1xuICAgIDM2XHQgICAgICAgICAgICByZXR1cm4gKFQpIGRhdGE7XG4gICAgMzdcdCAgICAgICAgfVxuICAgIDM4XHQgICAgICAgIHJldHVybiBudWxsO1xuICAgIDM5XHQgICAgfVxuICAgIDQwXHR9XG4uLi5cblBhdGg6IHNyYy91aS9PYnNlcnZhYmxlVG9vbGJhci5qYXZhXG4gICAgIDFcdHBhY2thZ2UgdWk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZXZlbnRzLlRvb2xiYXJFdmVudDtcbiAgICAgNFx0aW1wb3J0IG9ic2VydmVyLk9ic2VydmFibGU7XG4gICAgIDVcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNlx0aW1wb3J0IHN0cmF0ZWd5Lio7XG4gICAgIDdcdGltcG9ydCBqYXZhZnguZ2VvbWV0cnkuSW5zZXRzO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQnV0dG9uO1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5IQm94O1xuICAgIDEwXHRcbiAgICAxMVx0aW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG4gICAgMTJcdGltcG9ydCBqYXZhLnV0aWwuTGlzdDtcbiAgICAxM1x0XG4gICAgMTRcdC8qKlxuICAgIDE1XHQgKiBPYnNlcnZhYmxlIHRvb2xiYXIgdGhhdCBub3RpZmllcyBvYnNlcnZlcnMgd2hlbiB0b29scyBhcmUgc2VsZWN0ZWRcbiAgICAxNlx0ICovXG4gICAgMTdcdHB1YmxpYyBjbGFzcyBPYnNlcnZhYmxlVG9vbGJhciBleHRlbmRzIEhCb3ggaW1wbGVtZW50cyBPYnNlcnZhYmxlPFRvb2xiYXJFdmVudD4ge1xuICAgIDE4XHQgICAgXG4gICAgMTlcdCAgICBwcml2YXRlIGZpbmFsIExpc3Q8T2JzZXJ2ZXI8VG9vbGJhckV2ZW50Pj4gb2JzZXJ2ZXJzO1xuICAgIDIwXHQgICAgcHJpdmF0ZSBEcmF3aW5nU3RyYXRlZ3kgY3VycmVudFN0cmF0ZWd5O1xuICAgIDIxXHQgICAgXG4gICAgMjJcdCAgICAvLyBEcmF3aW5nIHN0cmF0ZWdpZXNcbiAgICAyM1x0ICAgIHByaXZhdGUgZmluYWwgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5IHJlY3RhbmdsZVN0cmF0ZWd5O1xuICAgIDI0XHQgICAgcHJpdmF0ZSBmaW5hbCBDaXJjbGVEcmF3aW5nU3RyYXRlZ3kgY2lyY2xlU3RyYXRlZ3k7XG4gICAgMjVcdCAgICBwcml2YXRlIGZpbmFsIExpbmVEcmF3aW5nU3RyYXRlZ3kgbGluZVN0cmF0ZWd5O1xuICAgIDI2XHQgICAgXG4gICAgMjdcdCAgICBwdWJsaWMgT2JzZXJ2YWJsZVRvb2xiYXIoKSB7XG4gICAgMjhcdCAgICAgICAgc3VwZXIoMTApO1xuICAgIDI5XHQgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgMzBcdCAgICAgICAgdGhpcy5zZXRQYWRkaW5nKG5ldyBJbnNldHMoMTApKTtcbiAgICAzMVx0ICAgICAgICBcbiAgICAzMlx0ICAgICAgICAvLyBJbml0aWFsaXplIHN0cmF0ZWdpZXNcbiAgICAzM1x0ICAgICAgICB0aGlzLnJlY3RhbmdsZVN0cmF0ZWd5ID0gbmV3IFJlY3RhbmdsZURyYXdpbmdTdHJhdGVneSgpO1xuICAgIDM0XHQgICAgICAgIHRoaXMuY2lyY2xlU3RyYXRlZ3kgPSBuZXcgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5KCk7XG4gICAgMzVcdCAgICAgICAgdGhpcy5saW5lU3RyYXRlZ3kgPSBuZXcgTGluZURyYXdpbmdTdHJhdGVneSgpO1xuICAgIDM2XHQgICAgICAgIFxuICAgIDM3XHQgICAgICAgIC8vIFNldCBkZWZhdWx0IHN0cmF0ZWd5XG4gICAgMzhcdCAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSByZWN0YW5nbGVTdHJhdGVneTtcbiAgICAzOVx0ICAgICAgICBcbiAgICA0MFx0ICAgICAgICBpbml0aWFsaXplQnV0dG9ucygpO1xuICAgIDQxXHQgICAgfVxuICAgIDQyXHQgICAgXG4gICAgNDNcdCAgICBwcml2YXRlIHZvaWQgaW5pdGlhbGl6ZUJ1dHRvbnMoKSB7XG4gICAgNDRcdCAgICAgICAgLy8gQ3JlYXRlIGJ1dHRvbnNcbiAgICA0NVx0ICAgICAgICBCdXR0b24gcmVjdGFuZ2xlQnRuID0gbmV3IEJ1dHRvbihcIlJlY3RhbmdsZVwiKTtcbiAgICA0Nlx0ICAgICAgICBCdXR0b24gY2lyY2xlQnRuID0gbmV3IEJ1dHRvbihcIkNlcmNsZVwiKTtcbiAgICA0N1x0ICAgICAgICBCdXR0b24gbGluZUJ0biA9IG5ldyBCdXR0b24oXCJMaWduZVwiKTtcbiAgICA0OFx0ICAgICAgICBCdXR0b24gY2xlYXJCdG4gPSBuZXcgQnV0dG9uKFwiRWZmYWNlclwiKTtcbiAgICA0OVx0ICAgICAgICBcbiAgICA1MFx0ICAgICAgICAvLyBTZXQgdXAgZXZlbnQgaGFuZGxlcnNcbiAgICA1MVx0ICAgICAgICByZWN0YW5nbGVCdG4uc2V0T25BY3Rpb24oZSAtPiBzZWxlY3RTdHJhdGVneShyZWN0YW5nbGVTdHJhdGVneSkpO1xuICAgIDUyXHQgICAgICAgIGNpcmNsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IHNlbGVjdFN0cmF0ZWd5KGNpcmNsZVN0cmF0ZWd5KSk7XG4gICAgNTNcdCAgICAgICAgbGluZUJ0bi5zZXRPbkFjdGlvbihlIC0+IHNlbGVjdFN0cmF0ZWd5KGxpbmVTdHJhdGVneSkpO1xuICAgIDU0XHQgICAgICAgIGNsZWFyQnRuLnNldE9uQWN0aW9uKGUgLT4gY2xlYXJDYW52YXMoKSk7XG4gICAgNTVcdCAgICAgICAgXG4gICAgNTZcdCAgICAgICAgLy8gQWRkIGJ1dHRvbnMgdG8gdG9vbGJhclxuICAgIDU3XHQgICAgICAgIHRoaXMuZ2V0Q2hpbGRyZW4oKS5hZGRBbGwocmVjdGFuZ2xlQnRuLCBjaXJjbGVCdG4sIGxpbmVCdG4sIGNsZWFyQnRuKTtcbiAgICA1OFx0ICAgIH1cbiAgICA1OVx0ICAgIFxuICAgIDYwXHQgICAgcHJpdmF0ZSB2b2lkIHNlbGVjdFN0cmF0ZWd5KERyYXdpbmdTdHJhdGVneSBzdHJhdGVneSkge1xuICAgIDYxXHQgICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgNjJcdCAgICAgICAgVG9vbGJhckV2ZW50IGV2ZW50ID0gbmV3IFRvb2xiYXJFdmVudChUb29sYmFyRXZlbnQuRXZlbnRUeXBlLlNIQVBFX1NFTEVDVEVELCBzdHJhdGVneSk7XG4gICAgNjNcdCAgICAgICAgbm90aWZ5T2JzZXJ2ZXJzKGV2ZW50KTtcbiAgICA2NFx0ICAgIH1cbiAgICA2NVx0ICAgIFxuICAgIDY2XHQgICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ2FudmFzKCkge1xuICAgIDY3XHQgICAgICAgIFRvb2xiYXJFdmVudCBldmVudCA9IG5ldyBUb29sYmFyRXZlbnQoVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5DTEVBUl9DQU5WQVMpO1xuICAgIDY4XHQgICAgICAgIG5vdGlmeU9ic2VydmVycyhldmVudCk7XG4gICAgNjlcdCAgICB9XG4gICAgNzBcdCAgICBcbiAgICA3MVx0ICAgIHB1YmxpYyBEcmF3aW5nU3RyYXRlZ3kgZ2V0Q3VycmVudFN0cmF0ZWd5KCkge1xuICAgIDcyXHQgICAgICAgIHJldHVybiBjdXJyZW50U3RyYXRlZ3k7XG4gICAgNzNcdCAgICB9XG4gICAgNzRcdCAgICBcbiAgICA3NVx0ICAgIEBPdmVycmlkZVxuICAgIDc2XHQgICAgcHVibGljIHZvaWQgYWRkT2JzZXJ2ZXIoT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiBvYnNlcnZlcikge1xuICAgIDc3XHQgICAgICAgIG9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgIDc4XHQgICAgfVxuICAgIDc5XHQgICAgXG4gICAgODBcdCAgICBAT3ZlcnJpZGVcbiAgICA4MVx0ICAgIHB1YmxpYyB2b2lkIHJlbW92ZU9ic2VydmVyKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIpIHtcbiAgICA4Mlx0ICAgICAgICBvYnNlcnZlcnMucmVtb3ZlKG9ic2VydmVyKTtcbiAgICA4M1x0ICAgIH1cbiAgICA4NFx0ICAgIFxuICAgIDg1XHQgICAgQE92ZXJyaWRlXG4gICAgODZcdCAgICBwdWJsaWMgdm9pZCBub3RpZnlPYnNlcnZlcnMoVG9vbGJhckV2ZW50IGRhdGEpIHtcbiAgICA4N1x0ICAgICAgICBmb3IgKE9ic2VydmVyPFRvb2xiYXJFdmVudD4gb2JzZXJ2ZXIgOiBvYnNlcnZlcnMpIHtcbiAgICA4OFx0ICAgICAgICAgICAgb2JzZXJ2ZXIudXBkYXRlKGRhdGEpO1xuICAgIDg5XHQgICAgICAgIH1cbiAgICA5MFx0ICAgIH1cbiAgICA5MVx0fVxuLi4uXG5QYXRoOiBzcmMvTWFpbk9ic2VydmVyLmphdmFcbiAgICAgMVx0aW1wb3J0IHVpLkRyYXdpbmdDYW52YXM7XG4gICAgIDJcdGltcG9ydCB1aS5PYnNlcnZhYmxlVG9vbGJhcjtcbiAgICAgM1x0aW1wb3J0IGphdmFmeC5hcHBsaWNhdGlvbi5BcHBsaWNhdGlvbjtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5TY2VuZTtcbiAgICAgNVx0aW1wb3J0IGphdmFmeC5zY2VuZS5sYXlvdXQuQm9yZGVyUGFuZTtcbiAgICAgNlx0aW1wb3J0IGphdmFmeC5zdGFnZS5TdGFnZTtcbiAgICAgN1x0XG4gICAgIDhcdC8qKlxuICAgICA5XHQgKiBNYWluIGFwcGxpY2F0aW9uIGNsYXNzIHVzaW5nIE9ic2VydmVyIHBhdHRlcm4gd2l0aCBTdHJhdGVneSBmb3IgZHJhd2luZ1xuICAgIDEwXHQgKi9cbiAgICAxMVx0cHVibGljIGNsYXNzIE1haW5PYnNlcnZlciBleHRlbmRzIEFwcGxpY2F0aW9uIHtcbiAgICAxMlx0ICAgIFxuICAgIDEzXHQgICAgQE92ZXJyaWRlXG4gICAgMTRcdCAgICBwdWJsaWMgdm9pZCBzdGFydChTdGFnZSBwcmltYXJ5U3RhZ2UpIHtcbiAgICAxNVx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0VGl0bGUoXCJEZXNzaW4gZGUgRm9ybWVzIEfDqW9tw6l0cmlxdWVzIC0gT2JzZXJ2ZXIgUGF0dGVyblwiKTtcbiAgICAxNlx0ICAgICAgICBcbiAgICAxN1x0ICAgICAgICAvLyBDcmVhdGUgdGhlIG9ic2VydmFibGUgdG9vbGJhclxuICAgIDE4XHQgICAgICAgIE9ic2VydmFibGVUb29sYmFyIHRvb2xiYXIgPSBuZXcgT2JzZXJ2YWJsZVRvb2xiYXIoKTtcbiAgICAxOVx0ICAgICAgICBcbiAgICAyMFx0ICAgICAgICAvLyBDcmVhdGUgdGhlIGRyYXdpbmcgY2FudmFzIChvYnNlcnZlcilcbiAgICAyMVx0ICAgICAgICBEcmF3aW5nQ2FudmFzIGNhbnZhcyA9IG5ldyBEcmF3aW5nQ2FudmFzKDgwMCwgNjAwKTtcbiAgICAyMlx0ICAgICAgICBcbiAgICAyM1x0ICAgICAgICAvLyBSZWdpc3RlciBjYW52YXMgYXMgb2JzZXJ2ZXIgb2YgdG9vbGJhclxuICAgIDI0XHQgICAgICAgIHRvb2xiYXIuYWRkT2JzZXJ2ZXIoY2FudmFzKTtcbiAgICAyNVx0ICAgICAgICBcbiAgICAyNlx0ICAgICAgICAvLyBTZXQgdXAgdGhlIGxheW91dFxuICAgIDI3XHQgICAgICAgIEJvcmRlclBhbmUgcm9vdCA9IG5ldyBCb3JkZXJQYW5lKCk7XG4gICAgMjhcdCAgICAgICAgcm9vdC5zZXRUb3AodG9vbGJhcik7XG4gICAgMjlcdCAgICAgICAgcm9vdC5zZXRDZW50ZXIoY2FudmFzKTtcbiAgICAzMFx0ICAgICAgICBcbiAgICAzMVx0ICAgICAgICAvLyBDcmVhdGUgYW5kIHNob3cgc2NlbmVcbiAgICAzMlx0ICAgICAgICBTY2VuZSBzY2VuZSA9IG5ldyBTY2VuZShyb290LCA4MDAsIDY1MCk7XG4gICAgMzNcdCAgICAgICAgcHJpbWFyeVN0YWdlLnNldFNjZW5lKHNjZW5lKTtcbiAgICAzNFx0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2hvdygpO1xuICAgIDM1XHQgICAgICAgIFxuICAgIDM2XHQgICAgICAgIC8vIEluaXRpYWxpemUgd2l0aCBkZWZhdWx0IHN0cmF0ZWd5XG4gICAgMzdcdCAgICAgICAgY2FudmFzLnVwZGF0ZShuZXcgZXZlbnRzLlRvb2xiYXJFdmVudChcbiAgICAzOFx0ICAgICAgICAgICAgZXZlbnRzLlRvb2xiYXJFdmVudC5FdmVudFR5cGUuU0hBUEVfU0VMRUNURUQsIFxuICAgIDM5XHQgICAgICAgICAgICB0b29sYmFyLmdldEN1cnJlbnRTdHJhdGVneSgpXG4gICAgNDBcdCAgICAgICAgKSk7XG4gICAgNDFcdCAgICB9XG4uLi5cblBhdGg6IHNyYy91aS9EcmF3aW5nQ2FudmFzLmphdmFcbiAgICAgMVx0cGFja2FnZSB1aTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xuICAgICA0XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDVcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNlx0aW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuQ2FudmFzO1xuICAgICA4XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5BbGVydDtcbiAgICAxMFx0aW1wb3J0IGphdmFmeC5zY2VuZS5wYWludC5Db2xvcjtcbiAgICAxMVx0XG4gICAgMTJcdC8qKlxuICAgIDEzXHQgKiBEcmF3aW5nIGNhbnZhcyB0aGF0IG9ic2VydmVzIHRvb2xiYXIgZXZlbnRzIGFuZCBoYW5kbGVzIGRyYXdpbmcgb3BlcmF0aW9uc1xuICAgIDE0XHQgKi9cbiAgICAxNVx0cHVibGljIGNsYXNzIERyYXdpbmdDYW52YXMgZXh0ZW5kcyBDYW52YXMgaW1wbGVtZW50cyBPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IHtcbiAgICAxNlx0ICAgIFxuICAgIDE3XHQgICAgcHJpdmF0ZSBmaW5hbCBHcmFwaGljc0NvbnRleHQgZ2M7XG4gICAgMThcdCAgICBwcml2YXRlIGZpbmFsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXI7XG4gICAgMTlcdCAgICBwcml2YXRlIERyYXdpbmdTdHJhdGVneSBjdXJyZW50U3RyYXRlZ3k7XG4gICAgMjBcdCAgICBwcml2YXRlIGRvdWJsZSBzdGFydFgsIHN0YXJ0WTtcbiAgICAyMVx0ICAgIFxuICAgIDIyXHQgICAgcHVibGljIERyYXdpbmdDYW52YXMoZG91YmxlIHdpZHRoLCBkb3VibGUgaGVpZ2h0KSB7XG4gICAgMjNcdCAgICAgICAgc3VwZXIod2lkdGgsIGhlaWdodCk7XG4gICAgMjRcdCAgICAgICAgdGhpcy5nYyA9IHRoaXMuZ2V0R3JhcGhpY3NDb250ZXh0MkQoKTtcbiAgICAyNVx0ICAgICAgICB0aGlzLnNoYXBlTWFuYWdlciA9IG5ldyBTaGFwZU1hbmFnZXIoKTtcbiAgICAyNlx0ICAgICAgICBcbiAgICAyN1x0ICAgICAgICBzZXR1cEdyYXBoaWNzQ29udGV4dCgpO1xuICAgIDI4XHQgICAgICAgIHNldHVwTW91c2VFdmVudHMoKTtcbiAgICAyOVx0ICAgIH1cbiAgICAzMFx0ICAgIFxuICAgIDMxXHQgICAgcHJpdmF0ZSB2b2lkIHNldHVwR3JhcGhpY3NDb250ZXh0KCkge1xuICAgIDMyXHQgICAgICAgIGdjLnNldFN0cm9rZShDb2xvci5CTEFDSyk7XG4gICAgMzNcdCAgICAgICAgZ2Muc2V0TGluZVdpZHRoKDIpO1xuICAgIDM0XHQgICAgfVxuICAgIDM1XHQgICAgXG4gICAgMzZcdCAgICBwcml2YXRlIHZvaWQgc2V0dXBNb3VzZUV2ZW50cygpIHtcbiAgICAzN1x0ICAgICAgICB0aGlzLnNldE9uTW91c2VQcmVzc2VkKGUgLT4ge1xuICAgIDM4XHQgICAgICAgICAgICBzdGFydFggPSBlLmdldFgoKTtcbiAgICAzOVx0ICAgICAgICAgICAgc3RhcnRZID0gZS5nZXRZKCk7XG4gICAgNDBcdCAgICAgICAgfSk7XG4gICAgNDFcdCAgICAgICAgXG4gICAgNDJcdCAgICAgICAgdGhpcy5zZXRPbk1vdXNlUmVsZWFzZWQoZSAtPiB7XG4gICAgNDNcdCAgICAgICAgICAgIGlmIChjdXJyZW50U3RyYXRlZ3kgIT0gbnVsbCkge1xuICAgIDQ0XHQgICAgICAgICAgICAgICAgZG91YmxlIGVuZFggPSBlLmdldFgoKTtcbiAgICA0NVx0ICAgICAgICAgICAgICAgIGRvdWJsZSBlbmRZID0gZS5nZXRZKCk7XG4gICAgNDZcdCAgICAgICAgICAgICAgICBcbiAgICA0N1x0ICAgICAgICAgICAgICAgIERyYXdpbmdTdHJhdGVneS5EcmF3aW5nUmVzdWx0IHJlc3VsdCA9IFxuICAgIDQ4XHQgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdHJhdGVneS5kcmF3KGdjLCBzaGFwZU1hbmFnZXIsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICA0OVx0ICAgICAgICAgICAgICAgIFxuICAgIDUwXHQgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuaXNTdWNjZXNzKCkgJiYgcmVzdWx0LmdldE1lc3NhZ2UoKSAhPSBudWxsKSB7XG4gICAgNTFcdCAgICAgICAgICAgICAgICAgICAgc2hvd0FsZXJ0KFwiRXJyZXVyIGRlIGRlc3NpblwiLCByZXN1bHQuZ2V0TWVzc2FnZSgpKTtcbiAgICA1Mlx0ICAgICAgICAgICAgICAgIH1cbiAgICA1M1x0ICAgICAgICAgICAgfVxuICAgIDU0XHQgICAgICAgIH0pO1xuICAgIDU1XHQgICAgfVxuICAgIDU2XHQgICAgXG4gICAgNTdcdCAgICBwcml2YXRlIHZvaWQgc2hvd0FsZXJ0KFN0cmluZyB0aXRsZSwgU3RyaW5nIG1lc3NhZ2UpIHtcbiAgICA1OFx0ICAgICAgICBBbGVydCBhbGVydCA9IG5ldyBBbGVydChBbGVydC5BbGVydFR5cGUuV0FSTklORyk7XG4gICAgNTlcdCAgICAgICAgYWxlcnQuc2V0VGl0bGUodGl0bGUpO1xuICAgIDYwXHQgICAgICAgIGFsZXJ0LnNldEhlYWRlclRleHQobnVsbCk7XG4gICAgNjFcdCAgICAgICAgYWxlcnQuc2V0Q29udGVudFRleHQobWVzc2FnZSk7XG4gICAgNjJcdCAgICAgICAgYWxlcnQuc2hvd0FuZFdhaXQoKTtcbiAgICA2M1x0ICAgIH1cbiAgICA2NFx0ICAgIFxuICAgIDY1XHQgICAgcHJpdmF0ZSB2b2lkIGNsZWFyQ2FudmFzKCkge1xuICAgIDY2XHQgICAgICAgIGdjLmNsZWFyUmVjdCgwLCAwLCB0aGlzLmdldFdpZHRoKCksIHRoaXMuZ2V0SGVpZ2h0KCkpO1xuICAgIDY3XHQgICAgICAgIHNoYXBlTWFuYWdlci5jbGVhclNoYXBlcygpO1xuICAgIDY4XHQgICAgfVxuICAgIDY5XHQgICAgXG4gICAgNzBcdCAgICBAT3ZlcnJpZGVcbiAgICA3MVx0ICAgIHB1YmxpYyB2b2lkIHVwZGF0ZShUb29sYmFyRXZlbnQgZXZlbnQpIHtcbiAgICA3Mlx0ICAgICAgICBzd2l0Y2ggKGV2ZW50LmdldFR5cGUoKSkge1xuICAgIDczXHQgICAgICAgICAgICBjYXNlIFNIQVBFX1NFTEVDVEVEOlxuICAgIDc0XHQgICAgICAgICAgICAgICAgRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5ID0gZXZlbnQuZ2V0RGF0YShEcmF3aW5nU3RyYXRlZ3kuY2xhc3MpO1xuICAgIDc1XHQgICAgICAgICAgICAgICAgaWYgKHN0cmF0ZWd5ICE9IG51bGwpIHtcbiAgICA3Nlx0ICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRTdHJhdGVneSA9IHN0cmF0ZWd5O1xuICAgIDc3XHQgICAgICAgICAgICAgICAgfVxuICAgIDc4XHQgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgNzlcdCAgICAgICAgICAgICAgICBcbiAgICA4MFx0ICAgICAgICAgICAgY2FzZSBDTEVBUl9DQU5WQVM6XG4gICAgODFcdCAgICAgICAgICAgICAgICBjbGVhckNhbnZhcygpO1xuICAgIDgyXHQgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgODNcdCAgICAgICAgfVxuICAgIDg0XHQgICAgfVxuICAgIDg1XHQgICAgXG4gICAgODZcdCAgICBwdWJsaWMgU2hhcGVNYW5hZ2VyIGdldFNoYXBlTWFuYWdlcigpIHtcbiAgICA4N1x0ICAgICAgICByZXR1cm4gc2hhcGVNYW5hZ2VyO1xuICAgIDg4XHQgICAgfVxuICAgIDg5XHR9XG4uLi5cblBhdGg6IHNyYy9tYW5hZ2VyL1NoYXBlTWFuYWdlci5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbWFuYWdlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBtb2RlbC4qO1xuICAgICA0XHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAgNVx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgICA2XHRcbiAgICAgN1x0cHVibGljIGNsYXNzIFNoYXBlTWFuYWdlciB7XG4gICAgIDhcdCAgICBwcml2YXRlIExpc3Q8RHJhd25TaGFwZT4gc2hhcGVzO1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBwdWJsaWMgU2hhcGVNYW5hZ2VyKCkge1xuICAgIDExXHQgICAgICAgIHRoaXMuc2hhcGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgMTJcdCAgICB9XG4gICAgMTNcdCAgICBcbiAgICAxNFx0ICAgIC8qKlxuICAgIDE1XHQgICAgICogVmFsaWRhdGVzIGlmIGEgbGluZSBjYW4gYmUgZHJhd24gYWNjb3JkaW5nIHRvIHRoZSBjb25zdHJhaW50czpcbiAgICAxNlx0ICAgICAqIC0gQm90aCBlbmRzIG9mIHRoZSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXG4gICAgMTdcdCAgICAgKiAtIEEgY2lyY2xlIGNhbiBoYXZlIG9ubHkgb25lIGxpbmVcbiAgICAxOFx0ICAgICAqL1xuICAgIDE5XHQgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQgdmFsaWRhdGVMaW5lKGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDIwXHQgICAgICAgIERyYXduQ2lyY2xlIHN0YXJ0Q2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChzdGFydFgsIHN0YXJ0WSk7XG4gICAgMjFcdCAgICAgICAgRHJhd25DaXJjbGUgZW5kQ2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChlbmRYLCBlbmRZKTtcbiAgICAyMlx0ICAgICAgICBcbiAgICAyM1x0ICAgICAgICAvLyBDaGVjayBpZiBib3RoIGVuZHMgYXJlIGluc2lkZSBjaXJjbGVzXG4gICAgMjRcdCAgICAgICAgaWYgKHN0YXJ0Q2lyY2xlID09IG51bGwpIHtcbiAgICAyNVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIHBvaW50IGRlIGTDqXBhcnQgZGUgbGEgbGlnbmUgZG9pdCDDqnRyZSDDoCBsJ2ludMOpcmlldXIgZCd1biBjZXJjbGVcIik7XG4gICAgMjZcdCAgICAgICAgfVxuICAgIDI3XHQgICAgICAgIFxuICAgIDI4XHQgICAgICAgIGlmIChlbmRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI5XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZCdhcnJpdsOpZSBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICAgICAgXG4gICAgMzJcdCAgICAgICAgLy8gQ2hlY2sgaWYgY2lyY2xlcyBhbHJlYWR5IGhhdmUgbGluZXNcbiAgICAzM1x0ICAgICAgICBpZiAoY2lyY2xlSGFzTGluZShzdGFydENpcmNsZSkpIHtcbiAgICAzNFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkZSBkw6lwYXJ0IGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzVcdCAgICAgICAgfVxuICAgIDM2XHQgICAgICAgIFxuICAgIDM3XHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKGVuZENpcmNsZSkgJiYgIXN0YXJ0Q2lyY2xlLmVxdWFscyhlbmRDaXJjbGUpKSB7XG4gICAgMzhcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBjZXJjbGUgZCdhcnJpdsOpZSBjb250aWVudCBkw6lqw6AgdW5lIGxpZ25lXCIpO1xuICAgIDM5XHQgICAgICAgIH1cbiAgICA0MFx0ICAgICAgICBcbiAgICA0MVx0ICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQodHJ1ZSwgXCJMaWduZSB2YWxpZGVcIik7XG4gICAgNDJcdCAgICB9XG4gICAgNDNcdCAgICBcbiAgICA0NFx0ICAgIC8qKlxuICAgIDQ1XHQgICAgICogRmluZHMgYSBjaXJjbGUgdGhhdCBjb250YWlucyB0aGUgZ2l2ZW4gcG9pbnRcbiAgICA0Nlx0ICAgICAqL1xuICAgIDQ3XHQgICAgcHJpdmF0ZSBEcmF3bkNpcmNsZSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDQ4XHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDQ5XHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkNpcmNsZSAmJiBzaGFwZS5jb250YWluc1BvaW50KHgsIHkpKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICByZXR1cm4gKERyYXduQ2lyY2xlKSBzaGFwZTtcbiAgICA1MVx0ICAgICAgICAgICAgfVxuICAgIDUyXHQgICAgICAgIH1cbiAgICA1M1x0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA1NFx0ICAgIH1cbiAgICA1NVx0ICAgIFxuICAgIDU2XHQgICAgLyoqXG4gICAgNTdcdCAgICAgKiBDaGVja3MgaWYgYSBjaXJjbGUgYWxyZWFkeSBoYXMgYSBsaW5lXG4gICAgNThcdCAgICAgKi9cbiAgICA1OVx0ICAgIHByaXZhdGUgYm9vbGVhbiBjaXJjbGVIYXNMaW5lKERyYXduQ2lyY2xlIGNpcmNsZSkge1xuICAgIDYwXHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkxpbmUpIHtcbiAgICA2Mlx0ICAgICAgICAgICAgICAgIERyYXduTGluZSBsaW5lID0gKERyYXduTGluZSkgc2hhcGU7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBzdGFydFBvaW50ID0gbGluZS5nZXRTdGFydFBvaW50KCk7XG4gICAgNjRcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBlbmRQb2ludCA9IGxpbmUuZ2V0RW5kUG9pbnQoKTtcbiAgICA2NVx0ICAgICAgICAgICAgICAgIFxuICAgIDY2XHQgICAgICAgICAgICAgICAgaWYgKGNpcmNsZS5jb250YWluc1BvaW50KHN0YXJ0UG9pbnRbMF0sIHN0YXJ0UG9pbnRbMV0pIHx8IFxuICAgIDY3XHQgICAgICAgICAgICAgICAgICAgIGNpcmNsZS5jb250YWluc1BvaW50KGVuZFBvaW50WzBdLCBlbmRQb2ludFsxXSkpIHtcbiAgICA2OFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA2OVx0ICAgICAgICAgICAgICAgIH1cbiAgICA3MFx0ICAgICAgICAgICAgfVxuICAgIDcxXHQgICAgICAgIH1cbiAgICA3Mlx0ICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNzNcdCAgICB9XG4gICAgNzRcdCAgICBcbiAgICA3NVx0ICAgIC8qKlxuICAgIDc2XHQgICAgICogQWRkcyBhIHNoYXBlIHRvIHRoZSBtYW5hZ2VyXG4gICAgNzdcdCAgICAgKi9cbiAgICA3OFx0ICAgIHB1YmxpYyB2b2lkIGFkZFNoYXBlKERyYXduU2hhcGUgc2hhcGUpIHtcbiAgICA3OVx0ICAgICAgICBzaGFwZXMuYWRkKHNoYXBlKTtcbiAgICA4MFx0ICAgIH1cbiAgICA4MVx0ICAgIFxuICAgIDgyXHQgICAgLyoqXG4gICAgODNcdCAgICAgKiBHZXRzIGFsbCBzaGFwZXNcbiAgICA4NFx0ICAgICAqL1xuICAgIDg1XHQgICAgcHVibGljIExpc3Q8RHJhd25TaGFwZT4gZ2V0U2hhcGVzKCkge1xuICAgIDg2XHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXN0PD4oc2hhcGVzKTtcbiAgICA4N1x0ICAgIH1cbiAgICA4OFx0ICAgIFxuICAgIDg5XHQgICAgLyoqXG4gICAgOTBcdCAgICAgKiBDbGVhcnMgYWxsIHNoYXBlc1xuICAgIDkxXHQgICAgICovXG4gICAgOTJcdCAgICBwdWJsaWMgdm9pZCBjbGVhclNoYXBlcygpIHtcbiAgICA5M1x0ICAgICAgICBzaGFwZXMuY2xlYXIoKTtcbiAgICA5NFx0ICAgIH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L1JlY3RhbmdsZURyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgRmFjdG9yeS5SZWN0YW5nbGVTaGFwZTtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDZcdFxuICAgICA3XHRwdWJsaWMgY2xhc3MgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcbiAgICAgOFx0ICAgIFxuICAgICA5XHQgICAgQE92ZXJyaWRlXG4gICAgMTBcdCAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXG4gICAgMTFcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMTJcdCAgICAgICAgdHJ5IHtcbiAgICAxM1x0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSByZWN0YW5nbGVcbiAgICAxNFx0ICAgICAgICAgICAgUmVjdGFuZ2xlU2hhcGUgcmVjdGFuZ2xlU2hhcGUgPSBuZXcgUmVjdGFuZ2xlU2hhcGUoKTtcbiAgICAxNVx0ICAgICAgICAgICAgcmVjdGFuZ2xlU2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDE2XHQgICAgICAgICAgICBcbiAgICAxN1x0ICAgICAgICAgICAgLy8gTm90ZTogV2UgZG9uJ3QgdHJhY2sgcmVjdGFuZ2xlcyBpbiB0aGUgY29uc3RyYWludCBzeXN0ZW1cbiAgICAxOFx0ICAgICAgICAgICAgLy8gYXMgdGhleSdyZSBub3QgcGFydCBvZiB0aGUgY2lyY2xlLWxpbmUgcmVsYXRpb25zaGlwXG4gICAgMTlcdCAgICAgICAgICAgIFxuICAgIDIwXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFwiUmVjdGFuZ2xlIGRlc3NpbsOpIGF2ZWMgc3VjY8Ooc1wiKTtcbiAgICAyMVx0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDIyXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFwiRXJyZXVyIGxvcnMgZHUgZGVzc2luIGR1IHJlY3RhbmdsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgMjNcdCAgICAgICAgfVxuICAgIDI0XHQgICAgfVxuICAgIDI1XHQgICAgXG4gICAgMjZcdCAgICBAT3ZlcnJpZGVcbiAgICAyN1x0ICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCkge1xuICAgIDI4XHQgICAgICAgIHJldHVybiBcIlJlY3RhbmdsZVwiO1xuICAgIDI5XHQgICAgfVxuICAgIDMwXHR9XG4uLi5cblBhdGg6IHNyYy9vYnNlcnZlci9PYnNlcnZhYmxlLmphdmFcbiAgICAgMVx0cGFja2FnZSBvYnNlcnZlcjtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBPYnNlcnZhYmxlIGludGVyZmFjZSBmb3IgdGhlIE9ic2VydmVyIHBhdHRlcm5cbiAgICAgNVx0ICovXG4gICAgIDZcdHB1YmxpYyBpbnRlcmZhY2UgT2JzZXJ2YWJsZTxUPiB7XG4gICAgIDdcdCAgICB2b2lkIGFkZE9ic2VydmVyKE9ic2VydmVyPFQ+IG9ic2VydmVyKTtcbiAgICAgOFx0ICAgIHZvaWQgcmVtb3ZlT2JzZXJ2ZXIoT2JzZXJ2ZXI8VD4gb2JzZXJ2ZXIpO1xuICAgICA5XHQgICAgdm9pZCBub3RpZnlPYnNlcnZlcnMoVCBkYXRhKTtcbiAgICAxMFx0fVxuLi4uXG5QYXRoOiBzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBGYWN0b3J5LkNpcmNsZVNoYXBlO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNlx0aW1wb3J0IG1vZGVsLkRyYXduQ2lyY2xlO1xuICAgICA3XHRcbiAgICAgOFx0cHVibGljIGNsYXNzIENpcmNsZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIEBPdmVycmlkZVxuICAgIDExXHQgICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDEzXHQgICAgICAgIHRyeSB7XG4gICAgMTRcdCAgICAgICAgICAgIC8vIENyZWF0ZSBhbmQgZHJhdyB0aGUgY2lyY2xlXG4gICAgMTVcdCAgICAgICAgICAgIENpcmNsZVNoYXBlIGNpcmNsZVNoYXBlID0gbmV3IENpcmNsZVNoYXBlKCk7XG4gICAgMTZcdCAgICAgICAgICAgIGNpcmNsZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAxN1x0ICAgICAgICAgICAgXG4gICAgMThcdCAgICAgICAgICAgIC8vIEFkZCB0byBzaGFwZSBtYW5hZ2VyIGZvciB0cmFja2luZ1xuICAgIDE5XHQgICAgICAgICAgICBEcmF3bkNpcmNsZSBkcmF3bkNpcmNsZSA9IG5ldyBEcmF3bkNpcmNsZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMjBcdCAgICAgICAgICAgIHNoYXBlTWFuYWdlci5hZGRTaGFwZShkcmF3bkNpcmNsZSk7XG4gICAgMjFcdCAgICAgICAgICAgIFxuICAgIDIyXHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5zdWNjZXNzKFwiQ2VyY2xlIGRlc3NpbsOpIGF2ZWMgc3VjY8Ooc1wiKTtcbiAgICAyM1x0ICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDI0XHQgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKFwiRXJyZXVyIGxvcnMgZHUgZGVzc2luIGR1IGNlcmNsZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgMjVcdCAgICAgICAgfVxuICAgIDI2XHQgICAgfVxuICAgIDI3XHQgICAgXG4gICAgMjhcdCAgICBAT3ZlcnJpZGVcbiAgICAyOVx0ICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCkge1xuICAgIDMwXHQgICAgICAgIHJldHVybiBcIkNpcmNsZVwiO1xuICAgIDMxXHQgICAgfVxuICAgIDMyXHR9XG4uLi5cblBhdGg6IHNyYy9zdHJhdGVneS9MaW5lRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBGYWN0b3J5LkxpbmVTaGFwZTtcbiAgICAgNFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA1XHRpbXBvcnQgbWFuYWdlci5TaGFwZU1hbmFnZXI7XG4gICAgIDZcdGltcG9ydCBtb2RlbC5EcmF3bkxpbmU7XG4gICAgIDdcdFxuICAgICA4XHRwdWJsaWMgY2xhc3MgTGluZURyYXdpbmdTdHJhdGVneSBpbXBsZW1lbnRzIERyYXdpbmdTdHJhdGVneSB7XG4gICAgIDlcdCAgICBcbiAgICAxMFx0ICAgIEBPdmVycmlkZVxuICAgIDExXHQgICAgcHVibGljIERyYXdpbmdSZXN1bHQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlTWFuYWdlciBzaGFwZU1hbmFnZXIsIFxuICAgIDEyXHQgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDEzXHQgICAgICAgIHRyeSB7XG4gICAgMTRcdCAgICAgICAgICAgIC8vIFZhbGlkYXRlIGxpbmUgY29uc3RyYWludHMgZmlyc3RcbiAgICAxNVx0ICAgICAgICAgICAgU2hhcGVNYW5hZ2VyLlZhbGlkYXRpb25SZXN1bHQgdmFsaWRhdGlvbiA9IFxuICAgIDE2XHQgICAgICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLnZhbGlkYXRlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMTdcdCAgICAgICAgICAgIFxuICAgIDE4XHQgICAgICAgICAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCgpKSB7XG4gICAgMTlcdCAgICAgICAgICAgICAgICByZXR1cm4gRHJhd2luZ1Jlc3VsdC5mYWlsdXJlKHZhbGlkYXRpb24uZ2V0TWVzc2FnZSgpKTtcbiAgICAyMFx0ICAgICAgICAgICAgfVxuICAgIDIxXHQgICAgICAgICAgICBcbiAgICAyMlx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBsaW5lXG4gICAgMjNcdCAgICAgICAgICAgIExpbmVTaGFwZSBsaW5lU2hhcGUgPSBuZXcgTGluZVNoYXBlKCk7XG4gICAgMjRcdCAgICAgICAgICAgIGxpbmVTaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMjVcdCAgICAgICAgICAgIFxuICAgIDI2XHQgICAgICAgICAgICAvLyBBZGQgdG8gc2hhcGUgbWFuYWdlciBmb3IgdHJhY2tpbmdcbiAgICAyN1x0ICAgICAgICAgICAgRHJhd25MaW5lIGRyYXduTGluZSA9IG5ldyBEcmF3bkxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDI4XHQgICAgICAgICAgICBzaGFwZU1hbmFnZXIuYWRkU2hhcGUoZHJhd25MaW5lKTtcbiAgICAyOVx0ICAgICAgICAgICAgXG4gICAgMzBcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LnN1Y2Nlc3MoXCJMaWduZSBkZXNzaW7DqWUgYXZlYyBzdWNjw6hzXCIpO1xuICAgIDMxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMzJcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LmZhaWx1cmUoXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZGUgbGEgbGlnbmU6IFwiICsgZS5nZXRNZXNzYWdlKCkpO1xuICAgIDMzXHQgICAgICAgIH1cbiAgICAzNFx0ICAgIH1cbiAgICAzNVx0ICAgIFxuICAgIDM2XHQgICAgQE92ZXJyaWRlXG4gICAgMzdcdCAgICBwdWJsaWMgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpIHtcbiAgICAzOFx0ICAgICAgICByZXR1cm4gXCJMaW5lXCI7XG4gICAgMzlcdCAgICB9XG4gICAgNDBcdH1cbi4uLlxuUGF0aDogc3JjL29ic2VydmVyL09ic2VydmVyLmphdmFcbiAgICAgMVx0cGFja2FnZSBvYnNlcnZlcjtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBPYnNlcnZlciBpbnRlcmZhY2UgZm9yIHRoZSBPYnNlcnZlciBwYXR0ZXJuXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgaW50ZXJmYWNlIE9ic2VydmVyPFQ+IHtcbiAgICAgN1x0ICAgIHZvaWQgdXBkYXRlKFQgZGF0YSk7XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L0RyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNVx0XG4gICAgIDZcdC8qKlxuICAgICA3XHQgKiBTdHJhdGVneSBpbnRlcmZhY2UgZm9yIGRpZmZlcmVudCBkcmF3aW5nIGJlaGF2aW9yc1xuICAgICA4XHQgKi9cbiAgICAgOVx0cHVibGljIGludGVyZmFjZSBEcmF3aW5nU3RyYXRlZ3kge1xuICAgIDEwXHQgICAgXG4gICAgMTFcdCAgICAvKipcbiAgICAxMlx0ICAgICAqIEF0dGVtcHRzIHRvIGRyYXcgYSBzaGFwZSB3aXRoIHRoZSBnaXZlbiBjb29yZGluYXRlc1xuICAgIDEzXHQgICAgICogQHBhcmFtIGdjIEdyYXBoaWNzIGNvbnRleHQgZm9yIGRyYXdpbmdcbiAgICAxNFx0ICAgICAqIEBwYXJhbSBzaGFwZU1hbmFnZXIgTWFuYWdlciBmb3IgdHJhY2tpbmcgc2hhcGVzIGFuZCBjb25zdHJhaW50c1xuICAgIDE1XHQgICAgICogQHBhcmFtIHN0YXJ0WCBTdGFydGluZyBYIGNvb3JkaW5hdGVcbiAgICAxNlx0ICAgICAqIEBwYXJhbSBzdGFydFkgU3RhcnRpbmcgWSBjb29yZGluYXRlXG4gICAgMTdcdCAgICAgKiBAcGFyYW0gZW5kWCBFbmRpbmcgWCBjb29yZGluYXRlXG4gICAgMThcdCAgICAgKiBAcGFyYW0gZW5kWSBFbmRpbmcgWSBjb29yZGluYXRlXG4gICAgMTlcdCAgICAgKiBAcmV0dXJuIERyYXdpbmdSZXN1bHQgaW5kaWNhdGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGFueSBtZXNzYWdlc1xuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAyMlx0ICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSk7XG4gICAgMjNcdCAgICBcbiAgICAyNFx0ICAgIC8qKlxuICAgIDI1XHQgICAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGlzIGRyYXdpbmcgc3RyYXRlZ3lcbiAgICAyNlx0ICAgICAqL1xuICAgIDI3XHQgICAgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpO1xuLi4uXG5QYXRoOiBzcmMvRmFjdG9yeS9SZWN0YW5nbGVTaGFwZS5qYXZhXG4gICAgIDFcdHBhY2thZ2UgRmFjdG9yeTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNFx0XG4gICAgIDVcdHB1YmxpYyBjbGFzcyBSZWN0YW5nbGVTaGFwZSBpbXBsZW1lbnRzICBTaGFwZXtcbiAgICAgNlx0ICAgIEBPdmVycmlkZVxuICAgICA3XHQgICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSlcbiAgICAgOFx0ICAgIHtcbiAgICAgOVx0ICAgICAgICBkb3VibGUgd2lkdGggPSBNYXRoLmFicyhlbmRYLXN0YXJ0WCk7XG4gICAgMTBcdCAgICAgICAgZG91YmxlIGhlaWdodCA9IE1hdGguYWJzKGVuZFkgLSBzdGFydFkpO1xuICAgIDExXHQgICAgICAgIGRvdWJsZSB4ID0gTWF0aC5taW4oc3RhcnRYLCBlbmRYKTtcbiAgICAxMlx0ICAgICAgICBkb3VibGUgeSA9IE1hdGgubWluKHN0YXJ0WSwgZW5kWSk7XG4gICAgMTNcdCAgICAgICAgZ2Muc3Ryb2tlUmVjdCh4LCB5LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAxNFx0XG4gICAgMTVcdCAgICB9XG4gICAgMTZcdH1cbi4uLlxuIiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiYjZmZjEwN2MtMGI1NC00MjU5LWE1MGYtYWIzOGE5NDU2YTY3O3Rvb2x1XzAxQVZTYUR3VWE2NnplQ3l4eXA5b1l5eCI6eyJyZXF1ZXN0SWQiOiJiNmZmMTA3Yy0wYjU0LTQyNTktYTUwZi1hYjM4YTk0NTZhNjciLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUFWU2FEd1VhNjZ6ZUN5eHlwOW9ZeXgiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvTG9nRW50cnkuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJiNWIwMjg5NS01ZTcxLTRhZjAtOWM5My1lNjMxODVhMzRlOTE7dG9vbHVfMDFRRmptOTF4dENIYnZ2TmczWjVlZ2hzIjp7InJlcXVlc3RJZCI6ImI1YjAyODk1LTVlNzEtNGFmMC05YzkzLWU2MzE4NWEzNGU5MSIsInRvb2xVc2VJZCI6InRvb2x1XzAxUUZqbTkxeHRDSGJ2dk5nM1o1ZWdocyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbG9nZ2luZy9Mb2dnaW5nU3RyYXRlZ3kuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCI0NjY1NGNiYS04ZWYyLTRiMDgtYjk3My00ZjcyMWY4NjUyNWQ7dG9vbHVfMDE4S3I3Zk5BYTRUb05VcWJCRnF3UmdHIjp7InJlcXVlc3RJZCI6IjQ2NjU0Y2JhLThlZjItNGIwOC1iOTczLTRmNzIxZjg2NTI1ZCIsInRvb2xVc2VJZCI6InRvb2x1XzAxOEtyN2ZOQWE0VG9OVXFiQkZxd1JnRyIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbG9nZ2luZy9Db25zb2xlTG9nZ2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiMjIyZWIxYTAtOTkxMC00MTdkLTk5MmEtMjE2MTkwMTJhNjgwO3Rvb2x1XzAxTmRjV2l1UEVkMk1Wa3pOM1ljd0tEZSI6eyJyZXF1ZXN0SWQiOiIyMjJlYjFhMC05OTEwLTQxN2QtOTkyYS0yMTYxOTAxMmE2ODAiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMU5kY1dpdVBFZDJNVmt6TjNZY3dLRGUiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvRmlsZUxvZ2dpbmdTdHJhdGVneS5qYXZhfSIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImIyOTM2YzRhLTk0ZTgtNGNiNy04YzgwLTdkODg3YmVlZmUxNTt0b29sdV8wMUgzc1ZXdUwxM2NLOHEySFA0bjdUMnkiOnsicmVxdWVzdElkIjoiYjI5MzZjNGEtOTRlOC00Y2I3LThjODAtN2Q4ODdiZWVmZTE1IiwidG9vbFVzZUlkIjoidG9vbHVfMDFIM3NWV3VMMTNjSzhxMkhQNG43VDJ5IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBzYXZlZC4gIFNhdmVkIGZpbGUge3NyYy9sb2dnaW5nL0RhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5LmphdmF9IiwiaXNFcnJvciI6ZmFsc2UsInJlcXVlc3RJZCI6IiJ9fSwiN2E5ZDM0NWItODI5OC00YzhkLTlhNGYtMGViMzg4ZmQyMjc5O3Rvb2x1XzAxQm0xOW5Od2NYU0xEUGZTRzdtV25EWCI6eyJyZXF1ZXN0SWQiOiI3YTlkMzQ1Yi04Mjk4LTRjOGQtOWE0Zi0wZWIzODhmZDIyNzkiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUJtMTluTndjWFNMRFBmU0c3bVduRFgiLCJwaGFzZSI6NSwicmVzdWx0Ijp7InRleHQiOiJGaWxlIHNhdmVkLiAgU2F2ZWQgZmlsZSB7c3JjL2xvZ2dpbmcvTG9nZ2luZ01hbmFnZXIuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCJjOTY3OWFhNi05ZTBjLTQ4ZDYtYTcyNC0zZWVhNTM3ZTE1ZjA7dG9vbHVfMDFUbW4ySmFNTENYa1BYZTE0ckNvUHBwIjp7InJlcXVlc3RJZCI6ImM5Njc5YWE2LTllMGMtNDhkNi1hNzI0LTNlZWE1MzdlMTVmMCIsInRvb2xVc2VJZCI6InRvb2x1XzAxVG1uMkphTUxDWGtQWGUxNHJDb1BwcCIsInBoYXNlIjo1LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgc2F2ZWQuICBTYXZlZCBmaWxlIHtzcmMvbG9nZ2luZy9Mb2dnaW5nT2JzZXJ2ZXIuamF2YX0iLCJpc0Vycm9yIjpmYWxzZSwicmVxdWVzdElkIjoiIn19LCIyOTVkNGJkZS0wMmJlLTQ1MjctYjZmYy05Yjg0NGY1ZTE4MTU7dG9vbHVfMDFVUzJ2UWZEVm1xU0dWcEpRcXBDOUxLIjp7InJlcXVlc3RJZCI6IjI5NWQ0YmRlLTAyYmUtNDUyNy1iNmZjLTliODQ0ZjVlMTgxNSIsInRvb2xVc2VJZCI6InRvb2x1XzAxVVMydlFmRFZtcVNHVnBKUXFwQzlMSyIsInBoYXNlIjo2LCJyZXN1bHQiOnsidGV4dCI6IkZpbGUgbm90IGZvdW5kOiBzcmMvc3RyYXRlZ3kvQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5LmphdmEiLCJpc0Vycm9yIjp0cnVlLCJyZXF1ZXN0SWQiOiIifX0sImFmMzAxYTZjLWFlYWUtNDc5MC1iMzJiLWYwOTJhZjc3MTZkYjt0b29sdV8wMUU3amJtTlQ2aW9FN0ptR2VZMWE4Z3IiOnsicmVxdWVzdElkIjoiYWYzMDFhNmMtYWVhZS00NzkwLWIzMmItZjA5MmFmNzcxNmRiIiwidG9vbFVzZUlkIjoidG9vbHVfMDFFN2pibU5UNmlvRTdKbUdlWTFhOGdyIiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgdXAgdG8gMiBsZXZlbHMgZGVlcCBpbiBzcmMsIGV4Y2x1ZGluZyBoaWRkZW4gaXRlbXM6XG5zcmMvRmFjdG9yeVxuc3JjL0ZhY3RvcnlcXENpcmNsZUZhY3RvcnkuamF2YVxuc3JjL0ZhY3RvcnlcXENpcmNsZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxMaW5lRmFjdG9yeS5qYXZhXG5zcmMvRmFjdG9yeVxcTGluZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVGYWN0b3J5LmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVTaGFwZS5qYXZhXG5zcmMvRmFjdG9yeVxcU2hhcGUuamF2YVxuc3JjL0ZhY3RvcnlcXFNoYXBlRmFjdG9yeS5qYXZhXG5zcmMvTWFpbi5qYXZhXG5zcmMvZXZlbnRzXG5zcmMvbG9nZ2luZ1xuc3JjL2xvZ2dpbmdcXENvbnNvbGVMb2dnaW5nU3RyYXRlZ3kuamF2YVxuc3JjL2xvZ2dpbmdcXERhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxGaWxlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxMb2dFbnRyeS5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ01hbmFnZXIuamF2YVxuc3JjL2xvZ2dpbmdcXExvZ2dpbmdPYnNlcnZlci5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjYwZmNlMzM2LWE4MTQtNGY3OS04ZjhmLTVkNTQ5NGQzZWM2Njt0b29sdV8wMUN6THRUUndTaGZCTXpZcFB6aFZLWHgiOnsicmVxdWVzdElkIjoiNjBmY2UzMzYtYTgxNC00Zjc5LThmOGYtNWQ1NDk0ZDNlYzY2IiwidG9vbFVzZUlkIjoidG9vbHVfMDFDekx0VFJ3U2hmQk16WXBQemhWS1h4IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiSGVyZSdzIHRoZSBmaWxlcyBhbmQgZGlyZWN0b3JpZXMgdXAgdG8gMiBsZXZlbHMgZGVlcCBpbiBzcmMsIGV4Y2x1ZGluZyBoaWRkZW4gaXRlbXM6XG5zcmMvRmFjdG9yeVxuc3JjL0ZhY3RvcnlcXENpcmNsZUZhY3RvcnkuamF2YVxuc3JjL0ZhY3RvcnlcXENpcmNsZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxMaW5lRmFjdG9yeS5qYXZhXG5zcmMvRmFjdG9yeVxcTGluZVNoYXBlLmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVGYWN0b3J5LmphdmFcbnNyYy9GYWN0b3J5XFxSZWN0YW5nbGVTaGFwZS5qYXZhXG5zcmMvRmFjdG9yeVxcU2hhcGUuamF2YVxuc3JjL0ZhY3RvcnlcXFNoYXBlRmFjdG9yeS5qYXZhXG5zcmMvTWFpbi5qYXZhXG5zcmMvZXZlbnRzXG5zcmMvbG9nZ2luZ1xuc3JjL2xvZ2dpbmdcXENvbnNvbGVMb2dnaW5nU3RyYXRlZ3kuamF2YVxuc3JjL2xvZ2dpbmdcXERhdGFiYXNlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxGaWxlTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbnNyYy9sb2dnaW5nXFxMb2dFbnRyeS5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ01hbmFnZXIuamF2YVxuc3JjL2xvZ2dpbmdcXExvZ2dpbmdPYnNlcnZlci5qYXZhXG5zcmMvbG9nZ2luZ1xcTG9nZ2luZ1N0cmF0ZWd5LmphdmFcbiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sIjgwMjFmNDJmLTBmM2UtNDI3MS04OWU1LTg0ZjgxNjZmZTg1Mjt0b29sdV8wMTNlNVZ2eGpUUlRONkhMdTdNUGVYeHQiOnsicmVxdWVzdElkIjoiODAyMWY0MmYtMGYzZS00MjcxLTg5ZTUtODRmODE2NmZlODUyIiwidG9vbFVzZUlkIjoidG9vbHVfMDEzZTVWdnhqVFJUTjZITHU3TVBlWHh0IiwicGhhc2UiOjUsInJlc3VsdCI6eyJ0ZXh0IjoiVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIHdlcmUgcmV0cmlldmVkOlxuUGF0aDogc3JjL3VpL09ic2VydmFibGVUb29sYmFyLmphdmFcbiAgICAgMVx0cGFja2FnZSB1aTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBldmVudHMuVG9vbGJhckV2ZW50O1xuICAgICA0XHRpbXBvcnQgb2JzZXJ2ZXIuT2JzZXJ2YWJsZTtcbiAgICAgNVx0aW1wb3J0IG9ic2VydmVyLk9ic2VydmVyO1xuICAgICA2XHRpbXBvcnQgc3RyYXRlZ3kuKjtcbiAgICAgN1x0aW1wb3J0IGphdmFmeC5nZW9tZXRyeS5JbnNldHM7XG4gICAgIDhcdGltcG9ydCBqYXZhZnguc2NlbmUuY29udHJvbC5CdXR0b247XG4gICAgIDlcdGltcG9ydCBqYXZhZnguc2NlbmUubGF5b3V0LkhCb3g7XG4gICAgMTBcdFxuICAgIDExXHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAxMlx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgIDEzXHRcbiAgICAxNFx0LyoqXG4gICAgMTVcdCAqIE9ic2VydmFibGUgdG9vbGJhciB0aGF0IG5vdGlmaWVzIG9ic2VydmVycyB3aGVuIHRvb2xzIGFyZSBzZWxlY3RlZFxuICAgIDE2XHQgKi9cbiAgICAxN1x0cHVibGljIGNsYXNzIE9ic2VydmFibGVUb29sYmFyIGV4dGVuZHMgSEJveCBpbXBsZW1lbnRzIE9ic2VydmFibGU8VG9vbGJhckV2ZW50PiB7XG4gICAgMThcdCAgICBcbiAgICAxOVx0ICAgIHByaXZhdGUgZmluYWwgTGlzdDxPYnNlcnZlcjxUb29sYmFyRXZlbnQ+PiBvYnNlcnZlcnM7XG4gICAgMjBcdCAgICBwcml2YXRlIERyYXdpbmdTdHJhdGVneSBjdXJyZW50U3RyYXRlZ3k7XG4gICAgMjFcdCAgICBcbiAgICAyMlx0ICAgIC8vIERyYXdpbmcgc3RyYXRlZ2llc1xuICAgIDIzXHQgICAgcHJpdmF0ZSBmaW5hbCBSZWN0YW5nbGVEcmF3aW5nU3RyYXRlZ3kgcmVjdGFuZ2xlU3RyYXRlZ3k7XG4gICAgMjRcdCAgICBwcml2YXRlIGZpbmFsIENpcmNsZURyYXdpbmdTdHJhdGVneSBjaXJjbGVTdHJhdGVneTtcbiAgICAyNVx0ICAgIHByaXZhdGUgZmluYWwgTGluZURyYXdpbmdTdHJhdGVneSBsaW5lU3RyYXRlZ3k7XG4gICAgMjZcdCAgICBcbiAgICAyN1x0ICAgIHB1YmxpYyBPYnNlcnZhYmxlVG9vbGJhcigpIHtcbiAgICAyOFx0ICAgICAgICBzdXBlcigxMCk7XG4gICAgMjlcdCAgICAgICAgdGhpcy5vYnNlcnZlcnMgPSBuZXcgQXJyYXlMaXN0PD4oKTtcbiAgICAzMFx0ICAgICAgICB0aGlzLnNldFBhZGRpbmcobmV3IEluc2V0cygxMCkpO1xuICAgIDMxXHQgICAgICAgIFxuICAgIDMyXHQgICAgICAgIC8vIEluaXRpYWxpemUgc3RyYXRlZ2llc1xuICAgIDMzXHQgICAgICAgIHRoaXMucmVjdGFuZ2xlU3RyYXRlZ3kgPSBuZXcgUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5KCk7XG4gICAgMzRcdCAgICAgICAgdGhpcy5jaXJjbGVTdHJhdGVneSA9IG5ldyBDaXJjbGVEcmF3aW5nU3RyYXRlZ3koKTtcbiAgICAzNVx0ICAgICAgICB0aGlzLmxpbmVTdHJhdGVneSA9IG5ldyBMaW5lRHJhd2luZ1N0cmF0ZWd5KCk7XG4gICAgMzZcdCAgICAgICAgXG4gICAgMzdcdCAgICAgICAgLy8gU2V0IGRlZmF1bHQgc3RyYXRlZ3lcbiAgICAzOFx0ICAgICAgICB0aGlzLmN1cnJlbnRTdHJhdGVneSA9IHJlY3RhbmdsZVN0cmF0ZWd5O1xuICAgIDM5XHQgICAgICAgIFxuICAgIDQwXHQgICAgICAgIGluaXRpYWxpemVCdXR0b25zKCk7XG4gICAgNDFcdCAgICB9XG4gICAgNDJcdCAgICBcbiAgICA0M1x0ICAgIHByaXZhdGUgdm9pZCBpbml0aWFsaXplQnV0dG9ucygpIHtcbiAgICA0NFx0ICAgICAgICAvLyBDcmVhdGUgYnV0dG9uc1xuICAgIDQ1XHQgICAgICAgIEJ1dHRvbiByZWN0YW5nbGVCdG4gPSBuZXcgQnV0dG9uKFwiUmVjdGFuZ2xlXCIpO1xuICAgIDQ2XHQgICAgICAgIEJ1dHRvbiBjaXJjbGVCdG4gPSBuZXcgQnV0dG9uKFwiQ2VyY2xlXCIpO1xuICAgIDQ3XHQgICAgICAgIEJ1dHRvbiBsaW5lQnRuID0gbmV3IEJ1dHRvbihcIkxpZ25lXCIpO1xuICAgIDQ4XHQgICAgICAgIEJ1dHRvbiBjbGVhckJ0biA9IG5ldyBCdXR0b24oXCJFZmZhY2VyXCIpO1xuICAgIDQ5XHQgICAgICAgIFxuICAgIDUwXHQgICAgICAgIC8vIFNldCB1cCBldmVudCBoYW5kbGVyc1xuICAgIDUxXHQgICAgICAgIHJlY3RhbmdsZUJ0bi5zZXRPbkFjdGlvbihlIC0+IHNlbGVjdFN0cmF0ZWd5KHJlY3RhbmdsZVN0cmF0ZWd5KSk7XG4gICAgNTJcdCAgICAgICAgY2lyY2xlQnRuLnNldE9uQWN0aW9uKGUgLT4gc2VsZWN0U3RyYXRlZ3koY2lyY2xlU3RyYXRlZ3kpKTtcbiAgICA1M1x0ICAgICAgICBsaW5lQnRuLnNldE9uQWN0aW9uKGUgLT4gc2VsZWN0U3RyYXRlZ3kobGluZVN0cmF0ZWd5KSk7XG4gICAgNTRcdCAgICAgICAgY2xlYXJCdG4uc2V0T25BY3Rpb24oZSAtPiBjbGVhckNhbnZhcygpKTtcbiAgICA1NVx0ICAgICAgICBcbiAgICA1Nlx0ICAgICAgICAvLyBBZGQgYnV0dG9ucyB0byB0b29sYmFyXG4gICAgNTdcdCAgICAgICAgdGhpcy5nZXRDaGlsZHJlbigpLmFkZEFsbChyZWN0YW5nbGVCdG4sIGNpcmNsZUJ0biwgbGluZUJ0biwgY2xlYXJCdG4pO1xuICAgIDU4XHQgICAgfVxuICAgIDU5XHQgICAgXG4gICAgNjBcdCAgICBwcml2YXRlIHZvaWQgc2VsZWN0U3RyYXRlZ3koRHJhd2luZ1N0cmF0ZWd5IHN0cmF0ZWd5KSB7XG4gICAgNjFcdCAgICAgICAgdGhpcy5jdXJyZW50U3RyYXRlZ3kgPSBzdHJhdGVneTtcbiAgICA2Mlx0ICAgICAgICBUb29sYmFyRXZlbnQgZXZlbnQgPSBuZXcgVG9vbGJhckV2ZW50KFRvb2xiYXJFdmVudC5FdmVudFR5cGUuU0hBUEVfU0VMRUNURUQsIHN0cmF0ZWd5KTtcbiAgICA2M1x0ICAgICAgICBub3RpZnlPYnNlcnZlcnMoZXZlbnQpO1xuICAgIDY0XHQgICAgfVxuICAgIDY1XHQgICAgXG4gICAgNjZcdCAgICBwcml2YXRlIHZvaWQgY2xlYXJDYW52YXMoKSB7XG4gICAgNjdcdCAgICAgICAgVG9vbGJhckV2ZW50IGV2ZW50ID0gbmV3IFRvb2xiYXJFdmVudChUb29sYmFyRXZlbnQuRXZlbnRUeXBlLkNMRUFSX0NBTlZBUyk7XG4gICAgNjhcdCAgICAgICAgbm90aWZ5T2JzZXJ2ZXJzKGV2ZW50KTtcbiAgICA2OVx0ICAgIH1cbiAgICA3MFx0ICAgIFxuICAgIDcxXHQgICAgcHVibGljIERyYXdpbmdTdHJhdGVneSBnZXRDdXJyZW50U3RyYXRlZ3koKSB7XG4gICAgNzJcdCAgICAgICAgcmV0dXJuIGN1cnJlbnRTdHJhdGVneTtcbiAgICA3M1x0ICAgIH1cbiAgICA3NFx0ICAgIFxuICAgIDc1XHQgICAgQE92ZXJyaWRlXG4gICAgNzZcdCAgICBwdWJsaWMgdm9pZCBhZGRPYnNlcnZlcihPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IG9ic2VydmVyKSB7XG4gICAgNzdcdCAgICAgICAgb2JzZXJ2ZXJzLmFkZChvYnNlcnZlcik7XG4gICAgNzhcdCAgICB9XG4gICAgNzlcdCAgICBcbiAgICA4MFx0ICAgIEBPdmVycmlkZVxuICAgIDgxXHQgICAgcHVibGljIHZvaWQgcmVtb3ZlT2JzZXJ2ZXIoT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiBvYnNlcnZlcikge1xuICAgIDgyXHQgICAgICAgIG9ic2VydmVycy5yZW1vdmUob2JzZXJ2ZXIpO1xuICAgIDgzXHQgICAgfVxuICAgIDg0XHQgICAgXG4gICAgODVcdCAgICBAT3ZlcnJpZGVcbiAgICA4Nlx0ICAgIHB1YmxpYyB2b2lkIG5vdGlmeU9ic2VydmVycyhUb29sYmFyRXZlbnQgZGF0YSkge1xuICAgIDg3XHQgICAgICAgIGZvciAoT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiBvYnNlcnZlciA6IG9ic2VydmVycykge1xuICAgIDg4XHQgICAgICAgICAgICBvYnNlcnZlci51cGRhdGUoZGF0YSk7XG4gICAgODlcdCAgICAgICAgfVxuICAgIDkwXHQgICAgfVxuICAgIDkxXHR9XG4uLi5cblBhdGg6IHNyYy9NYWluT2JzZXJ2ZXIuamF2YVxuICAgICAxXHRpbXBvcnQgdWkuRHJhd2luZ0NhbnZhcztcbiAgICAgMlx0aW1wb3J0IHVpLk9ic2VydmFibGVUb29sYmFyO1xuICAgICAzXHRpbXBvcnQgamF2YWZ4LmFwcGxpY2F0aW9uLkFwcGxpY2F0aW9uO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLlNjZW5lO1xuICAgICA1XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmxheW91dC5Cb3JkZXJQYW5lO1xuICAgICA2XHRpbXBvcnQgamF2YWZ4LnN0YWdlLlN0YWdlO1xuICAgICA3XHRcbiAgICAgOFx0LyoqXG4gICAgIDlcdCAqIE1haW4gYXBwbGljYXRpb24gY2xhc3MgdXNpbmcgT2JzZXJ2ZXIgcGF0dGVybiB3aXRoIFN0cmF0ZWd5IGZvciBkcmF3aW5nXG4gICAgMTBcdCAqL1xuICAgIDExXHRwdWJsaWMgY2xhc3MgTWFpbk9ic2VydmVyIGV4dGVuZHMgQXBwbGljYXRpb24ge1xuICAgIDEyXHQgICAgXG4gICAgMTNcdCAgICBAT3ZlcnJpZGVcbiAgICAxNFx0ICAgIHB1YmxpYyB2b2lkIHN0YXJ0KFN0YWdlIHByaW1hcnlTdGFnZSkge1xuICAgIDE1XHQgICAgICAgIHByaW1hcnlTdGFnZS5zZXRUaXRsZShcIkRlc3NpbiBkZSBGb3JtZXMgR8Opb23DqXRyaXF1ZXMgLSBPYnNlcnZlciBQYXR0ZXJuXCIpO1xuICAgIDE2XHQgICAgICAgIFxuICAgIDE3XHQgICAgICAgIC8vIENyZWF0ZSB0aGUgb2JzZXJ2YWJsZSB0b29sYmFyXG4gICAgMThcdCAgICAgICAgT2JzZXJ2YWJsZVRvb2xiYXIgdG9vbGJhciA9IG5ldyBPYnNlcnZhYmxlVG9vbGJhcigpO1xuICAgIDE5XHQgICAgICAgIFxuICAgIDIwXHQgICAgICAgIC8vIENyZWF0ZSB0aGUgZHJhd2luZyBjYW52YXMgKG9ic2VydmVyKVxuICAgIDIxXHQgICAgICAgIERyYXdpbmdDYW52YXMgY2FudmFzID0gbmV3IERyYXdpbmdDYW52YXMoODAwLCA2MDApO1xuICAgIDIyXHQgICAgICAgIFxuICAgIDIzXHQgICAgICAgIC8vIFJlZ2lzdGVyIGNhbnZhcyBhcyBvYnNlcnZlciBvZiB0b29sYmFyXG4gICAgMjRcdCAgICAgICAgdG9vbGJhci5hZGRPYnNlcnZlcihjYW52YXMpO1xuICAgIDI1XHQgICAgICAgIFxuICAgIDI2XHQgICAgICAgIC8vIFNldCB1cCB0aGUgbGF5b3V0XG4gICAgMjdcdCAgICAgICAgQm9yZGVyUGFuZSByb290ID0gbmV3IEJvcmRlclBhbmUoKTtcbiAgICAyOFx0ICAgICAgICByb290LnNldFRvcCh0b29sYmFyKTtcbiAgICAyOVx0ICAgICAgICByb290LnNldENlbnRlcihjYW52YXMpO1xuICAgIDMwXHQgICAgICAgIFxuICAgIDMxXHQgICAgICAgIC8vIENyZWF0ZSBhbmQgc2hvdyBzY2VuZVxuICAgIDMyXHQgICAgICAgIFNjZW5lIHNjZW5lID0gbmV3IFNjZW5lKHJvb3QsIDgwMCwgNjUwKTtcbiAgICAzM1x0ICAgICAgICBwcmltYXJ5U3RhZ2Uuc2V0U2NlbmUoc2NlbmUpO1xuICAgIDM0XHQgICAgICAgIHByaW1hcnlTdGFnZS5zaG93KCk7XG4gICAgMzVcdCAgICAgICAgXG4gICAgMzZcdCAgICAgICAgLy8gSW5pdGlhbGl6ZSB3aXRoIGRlZmF1bHQgc3RyYXRlZ3lcbiAgICAzN1x0ICAgICAgICBjYW52YXMudXBkYXRlKG5ldyBldmVudHMuVG9vbGJhckV2ZW50KFxuICAgIDM4XHQgICAgICAgICAgICBldmVudHMuVG9vbGJhckV2ZW50LkV2ZW50VHlwZS5TSEFQRV9TRUxFQ1RFRCwgXG4gICAgMzlcdCAgICAgICAgICAgIHRvb2xiYXIuZ2V0Q3VycmVudFN0cmF0ZWd5KClcbiAgICA0MFx0ICAgICAgICApKTtcbiAgICA0MVx0ICAgIH1cbi4uLlxuUGF0aDogc3JjL2xvZ2dpbmcvTG9nZ2luZ09ic2VydmVyLmphdmFcbiAgICAgMVx0cGFja2FnZSBsb2dnaW5nO1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IGV2ZW50cy5Ub29sYmFyRXZlbnQ7XG4gICAgIDRcdGltcG9ydCBvYnNlcnZlci5PYnNlcnZlcjtcbiAgICAgNVx0aW1wb3J0IHN0cmF0ZWd5LkRyYXdpbmdTdHJhdGVneTtcbiAgICAgNlx0XG4gICAgIDdcdC8qKlxuICAgICA4XHQgKiBPYnNlcnZlciB0aGF0IGxvZ3MgdG9vbGJhciBldmVudHNcbiAgICAgOVx0ICovXG4gICAgMTBcdHB1YmxpYyBjbGFzcyBMb2dnaW5nT2JzZXJ2ZXIgaW1wbGVtZW50cyBPYnNlcnZlcjxUb29sYmFyRXZlbnQ+IHtcbiAgICAxMVx0ICAgIFxuICAgIDEyXHQgICAgcHJpdmF0ZSBmaW5hbCBMb2dnaW5nTWFuYWdlciBsb2dnaW5nTWFuYWdlcjtcbiAgICAxM1x0ICAgIFxuICAgIDE0XHQgICAgcHVibGljIExvZ2dpbmdPYnNlcnZlcihMb2dnaW5nTWFuYWdlciBsb2dnaW5nTWFuYWdlcikge1xuICAgIDE1XHQgICAgICAgIHRoaXMubG9nZ2luZ01hbmFnZXIgPSBsb2dnaW5nTWFuYWdlcjtcbiAgICAxNlx0ICAgIH1cbiAgICAxN1x0ICAgIFxuICAgIDE4XHQgICAgQE92ZXJyaWRlXG4gICAgMTlcdCAgICBwdWJsaWMgdm9pZCB1cGRhdGUoVG9vbGJhckV2ZW50IGV2ZW50KSB7XG4gICAgMjBcdCAgICAgICAgc3dpdGNoIChldmVudC5nZXRUeXBlKCkpIHtcbiAgICAyMVx0ICAgICAgICAgICAgY2FzZSBTSEFQRV9TRUxFQ1RFRDpcbiAgICAyMlx0ICAgICAgICAgICAgICAgIERyYXdpbmdTdHJhdGVneSBzdHJhdGVneSA9IGV2ZW50LmdldERhdGEoRHJhd2luZ1N0cmF0ZWd5LmNsYXNzKTtcbiAgICAyM1x0ICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneSAhPSBudWxsKSB7XG4gICAgMjRcdCAgICAgICAgICAgICAgICAgICAgbG9nZ2luZ01hbmFnZXIubG9nVG9vbFNlbGVjdGlvbihzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSk7XG4gICAgMjVcdCAgICAgICAgICAgICAgICB9XG4gICAgMjZcdCAgICAgICAgICAgICAgICBicmVhaztcbiAgICAyN1x0ICAgICAgICAgICAgICAgIFxuICAgIDI4XHQgICAgICAgICAgICBjYXNlIENMRUFSX0NBTlZBUzpcbiAgICAyOVx0ICAgICAgICAgICAgICAgIGxvZ2dpbmdNYW5hZ2VyLmxvZ0NhbnZhc0NsZWFyZWQoKTtcbiAgICAzMFx0ICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgIDMxXHQgICAgICAgIH1cbiAgICAzMlx0ICAgIH1cbiAgICAzM1x0fVxuLi4uXG5QYXRoOiBzcmMvdWkvRHJhd2luZ0NhbnZhcy5qYXZhXG4gICAgIDFcdHBhY2thZ2UgdWk7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgZXZlbnRzLlRvb2xiYXJFdmVudDtcbiAgICAgNFx0aW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xuICAgICA1XHRpbXBvcnQgb2JzZXJ2ZXIuT2JzZXJ2ZXI7XG4gICAgIDZcdGltcG9ydCBzdHJhdGVneS5EcmF3aW5nU3RyYXRlZ3k7XG4gICAgIDdcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkNhbnZhcztcbiAgICAgOFx0aW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuICAgICA5XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNvbnRyb2wuQWxlcnQ7XG4gICAgMTBcdGltcG9ydCBqYXZhZnguc2NlbmUucGFpbnQuQ29sb3I7XG4gICAgMTFcdFxuICAgIDEyXHQvKipcbiAgICAxM1x0ICogRHJhd2luZyBjYW52YXMgdGhhdCBvYnNlcnZlcyB0b29sYmFyIGV2ZW50cyBhbmQgaGFuZGxlcyBkcmF3aW5nIG9wZXJhdGlvbnNcbiAgICAxNFx0ICovXG4gICAgMTVcdHB1YmxpYyBjbGFzcyBEcmF3aW5nQ2FudmFzIGV4dGVuZHMgQ2FudmFzIGltcGxlbWVudHMgT2JzZXJ2ZXI8VG9vbGJhckV2ZW50PiB7XG4gICAgMTZcdCAgICBcbiAgICAxN1x0ICAgIHByaXZhdGUgZmluYWwgR3JhcGhpY3NDb250ZXh0IGdjO1xuICAgIDE4XHQgICAgcHJpdmF0ZSBmaW5hbCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyO1xuICAgIDE5XHQgICAgcHJpdmF0ZSBEcmF3aW5nU3RyYXRlZ3kgY3VycmVudFN0cmF0ZWd5O1xuICAgIDIwXHQgICAgcHJpdmF0ZSBkb3VibGUgc3RhcnRYLCBzdGFydFk7XG4gICAgMjFcdCAgICBcbiAgICAyMlx0ICAgIHB1YmxpYyBEcmF3aW5nQ2FudmFzKGRvdWJsZSB3aWR0aCwgZG91YmxlIGhlaWdodCkge1xuICAgIDIzXHQgICAgICAgIHN1cGVyKHdpZHRoLCBoZWlnaHQpO1xuICAgIDI0XHQgICAgICAgIHRoaXMuZ2MgPSB0aGlzLmdldEdyYXBoaWNzQ29udGV4dDJEKCk7XG4gICAgMjVcdCAgICAgICAgdGhpcy5zaGFwZU1hbmFnZXIgPSBuZXcgU2hhcGVNYW5hZ2VyKCk7XG4gICAgMjZcdCAgICAgICAgXG4gICAgMjdcdCAgICAgICAgc2V0dXBHcmFwaGljc0NvbnRleHQoKTtcbiAgICAyOFx0ICAgICAgICBzZXR1cE1vdXNlRXZlbnRzKCk7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdCAgICBcbiAgICAzMVx0ICAgIHByaXZhdGUgdm9pZCBzZXR1cEdyYXBoaWNzQ29udGV4dCgpIHtcbiAgICAzMlx0ICAgICAgICBnYy5zZXRTdHJva2UoQ29sb3IuQkxBQ0spO1xuICAgIDMzXHQgICAgICAgIGdjLnNldExpbmVXaWR0aCgyKTtcbiAgICAzNFx0ICAgIH1cbi4uLlxuICAgIDY0XHQgICAgXG4gICAgNjVcdCAgICBwcml2YXRlIHZvaWQgY2xlYXJDYW52YXMoKSB7XG4gICAgNjZcdCAgICAgICAgZ2MuY2xlYXJSZWN0KDAsIDAsIHRoaXMuZ2V0V2lkdGgoKSwgdGhpcy5nZXRIZWlnaHQoKSk7XG4gICAgNjdcdCAgICAgICAgc2hhcGVNYW5hZ2VyLmNsZWFyU2hhcGVzKCk7XG4gICAgNjhcdCAgICB9XG4gICAgNjlcdCAgICBcbiAgICA3MFx0ICAgIEBPdmVycmlkZVxuICAgIDcxXHQgICAgcHVibGljIHZvaWQgdXBkYXRlKFRvb2xiYXJFdmVudCBldmVudCkge1xuICAgIDcyXHQgICAgICAgIHN3aXRjaCAoZXZlbnQuZ2V0VHlwZSgpKSB7XG4gICAgNzNcdCAgICAgICAgICAgIGNhc2UgU0hBUEVfU0VMRUNURUQ6XG4gICAgNzRcdCAgICAgICAgICAgICAgICBEcmF3aW5nU3RyYXRlZ3kgc3RyYXRlZ3kgPSBldmVudC5nZXREYXRhKERyYXdpbmdTdHJhdGVneS5jbGFzcyk7XG4gICAgNzVcdCAgICAgICAgICAgICAgICBpZiAoc3RyYXRlZ3kgIT0gbnVsbCkge1xuICAgIDc2XHQgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudFN0cmF0ZWd5ID0gc3RyYXRlZ3k7XG4gICAgNzdcdCAgICAgICAgICAgICAgICB9XG4gICAgNzhcdCAgICAgICAgICAgICAgICBicmVhaztcbiAgICA3OVx0ICAgICAgICAgICAgICAgIFxuICAgIDgwXHQgICAgICAgICAgICBjYXNlIENMRUFSX0NBTlZBUzpcbiAgICA4MVx0ICAgICAgICAgICAgICAgIGNsZWFyQ2FudmFzKCk7XG4gICAgODJcdCAgICAgICAgICAgICAgICBicmVhaztcbiAgICA4M1x0ICAgICAgICB9XG4gICAgODRcdCAgICB9XG4gICAgODVcdCAgICBcbiAgICA4Nlx0ICAgIHB1YmxpYyBTaGFwZU1hbmFnZXIgZ2V0U2hhcGVNYW5hZ2VyKCkge1xuICAgIDg3XHQgICAgICAgIHJldHVybiBzaGFwZU1hbmFnZXI7XG4gICAgODhcdCAgICB9XG4gICAgODlcdH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L0RyYXdpbmdTdHJhdGVneS5qYXZhXG4gICAgIDFcdHBhY2thZ2Ugc3RyYXRlZ3k7XG4gICAgIDJcdFxuICAgICAzXHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDRcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNVx0XG4gICAgIDZcdC8qKlxuICAgICA3XHQgKiBTdHJhdGVneSBpbnRlcmZhY2UgZm9yIGRpZmZlcmVudCBkcmF3aW5nIGJlaGF2aW9yc1xuICAgICA4XHQgKi9cbiAgICAgOVx0cHVibGljIGludGVyZmFjZSBEcmF3aW5nU3RyYXRlZ3kge1xuICAgIDEwXHQgICAgXG4gICAgMTFcdCAgICAvKipcbiAgICAxMlx0ICAgICAqIEF0dGVtcHRzIHRvIGRyYXcgYSBzaGFwZSB3aXRoIHRoZSBnaXZlbiBjb29yZGluYXRlc1xuICAgIDEzXHQgICAgICogQHBhcmFtIGdjIEdyYXBoaWNzIGNvbnRleHQgZm9yIGRyYXdpbmdcbiAgICAxNFx0ICAgICAqIEBwYXJhbSBzaGFwZU1hbmFnZXIgTWFuYWdlciBmb3IgdHJhY2tpbmcgc2hhcGVzIGFuZCBjb25zdHJhaW50c1xuICAgIDE1XHQgICAgICogQHBhcmFtIHN0YXJ0WCBTdGFydGluZyBYIGNvb3JkaW5hdGVcbiAgICAxNlx0ICAgICAqIEBwYXJhbSBzdGFydFkgU3RhcnRpbmcgWSBjb29yZGluYXRlXG4gICAgMTdcdCAgICAgKiBAcGFyYW0gZW5kWCBFbmRpbmcgWCBjb29yZGluYXRlXG4gICAgMThcdCAgICAgKiBAcGFyYW0gZW5kWSBFbmRpbmcgWSBjb29yZGluYXRlXG4gICAgMTlcdCAgICAgKiBAcmV0dXJuIERyYXdpbmdSZXN1bHQgaW5kaWNhdGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGFueSBtZXNzYWdlc1xuICAgIDIwXHQgICAgICovXG4gICAgMjFcdCAgICBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAyMlx0ICAgICAgICAgICAgICAgICAgICAgIGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSk7XG4gICAgMjNcdCAgICBcbiAgICAyNFx0ICAgIC8qKlxuICAgIDI1XHQgICAgICogR2V0cyB0aGUgbmFtZSBvZiB0aGlzIGRyYXdpbmcgc3RyYXRlZ3lcbiAgICAyNlx0ICAgICAqL1xuICAgIDI3XHQgICAgU3RyaW5nIGdldFN0cmF0ZWd5TmFtZSgpO1xuLi4uXG5QYXRoOiBzcmMvc3RyYXRlZ3kvUmVjdGFuZ2xlRHJhd2luZ1N0cmF0ZWd5LmphdmFcbiAgICAgMVx0cGFja2FnZSBzdHJhdGVneTtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBGYWN0b3J5LlJlY3RhbmdsZVNoYXBlO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNlx0XG4gICAgIDdcdHB1YmxpYyBjbGFzcyBSZWN0YW5nbGVEcmF3aW5nU3RyYXRlZ3kgaW1wbGVtZW50cyBEcmF3aW5nU3RyYXRlZ3kge1xuICAgICA4XHQgICAgXG4gICAgIDlcdCAgICBAT3ZlcnJpZGVcbiAgICAxMFx0ICAgIHB1YmxpYyBEcmF3aW5nUmVzdWx0IGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZU1hbmFnZXIgc2hhcGVNYW5hZ2VyLCBcbiAgICAxMVx0ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3VibGUgc3RhcnRYLCBkb3VibGUgc3RhcnRZLCBkb3VibGUgZW5kWCwgZG91YmxlIGVuZFkpIHtcbiAgICAxMlx0ICAgICAgICB0cnkge1xuICAgIDEzXHQgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRyYXcgdGhlIHJlY3RhbmdsZVxuICAgIDE0XHQgICAgICAgICAgICBSZWN0YW5nbGVTaGFwZSByZWN0YW5nbGVTaGFwZSA9IG5ldyBSZWN0YW5nbGVTaGFwZSgpO1xuICAgIDE1XHQgICAgICAgICAgICByZWN0YW5nbGVTaGFwZS5kcmF3KGdjLCBzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMTZcdCAgICAgICAgICAgIFxuICAgIDE3XHQgICAgICAgICAgICAvLyBOb3RlOiBXZSBkb24ndCB0cmFjayByZWN0YW5nbGVzIGluIHRoZSBjb25zdHJhaW50IHN5c3RlbVxuICAgIDE4XHQgICAgICAgICAgICAvLyBhcyB0aGV5J3JlIG5vdCBwYXJ0IG9mIHRoZSBjaXJjbGUtbGluZSByZWxhdGlvbnNoaXBcbiAgICAxOVx0ICAgICAgICAgICAgXG4gICAgMjBcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LnN1Y2Nlc3MoXCJSZWN0YW5nbGUgZGVzc2luw6kgYXZlYyBzdWNjw6hzXCIpO1xuICAgIDIxXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMjJcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LmZhaWx1cmUoXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgcmVjdGFuZ2xlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAyM1x0ICAgICAgICB9XG4gICAgMjRcdCAgICB9XG4gICAgMjVcdCAgICBcbiAgICAyNlx0ICAgIEBPdmVycmlkZVxuICAgIDI3XHQgICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XG4gICAgMjhcdCAgICAgICAgcmV0dXJuIFwiUmVjdGFuZ2xlXCI7XG4gICAgMjlcdCAgICB9XG4gICAgMzBcdH1cbi4uLlxuUGF0aDogc3JjL29ic2VydmVyL09ic2VydmFibGUuamF2YVxuICAgICAxXHRwYWNrYWdlIG9ic2VydmVyO1xuICAgICAyXHRcbiAgICAgM1x0LyoqXG4gICAgIDRcdCAqIE9ic2VydmFibGUgaW50ZXJmYWNlIGZvciB0aGUgT2JzZXJ2ZXIgcGF0dGVyblxuICAgICA1XHQgKi9cbiAgICAgNlx0cHVibGljIGludGVyZmFjZSBPYnNlcnZhYmxlPFQ+IHtcbiAgICAgN1x0ICAgIHZvaWQgYWRkT2JzZXJ2ZXIoT2JzZXJ2ZXI8VD4gb2JzZXJ2ZXIpO1xuICAgICA4XHQgICAgdm9pZCByZW1vdmVPYnNlcnZlcihPYnNlcnZlcjxUPiBvYnNlcnZlcik7XG4gICAgIDlcdCAgICB2b2lkIG5vdGlmeU9ic2VydmVycyhUIGRhdGEpO1xuICAgIDEwXHR9XG4uLi5cblBhdGg6IHNyYy9tYW5hZ2VyL1NoYXBlTWFuYWdlci5qYXZhXG4gICAgIDFcdHBhY2thZ2UgbWFuYWdlcjtcbiAgICAgMlx0XG4gICAgIDNcdGltcG9ydCBtb2RlbC4qO1xuICAgICA0XHRpbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDtcbiAgICAgNVx0aW1wb3J0IGphdmEudXRpbC5MaXN0O1xuICAgICA2XHRcbiAgICAgN1x0cHVibGljIGNsYXNzIFNoYXBlTWFuYWdlciB7XG4gICAgIDhcdCAgICBwcml2YXRlIExpc3Q8RHJhd25TaGFwZT4gc2hhcGVzO1xuICAgICA5XHQgICAgXG4gICAgMTBcdCAgICBwdWJsaWMgU2hhcGVNYW5hZ2VyKCkge1xuICAgIDExXHQgICAgICAgIHRoaXMuc2hhcGVzID0gbmV3IEFycmF5TGlzdDw+KCk7XG4gICAgMTJcdCAgICB9XG4gICAgMTNcdCAgICBcbiAgICAxNFx0ICAgIC8qKlxuICAgIDE1XHQgICAgICogVmFsaWRhdGVzIGlmIGEgbGluZSBjYW4gYmUgZHJhd24gYWNjb3JkaW5nIHRvIHRoZSBjb25zdHJhaW50czpcbiAgICAxNlx0ICAgICAqIC0gQm90aCBlbmRzIG9mIHRoZSBsaW5lIG11c3QgYmUgaW5zaWRlIGEgY2lyY2xlXG4gICAgMTdcdCAgICAgKiAtIEEgY2lyY2xlIGNhbiBoYXZlIG9ubHkgb25lIGxpbmVcbiAgICAxOFx0ICAgICAqL1xuICAgIDE5XHQgICAgcHVibGljIFZhbGlkYXRpb25SZXN1bHQgdmFsaWRhdGVMaW5lKGRvdWJsZSBzdGFydFgsIGRvdWJsZSBzdGFydFksIGRvdWJsZSBlbmRYLCBkb3VibGUgZW5kWSkge1xuICAgIDIwXHQgICAgICAgIERyYXduQ2lyY2xlIHN0YXJ0Q2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChzdGFydFgsIHN0YXJ0WSk7XG4gICAgMjFcdCAgICAgICAgRHJhd25DaXJjbGUgZW5kQ2lyY2xlID0gZmluZENpcmNsZUNvbnRhaW5pbmdQb2ludChlbmRYLCBlbmRZKTtcbiAgICAyMlx0ICAgICAgICBcbiAgICAyM1x0ICAgICAgICAvLyBDaGVjayBpZiBib3RoIGVuZHMgYXJlIGluc2lkZSBjaXJjbGVzXG4gICAgMjRcdCAgICAgICAgaWYgKHN0YXJ0Q2lyY2xlID09IG51bGwpIHtcbiAgICAyNVx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIHBvaW50IGRlIGTDqXBhcnQgZGUgbGEgbGlnbmUgZG9pdCDDqnRyZSDDoCBsJ2ludMOpcmlldXIgZCd1biBjZXJjbGVcIik7XG4gICAgMjZcdCAgICAgICAgfVxuICAgIDI3XHQgICAgICAgIFxuICAgIDI4XHQgICAgICAgIGlmIChlbmRDaXJjbGUgPT0gbnVsbCkge1xuICAgIDI5XHQgICAgICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQoZmFsc2UsIFwiTGUgcG9pbnQgZCdhcnJpdsOpZSBkZSBsYSBsaWduZSBkb2l0IMOqdHJlIMOgIGwnaW50w6lyaWV1ciBkJ3VuIGNlcmNsZVwiKTtcbiAgICAzMFx0ICAgICAgICB9XG4gICAgMzFcdCAgICAgICAgXG4gICAgMzJcdCAgICAgICAgLy8gQ2hlY2sgaWYgY2lyY2xlcyBhbHJlYWR5IGhhdmUgbGluZXNcbiAgICAzM1x0ICAgICAgICBpZiAoY2lyY2xlSGFzTGluZShzdGFydENpcmNsZSkpIHtcbiAgICAzNFx0ICAgICAgICAgICAgcmV0dXJuIG5ldyBWYWxpZGF0aW9uUmVzdWx0KGZhbHNlLCBcIkxlIGNlcmNsZSBkZSBkw6lwYXJ0IGNvbnRpZW50IGTDqWrDoCB1bmUgbGlnbmVcIik7XG4gICAgMzVcdCAgICAgICAgfVxuICAgIDM2XHQgICAgICAgIFxuICAgIDM3XHQgICAgICAgIGlmIChjaXJjbGVIYXNMaW5lKGVuZENpcmNsZSkgJiYgIXN0YXJ0Q2lyY2xlLmVxdWFscyhlbmRDaXJjbGUpKSB7XG4gICAgMzhcdCAgICAgICAgICAgIHJldHVybiBuZXcgVmFsaWRhdGlvblJlc3VsdChmYWxzZSwgXCJMZSBjZXJjbGUgZCdhcnJpdsOpZSBjb250aWVudCBkw6lqw6AgdW5lIGxpZ25lXCIpO1xuICAgIDM5XHQgICAgICAgIH1cbiAgICA0MFx0ICAgICAgICBcbiAgICA0MVx0ICAgICAgICByZXR1cm4gbmV3IFZhbGlkYXRpb25SZXN1bHQodHJ1ZSwgXCJMaWduZSB2YWxpZGVcIik7XG4gICAgNDJcdCAgICB9XG4gICAgNDNcdCAgICBcbiAgICA0NFx0ICAgIC8qKlxuICAgIDQ1XHQgICAgICogRmluZHMgYSBjaXJjbGUgdGhhdCBjb250YWlucyB0aGUgZ2l2ZW4gcG9pbnRcbiAgICA0Nlx0ICAgICAqL1xuICAgIDQ3XHQgICAgcHJpdmF0ZSBEcmF3bkNpcmNsZSBmaW5kQ2lyY2xlQ29udGFpbmluZ1BvaW50KGRvdWJsZSB4LCBkb3VibGUgeSkge1xuICAgIDQ4XHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDQ5XHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkNpcmNsZSAmJiBzaGFwZS5jb250YWluc1BvaW50KHgsIHkpKSB7XG4gICAgNTBcdCAgICAgICAgICAgICAgICByZXR1cm4gKERyYXduQ2lyY2xlKSBzaGFwZTtcbiAgICA1MVx0ICAgICAgICAgICAgfVxuICAgIDUyXHQgICAgICAgIH1cbiAgICA1M1x0ICAgICAgICByZXR1cm4gbnVsbDtcbiAgICA1NFx0ICAgIH1cbiAgICA1NVx0ICAgIFxuICAgIDU2XHQgICAgLyoqXG4gICAgNTdcdCAgICAgKiBDaGVja3MgaWYgYSBjaXJjbGUgYWxyZWFkeSBoYXMgYSBsaW5lXG4gICAgNThcdCAgICAgKi9cbiAgICA1OVx0ICAgIHByaXZhdGUgYm9vbGVhbiBjaXJjbGVIYXNMaW5lKERyYXduQ2lyY2xlIGNpcmNsZSkge1xuICAgIDYwXHQgICAgICAgIGZvciAoRHJhd25TaGFwZSBzaGFwZSA6IHNoYXBlcykge1xuICAgIDYxXHQgICAgICAgICAgICBpZiAoc2hhcGUgaW5zdGFuY2VvZiBEcmF3bkxpbmUpIHtcbiAgICA2Mlx0ICAgICAgICAgICAgICAgIERyYXduTGluZSBsaW5lID0gKERyYXduTGluZSkgc2hhcGU7XG4gICAgNjNcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBzdGFydFBvaW50ID0gbGluZS5nZXRTdGFydFBvaW50KCk7XG4gICAgNjRcdCAgICAgICAgICAgICAgICBkb3VibGVbXSBlbmRQb2ludCA9IGxpbmUuZ2V0RW5kUG9pbnQoKTtcbiAgICA2NVx0ICAgICAgICAgICAgICAgIFxuICAgIDY2XHQgICAgICAgICAgICAgICAgaWYgKGNpcmNsZS5jb250YWluc1BvaW50KHN0YXJ0UG9pbnRbMF0sIHN0YXJ0UG9pbnRbMV0pIHx8IFxuICAgIDY3XHQgICAgICAgICAgICAgICAgICAgIGNpcmNsZS5jb250YWluc1BvaW50KGVuZFBvaW50WzBdLCBlbmRQb2ludFsxXSkpIHtcbiAgICA2OFx0ICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICA2OVx0ICAgICAgICAgICAgICAgIH1cbiAgICA3MFx0ICAgICAgICAgICAgfVxuICAgIDcxXHQgICAgICAgIH1cbiAgICA3Mlx0ICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgNzNcdCAgICB9XG4gICAgNzRcdCAgICBcbiAgICA3NVx0ICAgIC8qKlxuICAgIDc2XHQgICAgICogQWRkcyBhIHNoYXBlIHRvIHRoZSBtYW5hZ2VyXG4gICAgNzdcdCAgICAgKi9cbiAgICA3OFx0ICAgIHB1YmxpYyB2b2lkIGFkZFNoYXBlKERyYXduU2hhcGUgc2hhcGUpIHtcbiAgICA3OVx0ICAgICAgICBzaGFwZXMuYWRkKHNoYXBlKTtcbiAgICA4MFx0ICAgIH1cbiAgICA4MVx0ICAgIFxuICAgIDgyXHQgICAgLyoqXG4gICAgODNcdCAgICAgKiBHZXRzIGFsbCBzaGFwZXNcbiAgICA4NFx0ICAgICAqL1xuICAgIDg1XHQgICAgcHVibGljIExpc3Q8RHJhd25TaGFwZT4gZ2V0U2hhcGVzKCkge1xuICAgIDg2XHQgICAgICAgIHJldHVybiBuZXcgQXJyYXlMaXN0PD4oc2hhcGVzKTtcbiAgICA4N1x0ICAgIH1cbiAgICA4OFx0ICAgIFxuICAgIDg5XHQgICAgLyoqXG4gICAgOTBcdCAgICAgKiBDbGVhcnMgYWxsIHNoYXBlc1xuICAgIDkxXHQgICAgICovXG4gICAgOTJcdCAgICBwdWJsaWMgdm9pZCBjbGVhclNoYXBlcygpIHtcbiAgICA5M1x0ICAgICAgICBzaGFwZXMuY2xlYXIoKTtcbiAgICA5NFx0ICAgIH1cbiAgICA5NVx0ICAgIFxuICAgIDk2XHQgICAgLyoqXG4gICAgOTdcdCAgICAgKiBSZXN1bHQgY2xhc3MgZm9yIHZhbGlkYXRpb24gb3BlcmF0aW9uc1xuICAgIDk4XHQgICAgICovXG4gICAgOTlcdCAgICBwdWJsaWMgc3RhdGljIGNsYXNzIFZhbGlkYXRpb25SZXN1bHQge1xuICAgMTAwXHQgICAgICAgIHByaXZhdGUgZmluYWwgYm9vbGVhbiB2YWxpZDtcbiAgIDEwMVx0ICAgICAgICBwcml2YXRlIGZpbmFsIFN0cmluZyBtZXNzYWdlO1xuICAgMTAyXHQgICAgICAgIFxuICAgMTAzXHQgICAgICAgIHB1YmxpYyBWYWxpZGF0aW9uUmVzdWx0KGJvb2xlYW4gdmFsaWQsIFN0cmluZyBtZXNzYWdlKSB7XG4gICAxMDRcdCAgICAgICAgICAgIHRoaXMudmFsaWQgPSB2YWxpZDtcbiAgIDEwNVx0ICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcbiAgIDEwNlx0ICAgICAgICB9XG4gICAxMDdcdCAgICAgICAgXG4gICAxMDhcdCAgICAgICAgcHVibGljIGJvb2xlYW4gaXNWYWxpZCgpIHsgcmV0dXJuIHZhbGlkOyB9XG4gICAxMDlcdCAgICAgICAgcHVibGljIFN0cmluZyBnZXRNZXNzYWdlKCkgeyByZXR1cm4gbWVzc2FnZTsgfVxuICAgMTEwXHQgICAgfVxuICAgMTExXHR9XG4uLi5cblBhdGg6IHNyYy9zdHJhdGVneS9DaXJjbGVEcmF3aW5nU3RyYXRlZ3kuamF2YVxuICAgICAxXHRwYWNrYWdlIHN0cmF0ZWd5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IEZhY3RvcnkuQ2lyY2xlU2hhcGU7XG4gICAgIDRcdGltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcbiAgICAgNVx0aW1wb3J0IG1hbmFnZXIuU2hhcGVNYW5hZ2VyO1xuICAgICA2XHRpbXBvcnQgbW9kZWwuRHJhd25DaXJjbGU7XG4gICAgIDdcdFxuICAgICA4XHRwdWJsaWMgY2xhc3MgQ2lyY2xlRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcbiAgICAgOVx0ICAgIFxuICAgIDEwXHQgICAgQE92ZXJyaWRlXG4gICAgMTFcdCAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXG4gICAgMTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMTNcdCAgICAgICAgdHJ5IHtcbiAgICAxNFx0ICAgICAgICAgICAgLy8gQ3JlYXRlIGFuZCBkcmF3IHRoZSBjaXJjbGVcbiAgICAxNVx0ICAgICAgICAgICAgQ2lyY2xlU2hhcGUgY2lyY2xlU2hhcGUgPSBuZXcgQ2lyY2xlU2hhcGUoKTtcbiAgICAxNlx0ICAgICAgICAgICAgY2lyY2xlU2hhcGUuZHJhdyhnYywgc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgIDE3XHQgICAgICAgICAgICBcbiAgICAxOFx0ICAgICAgICAgICAgLy8gQWRkIHRvIHNoYXBlIG1hbmFnZXIgZm9yIHRyYWNraW5nXG4gICAgMTlcdCAgICAgICAgICAgIERyYXduQ2lyY2xlIGRyYXduQ2lyY2xlID0gbmV3IERyYXduQ2lyY2xlKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAyMFx0ICAgICAgICAgICAgc2hhcGVNYW5hZ2VyLmFkZFNoYXBlKGRyYXduQ2lyY2xlKTtcbiAgICAyMVx0ICAgICAgICAgICAgXG4gICAgMjJcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LnN1Y2Nlc3MoXCJDZXJjbGUgZGVzc2luw6kgYXZlYyBzdWNjw6hzXCIpO1xuICAgIDIzXHQgICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7XG4gICAgMjRcdCAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LmZhaWx1cmUoXCJFcnJldXIgbG9ycyBkdSBkZXNzaW4gZHUgY2VyY2xlOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICAyNVx0ICAgICAgICB9XG4gICAgMjZcdCAgICB9XG4gICAgMjdcdCAgICBcbiAgICAyOFx0ICAgIEBPdmVycmlkZVxuICAgIDI5XHQgICAgcHVibGljIFN0cmluZyBnZXRTdHJhdGVneU5hbWUoKSB7XG4gICAgMzBcdCAgICAgICAgcmV0dXJuIFwiQ2lyY2xlXCI7XG4gICAgMzFcdCAgICB9XG4gICAgMzJcdH1cbi4uLlxuUGF0aDogc3JjL29ic2VydmVyL09ic2VydmVyLmphdmFcbiAgICAgMVx0cGFja2FnZSBvYnNlcnZlcjtcbiAgICAgMlx0XG4gICAgIDNcdC8qKlxuICAgICA0XHQgKiBPYnNlcnZlciBpbnRlcmZhY2UgZm9yIHRoZSBPYnNlcnZlciBwYXR0ZXJuXG4gICAgIDVcdCAqL1xuICAgICA2XHRwdWJsaWMgaW50ZXJmYWNlIE9ic2VydmVyPFQ+IHtcbiAgICAgN1x0ICAgIHZvaWQgdXBkYXRlKFQgZGF0YSk7XG4gICAgIDhcdH1cbi4uLlxuUGF0aDogc3JjL3N0cmF0ZWd5L0xpbmVEcmF3aW5nU3RyYXRlZ3kuamF2YVxuICAgICAxXHRwYWNrYWdlIHN0cmF0ZWd5O1xuICAgICAyXHRcbiAgICAgM1x0aW1wb3J0IEZhY3RvcnkuTGluZVNoYXBlO1xuICAgICA0XHRpbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG4gICAgIDVcdGltcG9ydCBtYW5hZ2VyLlNoYXBlTWFuYWdlcjtcbiAgICAgNlx0aW1wb3J0IG1vZGVsLkRyYXduTGluZTtcbiAgICAgN1x0XG4gICAgIDhcdHB1YmxpYyBjbGFzcyBMaW5lRHJhd2luZ1N0cmF0ZWd5IGltcGxlbWVudHMgRHJhd2luZ1N0cmF0ZWd5IHtcbiAgICAgOVx0ICAgIFxuICAgIDEwXHQgICAgQE92ZXJyaWRlXG4gICAgMTFcdCAgICBwdWJsaWMgRHJhd2luZ1Jlc3VsdCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVNYW5hZ2VyIHNoYXBlTWFuYWdlciwgXG4gICAgMTJcdCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG91YmxlIHN0YXJ0WCwgZG91YmxlIHN0YXJ0WSwgZG91YmxlIGVuZFgsIGRvdWJsZSBlbmRZKSB7XG4gICAgMTNcdCAgICAgICAgdHJ5IHtcbiAgICAxNFx0ICAgICAgICAgICAgLy8gVmFsaWRhdGUgbGluZSBjb25zdHJhaW50cyBmaXJzdFxuICAgIDE1XHQgICAgICAgICAgICBTaGFwZU1hbmFnZXIuVmFsaWRhdGlvblJlc3VsdCB2YWxpZGF0aW9uID0gXG4gICAgMTZcdCAgICAgICAgICAgICAgICBzaGFwZU1hbmFnZXIudmFsaWRhdGVMaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAxN1x0ICAgICAgICAgICAgXG4gICAgMThcdCAgICAgICAgICAgIGlmICghdmFsaWRhdGlvbi5pc1ZhbGlkKCkpIHtcbiAgICAxOVx0ICAgICAgICAgICAgICAgIHJldHVybiBEcmF3aW5nUmVzdWx0LmZhaWx1cmUodmFsaWRhdGlvbi5nZXRNZXNzYWdlKCkpO1xuICAgIDIwXHQgICAgICAgICAgICB9XG4gICAgMjFcdCAgICAgICAgICAgIFxuICAgIDIyXHQgICAgICAgICAgICAvLyBDcmVhdGUgYW5kIGRyYXcgdGhlIGxpbmVcbiAgICAyM1x0ICAgICAgICAgICAgTGluZVNoYXBlIGxpbmVTaGFwZSA9IG5ldyBMaW5lU2hhcGUoKTtcbiAgICAyNFx0ICAgICAgICAgICAgbGluZVNoYXBlLmRyYXcoZ2MsIHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAyNVx0ICAgICAgICAgICAgXG4gICAgMjZcdCAgICAgICAgICAgIC8vIEFkZCB0byBzaGFwZSBtYW5hZ2VyIGZvciB0cmFja2luZ1xuICAgIDI3XHQgICAgICAgICAgICBEcmF3bkxpbmUgZHJhd25MaW5lID0gbmV3IERyYXduTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgMjhcdCAgICAgICAgICAgIHNoYXBlTWFuYWdlci5hZGRTaGFwZShkcmF3bkxpbmUpO1xuICAgIDI5XHQgICAgICAgICAgICBcbiAgICAzMFx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuc3VjY2VzcyhcIkxpZ25lIGRlc3NpbsOpZSBhdmVjIHN1Y2PDqHNcIik7XG4gICAgMzFcdCAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uIGUpIHtcbiAgICAzMlx0ICAgICAgICAgICAgcmV0dXJuIERyYXdpbmdSZXN1bHQuZmFpbHVyZShcIkVycmV1ciBsb3JzIGR1IGRlc3NpbiBkZSBsYSBsaWduZTogXCIgKyBlLmdldE1lc3NhZ2UoKSk7XG4gICAgMzNcdCAgICAgICAgfVxuICAgIDM0XHQgICAgfVxuICAgIDM1XHQgICAgXG4gICAgMzZcdCAgICBAT3ZlcnJpZGVcbiAgICAzN1x0ICAgIHB1YmxpYyBTdHJpbmcgZ2V0U3RyYXRlZ3lOYW1lKCkge1xuICAgIDM4XHQgICAgICAgIHJldHVybiBcIkxpbmVcIjtcbiAgICAzOVx0ICAgIH1cbiAgICA0MFx0fVxuLi4uXG5QYXRoOiBzcmMvbG9nZ2luZy9Mb2dnaW5nTWFuYWdlci5qYXZhXG4uLi5cbiAgICA2MVx0ICAgIFxuICAgIDYyXHQgICAgLyoqXG4gICAgNjNcdCAgICAgKiBMb2dzIGFuIGVudHJ5IHRvIGFsbCBhdmFpbGFibGUgc3RyYXRlZ2llcyBhc3luY2hyb25vdXNseVxuICAgIDY0XHQgICAgICovXG4gICAgNjVcdCAgICBwdWJsaWMgdm9pZCBsb2coTG9nRW50cnkgZW50cnkpIHtcbiAgICA2Nlx0ICAgICAgICBpZiAoIWluaXRpYWxpemVkKSB7XG4gICAgNjdcdCAgICAgICAgICAgIFN5c3RlbS5lcnIucHJpbnRsbihcIkxvZ2dpbmdNYW5hZ2VyIG5vdCBpbml0aWFsaXplZFwiKTtcbiAgICA2OFx0ICAgICAgICAgICAgcmV0dXJuO1xuICAgIDY5XHQgICAgICAgIH1cbiAgICA3MFx0ICAgICAgICBcbiAgICA3MVx0ICAgICAgICAvLyBMb2cgYXN5bmNocm9ub3VzbHkgdG8gYXZvaWQgYmxvY2tpbmcgdGhlIFVJXG4gICAgNzJcdCAgICAgICAgQ29tcGxldGFibGVGdXR1cmUucnVuQXN5bmMoKCkgLT4ge1xuICAgIDczXHQgICAgICAgICAgICBmb3IgKExvZ2dpbmdTdHJhdGVneSBzdHJhdGVneSA6IHN0cmF0ZWdpZXMpIHtcbiAgICA3NFx0ICAgICAgICAgICAgICAgIGlmIChzdHJhdGVneS5pc0F2YWlsYWJsZSgpKSB7XG4gICAgNzVcdCAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICA3Nlx0ICAgICAgICAgICAgICAgICAgICAgICAgc3RyYXRlZ3kubG9nKGVudHJ5KTtcbiAgICA3N1x0ICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gZSkge1xuICAgIDc4XHQgICAgICAgICAgICAgICAgICAgICAgICBTeXN0ZW0uZXJyLnByaW50bG4oXCJFcnJvciBsb2dnaW5nIHdpdGggc3RyYXRlZ3kgXCIgKyBzdHJhdGVneS5nZXRTdHJhdGVneU5hbWUoKSArIFwiOiBcIiArIGUuZ2V0TWVzc2FnZSgpKTtcbiAgICA3OVx0ICAgICAgICAgICAgICAgICAgICB9XG4gICAgODBcdCAgICAgICAgICAgICAgICB9XG4gICAgODFcdCAgICAgICAgICAgIH1cbiAgICA4Mlx0ICAgICAgICB9LCBleGVjdXRvclNlcnZpY2UpO1xuICAgIDgzXHQgICAgfVxuICAgIDg0XHQgICAgXG4gICAgODVcdCAgICAvKipcbiAgICA4Nlx0ICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byBsb2cgdG9vbCBzZWxlY3Rpb25cbiAgICA4N1x0ICAgICAqL1xuICAgIDg4XHQgICAgcHVibGljIHZvaWQgbG9nVG9vbFNlbGVjdGlvbihTdHJpbmcgdG9vbE5hbWUpIHtcbiAgICA4OVx0ICAgICAgICBMb2dFbnRyeSBlbnRyeSA9IG5ldyBMb2dFbnRyeShcbiAgICA5MFx0ICAgICAgICAgICAgTG9nRW50cnkuQWN0aW9uVHlwZS5UT09MX1NFTEVDVElPTixcbiAgIC4uLiIsImlzRXJyb3IiOmZhbHNlLCJyZXF1ZXN0SWQiOiIifX0sImVjMDE5Njk3LTExNGEtNDk0YS04MWE4LTcyZGUwYzBlODdlYzt0b29sdV8wMUoxMzFTd0cxVVhwMmdjRnhyZ3lxYkQiOnsicmVxdWVzdElkIjoiZWMwMTk2OTctMTE0YS00OTRhLTgxYTgtNzJkZTBjMGU4N2VjIiwidG9vbFVzZUlkIjoidG9vbHVfMDFKMTMxU3dHMVVYcDJnY0Z4cmd5cWJEIiwicGhhc2UiOjYsInJlc3VsdCI6eyJ0ZXh0IjoiRmlsZSBub3QgZm91bmQ6IHNyYy9zdHJhdGVneS9DaXJjbGVEcmF3aW5nU3RyYXRlZ3kuamF2YSIsImlzRXJyb3IiOnRydWUsInJlcXVlc3RJZCI6IiJ9fSwiNjBlODlmNDktMWVkNi00MmM2LWIzNGMtZWI0ODgzMzkyNzJhO3Rvb2x1XzAxR1N4TjRvOWJ2eWpjeEtERlRjZUZhVSI6eyJyZXF1ZXN0SWQiOiI2MGU4OWY0OS0xZWQ2LTQyYzYtYjM0Yy1lYjQ4ODMzOTI3MmEiLCJ0b29sVXNlSWQiOiJ0b29sdV8wMUdTeE40bzlidnlqY3hLREZUY2VGYVUiLCJwaGFzZSI6M319LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6dHJ1ZSwiZXh0cmFEYXRhIjp7ImlzQWdlbnRDb252ZXJzYXRpb24iOnRydWUsImhhc0RpcnR5RWRpdHMiOnRydWUsImJhc2VsaW5lVGltZXN0YW1wIjowfSwicGVyc29uYVR5cGUiOjAsInJvb3RUYXNrVXVpZCI6ImY0ODMwYTdkLWFmMzEtNGE0ZC1iOTAxLWI5NjUwY2FhNDc2NyIsImRyYWZ0QWN0aXZlQ29udGV4dElkcyI6WyJ1c2VyR3VpZGVsaW5lcyIsImFnZW50TWVtb3JpZXMiXX0sImNiZTUyYmY2LTRlMWUtNDUxYy04NmJlLTUzYTg5MjhiMmIyMyI6eyJpZCI6ImNiZTUyYmY2LTRlMWUtNDUxYy04NmJlLTUzYTg5MjhiMmIyMyIsImNyZWF0ZWRBdElzbyI6IjIwMjUtMDUtMzBUMDk6MTQ6MTkuMTU2WiIsImxhc3RJbnRlcmFjdGVkQXRJc28iOiIyMDI1LTA1LTMwVDEzOjEzOjQ1LjU1M1oiLCJjaGF0SGlzdG9yeSI6W3sic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiIxODgzN2MwOS1kMWE5LTRlNjQtYjU5My0wZWQ1YTJmOTAyNTAiLCJyZXF1ZXN0X21lc3NhZ2UiOiJyZWFkIHRoZSBjb2RlIGFnYWluIGFuZCBmaXggdGhpcyBwcm9ibGVtOiBcbkxvZ2dlci5nZXRJbnN0YW5jZSgpLmxvZyhzaGFwZUZhY3RvcnksIFwiRHJhd2luZ1wiKTtcbkNhbm5vdCByZXNvbHZlIG1ldGhvZCAnZ2V0SW5zdGFuY2UnIGluICdMb2dnZXInIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6InJlYWQgdGhlIGNvZGUgYWdhaW4gYW5kIGZpeCB0aGlzIHByb2JsZW06ICJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiTG9nZ2VyLmdldEluc3RhbmNlKCkubG9nKHNoYXBlRmFjdG9yeSwgXCJEcmF3aW5nXCIpOyJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiQ2Fubm90IHJlc29sdmUgbWV0aG9kICdnZXRJbnN0YW5jZScgaW4gJ0xvZ2dlcicifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IlRoZSBpc3N1ZSBpcyB0aGF0IHlvdSdyZSB0cnlpbmcgdG8gdXNlIHRoZSBgTG9nZ2VyYCBjbGFzcyBmcm9tIHRoZSB3cm9uZyBwYWNrYWdlLiBZb3UndmUgaW1wb3J0ZWQgYGNvbS5zdW4uamF2YWZ4LmxvZ2dpbmcuTG9nZ2VyYCBidXQgeW91IG5lZWQgdG8gdXNlIHlvdXIgY3VzdG9tIGBMb2dnZXJgIGNsYXNzIGZyb20gdGhlIGBMb2dnZXJgIHBhY2thZ2UuXG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9MaW5lU2hhcGUuamF2YVwiIG1vZGU9XCJFRElUXCI+XG5gYGBqYXZhXG5wYWNrYWdlIFNoYXBlRmFjdG9yeS5JbXBsZW1lbnRTaGFwZTtcblxuaW1wb3J0IFNoYXBlRmFjdG9yeS5TaGFwZUZhY3Rvcnk7XG5pbXBvcnQgTG9nZ2VyLkxvZ2dlcjtcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcblxucHVibGljIGNsYXNzIExpbmVTaGFwZSBpbXBsZW1lbnRzIFNoYXBlIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVGYWN0b3J5IHNoYXBlRmFjdG9yeSkge1xuICAgICAgICBkb3VibGUgc3RhcnRYID0gc2hhcGVGYWN0b3J5LmdldFN0YXJ0WCgpO1xuICAgICAgICBkb3VibGUgc3RhcnRZID0gc2hhcGVGYWN0b3J5LmdldFN0YXJ0WSgpO1xuICAgICAgICBkb3VibGUgZW5kWCA9IHNoYXBlRmFjdG9yeS5nZXRFbmRYKCk7XG4gICAgICAgIGRvdWJsZSBlbmRZID0gc2hhcGVGYWN0b3J5LmdldEVuZFkoKTtcbiAgICAgICAgZ2Muc3Ryb2tlTGluZShzdGFydFgsIHN0YXJ0WSwgZW5kWCwgZW5kWSk7XG4gICAgICAgIExvZ2dlci5nZXRJbnN0YW5jZSgpLmxvZyhzaGFwZUZhY3RvcnksIFwiRHJhd2luZ1wiKTtcbiAgICB9XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cblRoZSBmaXggY2hhbmdlcyB0aGUgaW1wb3J0IGZyb20gYGNvbS5zdW4uamF2YWZ4LmxvZ2dpbmcuTG9nZ2VyYCB0byBgTG9nZ2VyLkxvZ2dlcmAgdG8gdXNlIHlvdXIgY3VzdG9tIExvZ2dlciBpbXBsZW1lbnRhdGlvbiB0aGF0IGhhcyB0aGUgYGdldEluc3RhbmNlKClgIG1ldGhvZCBhbmQgYWNjZXB0cyBhIGBTaGFwZUZhY3RvcnlgIGFuZCBhY3Rpb24gdHlwZSBzdHJpbmcuXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvTGluZVNoYXBlLmphdmE6MC00NDVcbnNyYy9Mb2dnZXIvTG9nZ2VyLmphdmE6MC01MzVcbnNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhOjAtMjYzXG5zcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YToyNjMtMTE3MVxuc3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhOjAtMzcwXG5zcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmE6MzcwLTEzMTlcbnNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YToxMzE5LTE0ODZcbnNyYy9Mb2dnZXIvTG9nZ2VyU3RyYXRlZ3kuamF2YTowLTE0OFxuc3JjL01haW4uamF2YTowLTIwNVxuc3JjL01haW4uamF2YToyMDUtMTAxNlxuc3JjL1pvbmUvRHJhd2luZ1pvbmUuamF2YTowLTIwNFxuc3JjL1pvbmUvRHJhd2luZ1pvbmUuamF2YToyMDQtMTEyNlxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YTowLTEwNlxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YToxMDYtOTQ0XG5zcmMvTG9nZ2VyL0RhdGFiYXNlQ29ubmVjdGlvbi5qYXZhOjk0NC0xMjA5XG5zcmMvRmFjdG9yeS9DaXJjbGVTaGFwZS5qYXZhOjAtMzYwXG5zcmMvU2hhcGVGYWN0b3J5L0xpbmVTaGFwZS5qYXZhOjAtNDQwXG5zcmMvRmFjdG9yeS9SZWN0YW5nbGVTaGFwZS5qYXZhOjAtNDY1XG5zcmMvRmFjdG9yeS9MaW5lU2hhcGUuamF2YTowLTI3N1xuc3JjL0xvZ2dlci9Db25zb2xlTG9nZ2VyLmphdmE6MC0zMzdcbnNyYy9GYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YTowLTU4Mlxuc3JjL1NoYXBlRmFjdG9yeS9DaXJjbGVTaGFwZS5qYXZhOjAtNTI1XG5zcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YTowLTY0OVxuc3JjL0ZhY3RvcnkvU2hhcGUuamF2YTowLTE3N1xuc3JjL0ZhY3RvcnkvTGluZUZhY3RvcnkuamF2YTowLTU3OFxuc3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhOjAtNjQzXG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0NpcmNsZVNoYXBlLmphdmE6MC01MzBcbnNyYy9TaGFwZUZhY3RvcnkvU2hhcGUuamF2YTowLTE1MVxuc3JjL0ZhY3RvcnkvUmVjdGFuZ2xlRmFjdG9yeS5qYXZhOjAtMTU5XG5zcmMvU2hhcGVGYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhOjAtMzk2XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL1NoYXBlLmphdmE6MC0xNTZcbnNyYy9GYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhOjAtMzU4XG5zcmMvWm9uZS9Ub29sYmFyWm9uZS5qYXZhOjAtNDRcbi5naXRpZ25vcmU6MC0zNDQifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJyZWFkIHRoZSBjb2RlIGFnYWluIGFuZCBmaXggdGhpcyBwcm9ibGVtOiBcbkxvZ2dlci5nZXRJbnN0YW5jZSgpLmxvZyhzaGFwZUZhY3RvcnksIFwiRHJhd2luZ1wiKTtcbkNhbm5vdCByZXNvbHZlIG1ldGhvZCAnZ2V0SW5zdGFuY2UnIGluICdMb2dnZXInIn19LHsiaWQiOjEsInR5cGUiOjQsImlkZV9zdGF0ZV9ub2RlIjp7IndvcmtzcGFjZUZvbGRlcnMiOlt7InJlcG9zaXRvcnlSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiIsImZvbGRlclJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIn1dLCJ3b3Jrc3BhY2VGb2xkZXJzVW5jaGFuZ2VkIjpmYWxzZX19XSwidGltZXN0YW1wIjoiMjAyNS0wNS0zMFQwOToxNTowNS43MThaIiwicmVzcG9uc2VfdGV4dCI6IlRoZSBpc3N1ZSBpcyB0aGF0IHlvdSdyZSB0cnlpbmcgdG8gdXNlIHRoZSBgTG9nZ2VyYCBjbGFzcyBmcm9tIHRoZSB3cm9uZyBwYWNrYWdlLiBZb3UndmUgaW1wb3J0ZWQgYGNvbS5zdW4uamF2YWZ4LmxvZ2dpbmcuTG9nZ2VyYCBidXQgeW91IG5lZWQgdG8gdXNlIHlvdXIgY3VzdG9tIGBMb2dnZXJgIGNsYXNzIGZyb20gdGhlIGBMb2dnZXJgIHBhY2thZ2UuXG5cbmBgYGBqYXZhIHBhdGg9c3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9MaW5lU2hhcGUuamF2YSBtb2RlPUVESVRcbnBhY2thZ2UgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlO1xuXG5pbXBvcnQgU2hhcGVGYWN0b3J5LlNoYXBlRmFjdG9yeTtcbmltcG9ydCBMb2dnZXIuTG9nZ2VyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuXG5wdWJsaWMgY2xhc3MgTGluZVNoYXBlIGltcGxlbWVudHMgU2hhcGUge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZUZhY3Rvcnkgc2hhcGVGYWN0b3J5KSB7XG4gICAgICAgIGRvdWJsZSBzdGFydFggPSBzaGFwZUZhY3RvcnkuZ2V0U3RhcnRYKCk7XG4gICAgICAgIGRvdWJsZSBzdGFydFkgPSBzaGFwZUZhY3RvcnkuZ2V0U3RhcnRZKCk7XG4gICAgICAgIGRvdWJsZSBlbmRYID0gc2hhcGVGYWN0b3J5LmdldEVuZFgoKTtcbiAgICAgICAgZG91YmxlIGVuZFkgPSBzaGFwZUZhY3RvcnkuZ2V0RW5kWSgpO1xuICAgICAgICBnYy5zdHJva2VMaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAgICAgTG9nZ2VyLmdldEluc3RhbmNlKCkubG9nKHNoYXBlRmFjdG9yeSwgXCJEcmF3aW5nXCIpO1xuICAgIH1cbn1cbmBgYGBcblxuVGhlIGZpeCBjaGFuZ2VzIHRoZSBpbXBvcnQgZnJvbSBgY29tLnN1bi5qYXZhZngubG9nZ2luZy5Mb2dnZXJgIHRvIGBMb2dnZXIuTG9nZ2VyYCB0byB1c2UgeW91ciBjdXN0b20gTG9nZ2VyIGltcGxlbWVudGF0aW9uIHRoYXQgaGFzIHRoZSBgZ2V0SW5zdGFuY2UoKWAgbWV0aG9kIGFuZCBhY2NlcHRzIGEgYFNoYXBlRmFjdG9yeWAgYW5kIGFjdGlvbiB0eXBlIHN0cmluZy5cbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W3siY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjQ0NSIsImJsb2JfbmFtZSI6IjUzNzRlNTBhZTEyZTBmYjBhMjI0ZWM3M2YzYjczZjg4N2IxODlmNDY2ZjA3NGY0MGQ3OGE1OGUyYTQzYjY1YmEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0xpbmVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjUzNSIsImJsb2JfbmFtZSI6ImIxMGFjODZhZmI5NjQ2NzAyMDE1ZjM3MjQyNDFjZDQzOTg2OTFhNmU1N2Q3NzIzYTAwMjE4YjRmMjE5Y2E4OTYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0xvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjI2MyIsImJsb2JfbmFtZSI6ImIwN2Q3OTJkNGRiMmNmMzdiNzYyYzQ0OGM2ODBhZTFmOWZjYTMwZDYxMDEyN2Q2YTA3ZGU5NDUyN2JmOWU0NzMiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIyNjMiLCJjaGFyX2VuZCI6IjExNzEiLCJibG9iX25hbWUiOiJiMDdkNzkyZDRkYjJjZjM3Yjc2MmM0NDhjNjgwYWUxZjlmY2EzMGQ2MTAxMjdkNmEwN2RlOTQ1MjdiZjllNDczIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMzcwIiwiYmxvYl9uYW1lIjoiY2QzMGM3MjkyY2ZhNzExOWM3NzA1ZDA1M2NlODU4ODg4YTFmNTVjZWMwMGJhNDQwYWMwNTQ0YTA3MDdmNGM1YyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIzNzAiLCJjaGFyX2VuZCI6IjEzMTkiLCJibG9iX25hbWUiOiJjZDMwYzcyOTJjZmE3MTE5Yzc3MDVkMDUzY2U4NTg4ODhhMWY1NWNlYzAwYmE0NDBhYzA1NDRhMDcwN2Y0YzVjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjEzMTkiLCJjaGFyX2VuZCI6IjE0ODYiLCJibG9iX25hbWUiOiJjZDMwYzcyOTJjZmE3MTE5Yzc3MDVkMDUzY2U4NTg4ODhhMWY1NWNlYzAwYmE0NDBhYzA1NDRhMDcwN2Y0YzVjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjE0OCIsImJsb2JfbmFtZSI6IjRmNTM3ZGViZDZmZWZkMjczN2I3MWIxMzYyMTFiOGYxZjY2NTc1MzUwNjczNzAxYzJiN2E2ZTEyMWU2ZjlmNTYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0xvZ2dlclN0cmF0ZWd5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMjA1IiwiYmxvYl9uYW1lIjoiOGFmOTAxMmQ2YjgyOTliMWVkM2UzNTM0OWFhNWExNjQ1MDAwNTVkNmY4MmE4NWRmODE0MjJkMDE1NDE2ZTA3YyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9NYWluLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMjA1IiwiY2hhcl9lbmQiOiIxMDE2IiwiYmxvYl9uYW1lIjoiOGFmOTAxMmQ2YjgyOTliMWVkM2UzNTM0OWFhNWExNjQ1MDAwNTVkNmY4MmE4NWRmODE0MjJkMDE1NDE2ZTA3YyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9NYWluLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMjA0IiwiYmxvYl9uYW1lIjoiYzA0MTc3MjFlNGNhOTg3NmIwNjFiNzcwMzUzM2ZjZTIxNzVjMWFjMjExMWYzZWZkN2JmYzVjNTUyODEwMjc5NSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9ab25lL0RyYXdpbmdab25lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMjA0IiwiY2hhcl9lbmQiOiIxMTI2IiwiYmxvYl9uYW1lIjoiYzA0MTc3MjFlNGNhOTg3NmIwNjFiNzcwMzUzM2ZjZTIxNzVjMWFjMjExMWYzZWZkN2JmYzVjNTUyODEwMjc5NSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9ab25lL0RyYXdpbmdab25lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTA2IiwiYmxvYl9uYW1lIjoiOWMwMGM2YTczOGZiNTQ0MmU4ZDI0NDgxZjI2YTM3OTBkZTQ2NGRiM2E1YTE3YTg0MTAyNWU3ZTg2MWZiYWNhOSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VDb25uZWN0aW9uLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTA2IiwiY2hhcl9lbmQiOiI5NDQiLCJibG9iX25hbWUiOiI5YzAwYzZhNzM4ZmI1NDQyZThkMjQ0ODFmMjZhMzc5MGRlNDY0ZGIzYTVhMTdhODQxMDI1ZTdlODYxZmJhY2E5IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI5NDQiLCJjaGFyX2VuZCI6IjEyMDkiLCJibG9iX25hbWUiOiI5YzAwYzZhNzM4ZmI1NDQyZThkMjQ0ODFmMjZhMzc5MGRlNDY0ZGIzYTVhMTdhODQxMDI1ZTdlODYxZmJhY2E5IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNjAiLCJibG9iX25hbWUiOiIwOWEwZWYwOGVkZTU5OGQ5M2UyNDNkYTlhNzAwZTU2ZGE1ZDU5NWQyMTFmNDc0YzlhNGZmNThiMTdlMGUxYzliIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvQ2lyY2xlU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI0NDAiLCJibG9iX25hbWUiOiJhZjliZjM2MzExYjE5OGE4MGFhMWY2NThkZWI5MTJmZWY3ZDM3MGZlYjlmZWM0YWRlMWM1NmIyZmVjMWM0OWZkIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9MaW5lU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI0NjUiLCJibG9iX25hbWUiOiI0MmE1ZmE0NjcxNDgzMWIzNzRmYjcyNGI5ZTBkMDE0Mjg5NmRiNmQxYThmZDUyMzkxMThiYzM5MTVjYWNjZTBlIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvUmVjdGFuZ2xlU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIyNzciLCJibG9iX25hbWUiOiJiNjU5NzA5ZmRjYTVmMGVkYjlhNjliM2QyOTQwYTRhYWUzYzEwOGRlMzljMzYwOGUxOWM1OTJhNWUyZGU1YWI2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0ZhY3RvcnkvTGluZVNoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMzM3IiwiYmxvYl9uYW1lIjoiZGQzZjk3OTM3NmJmMmE4OTM4NTUyZTIzYzM2YmU5ZDk0NTg0YjU3NjEyODMyNTAzMGFkMTIzMjI4N2UxMzg3MCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvQ29uc29sZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjU4MiIsImJsb2JfbmFtZSI6IjBhNTkwMTdiZmQ5YTg2ZjM1NDNlNWQ3MDdjY2IwOGExZmZhOGFkMTNhNzYyNTkwMjQzY2Q2OWRlNDhhNDA3MWMiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvRmFjdG9yeS9DaXJjbGVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNTI1IiwiYmxvYl9uYW1lIjoiYWQyZWFkZTkxMmMwYmZkNTQzYjE5NTFlODZkNjljNTU2MGZlYmRkYzliMzRmYjVlZTg3ZDZiYzg2MjU2YTFhNCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvQ2lyY2xlU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI2NDkiLCJibG9iX25hbWUiOiJlMWNhZDFhN2ZlYjEwYTJjZDU2YTA2MDA4MWU2OTRlMjI1MTdhMDMyMWMxMWEyZjdiNTVhOTIyZTExN2Y4NmE5IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9DaXJjbGVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTc3IiwiYmxvYl9uYW1lIjoiMzZlYTY4YWY3MmYzMzMxMDM5MDZjY2MzNzk3ZjE3YjVkOWM5ZDA0ZmU2YWFhMDg1OTc2MjZhOTQwY2NiOGEyMiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9GYWN0b3J5L1NoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNTc4IiwiYmxvYl9uYW1lIjoiNTdmNTg1YTgxNWJmZGRmODU3ZjMxNTk5ZGU4NTc2MGQyYTVhMGNkNmVjNDQwNzVkNzUwODk1ZTIzOWY2YTg4MyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9GYWN0b3J5L0xpbmVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNjQzIiwiYmxvYl9uYW1lIjoiYjVjYTU4NjhhNzE4NTc5ZDg0ZjBlZWYxMTJmZGEyODdmZTM1YTIxNjg2YmQ4NDEwNzZiODUxZWE0ZGNlMDk5MyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI1MzAiLCJibG9iX25hbWUiOiI1YjlmMjZkODdkZGZhMzllNTM1NDI3MmFmZmM1OWViNjE5MjEwZGQxNDRhMGJlMjY1OGQwMmY1OGUwNTIzYTA1IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjE1MSIsImJsb2JfbmFtZSI6IjY4MWIzYzVkNThhNWM0YjVmMjE1M2ZlMTdkNGY3NGIzYjYwNGY5NjdiMzc5Y2E3NTcwYTE4MjQ1Yzk1ZjE4MTQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L1NoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTU5IiwiYmxvYl9uYW1lIjoiMmM3YzZhNTczZmI3ZWVjMWUyOTRjOTU4N2FkMWY0MjdkY2U3NTAyYzg5NDhkMWUxMzJjN2E4MjI1YzZlMjlhNSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9GYWN0b3J5L1JlY3RhbmdsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzOTYiLCJibG9iX25hbWUiOiJjZjhmMjcwNzY4YzFiNWFjNmIyMDVhZDUxZDhiMzVmNDM1NGYwYmQ2MDAzMzIzNmI3NGU0NGRhN2ZhZmY4ZTk4IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIxNTYiLCJibG9iX25hbWUiOiIzOTAwZGYyMDMyZmQ5Yjk3OGFjMDNjNTMzZWZkNzM4NzAxYmE3MzZjMzYyMzZkNWQ3YzJiOTRlMzVkOTNmZjgxIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9TaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjM1OCIsImJsb2JfbmFtZSI6IjY1NzhlYjFlODRiMTZlZTU5ZTg4NGNkMGI5YjA0NDNkZDdhNDNiOGQxNjhhZGZhYmIzMzRjOWE3ZGUwYWFiNTMiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI0NCIsImJsb2JfbmFtZSI6IjQzZmU5NWYxZjc2ZTZmZjEwMWQxZDYwMDEwNDlmNjE3ZDlhYzk1OTFlNzBmZjMyODFiNDRkYWIzZTc2OTdkYjIiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9Ub29sYmFyWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjM0NCIsImJsb2JfbmFtZSI6IjQ3YmEzMTY4YjJmOTgxYWM0MzRmYTQ5ZDI0YTExZDJhMzk4ZmQ3ZjFiYWFhYjNkNTE1MGZhMTk3NDVkNTM1NDYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiIuZ2l0aWdub3JlIn19XX0seyJzdGF0dXMiOiJzdWNjZXNzIiwicmVxdWVzdF9pZCI6ImVkNGEzNDRkLTcwNTMtNDViNS1iNDllLTFjZjY4OWMxMTk0ZSIsInJlcXVlc3RfbWVzc2FnZSI6IkV4Y2VwdGlvbiBpbiB0aHJlYWQgXCJKYXZhRlggQXBwbGljYXRpb24gVGhyZWFkXCIgamF2YS5sYW5nLk51bGxQb2ludGVyRXhjZXB0aW9uOiBDYW5ub3QgaW52b2tlIFwiamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQuc3Ryb2tlT3ZhbChkb3VibGUsIGRvdWJsZSwgZG91YmxlLCBkb3VibGUpXCIgYmVjYXVzZSBcInRoaXMuZ2NcIiBpcyBudWxsXHJcblx0YXQgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlLkNpcmNsZVNoYXBlLmRyYXcoQ2lyY2xlU2hhcGUuamF2YToxNylcclxuXHRhdCBTaGFwZUZhY3RvcnkuQ2lyY2xlRmFjdG9yeS5kcmF3KENpcmNsZUZhY3RvcnkuamF2YToyNilcclxuXHRhdCBab25lLkRyYXdpbmdab25lLmxhbWJkYSRuZXckMShEcmF3aW5nWm9uZS5qYXZhOjMwKVxyXG5cdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5Db21wb3NpdGVFdmVudEhhbmRsZXIuZGlzcGF0Y2hCdWJibGluZ0V2ZW50KENvbXBvc2l0ZUV2ZW50SGFuZGxlci5qYXZhOjg2KVxyXG5cdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5FdmVudEhhbmRsZXJNYW5hZ2VyLmRpc3BhdGNoQnViYmxpbmdFdmVudChFdmVudEhhbmRsZXJNYW5hZ2VyLmphdmE6MjMyKVxyXG5cdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5FdmVudEhhbmRsZXJNYW5hZ2VyLmRpc3BhdGNoQnViYmxpbmdFdmVudChFdmVudEhhbmRsZXJNYW5hZ2VyLmphdmE6MTg5KVxyXG5cdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5Db21wb3NpdGVFdmVudERpc3BhdGNoZXIuZGlzcGF0Y2hCdWJibGluZ0V2ZW50KENvbXBvc2l0ZUV2ZW50RGlzcGF0Y2hlci5qYXZhOjU5KVxyXG5cdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5CYXNpY0V2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEJhc2ljRXZlbnREaXNwYXRjaGVyLmphdmE6NTgpIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IkV4Y2VwdGlvbiBpbiB0aHJlYWQgXCJKYXZhRlggQXBwbGljYXRpb24gVGhyZWFkXCIgamF2YS5sYW5nLk51bGxQb2ludGVyRXhjZXB0aW9uOiBDYW5ub3QgaW52b2tlIFwiamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQuc3Ryb2tlT3ZhbChkb3VibGUsIGRvdWJsZSwgZG91YmxlLCBkb3VibGUpXCIgYmVjYXVzZSBcInRoaXMuZ2NcIiBpcyBudWxsXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6Ilx0YXQgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlLkNpcmNsZVNoYXBlLmRyYXcoQ2lyY2xlU2hhcGUuamF2YToxNylcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBTaGFwZUZhY3RvcnkuQ2lyY2xlRmFjdG9yeS5kcmF3KENpcmNsZUZhY3RvcnkuamF2YToyNilcciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiXHRhdCBab25lLkRyYXdpbmdab25lLmxhbWJkYSRuZXckMShEcmF3aW5nWm9uZS5qYXZhOjMwKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5Db21wb3NpdGVFdmVudEhhbmRsZXIuZGlzcGF0Y2hCdWJibGluZ0V2ZW50KENvbXBvc2l0ZUV2ZW50SGFuZGxlci5qYXZhOjg2KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5FdmVudEhhbmRsZXJNYW5hZ2VyLmRpc3BhdGNoQnViYmxpbmdFdmVudChFdmVudEhhbmRsZXJNYW5hZ2VyLmphdmE6MjMyKVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5FdmVudEhhbmRsZXJNYW5hZ2VyLmRpc3BhdGNoQnViYmxpbmdFdmVudChFdmVudEhhbmRsZXJNYW5hZ2VyLmphdmE6MTg5KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5Db21wb3NpdGVFdmVudERpc3BhdGNoZXIuZGlzcGF0Y2hCdWJibGluZ0V2ZW50KENvbXBvc2l0ZUV2ZW50RGlzcGF0Y2hlci5qYXZhOjU5KVxyIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJcdGF0IGphdmFmeC5iYXNlQDI0LjAuMS9jb20uc3VuLmphdmFmeC5ldmVudC5CYXNpY0V2ZW50RGlzcGF0Y2hlci5kaXNwYXRjaEV2ZW50KEJhc2ljRXZlbnREaXNwYXRjaGVyLmphdmE6NTgpIn1dfV19LCJtZW50aW9uZWRfaXRlbXMiOltdLCJzdHJ1Y3R1cmVkX291dHB1dF9ub2RlcyI6W3siaWQiOjAsInR5cGUiOjAsImNvbnRlbnQiOiJUaGUgZXJyb3Igc2hvd3MgdGhhdCBgZ2NgIGlzIG51bGwgd2hlbiB0cnlpbmcgdG8gY2FsbCBgc3Ryb2tlT3ZhbCgpYCBpbiB0aGUgYENpcmNsZVNoYXBlLmRyYXcoKWAgbWV0aG9kLiBMb29raW5nIGF0IHRoZSBzdGFjayB0cmFjZSwgaXQgc2VlbXMgdGhlIGlzc3VlIGlzIGluIHRoZSBgQ2lyY2xlU2hhcGVgIGNsYXNzLlxuXG5MZXQncyBmaXggdGhlIGBDaXJjbGVTaGFwZWAgY2xhc3M6XG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhXCIgbW9kZT1cIkVESVRcIj5cbmBgYGphdmFcbnBhY2thZ2UgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlO1xuXG5pbXBvcnQgTG9nZ2VyLkxvZ2dlcjtcbmltcG9ydCBTaGFwZUZhY3RvcnkuU2hhcGVGYWN0b3J5O1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuXG5wdWJsaWMgY2xhc3MgQ2lyY2xlU2hhcGUgaW1wbGVtZW50cyBTaGFwZSB7XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlRmFjdG9yeSBzaGFwZUZhY3RvcnkpIHtcbiAgICAgICAgZG91YmxlIHN0YXJ0WCA9IHNoYXBlRmFjdG9yeS5nZXRTdGFydFgoKTtcbiAgICAgICAgZG91YmxlIHN0YXJ0WSA9IHNoYXBlRmFjdG9yeS5nZXRTdGFydFkoKTtcbiAgICAgICAgZG91YmxlIGVuZFggPSBzaGFwZUZhY3RvcnkuZ2V0RW5kWCgpO1xuICAgICAgICBkb3VibGUgZW5kWSA9IHNoYXBlRmFjdG9yeS5nZXRFbmRZKCk7XG4gICAgICAgIGRvdWJsZSByYWRpdXMgPSBNYXRoLmFicyhlbmRYLXN0YXJ0WCkvMjtcbiAgICAgICAgZ2Muc3Ryb2tlT3ZhbChzdGFydFggLSByYWRpdXMsIHN0YXJ0WSAtIHJhZGl1cywgcmFkaXVzICogMiwgcmFkaXVzICogMik7XG4gICAgICAgIExvZ2dlci5nZXRJbnN0YW5jZSgpLmxvZyhzaGFwZUZhY3RvcnksIFwiRHJhd2luZ1wiKTtcbiAgICB9XG59XG5gYGBcbjwvYXVnbWVudF9jb2RlX3NuaXBwZXQ+XG5cblRoZSBpc3N1ZSBpcyB0aGF0IHRoZSBgR3JhcGhpY3NDb250ZXh0IGdjYCBwYXJhbWV0ZXIgaXMgYmVpbmcgcGFzc2VkIGNvcnJlY3RseSwgYnV0IHRoZXJlIG1pZ2h0IGJlIGEgcHJvYmxlbSB3aXRoIGhvdyB0aGUgYENpcmNsZUZhY3RvcnkuZHJhdygpYCBtZXRob2QgaXMgY2FsbGluZyB0aGUgYENpcmNsZVNoYXBlLmRyYXcoKWAgbWV0aG9kLiBUaGUgc3RhY2sgdHJhY2UgaW5kaWNhdGVzIHRoYXQgYENpcmNsZUZhY3RvcnlgIGhhcyBhIGBkcmF3KClgIG1ldGhvZCB0aGF0J3MgYmVpbmcgY2FsbGVkIGZyb20gYERyYXdpbmdab25lYCwgYnV0IHRoaXMgbWV0aG9kIGlzbid0IHBhc3NpbmcgYSB2YWxpZCBgR3JhcGhpY3NDb250ZXh0YCBvYmplY3QuXG5cbkxldCdzIGNoZWNrIGlmIHRoZXJlJ3MgYSBgZHJhdygpYCBtZXRob2QgaW4gYENpcmNsZUZhY3RvcnlgIHRoYXQgbmVlZHMgdG8gYmUgZml4ZWQ6XG5cbjxhdWdtZW50X2NvZGVfc25pcHBldCBwYXRoPVwic3JjL1NoYXBlRmFjdG9yeS9DaXJjbGVGYWN0b3J5LmphdmFcIiBtb2RlPVwiRURJVFwiPlxuYGBgamF2YVxuLy8gQWRkIHRoaXMgbWV0aG9kIGlmIGl0IGRvZXNuJ3QgZXhpc3QsIG9yIGZpeCBpdCBpZiBpdCBkb2VzXG5wdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYykge1xuICAgIFNoYXBlIHNoYXBlID0gZ2V0U2hhcGUoKTtcbiAgICBzaGFwZS5kcmF3KGdjLCB0aGlzKTtcbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cbiJ9LHsiaWQiOjIsInR5cGUiOjIsImNvbnRlbnQiOiIifSx7ImlkIjozLCJ0eXBlIjozLCJjb250ZW50Ijoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhOjAtNjYwXG5zcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhOjAtMjA0XG5zcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhOjIwNC0xMTcyXG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0xpbmVTaGFwZS5qYXZhOjAtNTc0XG5zcmMvTWFpbi5qYXZhOjAtMjA1XG5zcmMvTWFpbi5qYXZhOjIwNS0xMDE2XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL1NoYXBlLmphdmE6MC0yMDZcbnNyYy9TaGFwZUZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhOjAtODU3XG5zcmMvTG9nZ2VyL0NvbnNvbGVMb2dnZXIuamF2YTowLTExMFxuc3JjL0xvZ2dlci9Db25zb2xlTG9nZ2VyLmphdmE6MTEwLTg4N1xuc3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YTowLTk0XG5zcmMvU2hhcGVGYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhOjk0LTg2OFxuc3JjL0xvZ2dlci9Mb2dnZXIuamF2YTowLTU3OFxuc3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmE6MC0yNzBcbnNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhOjI3MC0xMTc4XG5zcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmE6MC0zNzdcbnNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YTozNzctMTMyMVxuc3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhOjEzMjEtMTUzMVxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YTowLTc1NVxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YTo3NTUtMTQ1OVxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YToxNDU5LTIzMjBcbnNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVDZXJjbGUuamF2YTowLTczNVxuc3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhOjAtMzE4XG5zcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmE6MzE4LTExMjRcbnNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YToxMTI0LTEzNzVcbnNyYy9Mb2dnZXIvTG9nZ2VyU3RyYXRlZ3kuamF2YTowLTE0OFxuc3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YTowLTM1M1xuc3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YTozNTMtMTE0Nlxuc3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YToxMTQ2LTEzMzNcbnNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGUuamF2YTowLTE1NFxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YTowLTg3NVxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YTo4NzUtMTEzOVxubG9nX2ZpbGUudHh0OjAtNzY5XG5sb2dfZmlsZS50eHQ6NzY5LTE1MzlcbmxvZ19maWxlLnR4dDoxNTM5LTIwNDRcbi5naXRpZ25vcmU6MC0zNDQifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJFeGNlcHRpb24gaW4gdGhyZWFkIFwiSmF2YUZYIEFwcGxpY2F0aW9uIFRocmVhZFwiIGphdmEubGFuZy5OdWxsUG9pbnRlckV4Y2VwdGlvbjogQ2Fubm90IGludm9rZSBcImphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0LnN0cm9rZU92YWwoZG91YmxlLCBkb3VibGUsIGRvdWJsZSwgZG91YmxlKVwiIGJlY2F1c2UgXCJ0aGlzLmdjXCIgaXMgbnVsbFxyXG5cdGF0IFNoYXBlRmFjdG9yeS5JbXBsZW1lbnRTaGFwZS5DaXJjbGVTaGFwZS5kcmF3KENpcmNsZVNoYXBlLmphdmE6MTcpXHJcblx0YXQgU2hhcGVGYWN0b3J5LkNpcmNsZUZhY3RvcnkuZHJhdyhDaXJjbGVGYWN0b3J5LmphdmE6MjYpXHJcblx0YXQgWm9uZS5EcmF3aW5nWm9uZS5sYW1iZGEkbmV3JDEoRHJhd2luZ1pvbmUuamF2YTozMClcclxuXHRhdCBqYXZhZnguYmFzZUAyNC4wLjEvY29tLnN1bi5qYXZhZnguZXZlbnQuQ29tcG9zaXRlRXZlbnRIYW5kbGVyLmRpc3BhdGNoQnViYmxpbmdFdmVudChDb21wb3NpdGVFdmVudEhhbmRsZXIuamF2YTo4NilcclxuXHRhdCBqYXZhZnguYmFzZUAyNC4wLjEvY29tLnN1bi5qYXZhZnguZXZlbnQuRXZlbnRIYW5kbGVyTWFuYWdlci5kaXNwYXRjaEJ1YmJsaW5nRXZlbnQoRXZlbnRIYW5kbGVyTWFuYWdlci5qYXZhOjIzMilcclxuXHRhdCBqYXZhZnguYmFzZUAyNC4wLjEvY29tLnN1bi5qYXZhZnguZXZlbnQuRXZlbnRIYW5kbGVyTWFuYWdlci5kaXNwYXRjaEJ1YmJsaW5nRXZlbnQoRXZlbnRIYW5kbGVyTWFuYWdlci5qYXZhOjE4OSlcclxuXHRhdCBqYXZhZnguYmFzZUAyNC4wLjEvY29tLnN1bi5qYXZhZnguZXZlbnQuQ29tcG9zaXRlRXZlbnREaXNwYXRjaGVyLmRpc3BhdGNoQnViYmxpbmdFdmVudChDb21wb3NpdGVFdmVudERpc3BhdGNoZXIuamF2YTo1OSlcclxuXHRhdCBqYXZhZnguYmFzZUAyNC4wLjEvY29tLnN1bi5qYXZhZnguZXZlbnQuQmFzaWNFdmVudERpc3BhdGNoZXIuZGlzcGF0Y2hFdmVudChCYXNpY0V2ZW50RGlzcGF0Y2hlci5qYXZhOjU4KSJ9fSx7ImlkIjoxLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMzBUMTI6MTg6NTMuNzgwWiIsInJlc3BvbnNlX3RleHQiOiJUaGUgZXJyb3Igc2hvd3MgdGhhdCBgZ2NgIGlzIG51bGwgd2hlbiB0cnlpbmcgdG8gY2FsbCBgc3Ryb2tlT3ZhbCgpYCBpbiB0aGUgYENpcmNsZVNoYXBlLmRyYXcoKWAgbWV0aG9kLiBMb29raW5nIGF0IHRoZSBzdGFjayB0cmFjZSwgaXQgc2VlbXMgdGhlIGlzc3VlIGlzIGluIHRoZSBgQ2lyY2xlU2hhcGVgIGNsYXNzLlxuXG5MZXQncyBmaXggdGhlIGBDaXJjbGVTaGFwZWAgY2xhc3M6XG5cbmBgYGBqYXZhIHBhdGg9c3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhIG1vZGU9RURJVFxucGFja2FnZSBTaGFwZUZhY3RvcnkuSW1wbGVtZW50U2hhcGU7XG5cbmltcG9ydCBMb2dnZXIuTG9nZ2VyO1xuaW1wb3J0IFNoYXBlRmFjdG9yeS5TaGFwZUZhY3Rvcnk7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG5cbnB1YmxpYyBjbGFzcyBDaXJjbGVTaGFwZSBpbXBsZW1lbnRzIFNoYXBlIHtcbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVGYWN0b3J5IHNoYXBlRmFjdG9yeSkge1xuICAgICAgICBkb3VibGUgc3RhcnRYID0gc2hhcGVGYWN0b3J5LmdldFN0YXJ0WCgpO1xuICAgICAgICBkb3VibGUgc3RhcnRZID0gc2hhcGVGYWN0b3J5LmdldFN0YXJ0WSgpO1xuICAgICAgICBkb3VibGUgZW5kWCA9IHNoYXBlRmFjdG9yeS5nZXRFbmRYKCk7XG4gICAgICAgIGRvdWJsZSBlbmRZID0gc2hhcGVGYWN0b3J5LmdldEVuZFkoKTtcbiAgICAgICAgZG91YmxlIHJhZGl1cyA9IE1hdGguYWJzKGVuZFgtc3RhcnRYKS8yO1xuICAgICAgICBnYy5zdHJva2VPdmFsKHN0YXJ0WCAtIHJhZGl1cywgc3RhcnRZIC0gcmFkaXVzLCByYWRpdXMgKiAyLCByYWRpdXMgKiAyKTtcbiAgICAgICAgTG9nZ2VyLmdldEluc3RhbmNlKCkubG9nKHNoYXBlRmFjdG9yeSwgXCJEcmF3aW5nXCIpO1xuICAgIH1cbn1cbmBgYGBcblxuVGhlIGlzc3VlIGlzIHRoYXQgdGhlIGBHcmFwaGljc0NvbnRleHQgZ2NgIHBhcmFtZXRlciBpcyBiZWluZyBwYXNzZWQgY29ycmVjdGx5LCBidXQgdGhlcmUgbWlnaHQgYmUgYSBwcm9ibGVtIHdpdGggaG93IHRoZSBgQ2lyY2xlRmFjdG9yeS5kcmF3KClgIG1ldGhvZCBpcyBjYWxsaW5nIHRoZSBgQ2lyY2xlU2hhcGUuZHJhdygpYCBtZXRob2QuIFRoZSBzdGFjayB0cmFjZSBpbmRpY2F0ZXMgdGhhdCBgQ2lyY2xlRmFjdG9yeWAgaGFzIGEgYGRyYXcoKWAgbWV0aG9kIHRoYXQncyBiZWluZyBjYWxsZWQgZnJvbSBgRHJhd2luZ1pvbmVgLCBidXQgdGhpcyBtZXRob2QgaXNuJ3QgcGFzc2luZyBhIHZhbGlkIGBHcmFwaGljc0NvbnRleHRgIG9iamVjdC5cblxuTGV0J3MgY2hlY2sgaWYgdGhlcmUncyBhIGBkcmF3KClgIG1ldGhvZCBpbiBgQ2lyY2xlRmFjdG9yeWAgdGhhdCBuZWVkcyB0byBiZSBmaXhlZDpcblxuYGBgYGphdmEgcGF0aD1zcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSBtb2RlPUVESVRcbi8vIEFkZCB0aGlzIG1ldGhvZCBpZiBpdCBkb2Vzbid0IGV4aXN0LCBvciBmaXggaXQgaWYgaXQgZG9lc1xucHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MpIHtcbiAgICBTaGFwZSBzaGFwZSA9IGdldFNoYXBlKCk7XG4gICAgc2hhcGUuZHJhdyhnYywgdGhpcyk7XG59XG5gYGBgXG4iLCJ3b3Jrc3BhY2VfZmlsZV9jaHVua3MiOlt7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI2NjAiLCJibG9iX25hbWUiOiI1YjBlYzkzYzk5ZWQwNWY5ZGVjODM2Yzk4YmZhZDhhNzM0MWUxNzczZjRmNzFiMjE2M2RlYWY4NzVkMDNkYjkzIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjIwNCIsImJsb2JfbmFtZSI6IjQ0MTU1MzM2NzJiOWVhMzNkY2ExYzBhYjBmYzBhZDM5ZThlYTFjMTU4OTEzMDEwZmEwYjY4NDUwOWViZGM1NDgiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjIwNCIsImNoYXJfZW5kIjoiMTE3MiIsImJsb2JfbmFtZSI6IjQ0MTU1MzM2NzJiOWVhMzNkY2ExYzBhYjBmYzBhZDM5ZThlYTFjMTU4OTEzMDEwZmEwYjY4NDUwOWViZGM1NDgiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjU3NCIsImJsb2JfbmFtZSI6ImM4MTQ1OTkyNDRiMDM3YTYzZDU5OWYzZDRlNmU3ZTA4ZDI2YmM4YmU2MDZiNmRhOTFlOTVjZTZkNWVhMGYxNjkiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0xpbmVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjIwNSIsImJsb2JfbmFtZSI6IjhhZjkwMTJkNmI4Mjk5YjFlZDNlMzUzNDlhYTVhMTY0NTAwMDU1ZDZmODJhODVkZjgxNDIyZDAxNTQxNmUwN2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTWFpbi5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjIwNSIsImNoYXJfZW5kIjoiMTAxNiIsImJsb2JfbmFtZSI6IjhhZjkwMTJkNmI4Mjk5YjFlZDNlMzUzNDlhYTVhMTY0NTAwMDU1ZDZmODJhODVkZjgxNDIyZDAxNTQxNmUwN2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTWFpbi5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjIwNiIsImJsb2JfbmFtZSI6Ijk1YWI5MWJlMTRmYjQ0NzliOWJjOWQ0ODIxZDNiYmRhMTY0YzgyNzZkMDk0MjJjOTk1MTFlZDE2ZDZlMTQxNTAiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL1NoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiODU3IiwiYmxvYl9uYW1lIjoiZjkxM2M2NjZmYzk3ZGFkMGE2YTFkZDc1Y2FjZWQzN2VkOTJjYmE1N2IyYjk0MWQ1OTc4YzRmN2M5NmI1NTU0NCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjExMCIsImJsb2JfbmFtZSI6ImM2MDU0ZmRhZDVhM2I4NzMzN2Y1M2M4MzgxZDdlZDdkODk0NDVjMWQxM2EwYjIwYjNiYTYyMWNlYzQ2OTEwYWEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0NvbnNvbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTAiLCJjaGFyX2VuZCI6Ijg4NyIsImJsb2JfbmFtZSI6ImM2MDU0ZmRhZDVhM2I4NzMzN2Y1M2M4MzgxZDdlZDdkODk0NDVjMWQxM2EwYjIwYjNiYTYyMWNlYzQ2OTEwYWEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0NvbnNvbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI5NCIsImJsb2JfbmFtZSI6Ijg3M2RkMDk5ODNiNjE5OWMxYmFjZmFlMThjYWIxNzc1YzcxMGQ3MTkxYzY5MzNkMzYxZDY2NGZjMzI3NDg3ZDciLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6Ijk0IiwiY2hhcl9lbmQiOiI4NjgiLCJibG9iX25hbWUiOiI4NzNkZDA5OTgzYjYxOTljMWJhY2ZhZTE4Y2FiMTc3NWM3MTBkNzE5MWM2OTMzZDM2MWQ2NjRmYzMyNzQ4N2Q3IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI1NzgiLCJibG9iX25hbWUiOiI5NTVmNjdjZGUyN2ZkNGI1MjAyNmZkZjJhZDM1NjBmMDA1NGUwMTVlZjU5MzdiNWJkNmMxY2YxNzFlYWJkYTg5IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9Mb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIyNzAiLCJibG9iX25hbWUiOiI3ZjhkZjRmNDZjMDI5Mzk4YjYwNjY4NmJkYjNhN2E1ODMxZjViOTBiYzNlYzE5MTUwMzQxZDhiZWZlOWQ4MDM1IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMjcwIiwiY2hhcl9lbmQiOiIxMTc4IiwiYmxvYl9uYW1lIjoiN2Y4ZGY0ZjQ2YzAyOTM5OGI2MDY2ODZiZGIzYTdhNTgzMWY1YjkwYmMzZWMxOTE1MDM0MWQ4YmVmZTlkODAzNSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjM3NyIsImJsb2JfbmFtZSI6ImRjYTBkZWMwMjAzMzdlYzhmZjgyOWUyNTAxNjY4ZThjZjZjMWU2ODRiMDFlNTQyYThhZDRjMzEzNTg3OTgwZDMiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMzc3IiwiY2hhcl9lbmQiOiIxMzIxIiwiYmxvYl9uYW1lIjoiZGNhMGRlYzAyMDMzN2VjOGZmODI5ZTI1MDE2NjhlOGNmNmMxZTY4NGIwMWU1NDJhOGFkNGMzMTM1ODc5ODBkMyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMzIxIiwiY2hhcl9lbmQiOiIxNTMxIiwiYmxvYl9uYW1lIjoiZGNhMGRlYzAyMDMzN2VjOGZmODI5ZTI1MDE2NjhlOGNmNmMxZTY4NGIwMWU1NDJhOGFkNGMzMTM1ODc5ODBkMyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3NTUiLCJibG9iX25hbWUiOiJlYWUzYzE4YjY3MTY3YWJmZjg3NWRiOTU1ODBkOGI3NTM5MWE4N2FiYmE1NTQ2MWIwY2MyZmQ5YzY1YjM5YWZmIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI3NTUiLCJjaGFyX2VuZCI6IjE0NTkiLCJibG9iX25hbWUiOiJlYWUzYzE4YjY3MTY3YWJmZjg3NWRiOTU1ODBkOGI3NTM5MWE4N2FiYmE1NTQ2MWIwY2MyZmQ5YzY1YjM5YWZmIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxNDU5IiwiY2hhcl9lbmQiOiIyMzIwIiwiYmxvYl9uYW1lIjoiZWFlM2MxOGI2NzE2N2FiZmY4NzVkYjk1NTgwZDhiNzUzOTFhODdhYmJhNTU0NjFiMGNjMmZkOWM2NWIzOWFmZiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVMaW5lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNzM1IiwiYmxvYl9uYW1lIjoiMzA2MmEwOWMzMDBiYTQ5MmZhMTYzOTM2Nzc3MzMwZTA5MDI3YWEyMThlZWQyNzgwNWVjZjE1MWI5MjJiMGYwNyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVDZXJjbGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzMTgiLCJibG9iX25hbWUiOiJkODRhMzIzY2UwYWM2MmVlYWI5OGIwNDEyYTI2ODRjNWU0OTc1NDg2NzQzNWY4ZjBhYjk0ZDExODg2ZTYyYWU2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjMxOCIsImNoYXJfZW5kIjoiMTEyNCIsImJsb2JfbmFtZSI6ImQ4NGEzMjNjZTBhYzYyZWVhYjk4YjA0MTJhMjY4NGM1ZTQ5NzU0ODY3NDM1ZjhmMGFiOTRkMTE4ODZlNjJhZTYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTEyNCIsImNoYXJfZW5kIjoiMTM3NSIsImJsb2JfbmFtZSI6ImQ4NGEzMjNjZTBhYzYyZWVhYjk4YjA0MTJhMjY4NGM1ZTQ5NzU0ODY3NDM1ZjhmMGFiOTRkMTE4ODZlNjJhZTYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTQ4IiwiYmxvYl9uYW1lIjoiNGY1MzdkZWJkNmZlZmQyNzM3YjcxYjEzNjIxMWI4ZjFmNjY1NzUzNTA2NzM3MDFjMmI3YTZlMTIxZTZmOWY1NiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvTG9nZ2VyU3RyYXRlZ3kuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNTMiLCJibG9iX25hbWUiOiI0MDNhMjgxYWQxNDJkMzZlYmExNWE5ZjM4MGE3MGExMmViZmJhZmRjNDZjYzZhNjNiZGE0OWU1M2I2N2E0ZGNiIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIzNTMiLCJjaGFyX2VuZCI6IjExNDYiLCJibG9iX25hbWUiOiI0MDNhMjgxYWQxNDJkMzZlYmExNWE5ZjM4MGE3MGExMmViZmJhZmRjNDZjYzZhNjNiZGE0OWU1M2I2N2E0ZGNiIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTQ2IiwiY2hhcl9lbmQiOiIxMzMzIiwiYmxvYl9uYW1lIjoiNDAzYTI4MWFkMTQyZDM2ZWJhMTVhOWYzODBhNzBhMTJlYmZiYWZkYzQ2Y2M2YTYzYmRhNDllNTNiNjdhNGRjYiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9ab25lL1Rvb2xiYXJab25lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTU0IiwiYmxvYl9uYW1lIjoiNzQxZjk3NGQ2MGI0OTNkYjZkNTNjODVjMzYwODJiYzFkNzYzMTBiZTg1YjgwZDJhMGRjMjAzODQ2YTNkNmJjZiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI4NzUiLCJibG9iX25hbWUiOiIyMzlmNDRiZmQ5ODQ3ZDczNzU2YmNlM2JmZWM5Njg3OGM0MmEzYTg4MjdhZjJiNjg4NzI5OGFhMDIwNzAzM2QyIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI4NzUiLCJjaGFyX2VuZCI6IjExMzkiLCJibG9iX25hbWUiOiIyMzlmNDRiZmQ5ODQ3ZDczNzU2YmNlM2JmZWM5Njg3OGM0MmEzYTg4MjdhZjJiNjg4NzI5OGFhMDIwNzAzM2QyIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3NjkiLCJibG9iX25hbWUiOiI2YzllM2MwOTQwNDc2N2VkZDRkMThmMTllOWQ4Y2FhMmU4NDJiMTQwYTVlZTk5NDBkZjZiZWUxNmUzMWUxYTFmIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoibG9nX2ZpbGUudHh0In19LHsiY2hhcl9zdGFydCI6Ijc2OSIsImNoYXJfZW5kIjoiMTUzOSIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX0seyJjaGFyX3N0YXJ0IjoiMTUzOSIsImNoYXJfZW5kIjoiMjA0NCIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMzQ0IiwiYmxvYl9uYW1lIjoiNDdiYTMxNjhiMmY5ODFhYzQzNGZhNDlkMjRhMTFkMmEzOThmZDdmMWJhYWFiM2Q1MTUwZmExOTc0NWQ1MzU0NiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6Ii5naXRpZ25vcmUifX1dfSx7InN0YXR1cyI6InN1Y2Nlc3MiLCJyZXF1ZXN0X2lkIjoiNDljNzAyYTItOTVhNS00YmMxLWJiNzAtOTA4Mzk2MDU2ZTJhIiwicmVxdWVzdF9tZXNzYWdlIjoiSXQgYXBwZWFycyB0aGF0IHZhbGlkZUxpbmUgaXMgbm90IGNvcnJlY3QgOlxuWzIwMjUtMDUtMzAgMTQ6MDk6MzJdIFsgU3RhcnQ6ICgxMTcuMCwgNTAuMCksIEVuZDogKDE3OC4wLCAxMDIuMCldIFtEcmF3aW5nIENpcmNsZV0gW1N0YXR1czogU3VjY2Vzc11cclxuWzIwMjUtMDUtMzAgMTQ6MDk6MzNdIFsgU3RhcnQ6ICgzNDMuMCwgMTU3LjApLCBFbmQ6ICgzOTguMCwgMjIwLjApXSBbRHJhd2luZyBDaXJjbGVdIFtTdGF0dXM6IFN1Y2Nlc3NdXHJcblsyMDI1LTA1LTMwIDE0OjA5OjM1XSBbIFN0YXJ0OiAoMTI4LjAsIDQ5LjApLCBFbmQ6ICgzNDUuMCwgMTU0LjApXSBbRHJhd2luZyBMaW5lXSBbU3RhdHVzOiBGYWlsZWRdXG50aGlzIGxpbmUgaXMgc3VwcG9zZWQgdG8gYmUgdmFsaWQiLCJyaWNoX3RleHRfanNvbl9yZXByIjp7InR5cGUiOiJkb2MiLCJjb250ZW50IjpbeyJ0eXBlIjoicGFyYWdyYXBoIiwiY29udGVudCI6W3sidHlwZSI6InRleHQiLCJ0ZXh0IjoiSXQgYXBwZWFycyB0aGF0IHZhbGlkZUxpbmUgaXMgbm90IGNvcnJlY3QgOiJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiWzIwMjUtMDUtMzAgMTQ6MDk6MzJdIFsgU3RhcnQ6ICgxMTcuMCwgNTAuMCksIEVuZDogKDE3OC4wLCAxMDIuMCldIFtEcmF3aW5nIENpcmNsZV0gW1N0YXR1czogU3VjY2Vzc11cciJ9LHsidHlwZSI6ImhhcmRCcmVhayJ9LHsidHlwZSI6InRleHQiLCJ0ZXh0IjoiWzIwMjUtMDUtMzAgMTQ6MDk6MzNdIFsgU3RhcnQ6ICgzNDMuMCwgMTU3LjApLCBFbmQ6ICgzOTguMCwgMjIwLjApXSBbRHJhd2luZyBDaXJjbGVdIFtTdGF0dXM6IFN1Y2Nlc3NdXHIifSx7InR5cGUiOiJoYXJkQnJlYWsifSx7InR5cGUiOiJ0ZXh0IiwidGV4dCI6IlsyMDI1LTA1LTMwIDE0OjA5OjM1XSBbIFN0YXJ0OiAoMTI4LjAsIDQ5LjApLCBFbmQ6ICgzNDUuMCwgMTU0LjApXSBbRHJhd2luZyBMaW5lXSBbU3RhdHVzOiBGYWlsZWRdIn0seyJ0eXBlIjoiaGFyZEJyZWFrIn0seyJ0eXBlIjoidGV4dCIsInRleHQiOiJ0aGlzIGxpbmUgaXMgc3VwcG9zZWQgdG8gYmUgdmFsaWQifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6Ikxvb2tpbmcgYXQgdGhlIGlzc3VlLCBpdCBzZWVtcyB0aGUgYFZhbGlkYXRlTGluZWAgY2xhc3MgaXNuJ3QgY29ycmVjdGx5IHZhbGlkYXRpbmcgbGluZXMgdGhhdCBjb25uZWN0IHR3byBjaXJjbGVzLiBMZXQncyBmaXggdGhlIGBWYWxpZGF0ZUxpbmVgIGNsYXNzOlxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVMaW5lLmphdmFcIiBtb2RlPVwiRURJVFwiPlxuYGBgamF2YVxucGFja2FnZSBTaGFwZUZhY3RvcnkuSW1wbGVtZW50VmFsaWRhdGU7XG5cbmltcG9ydCBTaGFwZUZhY3RvcnkuQ2lyY2xlRmFjdG9yeTtcbmltcG9ydCBTaGFwZUZhY3RvcnkuTGluZUZhY3Rvcnk7XG5pbXBvcnQgU2hhcGVGYWN0b3J5LlNoYXBlRmFjdG9yeTtcblxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5cbnB1YmxpYyBjbGFzcyBWYWxpZGF0ZUxpbmUgaW1wbGVtZW50cyBWYWxpZGF0ZSB7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKFNoYXBlRmFjdG9yeSBzaGFwZUZhY3RvcnkpIHtcbiAgICAgICAgLy8gQ2FzdCB0byBMaW5lRmFjdG9yeVxuICAgICAgICBpZiAoIShzaGFwZUZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBMaW5lRmFjdG9yeSBsaW5lID0gKExpbmVGYWN0b3J5KSBzaGFwZUZhY3Rvcnk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgbGluZSBoYXMgemVybyBsZW5ndGhcbiAgICAgICAgaWYgKGxpbmUuZ2V0U3RhcnRYKCkgPT0gbGluZS5nZXRFbmRYKCkgJiYgbGluZS5nZXRTdGFydFkoKSA9PSBsaW5lLmdldEVuZFkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgQXJyYXlMaXN0PFNoYXBlRmFjdG9yeT4gaW5zdGFuY2VzID0gU2hhcGVGYWN0b3J5LmdldEluc3RhbmNlcygpO1xuXG4gICAgICAgIENpcmNsZUZhY3RvcnkgY2lyY2xlMSA9IG51bGw7XG4gICAgICAgIENpcmNsZUZhY3RvcnkgY2lyY2xlMiA9IG51bGw7XG5cbiAgICAgICAgZm9yIChTaGFwZUZhY3RvcnkgaW5zdGFuY2UgOiBpbnN0YW5jZXMpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSBpbnN0YW5jZW9mIENpcmNsZUZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBDaXJjbGVGYWN0b3J5IGNpcmNsZSA9IChDaXJjbGVGYWN0b3J5KSBpbnN0YW5jZTtcblxuICAgICAgICAgICAgICAgIGRvdWJsZSBjZW50ZXJYID0gKGNpcmNsZS5nZXRTdGFydFgoKSArIGNpcmNsZS5nZXRFbmRYKCkpIC8gMjtcbiAgICAgICAgICAgICAgICBkb3VibGUgY2VudGVyWSA9IChjaXJjbGUuZ2V0U3RhcnRZKCkgKyBjaXJjbGUuZ2V0RW5kWSgpKSAvIDI7XG4gICAgICAgICAgICAgICAgZG91YmxlIHJhZGl1cyA9IE1hdGguYWJzKGNpcmNsZS5nZXRFbmRYKCkgLSBjaXJjbGUuZ2V0U3RhcnRYKCkpIC8gMjtcblxuICAgICAgICAgICAgICAgIGRvdWJsZSBkaXN0U3RhcnQgPSBkaXN0YW5jZShjZW50ZXJYLCBjZW50ZXJZLCBsaW5lLmdldFN0YXJ0WCgpLCBsaW5lLmdldFN0YXJ0WSgpKTtcbiAgICAgICAgICAgICAgICBkb3VibGUgZGlzdEVuZCA9IGRpc3RhbmNlKGNlbnRlclgsIGNlbnRlclksIGxpbmUuZ2V0RW5kWCgpLCBsaW5lLmdldEVuZFkoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGFydCBwb2ludCBpcyBpbnNpZGUgb3IgbmVhciB0aGlzIGNpcmNsZVxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0U3RhcnQgLSByYWRpdXMpIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICBjaXJjbGUxID0gY2lyY2xlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBlbmQgcG9pbnQgaXMgaW5zaWRlIG9yIG5lYXIgdGhpcyBjaXJjbGVcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChNYXRoLmFicyhkaXN0RW5kIC0gcmFkaXVzKSA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlMiA9IGNpcmNsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2lyY2xlMSAhPSBudWxsICYmIGNpcmNsZTIgIT0gbnVsbCAmJiBjaXJjbGUxICE9IGNpcmNsZTIpIHtcbiAgICAgICAgICAgIGxpbmUuc2V0Rmlyc3RDaXJjbGUoY2lyY2xlMSk7XG4gICAgICAgICAgICBsaW5lLnNldFNlY29uZENpcmNsZShjaXJjbGUyKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZG91YmxlIGRpc3RhbmNlKGRvdWJsZSB4MSwgZG91YmxlIHkxLCBkb3VibGUgeDIsIGRvdWJsZSB5Mikge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuVGhlIGtleSBjaGFuZ2VzIEkgbWFkZTpcblxuMS4gQ2hhbmdlZCB0aGUgbWV0aG9kIG5hbWUgZnJvbSBgaXNWYWxpZGVgIHRvIGBpc1ZhbGlkYCB0byBtYXRjaCB0aGUgaW50ZXJmYWNlXG4yLiBGaXhlZCBob3cgd2UgZ2V0IHRoZSBjaXJjbGUncyBjZW50ZXIgYW5kIHJhZGl1cyAoY2FsY3VsYXRlZCBmcm9tIHN0YXJ0L2VuZCBwb2ludHMpXG4zLiBDaGFuZ2VkIHRoZSB2YWxpZGF0aW9uIGxvZ2ljIHRvIGNoZWNrIGlmIHBvaW50cyBhcmUgbmVhciB0aGUgY2lyY2xlJ3MgZWRnZSAod2l0aGluIDUgcGl4ZWxzKSByYXRoZXIgdGhhbiBpbnNpZGVcbjQuIFVzZWQgYFNoYXBlRmFjdG9yeS5nZXRJbnN0YW5jZXMoKWAgaW5zdGVhZCBvZiBgbGluZS5nZXRJbnN0YW5jZXMoKWBcblxuVGhpcyBzaG91bGQgcHJvcGVybHkgdmFsaWRhdGUgbGluZXMgdGhhdCBjb25uZWN0IHR3byBjaXJjbGVzLlxuIn0seyJpZCI6MiwidHlwZSI6MiwiY29udGVudCI6IiJ9LHsiaWQiOjMsInR5cGUiOjMsImNvbnRlbnQiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjAtNzU1XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjc1NS0xNDU5XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjE0NTktMjMyMFxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUNlcmNsZS5qYXZhOjAtNzM1XG5zcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmE6MC0zMThcbnNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YTozMTgtMTEyNFxuc3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhOjExMjQtMTM3NFxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9MaW5lU2hhcGUuamF2YTowLTU3OFxuc3JjL1NoYXBlRmFjdG9yeS9DaXJjbGVGYWN0b3J5LmphdmE6MC0xMTVcbnNyYy9TaGFwZUZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhOjExNS05NjBcbnNyYy9ab25lL0RyYXdpbmdab25lLmphdmE6MC00MTlcbnNyYy9ab25lL0RyYXdpbmdab25lLmphdmE6NDE5LTE0MTJcbnNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvQ2lyY2xlU2hhcGUuamF2YTowLTY2NFxuc3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YTowLTEzOFxuc3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YToxMzgtOTM4XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlLmphdmE6MC0xNTRcbnNyYy9NYWluLmphdmE6MC0yMDVcbnNyYy9NYWluLmphdmE6MjA1LTEwMTZcbnNyYy9Mb2dnZXIvQ29uc29sZUxvZ2dlci5qYXZhOjAtMTEwXG5zcmMvTG9nZ2VyL0NvbnNvbGVMb2dnZXIuamF2YToxMTAtOTc0XG5zcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YTowLTI3MFxuc3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmE6MjcwLTExNjlcbnNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhOjExNjktMTI2NFxuc3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhOjAtMzc3XG5zcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmE6Mzc3LTEzMDhcbnNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YToxMzA4LTE2MDVcbnNyYy9Mb2dnZXIvTG9nZ2VyLmphdmE6MC02MTFcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MC0zNTNcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MzUzLTExNDZcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MTE0Ni0xMzMzXG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudEZhY3RvcnlWYWx1ZS9GYWN0b3J5VmFsdWUuamF2YTowLTE3MFxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YTowLTEwNlxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YToxMDYtODk1XG5zcmMvTG9nZ2VyL0RhdGFiYXNlQ29ubmVjdGlvbi5qYXZhOjg5NS0xMTU5XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL1NoYXBlLmphdmE6MC0xODZcbmxvZ19maWxlLnR4dDowLTc2OVxubG9nX2ZpbGUudHh0Ojc2OS0xNTM5XG5sb2dfZmlsZS50eHQ6MTUzOS0yMDQ0XG5zcmMvTG9nZ2VyL0xvZ2dlclN0cmF0ZWd5LmphdmE6MC0xNjhcbi5naXRpZ25vcmU6MC0zNDQifV0sInNlZW5fc3RhdGUiOiJzZWVuIiwic3RydWN0dXJlZF9yZXF1ZXN0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwidGV4dF9ub2RlIjp7ImNvbnRlbnQiOiJJdCBhcHBlYXJzIHRoYXQgdmFsaWRlTGluZSBpcyBub3QgY29ycmVjdCA6XG5bMjAyNS0wNS0zMCAxNDowOTozMl0gWyBTdGFydDogKDExNy4wLCA1MC4wKSwgRW5kOiAoMTc4LjAsIDEwMi4wKV0gW0RyYXdpbmcgQ2lyY2xlXSBbU3RhdHVzOiBTdWNjZXNzXVxyXG5bMjAyNS0wNS0zMCAxNDowOTozM10gWyBTdGFydDogKDM0My4wLCAxNTcuMCksIEVuZDogKDM5OC4wLCAyMjAuMCldIFtEcmF3aW5nIENpcmNsZV0gW1N0YXR1czogU3VjY2Vzc11cclxuWzIwMjUtMDUtMzAgMTQ6MDk6MzVdIFsgU3RhcnQ6ICgxMjguMCwgNDkuMCksIEVuZDogKDM0NS4wLCAxNTQuMCldIFtEcmF3aW5nIExpbmVdIFtTdGF0dXM6IEZhaWxlZF1cbnRoaXMgbGluZSBpcyBzdXBwb3NlZCB0byBiZSB2YWxpZCJ9fSx7ImlkIjoxLCJ0eXBlIjo0LCJpZGVfc3RhdGVfbm9kZSI6eyJ3b3Jrc3BhY2VGb2xkZXJzIjpbeyJyZXBvc2l0b3J5Um9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24iLCJmb2xkZXJSb290IjoiRTovYXltZW4vSW50ZWxsaUppL01vZGVsaXNhdGlvbiJ9XSwid29ya3NwYWNlRm9sZGVyc1VuY2hhbmdlZCI6ZmFsc2V9fV0sInRpbWVzdGFtcCI6IjIwMjUtMDUtMzBUMTM6MTE6MTQuNDcxWiIsInJlc3BvbnNlX3RleHQiOiJMb29raW5nIGF0IHRoZSBpc3N1ZSwgaXQgc2VlbXMgdGhlIGBWYWxpZGF0ZUxpbmVgIGNsYXNzIGlzbid0IGNvcnJlY3RseSB2YWxpZGF0aW5nIGxpbmVzIHRoYXQgY29ubmVjdCB0d28gY2lyY2xlcy4gTGV0J3MgZml4IHRoZSBgVmFsaWRhdGVMaW5lYCBjbGFzczpcblxuYGBgYGphdmEgcGF0aD1zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhIG1vZGU9RURJVFxucGFja2FnZSBTaGFwZUZhY3RvcnkuSW1wbGVtZW50VmFsaWRhdGU7XG5cbmltcG9ydCBTaGFwZUZhY3RvcnkuQ2lyY2xlRmFjdG9yeTtcbmltcG9ydCBTaGFwZUZhY3RvcnkuTGluZUZhY3Rvcnk7XG5pbXBvcnQgU2hhcGVGYWN0b3J5LlNoYXBlRmFjdG9yeTtcblxuaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7XG5cbnB1YmxpYyBjbGFzcyBWYWxpZGF0ZUxpbmUgaW1wbGVtZW50cyBWYWxpZGF0ZSB7XG5cbiAgICBAT3ZlcnJpZGVcbiAgICBwdWJsaWMgYm9vbGVhbiBpc1ZhbGlkKFNoYXBlRmFjdG9yeSBzaGFwZUZhY3RvcnkpIHtcbiAgICAgICAgLy8gQ2FzdCB0byBMaW5lRmFjdG9yeVxuICAgICAgICBpZiAoIShzaGFwZUZhY3RvcnkgaW5zdGFuY2VvZiBMaW5lRmFjdG9yeSkpIHJldHVybiBmYWxzZTtcblxuICAgICAgICBMaW5lRmFjdG9yeSBsaW5lID0gKExpbmVGYWN0b3J5KSBzaGFwZUZhY3Rvcnk7XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgbGluZSBoYXMgemVybyBsZW5ndGhcbiAgICAgICAgaWYgKGxpbmUuZ2V0U3RhcnRYKCkgPT0gbGluZS5nZXRFbmRYKCkgJiYgbGluZS5nZXRTdGFydFkoKSA9PSBsaW5lLmdldEVuZFkoKSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgQXJyYXlMaXN0PFNoYXBlRmFjdG9yeT4gaW5zdGFuY2VzID0gU2hhcGVGYWN0b3J5LmdldEluc3RhbmNlcygpO1xuXG4gICAgICAgIENpcmNsZUZhY3RvcnkgY2lyY2xlMSA9IG51bGw7XG4gICAgICAgIENpcmNsZUZhY3RvcnkgY2lyY2xlMiA9IG51bGw7XG5cbiAgICAgICAgZm9yIChTaGFwZUZhY3RvcnkgaW5zdGFuY2UgOiBpbnN0YW5jZXMpIHtcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSBpbnN0YW5jZW9mIENpcmNsZUZhY3RvcnkpIHtcbiAgICAgICAgICAgICAgICBDaXJjbGVGYWN0b3J5IGNpcmNsZSA9IChDaXJjbGVGYWN0b3J5KSBpbnN0YW5jZTtcblxuICAgICAgICAgICAgICAgIGRvdWJsZSBjZW50ZXJYID0gKGNpcmNsZS5nZXRTdGFydFgoKSArIGNpcmNsZS5nZXRFbmRYKCkpIC8gMjtcbiAgICAgICAgICAgICAgICBkb3VibGUgY2VudGVyWSA9IChjaXJjbGUuZ2V0U3RhcnRZKCkgKyBjaXJjbGUuZ2V0RW5kWSgpKSAvIDI7XG4gICAgICAgICAgICAgICAgZG91YmxlIHJhZGl1cyA9IE1hdGguYWJzKGNpcmNsZS5nZXRFbmRYKCkgLSBjaXJjbGUuZ2V0U3RhcnRYKCkpIC8gMjtcblxuICAgICAgICAgICAgICAgIGRvdWJsZSBkaXN0U3RhcnQgPSBkaXN0YW5jZShjZW50ZXJYLCBjZW50ZXJZLCBsaW5lLmdldFN0YXJ0WCgpLCBsaW5lLmdldFN0YXJ0WSgpKTtcbiAgICAgICAgICAgICAgICBkb3VibGUgZGlzdEVuZCA9IGRpc3RhbmNlKGNlbnRlclgsIGNlbnRlclksIGxpbmUuZ2V0RW5kWCgpLCBsaW5lLmdldEVuZFkoKSk7XG5cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBzdGFydCBwb2ludCBpcyBpbnNpZGUgb3IgbmVhciB0aGlzIGNpcmNsZVxuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaXN0U3RhcnQgLSByYWRpdXMpIDwgNSkge1xuICAgICAgICAgICAgICAgICAgICBjaXJjbGUxID0gY2lyY2xlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiBlbmQgcG9pbnQgaXMgaW5zaWRlIG9yIG5lYXIgdGhpcyBjaXJjbGVcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChNYXRoLmFicyhkaXN0RW5kIC0gcmFkaXVzKSA8IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgY2lyY2xlMiA9IGNpcmNsZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2lyY2xlMSAhPSBudWxsICYmIGNpcmNsZTIgIT0gbnVsbCAmJiBjaXJjbGUxICE9IGNpcmNsZTIpIHtcbiAgICAgICAgICAgIGxpbmUuc2V0Rmlyc3RDaXJjbGUoY2lyY2xlMSk7XG4gICAgICAgICAgICBsaW5lLnNldFNlY29uZENpcmNsZShjaXJjbGUyKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHByaXZhdGUgZG91YmxlIGRpc3RhbmNlKGRvdWJsZSB4MSwgZG91YmxlIHkxLCBkb3VibGUgeDIsIGRvdWJsZSB5Mikge1xuICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHgyIC0geDEsIDIpICsgTWF0aC5wb3coeTIgLSB5MSwgMikpO1xuICAgIH1cbn1cbmBgYGBcblxuVGhlIGtleSBjaGFuZ2VzIEkgbWFkZTpcblxuMS4gQ2hhbmdlZCB0aGUgbWV0aG9kIG5hbWUgZnJvbSBgaXNWYWxpZGVgIHRvIGBpc1ZhbGlkYCB0byBtYXRjaCB0aGUgaW50ZXJmYWNlXG4yLiBGaXhlZCBob3cgd2UgZ2V0IHRoZSBjaXJjbGUncyBjZW50ZXIgYW5kIHJhZGl1cyAoY2FsY3VsYXRlZCBmcm9tIHN0YXJ0L2VuZCBwb2ludHMpXG4zLiBDaGFuZ2VkIHRoZSB2YWxpZGF0aW9uIGxvZ2ljIHRvIGNoZWNrIGlmIHBvaW50cyBhcmUgbmVhciB0aGUgY2lyY2xlJ3MgZWRnZSAod2l0aGluIDUgcGl4ZWxzKSByYXRoZXIgdGhhbiBpbnNpZGVcbjQuIFVzZWQgYFNoYXBlRmFjdG9yeS5nZXRJbnN0YW5jZXMoKWAgaW5zdGVhZCBvZiBgbGluZS5nZXRJbnN0YW5jZXMoKWBcblxuVGhpcyBzaG91bGQgcHJvcGVybHkgdmFsaWRhdGUgbGluZXMgdGhhdCBjb25uZWN0IHR3byBjaXJjbGVzLlxuIiwid29ya3NwYWNlX2ZpbGVfY2h1bmtzIjpbeyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNzU1IiwiYmxvYl9uYW1lIjoiZWFlM2MxOGI2NzE2N2FiZmY4NzVkYjk1NTgwZDhiNzUzOTFhODdhYmJhNTU0NjFiMGNjMmZkOWM2NWIzOWFmZiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVMaW5lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiNzU1IiwiY2hhcl9lbmQiOiIxNDU5IiwiYmxvYl9uYW1lIjoiZWFlM2MxOGI2NzE2N2FiZmY4NzVkYjk1NTgwZDhiNzUzOTFhODdhYmJhNTU0NjFiMGNjMmZkOWM2NWIzOWFmZiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVMaW5lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTQ1OSIsImNoYXJfZW5kIjoiMjMyMCIsImJsb2JfbmFtZSI6ImVhZTNjMThiNjcxNjdhYmZmODc1ZGI5NTU4MGQ4Yjc1MzkxYTg3YWJiYTU1NDYxYjBjYzJmZDljNjViMzlhZmYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjczNSIsImJsb2JfbmFtZSI6IjMwNjJhMDljMzAwYmE0OTJmYTE2MzkzNjc3NzMzMGUwOTAyN2FhMjE4ZWVkMjc4MDVlY2YxNTFiOTIyYjBmMDciLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlQ2VyY2xlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMzE4IiwiYmxvYl9uYW1lIjoiYjJjOTRiOGMxMWNjZTY2ZDZiMWRmOGNlMGY0YzE3OTE4MmU1YWE3YjU5MTFkZWI4YWE4MjNjMzIxZDFlZGYwNiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIzMTgiLCJjaGFyX2VuZCI6IjExMjQiLCJibG9iX25hbWUiOiJiMmM5NGI4YzExY2NlNjZkNmIxZGY4Y2UwZjRjMTc5MTgyZTVhYTdiNTkxMWRlYjhhYTgyM2MzMjFkMWVkZjA2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjExMjQiLCJjaGFyX2VuZCI6IjEzNzQiLCJibG9iX25hbWUiOiJiMmM5NGI4YzExY2NlNjZkNmIxZGY4Y2UwZjRjMTc5MTgyZTVhYTdiNTkxMWRlYjhhYTgyM2MzMjFkMWVkZjA2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjU3OCIsImJsb2JfbmFtZSI6IjhjYzQxOTU0YzcyNTJiZmY1YzY5ZDRiYjkyMDc1ZWNjZWYyNmM0NTBkYTYyZjhhNWNjMDZmNmQxMDcyYjBjNmEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0xpbmVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjExNSIsImJsb2JfbmFtZSI6IjlmNjljYzUxNWZmMTZjMDAwODA5OTA1NWU5OTVmYjk4YTI5NjVlN2I4Zjc5ZmFlNGU2NDk4NjA5ZDgzYTZhN2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTUiLCJjaGFyX2VuZCI6Ijk2MCIsImJsb2JfbmFtZSI6IjlmNjljYzUxNWZmMTZjMDAwODA5OTA1NWU5OTVmYjk4YTI5NjVlN2I4Zjc5ZmFlNGU2NDk4NjA5ZDgzYTZhN2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI0MTkiLCJibG9iX25hbWUiOiI2NzIxZDQwNDBmOWY1MWZiODc5MTg4NGUyYTc5YmI1ZjMxNWM1YmUyNDg4YmYwYTA3NjU4YTA4NDI5YWUzMDgxIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvRHJhd2luZ1pvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI0MTkiLCJjaGFyX2VuZCI6IjE0MTIiLCJibG9iX25hbWUiOiI2NzIxZDQwNDBmOWY1MWZiODc5MTg4NGUyYTc5YmI1ZjMxNWM1YmUyNDg4YmYwYTA3NjU4YTA4NDI5YWUzMDgxIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvRHJhd2luZ1pvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI2NjQiLCJibG9iX25hbWUiOiJkZDMwNjZmYmQxYzZlYmVkMWJiZDg3MmQxZjA4ZTU0NDU2OTVmZDYzOGI0OTc4YzIwZDllZWMxZDEzNmIyNjU2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjEzOCIsImJsb2JfbmFtZSI6ImNhNDEzZmZjN2ZkMmYxNzY0ODQ1YWIyZGY1YzZkOTc4YmQ4ODFiZGZlYjM1ZmI2NmNiNTg2OGYxNDU0ZGVmN2QiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L1NoYXBlRmFjdG9yeS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjEzOCIsImNoYXJfZW5kIjoiOTM4IiwiYmxvYl9uYW1lIjoiY2E0MTNmZmM3ZmQyZjE3NjQ4NDVhYjJkZjVjNmQ5NzhiZDg4MWJkZmViMzVmYjY2Y2I1ODY4ZjE0NTRkZWY3ZCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvU2hhcGVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTU0IiwiYmxvYl9uYW1lIjoiNzQxZjk3NGQ2MGI0OTNkYjZkNTNjODVjMzYwODJiYzFkNzYzMTBiZTg1YjgwZDJhMGRjMjAzODQ2YTNkNmJjZiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIyMDUiLCJibG9iX25hbWUiOiI4YWY5MDEyZDZiODI5OWIxZWQzZTM1MzQ5YWE1YTE2NDUwMDA1NWQ2ZjgyYTg1ZGY4MTQyMmQwMTU0MTZlMDdjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL01haW4uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIyMDUiLCJjaGFyX2VuZCI6IjEwMTYiLCJibG9iX25hbWUiOiI4YWY5MDEyZDZiODI5OWIxZWQzZTM1MzQ5YWE1YTE2NDUwMDA1NWQ2ZjgyYTg1ZGY4MTQyMmQwMTU0MTZlMDdjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL01haW4uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIxMTAiLCJibG9iX25hbWUiOiJiOGEyNDUzZjVjOWFhMGVjNjNlMDQ5ZTNkYTkyZDcxNWE5MTk4NWE3NjdlN2NjMjg3ZTQzNGNlMjRiZWFhOTViIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9Db25zb2xlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTEwIiwiY2hhcl9lbmQiOiI5NzQiLCJibG9iX25hbWUiOiJiOGEyNDUzZjVjOWFhMGVjNjNlMDQ5ZTNkYTkyZDcxNWE5MTk4NWE3NjdlN2NjMjg3ZTQzNGNlMjRiZWFhOTViIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9Db25zb2xlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMjcwIiwiYmxvYl9uYW1lIjoiN2EyMjVkNDg2MjQxZmY2YjQzM2UxNzc2MmZiZmE4OGVmYmVmNWE2YWI0OGNkZDVlYTM5N2MzZGNhZjZjNjljYyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjI3MCIsImNoYXJfZW5kIjoiMTE2OSIsImJsb2JfbmFtZSI6IjdhMjI1ZDQ4NjI0MWZmNmI0MzNlMTc3NjJmYmZhODhlZmJlZjVhNmFiNDhjZGQ1ZWEzOTdjM2RjYWY2YzY5Y2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTY5IiwiY2hhcl9lbmQiOiIxMjY0IiwiYmxvYl9uYW1lIjoiN2EyMjVkNDg2MjQxZmY2YjQzM2UxNzc2MmZiZmE4OGVmYmVmNWE2YWI0OGNkZDVlYTM5N2MzZGNhZjZjNjljYyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjM3NyIsImJsb2JfbmFtZSI6ImQwNWVkMTYyMDNiYjBhNmRmY2Y0ZWM3YWVlMGVhNTVmMWMwYmQwZGYxYTkxYzkzMTgxYjM5NGM1M2FhMTU5ZTAiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMzc3IiwiY2hhcl9lbmQiOiIxMzA4IiwiYmxvYl9uYW1lIjoiZDA1ZWQxNjIwM2JiMGE2ZGZjZjRlYzdhZWUwZWE1NWYxYzBiZDBkZjFhOTFjOTMxODFiMzk0YzUzYWExNTllMCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMzA4IiwiY2hhcl9lbmQiOiIxNjA1IiwiYmxvYl9uYW1lIjoiZDA1ZWQxNjIwM2JiMGE2ZGZjZjRlYzdhZWUwZWE1NWYxYzBiZDBkZjFhOTFjOTMxODFiMzk0YzUzYWExNTllMCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI2MTEiLCJibG9iX25hbWUiOiI3ODJjOTdkZDA5ODdmNjE5YjhlZTU1MjNiYWNjYjg0YjE0YjdiMDRjYzJlOGY2MWM3N2E1OTUzOTYzYTJlNGU1IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9Mb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNTMiLCJibG9iX25hbWUiOiI0MDNhMjgxYWQxNDJkMzZlYmExNWE5ZjM4MGE3MGExMmViZmJhZmRjNDZjYzZhNjNiZGE0OWU1M2I2N2E0ZGNiIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIzNTMiLCJjaGFyX2VuZCI6IjExNDYiLCJibG9iX25hbWUiOiI0MDNhMjgxYWQxNDJkMzZlYmExNWE5ZjM4MGE3MGExMmViZmJhZmRjNDZjYzZhNjNiZGE0OWU1M2I2N2E0ZGNiIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTQ2IiwiY2hhcl9lbmQiOiIxMzMzIiwiYmxvYl9uYW1lIjoiNDAzYTI4MWFkMTQyZDM2ZWJhMTVhOWYzODBhNzBhMTJlYmZiYWZkYzQ2Y2M2YTYzYmRhNDllNTNiNjdhNGRjYiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9ab25lL1Rvb2xiYXJab25lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTcwIiwiYmxvYl9uYW1lIjoiMzgwZDc1ODgyYzdmOWRhNTIxZmE4NDNmZjkwZDY2MTllZGE2NWRkYzY2MDQzYTVkOTBhODgwYTc0ZDBkMDBmMyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50RmFjdG9yeVZhbHVlL0ZhY3RvcnlWYWx1ZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjEwNiIsImJsb2JfbmFtZSI6IjA0ZjZiMjEzOTk1OTAxZDQ1ODRkZWVmMGRlM2NmNmEwZWM5ZTFkMTVhODc1ZjViZGY3MzljMmFlZDVjYTFiNjQiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0RhdGFiYXNlQ29ubmVjdGlvbi5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjEwNiIsImNoYXJfZW5kIjoiODk1IiwiYmxvYl9uYW1lIjoiMDRmNmIyMTM5OTU5MDFkNDU4NGRlZWYwZGUzY2Y2YTBlYzllMWQxNWE4NzVmNWJkZjczOWMyYWVkNWNhMWI2NCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VDb25uZWN0aW9uLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiODk1IiwiY2hhcl9lbmQiOiIxMTU5IiwiYmxvYl9uYW1lIjoiMDRmNmIyMTM5OTU5MDFkNDU4NGRlZWYwZGUzY2Y2YTBlYzllMWQxNWE4NzVmNWJkZjczOWMyYWVkNWNhMWI2NCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VDb25uZWN0aW9uLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTg2IiwiYmxvYl9uYW1lIjoiZDQyM2IxN2ZiNmM3MzQxNTM2MjlkNWRjNTQ1MDk0MTNhY2MxNDg0MzhmNzEwYTk4ZGEzYzA2NTUwYzNjZjI4MSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvU2hhcGUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3NjkiLCJibG9iX25hbWUiOiI2YzllM2MwOTQwNDc2N2VkZDRkMThmMTllOWQ4Y2FhMmU4NDJiMTQwYTVlZTk5NDBkZjZiZWUxNmUzMWUxYTFmIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoibG9nX2ZpbGUudHh0In19LHsiY2hhcl9zdGFydCI6Ijc2OSIsImNoYXJfZW5kIjoiMTUzOSIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX0seyJjaGFyX3N0YXJ0IjoiMTUzOSIsImNoYXJfZW5kIjoiMjA0NCIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTY4IiwiYmxvYl9uYW1lIjoiMjYxZTdkN2FlMTcwYTgyOGM4Mjg4NDQ5MzdlNmMyNDlhZmNkZTE0MzM3NTIyNjg2NTI5YWZmMTk3ZDQ1YjYxYyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvTG9nZ2VyU3RyYXRlZ3kuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNDQiLCJibG9iX25hbWUiOiI0N2JhMzE2OGIyZjk4MWFjNDM0ZmE0OWQyNGExMWQyYTM5OGZkN2YxYmFhYWIzZDUxNTBmYTE5NzQ1ZDUzNTQ2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoiLmdpdGlnbm9yZSJ9fV19LHsic3RhdHVzIjoic3VjY2VzcyIsInJlcXVlc3RfaWQiOiJiODY0OWQwZS03MmE5LTRjZDQtODUxNy0wYThhMGRiZjJmZjQiLCJyZXF1ZXN0X21lc3NhZ2UiOiJjaGVjayBpZiB0aGVyZSBpcyBhbm90aGVyIHByb2JsZW0gdG8gZHJhdyBsaW5lIiwicmljaF90ZXh0X2pzb25fcmVwciI6eyJ0eXBlIjoiZG9jIiwiY29udGVudCI6W3sidHlwZSI6InBhcmFncmFwaCIsImNvbnRlbnQiOlt7InR5cGUiOiJ0ZXh0IiwidGV4dCI6ImNoZWNrIGlmIHRoZXJlIGlzIGFub3RoZXIgcHJvYmxlbSB0byBkcmF3IGxpbmUifV19XX0sIm1lbnRpb25lZF9pdGVtcyI6W10sInN0cnVjdHVyZWRfb3V0cHV0X25vZGVzIjpbeyJpZCI6MCwidHlwZSI6MCwiY29udGVudCI6IkxldCdzIGV4YW1pbmUgdGhlIGNvZGUgZm9yIGRyYXdpbmcgbGluZXMuIEJhc2VkIG9uIHRoZSBlcnJvciB5b3UncmUgZXhwZXJpZW5jaW5nLCB0aGVyZSBtaWdodCBiZSBpc3N1ZXMgaW4gdGhlIGBMaW5lU2hhcGVgIGNsYXNzLCBgTGluZUZhY3RvcnlgIGNsYXNzLCBvciBob3cgdGhleSBpbnRlcmFjdCB3aXRoIHRoZSBgRHJhd2luZ1pvbmVgLlxuXG5Mb29raW5nIGF0IHRoZSBjb2RlLCBJIG5vdGljZSBhIHBvdGVudGlhbCBpc3N1ZSB3aXRoIHRoZSBtZXRob2Qgc2lnbmF0dXJlcyBpbiB0aGUgYFNoYXBlYCBpbnRlcmZhY2UgYW5kIGl0cyBpbXBsZW1lbnRhdGlvbnMuIExldCBtZSBmaXggdGhlIGBMaW5lU2hhcGVgIGNsYXNzOlxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvTGluZVNoYXBlLmphdmFcIiBtb2RlPVwiRURJVFwiPlxuYGBgamF2YVxucGFja2FnZSBTaGFwZUZhY3RvcnkuSW1wbGVtZW50U2hhcGU7XG5cbmltcG9ydCBTaGFwZUZhY3RvcnkuU2hhcGVGYWN0b3J5O1xuaW1wb3J0IExvZ2dlci5Mb2dnZXI7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG5cbnB1YmxpYyBjbGFzcyBMaW5lU2hhcGUgaW1wbGVtZW50cyBTaGFwZSB7XG4gICAgQE92ZXJyaWRlXG4gICAgcHVibGljIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlRmFjdG9yeSBzaGFwZUZhY3RvcnkpIHtcbiAgICAgICAgZG91YmxlIHN0YXJ0WCA9IHNoYXBlRmFjdG9yeS5nZXRTdGFydFgoKTtcbiAgICAgICAgZG91YmxlIHN0YXJ0WSA9IHNoYXBlRmFjdG9yeS5nZXRTdGFydFkoKTtcbiAgICAgICAgZG91YmxlIGVuZFggPSBzaGFwZUZhY3RvcnkuZ2V0RW5kWCgpO1xuICAgICAgICBkb3VibGUgZW5kWSA9IHNoYXBlRmFjdG9yeS5nZXRFbmRZKCk7XG4gICAgICAgIGdjLnN0cm9rZUxpbmUoc3RhcnRYLCBzdGFydFksIGVuZFgsIGVuZFkpO1xuICAgICAgICBMb2dnZXIuZ2V0SW5zdGFuY2UoKS5sb2coc2hhcGVGYWN0b3J5LCBcIkRyYXdpbmdcIiwgXCJTdWNjZXNzXCIpO1xuICAgIH1cbn1cbmBgYFxuPC9hdWdtZW50X2NvZGVfc25pcHBldD5cblxuTm93IGxldCdzIGNoZWNrIHRoZSBgTGluZUZhY3RvcnlgIGNsYXNzIHRvIGVuc3VyZSBpdCBjb3JyZWN0bHkgaW1wbGVtZW50cyB0aGUgYGRyYXdgIG1ldGhvZDpcblxuPGF1Z21lbnRfY29kZV9zbmlwcGV0IHBhdGg9XCJzcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmFcIiBtb2RlPVwiRURJVFwiPlxuYGBgamF2YVxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYykge1xuICAgIFNoYXBlIHNoYXBlID0gbmV3IExpbmVTaGFwZSgpO1xuICAgIHNoYXBlLmRyYXcoZ2MsIHRoaXMpO1xufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG5BbHNvLCBsZXQncyBjaGVjayB0aGUgYFNoYXBlYCBpbnRlcmZhY2UgdG8gZW5zdXJlIGl0IGhhcyB0aGUgY29ycmVjdCBtZXRob2Qgc2lnbmF0dXJlOlxuXG48YXVnbWVudF9jb2RlX3NuaXBwZXQgcGF0aD1cInNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvU2hhcGUuamF2YVwiIG1vZGU9XCJFRElUXCI+XG5gYGBqYXZhXG5wYWNrYWdlIFNoYXBlRmFjdG9yeS5JbXBsZW1lbnRTaGFwZTtcblxuaW1wb3J0IFNoYXBlRmFjdG9yeS5TaGFwZUZhY3Rvcnk7XG5pbXBvcnQgamF2YWZ4LnNjZW5lLmNhbnZhcy5HcmFwaGljc0NvbnRleHQ7XG5cbnB1YmxpYyBpbnRlcmZhY2UgU2hhcGUge1xuICAgIHZvaWQgZHJhdyhHcmFwaGljc0NvbnRleHQgZ2MsIFNoYXBlRmFjdG9yeSBzaGFwZUZhY3RvcnkpO1xufVxuYGBgXG48L2F1Z21lbnRfY29kZV9zbmlwcGV0PlxuXG5UaGVzZSBjaGFuZ2VzIHNob3VsZCBlbnN1cmUgdGhhdDpcbjEuIFRoZSBgU2hhcGVgIGludGVyZmFjZSBoYXMgdGhlIGNvcnJlY3QgbWV0aG9kIHNpZ25hdHVyZSB3aXRoIGBHcmFwaGljc0NvbnRleHRgIGFzIGEgcGFyYW1ldGVyXG4yLiBUaGUgYExpbmVTaGFwZWAgaW1wbGVtZW50YXRpb24gY29ycmVjdGx5IHVzZXMgdGhlIGBHcmFwaGljc0NvbnRleHRgIHBhcmFtZXRlclxuMy4gVGhlIGBMaW5lRmFjdG9yeWAgcGFzc2VzIHRoZSBgR3JhcGhpY3NDb250ZXh0YCB0byB0aGUgYExpbmVTaGFwZWAgd2hlbiBkcmF3aW5nXG4ifSx7ImlkIjoyLCJ0eXBlIjoyLCJjb250ZW50IjoiIn0seyJpZCI6MywidHlwZSI6MywiY29udGVudCI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvTGluZVNoYXBlLmphdmE6MC01NzhcbnNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YTowLTMxOFxuc3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhOjMxOC0xMTI0XG5zcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmE6MTEyNC0xMzc0XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjAtNzYyXG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjc2Mi0xNzU2XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlTGluZS5qYXZhOjE3NTYtMjEzMlxuc3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YTowLTEzOFxuc3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YToxMzgtOTM4XG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlQ2VyY2xlLmphdmE6MC03MzVcbnNyYy9NYWluLmphdmE6MC0yMDVcbnNyYy9NYWluLmphdmE6MjA1LTEwMTZcbnNyYy9ab25lL0RyYXdpbmdab25lLmphdmE6MC00MTlcbnNyYy9ab25lL0RyYXdpbmdab25lLmphdmE6NDE5LTE0MTJcbnNyYy9TaGFwZUZhY3RvcnkvQ2lyY2xlRmFjdG9yeS5qYXZhOjAtMTE1XG5zcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YToxMTUtOTYwXG5zcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0NpcmNsZVNoYXBlLmphdmE6MC02NjRcbnNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGUuamF2YTowLTE1NFxuc3JjL0xvZ2dlci9Db25zb2xlTG9nZ2VyLmphdmE6MC0xMTBcbnNyYy9Mb2dnZXIvQ29uc29sZUxvZ2dlci5qYXZhOjExMC05NzRcbnNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvU2hhcGUuamF2YTowLTE4Nlxuc3JjL0xvZ2dlci9Mb2dnZXIuamF2YTowLTYxMVxuc3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRGYWN0b3J5VmFsdWUvRmFjdG9yeVZhbHVlLmphdmE6MC0xNzBcbnNyYy9Mb2dnZXIvRmlsZUxvZ2dlci5qYXZhOjAtMjcwXG5zcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YToyNzAtMTE2OVxuc3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmE6MTE2OS0xMjY0XG5zcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmE6MC0zNzdcbnNyYy9Mb2dnZXIvRGF0YWJhc2VMb2dnZXIuamF2YTozNzctMTMwOFxuc3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhOjEzMDgtMTYwNVxuLmdpdGlnbm9yZTowLTM0NFxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YTowLTEwNlxuc3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YToxMDYtODk1XG5zcmMvTG9nZ2VyL0RhdGFiYXNlQ29ubmVjdGlvbi5qYXZhOjg5NS0xMTU5XG5zcmMvTG9nZ2VyL0xvZ2dlclN0cmF0ZWd5LmphdmE6MC0xNjhcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MC0zNTNcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MzUzLTExNDZcbnNyYy9ab25lL1Rvb2xiYXJab25lLmphdmE6MTE0Ni0xMzMzXG5sb2dfZmlsZS50eHQ6MC03NjlcbmxvZ19maWxlLnR4dDo3NjktMTUzOVxubG9nX2ZpbGUudHh0OjE1MzktMjA0NCJ9XSwic2Vlbl9zdGF0ZSI6InNlZW4iLCJzdHJ1Y3R1cmVkX3JlcXVlc3Rfbm9kZXMiOlt7ImlkIjowLCJ0eXBlIjowLCJ0ZXh0X25vZGUiOnsiY29udGVudCI6ImNoZWNrIGlmIHRoZXJlIGlzIGFub3RoZXIgcHJvYmxlbSB0byBkcmF3IGxpbmUifX0seyJpZCI6MSwidHlwZSI6NCwiaWRlX3N0YXRlX25vZGUiOnsid29ya3NwYWNlRm9sZGVycyI6W3sicmVwb3NpdG9yeVJvb3QiOiJFOi9heW1lbi9JbnRlbGxpSmkvTW9kZWxpc2F0aW9uIiwiZm9sZGVyUm9vdCI6IkU6L2F5bWVuL0ludGVsbGlKaS9Nb2RlbGlzYXRpb24ifV0sIndvcmtzcGFjZUZvbGRlcnNVbmNoYW5nZWQiOmZhbHNlfX1dLCJ0aW1lc3RhbXAiOiIyMDI1LTA1LTMwVDEzOjEzOjQ1LjU1M1oiLCJyZXNwb25zZV90ZXh0IjoiTGV0J3MgZXhhbWluZSB0aGUgY29kZSBmb3IgZHJhd2luZyBsaW5lcy4gQmFzZWQgb24gdGhlIGVycm9yIHlvdSdyZSBleHBlcmllbmNpbmcsIHRoZXJlIG1pZ2h0IGJlIGlzc3VlcyBpbiB0aGUgYExpbmVTaGFwZWAgY2xhc3MsIGBMaW5lRmFjdG9yeWAgY2xhc3MsIG9yIGhvdyB0aGV5IGludGVyYWN0IHdpdGggdGhlIGBEcmF3aW5nWm9uZWAuXG5cbkxvb2tpbmcgYXQgdGhlIGNvZGUsIEkgbm90aWNlIGEgcG90ZW50aWFsIGlzc3VlIHdpdGggdGhlIG1ldGhvZCBzaWduYXR1cmVzIGluIHRoZSBgU2hhcGVgIGludGVyZmFjZSBhbmQgaXRzIGltcGxlbWVudGF0aW9ucy4gTGV0IG1lIGZpeCB0aGUgYExpbmVTaGFwZWAgY2xhc3M6XG5cbmBgYGBqYXZhIHBhdGg9c3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9MaW5lU2hhcGUuamF2YSBtb2RlPUVESVRcbnBhY2thZ2UgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlO1xuXG5pbXBvcnQgU2hhcGVGYWN0b3J5LlNoYXBlRmFjdG9yeTtcbmltcG9ydCBMb2dnZXIuTG9nZ2VyO1xuaW1wb3J0IGphdmFmeC5zY2VuZS5jYW52YXMuR3JhcGhpY3NDb250ZXh0O1xuXG5wdWJsaWMgY2xhc3MgTGluZVNoYXBlIGltcGxlbWVudHMgU2hhcGUge1xuICAgIEBPdmVycmlkZVxuICAgIHB1YmxpYyB2b2lkIGRyYXcoR3JhcGhpY3NDb250ZXh0IGdjLCBTaGFwZUZhY3Rvcnkgc2hhcGVGYWN0b3J5KSB7XG4gICAgICAgIGRvdWJsZSBzdGFydFggPSBzaGFwZUZhY3RvcnkuZ2V0U3RhcnRYKCk7XG4gICAgICAgIGRvdWJsZSBzdGFydFkgPSBzaGFwZUZhY3RvcnkuZ2V0U3RhcnRZKCk7XG4gICAgICAgIGRvdWJsZSBlbmRYID0gc2hhcGVGYWN0b3J5LmdldEVuZFgoKTtcbiAgICAgICAgZG91YmxlIGVuZFkgPSBzaGFwZUZhY3RvcnkuZ2V0RW5kWSgpO1xuICAgICAgICBnYy5zdHJva2VMaW5lKHN0YXJ0WCwgc3RhcnRZLCBlbmRYLCBlbmRZKTtcbiAgICAgICAgTG9nZ2VyLmdldEluc3RhbmNlKCkubG9nKHNoYXBlRmFjdG9yeSwgXCJEcmF3aW5nXCIsIFwiU3VjY2Vzc1wiKTtcbiAgICB9XG59XG5gYGBgXG5cbk5vdyBsZXQncyBjaGVjayB0aGUgYExpbmVGYWN0b3J5YCBjbGFzcyB0byBlbnN1cmUgaXQgY29ycmVjdGx5IGltcGxlbWVudHMgdGhlIGBkcmF3YCBtZXRob2Q6XG5cbmBgYGBqYXZhIHBhdGg9c3JjL1NoYXBlRmFjdG9yeS9MaW5lRmFjdG9yeS5qYXZhIG1vZGU9RURJVFxuQE92ZXJyaWRlXG5wdWJsaWMgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYykge1xuICAgIFNoYXBlIHNoYXBlID0gbmV3IExpbmVTaGFwZSgpO1xuICAgIHNoYXBlLmRyYXcoZ2MsIHRoaXMpO1xufVxuYGBgYFxuXG5BbHNvLCBsZXQncyBjaGVjayB0aGUgYFNoYXBlYCBpbnRlcmZhY2UgdG8gZW5zdXJlIGl0IGhhcyB0aGUgY29ycmVjdCBtZXRob2Qgc2lnbmF0dXJlOlxuXG5gYGBgamF2YSBwYXRoPXNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50U2hhcGUvU2hhcGUuamF2YSBtb2RlPUVESVRcbnBhY2thZ2UgU2hhcGVGYWN0b3J5LkltcGxlbWVudFNoYXBlO1xuXG5pbXBvcnQgU2hhcGVGYWN0b3J5LlNoYXBlRmFjdG9yeTtcbmltcG9ydCBqYXZhZnguc2NlbmUuY2FudmFzLkdyYXBoaWNzQ29udGV4dDtcblxucHVibGljIGludGVyZmFjZSBTaGFwZSB7XG4gICAgdm9pZCBkcmF3KEdyYXBoaWNzQ29udGV4dCBnYywgU2hhcGVGYWN0b3J5IHNoYXBlRmFjdG9yeSk7XG59XG5gYGBgXG5cblRoZXNlIGNoYW5nZXMgc2hvdWxkIGVuc3VyZSB0aGF0OlxuMS4gVGhlIGBTaGFwZWAgaW50ZXJmYWNlIGhhcyB0aGUgY29ycmVjdCBtZXRob2Qgc2lnbmF0dXJlIHdpdGggYEdyYXBoaWNzQ29udGV4dGAgYXMgYSBwYXJhbWV0ZXJcbjIuIFRoZSBgTGluZVNoYXBlYCBpbXBsZW1lbnRhdGlvbiBjb3JyZWN0bHkgdXNlcyB0aGUgYEdyYXBoaWNzQ29udGV4dGAgcGFyYW1ldGVyXG4zLiBUaGUgYExpbmVGYWN0b3J5YCBwYXNzZXMgdGhlIGBHcmFwaGljc0NvbnRleHRgIHRvIHRoZSBgTGluZVNoYXBlYCB3aGVuIGRyYXdpbmdcbiIsIndvcmtzcGFjZV9maWxlX2NodW5rcyI6W3siY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjU3OCIsImJsb2JfbmFtZSI6IjhjYzQxOTU0YzcyNTJiZmY1YzY5ZDRiYjkyMDc1ZWNjZWYyNmM0NTBkYTYyZjhhNWNjMDZmNmQxMDcyYjBjNmEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL0xpbmVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjMxOCIsImJsb2JfbmFtZSI6ImIyYzk0YjhjMTFjY2U2NmQ2YjFkZjhjZTBmNGMxNzkxODJlNWFhN2I1OTExZGViOGFhODIzYzMyMWQxZWRmMDYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0xpbmVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMzE4IiwiY2hhcl9lbmQiOiIxMTI0IiwiYmxvYl9uYW1lIjoiYjJjOTRiOGMxMWNjZTY2ZDZiMWRmOGNlMGY0YzE3OTE4MmU1YWE3YjU5MTFkZWI4YWE4MjNjMzIxZDFlZGYwNiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTI0IiwiY2hhcl9lbmQiOiIxMzc0IiwiYmxvYl9uYW1lIjoiYjJjOTRiOGMxMWNjZTY2ZDZiMWRmOGNlMGY0YzE3OTE4MmU1YWE3YjU5MTFkZWI4YWE4MjNjMzIxZDFlZGYwNiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvTGluZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3NjIiLCJibG9iX25hbWUiOiI1YTczMzEwMjU1NWQ4YzE0MTg2ZWYyMjA4ZmE0Y2NkN2RlYTdmYWMxZmJkZTExZDlhZWM0YWNlYWNjYTgwZjkxIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI3NjIiLCJjaGFyX2VuZCI6IjE3NTYiLCJibG9iX25hbWUiOiI1YTczMzEwMjU1NWQ4YzE0MTg2ZWYyMjA4ZmE0Y2NkN2RlYTdmYWMxZmJkZTExZDlhZWM0YWNlYWNjYTgwZjkxIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUxpbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxNzU2IiwiY2hhcl9lbmQiOiIyMTMyIiwiYmxvYl9uYW1lIjoiNWE3MzMxMDI1NTVkOGMxNDE4NmVmMjIwOGZhNGNjZDdkZWE3ZmFjMWZiZGUxMWQ5YWVjNGFjZWFjY2E4MGY5MSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50VmFsaWRhdGUvVmFsaWRhdGVMaW5lLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTM4IiwiYmxvYl9uYW1lIjoiY2E0MTNmZmM3ZmQyZjE3NjQ4NDVhYjJkZjVjNmQ5NzhiZDg4MWJkZmViMzVmYjY2Y2I1ODY4ZjE0NTRkZWY3ZCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvU2hhcGVGYWN0b3J5LmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTM4IiwiY2hhcl9lbmQiOiI5MzgiLCJibG9iX25hbWUiOiJjYTQxM2ZmYzdmZDJmMTc2NDg0NWFiMmRmNWM2ZDk3OGJkODgxYmRmZWIzNWZiNjZjYjU4NjhmMTQ1NGRlZjdkIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9TaGFwZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3MzUiLCJibG9iX25hbWUiOiIzMDYyYTA5YzMwMGJhNDkyZmExNjM5MzY3NzczMzBlMDkwMjdhYTIxOGVlZDI3ODA1ZWNmMTUxYjkyMmIwZjA3IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRWYWxpZGF0ZS9WYWxpZGF0ZUNlcmNsZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjIwNSIsImJsb2JfbmFtZSI6IjhhZjkwMTJkNmI4Mjk5YjFlZDNlMzUzNDlhYTVhMTY0NTAwMDU1ZDZmODJhODVkZjgxNDIyZDAxNTQxNmUwN2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTWFpbi5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjIwNSIsImNoYXJfZW5kIjoiMTAxNiIsImJsb2JfbmFtZSI6IjhhZjkwMTJkNmI4Mjk5YjFlZDNlMzUzNDlhYTVhMTY0NTAwMDU1ZDZmODJhODVkZjgxNDIyZDAxNTQxNmUwN2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTWFpbi5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjQxOSIsImJsb2JfbmFtZSI6IjY3MjFkNDA0MGY5ZjUxZmI4NzkxODg0ZTJhNzliYjVmMzE1YzViZTI0ODhiZjBhMDc2NThhMDg0MjlhZTMwODEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjQxOSIsImNoYXJfZW5kIjoiMTQxMiIsImJsb2JfbmFtZSI6IjY3MjFkNDA0MGY5ZjUxZmI4NzkxODg0ZTJhNzliYjVmMzE1YzViZTI0ODhiZjBhMDc2NThhMDg0MjlhZTMwODEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9EcmF3aW5nWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjExNSIsImJsb2JfbmFtZSI6IjlmNjljYzUxNWZmMTZjMDAwODA5OTA1NWU5OTVmYjk4YTI5NjVlN2I4Zjc5ZmFlNGU2NDk4NjA5ZDgzYTZhN2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIxMTUiLCJjaGFyX2VuZCI6Ijk2MCIsImJsb2JfbmFtZSI6IjlmNjljYzUxNWZmMTZjMDAwODA5OTA1NWU5OTVmYjk4YTI5NjVlN2I4Zjc5ZmFlNGU2NDk4NjA5ZDgzYTZhN2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0NpcmNsZUZhY3RvcnkuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI2NjQiLCJibG9iX25hbWUiOiJkZDMwNjZmYmQxYzZlYmVkMWJiZDg3MmQxZjA4ZTU0NDU2OTVmZDYzOGI0OTc4YzIwZDllZWMxZDEzNmIyNjU2IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1NoYXBlRmFjdG9yeS9JbXBsZW1lbnRTaGFwZS9DaXJjbGVTaGFwZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjE1NCIsImJsb2JfbmFtZSI6Ijc0MWY5NzRkNjBiNDkzZGI2ZDUzYzg1YzM2MDgyYmMxZDc2MzEwYmU4NWI4MGQyYTBkYzIwMzg0NmEzZDZiY2YiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFZhbGlkYXRlL1ZhbGlkYXRlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTEwIiwiYmxvYl9uYW1lIjoiYjhhMjQ1M2Y1YzlhYTBlYzYzZTA0OWUzZGE5MmQ3MTVhOTE5ODVhNzY3ZTdjYzI4N2U0MzRjZTI0YmVhYTk1YiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvQ29uc29sZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjExMCIsImNoYXJfZW5kIjoiOTc0IiwiYmxvYl9uYW1lIjoiYjhhMjQ1M2Y1YzlhYTBlYzYzZTA0OWUzZGE5MmQ3MTVhOTE5ODVhNzY3ZTdjYzI4N2U0MzRjZTI0YmVhYTk1YiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvQ29uc29sZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjE4NiIsImJsb2JfbmFtZSI6ImQ0MjNiMTdmYjZjNzM0MTUzNjI5ZDVkYzU0NTA5NDEzYWNjMTQ4NDM4ZjcxMGE5OGRhM2MwNjU1MGMzY2YyODEiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvU2hhcGVGYWN0b3J5L0ltcGxlbWVudFNoYXBlL1NoYXBlLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiNjExIiwiYmxvYl9uYW1lIjoiNzgyYzk3ZGQwOTg3ZjYxOWI4ZWU1NTIzYmFjY2I4NGIxNGI3YjA0Y2MyZThmNjFjNzdhNTk1Mzk2M2EyZTRlNSIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTcwIiwiYmxvYl9uYW1lIjoiMzgwZDc1ODgyYzdmOWRhNTIxZmE4NDNmZjkwZDY2MTllZGE2NWRkYzY2MDQzYTVkOTBhODgwYTc0ZDBkMDBmMyIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9TaGFwZUZhY3RvcnkvSW1wbGVtZW50RmFjdG9yeVZhbHVlL0ZhY3RvcnlWYWx1ZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjI3MCIsImJsb2JfbmFtZSI6IjdhMjI1ZDQ4NjI0MWZmNmI0MzNlMTc3NjJmYmZhODhlZmJlZjVhNmFiNDhjZGQ1ZWEzOTdjM2RjYWY2YzY5Y2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIyNzAiLCJjaGFyX2VuZCI6IjExNjkiLCJibG9iX25hbWUiOiI3YTIyNWQ0ODYyNDFmZjZiNDMzZTE3NzYyZmJmYTg4ZWZiZWY1YTZhYjQ4Y2RkNWVhMzk3YzNkY2FmNmM2OWNjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9GaWxlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTE2OSIsImNoYXJfZW5kIjoiMTI2NCIsImJsb2JfbmFtZSI6IjdhMjI1ZDQ4NjI0MWZmNmI0MzNlMTc3NjJmYmZhODhlZmJlZjVhNmFiNDhjZGQ1ZWEzOTdjM2RjYWY2YzY5Y2MiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0ZpbGVMb2dnZXIuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIzNzciLCJibG9iX25hbWUiOiJkMDVlZDE2MjAzYmIwYTZkZmNmNGVjN2FlZTBlYTU1ZjFjMGJkMGRmMWE5MWM5MzE4MWIzOTRjNTNhYTE1OWUwIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUxvZ2dlci5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjM3NyIsImNoYXJfZW5kIjoiMTMwOCIsImJsb2JfbmFtZSI6ImQwNWVkMTYyMDNiYjBhNmRmY2Y0ZWM3YWVlMGVhNTVmMWMwYmQwZGYxYTkxYzkzMTgxYjM5NGM1M2FhMTU5ZTAiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTMwOCIsImNoYXJfZW5kIjoiMTYwNSIsImJsb2JfbmFtZSI6ImQwNWVkMTYyMDNiYjBhNmRmY2Y0ZWM3YWVlMGVhNTVmMWMwYmQwZGYxYTkxYzkzMTgxYjM5NGM1M2FhMTU5ZTAiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvTG9nZ2VyL0RhdGFiYXNlTG9nZ2VyLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMzQ0IiwiYmxvYl9uYW1lIjoiNDdiYTMxNjhiMmY5ODFhYzQzNGZhNDlkMjRhMTFkMmEzOThmZDdmMWJhYWFiM2Q1MTUwZmExOTc0NWQ1MzU0NiIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6Ii5naXRpZ25vcmUifX0seyJjaGFyX3N0YXJ0IjoiMCIsImNoYXJfZW5kIjoiMTA2IiwiYmxvYl9uYW1lIjoiMDRmNmIyMTM5OTU5MDFkNDU4NGRlZWYwZGUzY2Y2YTBlYzllMWQxNWE4NzVmNWJkZjczOWMyYWVkNWNhMWI2NCIsImZpbGUiOnsicmVwb1Jvb3QiOiIiLCJwYXRoTmFtZSI6InNyYy9Mb2dnZXIvRGF0YWJhc2VDb25uZWN0aW9uLmphdmEifX0seyJjaGFyX3N0YXJ0IjoiMTA2IiwiY2hhcl9lbmQiOiI4OTUiLCJibG9iX25hbWUiOiIwNGY2YjIxMzk5NTkwMWQ0NTg0ZGVlZjBkZTNjZjZhMGVjOWUxZDE1YTg3NWY1YmRmNzM5YzJhZWQ1Y2ExYjY0IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiI4OTUiLCJjaGFyX2VuZCI6IjExNTkiLCJibG9iX25hbWUiOiIwNGY2YjIxMzk5NTkwMWQ0NTg0ZGVlZjBkZTNjZjZhMGVjOWUxZDE1YTg3NWY1YmRmNzM5YzJhZWQ1Y2ExYjY0IiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9EYXRhYmFzZUNvbm5lY3Rpb24uamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiIxNjgiLCJibG9iX25hbWUiOiIyNjFlN2Q3YWUxNzBhODI4YzgyODg0NDkzN2U2YzI0OWFmY2RlMTQzMzc1MjI2ODY1MjlhZmYxOTdkNDViNjFjIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL0xvZ2dlci9Mb2dnZXJTdHJhdGVneS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjAiLCJjaGFyX2VuZCI6IjM1MyIsImJsb2JfbmFtZSI6IjQwM2EyODFhZDE0MmQzNmViYTE1YTlmMzgwYTcwYTEyZWJmYmFmZGM0NmNjNmE2M2JkYTQ5ZTUzYjY3YTRkY2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9Ub29sYmFyWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjM1MyIsImNoYXJfZW5kIjoiMTE0NiIsImJsb2JfbmFtZSI6IjQwM2EyODFhZDE0MmQzNmViYTE1YTlmMzgwYTcwYTEyZWJmYmFmZGM0NmNjNmE2M2JkYTQ5ZTUzYjY3YTRkY2IiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJzcmMvWm9uZS9Ub29sYmFyWm9uZS5qYXZhIn19LHsiY2hhcl9zdGFydCI6IjExNDYiLCJjaGFyX2VuZCI6IjEzMzMiLCJibG9iX25hbWUiOiI0MDNhMjgxYWQxNDJkMzZlYmExNWE5ZjM4MGE3MGExMmViZmJhZmRjNDZjYzZhNjNiZGE0OWU1M2I2N2E0ZGNiIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoic3JjL1pvbmUvVG9vbGJhclpvbmUuamF2YSJ9fSx7ImNoYXJfc3RhcnQiOiIwIiwiY2hhcl9lbmQiOiI3NjkiLCJibG9iX25hbWUiOiI2YzllM2MwOTQwNDc2N2VkZDRkMThmMTllOWQ4Y2FhMmU4NDJiMTQwYTVlZTk5NDBkZjZiZWUxNmUzMWUxYTFmIiwiZmlsZSI6eyJyZXBvUm9vdCI6IiIsInBhdGhOYW1lIjoibG9nX2ZpbGUudHh0In19LHsiY2hhcl9zdGFydCI6Ijc2OSIsImNoYXJfZW5kIjoiMTUzOSIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX0seyJjaGFyX3N0YXJ0IjoiMTUzOSIsImNoYXJfZW5kIjoiMjA0NCIsImJsb2JfbmFtZSI6IjZjOWUzYzA5NDA0NzY3ZWRkNGQxOGYxOWU5ZDhjYWEyZTg0MmIxNDBhNWVlOTk0MGRmNmJlZTE2ZTMxZTFhMWYiLCJmaWxlIjp7InJlcG9Sb290IjoiIiwicGF0aE5hbWUiOiJsb2dfZmlsZS50eHQifX1dfV0sImZlZWRiYWNrU3RhdGVzIjp7InRlbXAtZmUtZTk4MDQxMjEtZTQwMC00NWFmLWI4ZWMtZDA1YzNkOGUyMDk3Ijp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifSwidGVtcC1mZS1lNzNlN2E0ZS04NTU0LTQ5MWMtYTdhNS0wNzUxNzg3ZTBjOGEiOnsic2VsZWN0ZWRSYXRpbmciOjAsImZlZWRiYWNrTm90ZSI6IiJ9LCJ0ZW1wLWZlLTE2ZDI5OWU0LTIzMjAtNDY2My05MWQ3LTQ0ODIxMzRhOTkzMCI6eyJzZWxlY3RlZFJhdGluZyI6MCwiZmVlZGJhY2tOb3RlIjoiIn0sInRlbXAtZmUtYjVmYmRlNzctY2ZkNS00NDc1LTk5NWItOWMyZjRiMjcxMzZmIjp7InNlbGVjdGVkUmF0aW5nIjowLCJmZWVkYmFja05vdGUiOiIifX0sInRvb2xVc2VTdGF0ZXMiOnt9LCJkcmFmdEV4Y2hhbmdlIjp7InJlcXVlc3RfbWVzc2FnZSI6IiIsInJpY2hfdGV4dF9qc29uX3JlcHIiOnsidHlwZSI6ImRvYyIsImNvbnRlbnQiOlt7InR5cGUiOiJwYXJhZ3JhcGgifV19LCJzdGF0dXMiOiJkcmFmdCJ9LCJyZXF1ZXN0SWRzIjpbXSwiaXNQaW5uZWQiOmZhbHNlLCJpc1NoYXJlYWJsZSI6dHJ1ZSwiZXh0cmFEYXRhIjp7ImlzQWdlbnRDb252ZXJzYXRpb24iOmZhbHNlLCJoYXNEaXJ0eUVkaXRzIjpmYWxzZX0sInBlcnNvbmFUeXBlIjowLCJyb290VGFza1V1aWQiOiJmMzA1ZjI4YS01NDlhLTRhZWMtYmY3OC04NDUxZjI3Yjc3YTkifX0sImFnZW50RXhlY3V0aW9uTW9kZSI6Im1hbnVhbCIsImlzUGFuZWxDb2xsYXBzZWQiOnRydWUsImRpc3BsYXllZEFubm91bmNlbWVudHMiOltdfQ==" />
      </map>
    </option>
  </component>
</project>